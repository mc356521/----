import{r as a,o as e,e as l,w as t,s,i as o,f as c,h as i,j as u,t as n,l as d,m as r,T as f,u as _,N as m}from"./index-DZtLzZ3A.js";import{u as p}from"./user.BA7q8pkn.js";import{_ as v}from"./_plugin-vue_export-helper.BCo6x5W8.js";const g=v({__name:"edit-bio",setup(v){const g=a({bio:"",realName:"",schoolId:null,major:"",skillTags:[],awardsHistory:[]}),h=a(!0);async function b(){try{d({title:"保存中..."});const a={realName:g.value.realName,schoolId:g.value.schoolId,major:g.value.major,bio:g.value.bio,skillTags:g.value.skillTags||[],awardsHistory:g.value.awardsHistory||[]},e=await p.updateUserProfile(a);200===e.code?(s({title:"保存成功",icon:"success"}),setTimeout((()=>{x()}),1500)):s({title:e.message||"保存失败",icon:"none"})}catch(a){console.error("保存用户资料失败:",a),s({title:"保存失败，请稍后再试",icon:"none"})}finally{r()}}function x(){f()}return e((()=>{!async function(){try{h.value=!0;const a=await p.getUserProfile();200===a.code&&a.data?(g.value=a.data,console.log("获取到用户资料:",g.value)):s({title:a.message||"获取资料失败",icon:"none"})}catch(a){console.error("获取用户资料失败:",a),s({title:"获取个人资料失败",icon:"none"})}finally{h.value=!1}}()})),(a,e)=>{const s=_,d=o,r=m;return c(),l(d,{class:"container"},{default:t((()=>[i(d,{class:"header"},{default:t((()=>[i(d,{class:"back-btn",onClick:x},{default:t((()=>[i(s,{class:"iconfont icon-arrow-left"})])),_:1}),i(s,{class:"header-title"},{default:t((()=>[u("编辑个人简介")])),_:1}),i(d,{class:"save-btn",onClick:b},{default:t((()=>[i(s,null,{default:t((()=>[u("保存")])),_:1})])),_:1})])),_:1}),h.value?(c(),l(d,{key:0,class:"loading-container"},{default:t((()=>[i(d,{class:"loading-circle"}),i(s,{class:"loading-text"},{default:t((()=>[u("加载中...")])),_:1})])),_:1})):(c(),l(d,{key:1,class:"content-scroll"},{default:t((()=>[i(d,{class:"form-section"},{default:t((()=>[i(r,{class:"bio-textarea",modelValue:g.value.bio,"onUpdate:modelValue":e[0]||(e[0]=a=>g.value.bio=a),placeholder:"请输入您的个人简介，介绍自己的专业背景、技术特长、研究方向等（1000字以内）",maxlength:"1000","auto-height":""},null,8,["modelValue"]),i(d,{class:"text-count"},{default:t((()=>[u(n(g.value.bio?g.value.bio.length:0)+"/1000",1)])),_:1})])),_:1}),i(d,{class:"tip-section"},{default:t((()=>[i(s,{class:"tip-title"},{default:t((()=>[u("写一个好的个人简介")])),_:1}),i(d,{class:"tip-list"},{default:t((()=>[i(d,{class:"tip-item"},{default:t((()=>[i(s,{class:"dot"},{default:t((()=>[u("•")])),_:1}),i(s,{class:"tip-text"},{default:t((()=>[u("介绍您的学习背景和专业领域")])),_:1})])),_:1}),i(d,{class:"tip-item"},{default:t((()=>[i(s,{class:"dot"},{default:t((()=>[u("•")])),_:1}),i(s,{class:"tip-text"},{default:t((()=>[u("突出您的核心技能和特长")])),_:1})])),_:1}),i(d,{class:"tip-item"},{default:t((()=>[i(s,{class:"dot"},{default:t((()=>[u("•")])),_:1}),i(s,{class:"tip-text"},{default:t((()=>[u("分享您的研究兴趣或项目经验")])),_:1})])),_:1}),i(d,{class:"tip-item"},{default:t((()=>[i(s,{class:"dot"},{default:t((()=>[u("•")])),_:1}),i(s,{class:"tip-text"},{default:t((()=>[u("提及您期望的团队合作方式")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}))])),_:1})}}},[["__scopeId","data-v-55f2225c"]]);export{g as default};
