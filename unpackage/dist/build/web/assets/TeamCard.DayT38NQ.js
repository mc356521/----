import{c as e,f as a,e as t,w as s,h as l,j as u,t as n,k as r,n as m,Q as c,F as o,G as d,H as i,a3 as f,u as _,i as p,q as v}from"./index-DZtLzZ3A.js";import{_ as y}from"./_plugin-vue_export-helper.BCo6x5W8.js";const b=y({__name:"TeamCard",props:{team:{type:Object,required:!0},index:{type:Number,default:0},showMatch:{type:Boolean,default:!1}},emits:["detail","apply"],setup(y,{emit:b}){const h=y,g=b,x=e((()=>.1*h.index+"s")),k=e((()=>h.team.viewCount&&h.team.viewCount>100)),w=e((()=>"0"===h.team.status||"招募中"===h.team.statusText)),C=e((()=>{const e=h.team.status,a=h.team.statusText;return"0"===e||"招募中"===a?"status-recruiting":"1"===e||"进行中"===a?"status-ongoing":"2"===e||"已完成"===a?"status-completed":"3"===e||"已截止"===a?"status-ended":"status-default"})),M=e((()=>h.team.positions||h.team.roles||[])),j=e((()=>{if(h.team.avatars)return h.team.avatars;if(h.team.teamMemberAvatars){if("string"==typeof h.team.teamMemberAvatars)return h.team.teamMemberAvatars.split(",").filter((e=>e&&!e.includes(".pdf")));if(Array.isArray(h.team.teamMemberAvatars))return h.team.teamMemberAvatars.filter((e=>e&&!e.includes(".pdf")))}return[]})),A=e((()=>"0"===h.team.status||"招募中"===h.team.statusText));function T(e){return R(e)>=q(e)}function R(e){return e.current||e.currentCount||0}function q(e){return e.total||e.requiredCount||0}function S(){g("detail",h.team.id)}function F(){S()}return e((()=>"number"==typeof h.team.teamProgress)),e((()=>null!==h.team.maxMemberCount&&h.team.maxMemberCount>0)),(e,b)=>{const g=_,I=p,N=v;return a(),t(I,{class:"team-item card-hover animate__animated animate__fadeInUp",style:c({"animation-delay":x.value}),onClick:S},{default:s((()=>[l(I,{class:"team-top"},{default:s((()=>[l(I,{class:"flex-between"},{default:s((()=>[l(I,null,{default:s((()=>[l(I,{class:"title-with-icon"},{default:s((()=>[l(g,{class:"team-title"},{default:s((()=>[u(n(y.team.title||y.team.name),1)])),_:1}),k.value?(a(),t(g,{key:0,class:"iconfont icon-spark hot-icon"})):r("",!0),l(I,{class:"view-count"},{default:s((()=>[l(g,{class:"view-text"},{default:s((()=>[u(n(y.team.viewCount),1)])),_:1})])),_:1})])),_:1}),l(I,{class:"tag-row"},{default:s((()=>[l(g,{class:"tag orange-tag"},{default:s((()=>[u(n(y.team.competitionName),1)])),_:1})])),_:1})])),_:1}),l(I,null,{default:s((()=>[l(g,{class:m(["status-tag",[{pulse:w.value},C.value]])},{default:s((()=>[u(n(y.team.statusText),1)])),_:1},8,["class"]),l(I,{class:"date-info"},{default:s((()=>[u("截止: "+n(y.team.deadline||y.team.recruitmentDeadlineFormatted),1)])),_:1})])),_:1})])),_:1})])),_:1}),y.showMatch&&y.team.matchScore?(a(),t(I,{key:0,class:"match-info"},{default:s((()=>[l(I,{class:"match-score"},{default:s((()=>[l(I,{class:"score-bar"},{default:s((()=>[l(I,{class:"score-fill",style:c({width:`${y.team.matchScore}%`})},null,8,["style"])])),_:1}),l(g,{class:"score-text"},{default:s((()=>[u("匹配度 "+n(y.team.matchScore)+"%",1)])),_:1})])),_:1}),y.team.recommendedRole?(a(),t(I,{key:0,class:"recommend-role"},{default:s((()=>[l(g,{class:"role-label"},{default:s((()=>[u("推荐角色: ")])),_:1}),l(g,{class:"role-text"},{default:s((()=>[u(n(y.team.recommendedRole),1)])),_:1})])),_:1})):r("",!0),y.team.matchReason||y.team.recommendReason?(a(),t(I,{key:1,class:"match-reason"},{default:s((()=>[l(g,{class:"reason-label"},{default:s((()=>[u("匹配理由: ")])),_:1}),l(g,{class:"reason-text"},{default:s((()=>[u(n(y.team.recommendReason),1)])),_:1})])),_:1})):r("",!0)])),_:1})):r("",!0),M.value.length>0?(a(),t(I,{key:1,class:"role-tags"},{default:s((()=>[(a(!0),o(i,null,d(M.value,((e,r)=>(a(),t(I,{key:r,class:"role-tag"},{default:s((()=>[l(g,{class:"role-name"},{default:s((()=>[u(n(e.name),1)])),_:2},1024),l(g,{class:m(["role-count",{success:T(e),warning:!T(e)}])},{default:s((()=>[u(n(R(e))+"/"+n(q(e)),1)])),_:2},1032,["class"])])),_:2},1024)))),128))])),_:1})):r("",!0),l(I,{class:"team-desc"},{default:s((()=>[u(n(y.team.description),1)])),_:1}),l(I,{class:"team-bottom"},{default:s((()=>[l(I,{class:"flex-center"},{default:s((()=>[l(I,{class:"team-avatars"},{default:s((()=>[j.value&&j.value.length>0?(a(!0),o(i,{key:0},d(j.value.slice(0,3),((e,s)=>(a(),t(N,{key:s,src:e,class:"team-avatar"},null,8,["src"])))),128)):(a(),t(I,{key:1,class:"empty-avatar"},{default:s((()=>[l(g,{class:"iconfont icon-user"})])),_:1}))])),_:1}),l(g,{class:"member-count"},{default:s((()=>[u(n(h.team.memberCount||h.team.currentMemberCount||0)+"人已加入",1)])),_:1})])),_:1}),A.value?(a(),t(I,{key:0,class:"join-btn blue-join",onClick:f(F,["stop"])},{default:s((()=>[u(" 招募中 ")])),_:1})):(a(),t(I,{key:1,class:"join-btn gray-join"},{default:s((()=>[u(" 已组满 ")])),_:1}))])),_:1})])),_:1},8,["style"])}}},[["__scopeId","data-v-a650d45e"]]);export{b as T};
