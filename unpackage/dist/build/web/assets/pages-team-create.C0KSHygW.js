import{r as e,a as l,c as a,o as t,R as s,B as o,l as c,a2 as n,m as i,E as u,e as r,w as d,_ as f,s as m,i as p,f as _,h,j as v,t as k,F as y,G as g,H as b,k as C,T as V,u as w,M as I,x,I as q,N as j,n as U,a3 as N,q as D}from"./index-DZtLzZ3A.js";import{_ as $}from"./uni-popup.DyDFSo5l.js";import{r as E}from"./uni-app.es.CpsDs8gT.js";import{_ as L}from"./uni-datetime-picker.DYErQZoK.js";import{t as R}from"./team.VNekZ19c.js";import{c as M}from"./competitions.CeqcXiK9.js";import{_ as O}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.DmeKPs4e.js";const T=O({__name:"create",setup(O){const T=e(null),A=e(null),P=e(null),Q=f.baseUrl,B=l({competitionId:"",teamName:"",researchDirection:"",description:"",recruitDeadline:"",email:"",wechat:"",qq:"",teachers:[],roles:[]}),F=e([]),G=e([]),H=e([]),S=e(0),Y=e([]),z=e([]),J=e([]),K=e(0),W=e(null),X=e({}),Z=e([]),ee=e("全部"),le=e(null),ae=e(""),te=e([]);l({});const se=e(""),oe=a((()=>{const e=F.value.find((e=>e.id===B.competitionId));return e?e.title:""}));function ce(e){K.value=e,se.value="",z.value=0===e?[...Y.value]:Y.value.filter((l=>l.major===e))}function ne(){V()}function ie(){T.value.open()}function ue(){T.value.close()}function re(){ue()}function de(){A.value.close(),se.value="",ce(K.value)}function fe(){de()}function me(e){if(!e)return"";const l=new Date(e);return`${l.getFullYear()}-${pe(l.getMonth()+1)}-${pe(l.getDate())} ${pe(l.getHours())}:${pe(l.getMinutes())}`}function pe(e){return e<10?`0${e}`:e}function _e(){B.teachers.push({id:"",name:"",role:""})}function he(){B.roles.push({name:"",count:1,description:"",skills:[]})}function ve(e){m({title:e,icon:"none"})}async function ke(){if(function(){if(!B.competitionId)return ve("请选择关联竞赛"),!1;if(!B.teamName)return ve("请输入团队名称"),!1;if(!B.researchDirection)return ve("请输入研究方向"),!1;if(!B.description)return ve("请输入团队描述"),!1;if(!B.recruitDeadline)return ve("请选择招募截止日期"),!1;if(!B.email)return ve("请输入电子邮箱"),!1;for(let e=0;e<B.teachers.length;e++)if(!B.teachers[e].id)return ve(`请完善指导老师${e+1}的信息`),!1;return 0!==B.roles.length||(ve("请至少添加一个招募角色"),!1)}()){c({title:"提交中..."});try{const e={competitionId:B.competitionId,name:B.teamName,description:B.description,direction:B.researchDirection,recruitmentDeadline:new Date(B.recruitDeadline).toISOString(),contactInfo:{phone:B.phone||"",email:B.email||"",wechat:B.wechat||"",qq:B.qq||""},teacherIds:B.teachers.map((e=>e.id)),teacherRoles:B.teachers.map((e=>e.role)),roles:B.roles.map((e=>({name:e.name,requiredCount:parseInt(e.count)||1,description:e.description,skillRequirements:e.skills||[]})))};console.log("提交数据:",e);const l=await R.createTeam(e);console.log(l),i(),200===l.code?(m({title:"创建成功",icon:"success"}),setTimeout((()=>{V()}),1500)):ve(l.message||"创建失败")}catch(e){console.error("创建团队失败:",e),i(),ve("创建失败，请稍后重试")}}}function ye(e){switch(e){case 1:return"category-programming";case 2:return"category-math";case 3:return"category-electronics";case 4:return"category-robotics";case 5:return"category-innovation";default:return""}}function ge(e){return(null===W.value||B.teachers[W.value].id!==e)&&B.teachers.some((l=>l.id===e&&""!==l.id))}function be(){if(!se.value.trim())return void ce(K.value);const e=se.value.toLowerCase().trim();let l=0===K.value?Y.value:Y.value.filter((e=>e.major===K.value));z.value=l.filter((l=>l.name.toLowerCase().includes(e)))}function Ce(){se.value="",ce(K.value)}function Ve(){P.value.close(),ae.value="",we(ee.value)}function we(e){if(ee.value=e,ae.value="",console.log("筛选分类:",e),console.log("所有技能标签数据:",X.value),"全部"===e){const e=[];Object.entries(X.value).forEach((([l,a])=>{a.forEach((a=>{e.push({...a,category:l})}))})),te.value=e}else{const l=X.value[e]||[];te.value=l.map((l=>({...l,category:e})))}console.log("筛选后的技能标签:",te.value)}function Ie(){Ve()}function xe(e){return B.roles[le.value].skills.includes(e)}function qe(e){if(B.roles[le.value].skills.includes(e))return!1;for(let l=0;l<B.roles.length;l++)if(l!==le.value&&B.roles[l].skills.includes(e))return!0;return!1}function je(){if(console.log("搜索技能:",ae.value),!ae.value.trim())return void we(ee.value);const e=ae.value.toLowerCase().trim();let l=[];if("全部"===ee.value)Object.entries(X.value).forEach((([e,a])=>{a.forEach((a=>{l.push({...a,category:e})}))}));else{const e=X.value[ee.value]||[];l=e.map((e=>({...e,category:ee.value})))}te.value=l.filter((l=>l.tagName.toLowerCase().includes(e)||l.description&&l.description.toLowerCase().includes(e))),console.log("搜索结果:",te.value)}function Ue(){ae.value="",we(ee.value)}function Ne(){if(null===le.value)return 0;const e=B.roles[le.value];return e.skills?e.skills.length:0}return t((async()=>{const e=s(),l=e[e.length-1];if(l.$page&&l.$page.options){const{competitionId:e,competitionName:a}=l.$page.options;if(e&&(console.log("从URL获取到竞赛ID:",e),console.log("从URL获取到竞赛名称:",a),B.competitionId=e,a)){const l=decodeURIComponent(a);console.log("解码后的竞赛名称:",l);const t={id:e,title:l,categoryId:0,categoryName:"未分类"};F.value.push(t),G.value=[...F.value],console.log("已添加临时竞赛对象:",t),console.log("当前竞赛列表:",F.value)}}await async function(){try{c({title:"加载中..."});const e=B.competitionId;let l=null;e&&(l=F.value.find((l=>l.id===e)));const a=await M.getCompetitionsBasicInfo();if(a&&200===a.code&&a.data){const t=a.data.some((l=>l.id===e));F.value=e&&!t&&l?[...a.data,l]:a.data,G.value=[...F.value];const s=new Map;s.set(0,{id:0,name:"全部分类"}),a.data.forEach((e=>{s.has(e.categoryId)||s.set(e.categoryId,{id:e.categoryId,name:e.categoryName})})),H.value=Array.from(s.values()),console.log("API请求结果:",a.data),console.log("处理后的竞赛列表:",F.value),console.log("当前选中竞赛ID:",e)}else ve("获取竞赛列表失败")}catch(e){console.error("获取竞赛列表失败:",e),ve("获取竞赛列表失败")}finally{i()}}(),await async function(){try{c({title:"加载中..."});const e=await n({url:`${Q}/api/teachers/list`,method:"GET"});if(e&&200===e.statusCode&&e.data&&200===e.data.code){Y.value=e.data.data,z.value=[...e.data.data];const l=new Map;l.set(0,{id:0,name:"全部专业"}),e.data.data.forEach((e=>{e.major&&!l.has(e.major)&&l.set(e.major,{id:e.major,name:e.major})})),J.value=Array.from(l.values())}else ve("获取教师列表失败")}catch(e){console.error("获取教师列表失败:",e),ve("获取教师列表失败")}finally{i()}}(),await async function(){try{c({title:"加载中..."});const e=await n({url:`${Q}/api/skill-tags/group-by-category`,method:"GET"});if(e&&200===e.statusCode&&e.data&&200===e.data.code){X.value=e.data.data;const l=["全部",...Object.keys(e.data.data)];Z.value=l;const a=[];Object.entries(e.data.data).forEach((([e,l])=>{l.forEach((l=>{a.push({...l,category:e})}))})),te.value=a,console.log("所有技能标签:",a),console.log("分类:",l)}else ve("获取技能标签失败")}catch(e){console.error("获取技能标签失败:",e),ve("获取技能标签失败")}finally{i()}}(),await o(),console.log("竞赛选择组件:",T.value)})),(e,l)=>{const a=w,t=p,s=I,o=x,c=E(u("uni-popup"),$),n=q,i=j,f=E(u("uni-datetime-picker"),L),V=D;return _(),r(t,{class:"container"},{default:d((()=>[h(t,{class:"sticky-header"},{default:d((()=>[h(t,{class:"nav-bar"},{default:d((()=>[h(t,{class:"back-btn",onClick:ne},{default:d((()=>[h(a,{class:"iconfont icon-arrow-left"})])),_:1}),h(a,{class:"page-title"},{default:d((()=>[v("创建团队")])),_:1}),h(t,{class:"help-btn"},{default:d((()=>[h(a,{class:"iconfont icon-help"})])),_:1})])),_:1})])),_:1}),h(s,{"scroll-y":"",class:"form-content"},{default:d((()=>[h(t,{class:"form-section"},{default:d((()=>[h(t,{class:"section-header"},{default:d((()=>[h(a,{class:"iconfont icon-trophy section-icon"}),h(a,{class:"section-title"},{default:d((()=>[v("基本信息")])),_:1})])),_:1}),h(t,{class:"form-item"},{default:d((()=>[h(a,{class:"form-label"},{default:d((()=>[v("关联竞赛"),h(a,{class:"required"},{default:d((()=>[v("*")])),_:1})])),_:1}),h(t,{class:"select-box",onClick:ie},{default:d((()=>[B.competitionId?(_(),r(a,{key:0,class:"select-text"},{default:d((()=>[v(k(oe.value),1)])),_:1})):(_(),r(a,{key:1,class:"placeholder-text"},{default:d((()=>[v("请选择竞赛")])),_:1})),h(a,{class:"iconfont icon-arrow-left select-arrow"})])),_:1})])),_:1}),h(c,{ref_key:"competitionPopup",ref:T,type:"bottom"},{default:d((()=>[h(t,{class:"popup-container"},{default:d((()=>[h(t,{class:"popup-header"},{default:d((()=>[h(a,{class:"popup-title"},{default:d((()=>[v("选择竞赛")])),_:1}),h(a,{class:"popup-close",onClick:ue},{default:d((()=>[v("关闭")])),_:1})])),_:1}),h(s,{"scroll-x":"true",class:"category-scroll"},{default:d((()=>[h(t,{class:"category-list"},{default:d((()=>[(_(!0),y(b,null,g(H.value,(e=>(_(),r(t,{key:e.id,class:U(["category-tag",{"active-category":S.value===e.id}]),onClick:l=>{return a=e.id,S.value=a,void(G.value=0===a?[...F.value]:F.value.filter((e=>e.categoryId===a)));var a}},{default:d((()=>[h(a,null,{default:d((()=>[v(k(e.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),h(s,{"scroll-y":"true",class:"competitions-list"},{default:d((()=>[(_(!0),y(b,null,g(G.value,(e=>(_(),r(t,{key:e.id,class:U(["competition-item",{"active-competition":B.competitionId===e.id}]),onClick:l=>function(e){B.competitionId=e.id}(e)},{default:d((()=>[h(t,{class:"competition-info"},{default:d((()=>[h(a,{class:"competition-title"},{default:d((()=>[v(k(e.title),1)])),_:2},1024),h(a,{class:U(["competition-category",ye(e.categoryId)])},{default:d((()=>[v(k(e.categoryName),1)])),_:2},1032,["class"])])),_:2},1024),1===e.isHot?(_(),r(a,{key:0,class:"hot-tag"},{default:d((()=>[v("热门")])),_:1})):C("",!0),B.competitionId===e.id?(_(),r(a,{key:1,class:"iconfont icon-check"})):C("",!0)])),_:2},1032,["class","onClick"])))),128)),0===G.value.length?(_(),r(t,{key:0,class:"empty-tip"},{default:d((()=>[h(a,null,{default:d((()=>[v("该分类下暂无竞赛")])),_:1})])),_:1})):C("",!0)])),_:1}),h(t,{class:"popup-footer"},{default:d((()=>[h(o,{class:"confirm-btn",onClick:re},{default:d((()=>[v("确定")])),_:1})])),_:1})])),_:1})])),_:1},512),h(t,{class:"form-item"},{default:d((()=>[h(a,{class:"form-label"},{default:d((()=>[v("团队名称"),h(a,{class:"required"},{default:d((()=>[v("*")])),_:1})])),_:1}),h(n,{type:"text",modelValue:B.teamName,"onUpdate:modelValue":l[0]||(l[0]=e=>B.teamName=e),placeholder:"请输入团队名称",class:"form-input"},null,8,["modelValue"])])),_:1}),h(t,{class:"form-item"},{default:d((()=>[h(a,{class:"form-label"},{default:d((()=>[v("研究方向"),h(a,{class:"required"},{default:d((()=>[v("*")])),_:1})])),_:1}),h(n,{type:"text",modelValue:B.researchDirection,"onUpdate:modelValue":l[1]||(l[1]=e=>B.researchDirection=e),placeholder:"请输入研究方向",class:"form-input"},null,8,["modelValue"])])),_:1}),h(t,{class:"form-item"},{default:d((()=>[h(a,{class:"form-label"},{default:d((()=>[v("团队描述"),h(a,{class:"required"},{default:d((()=>[v("*")])),_:1})])),_:1}),h(i,{modelValue:B.description,"onUpdate:modelValue":l[2]||(l[2]=e=>B.description=e),placeholder:"请简要描述团队情况和目标",class:"form-textarea"},null,8,["modelValue"])])),_:1})])),_:1}),h(t,{class:"form-section"},{default:d((()=>[h(t,{class:"section-header"},{default:d((()=>[h(a,{class:"iconfont icon-calendar section-icon"}),h(a,{class:"section-title"},{default:d((()=>[v("招募信息")])),_:1})])),_:1}),h(t,{class:"form-item"},{default:d((()=>[h(a,{class:"form-label"},{default:d((()=>[v("招募截止日期"),h(a,{class:"required"},{default:d((()=>[v("*")])),_:1})])),_:1}),h(t,{class:"date-picker-box"},{default:d((()=>[h(f,{type:"datetime",modelValue:B.recruitDeadline,"onUpdate:modelValue":l[3]||(l[3]=e=>B.recruitDeadline=e),"clear-icon":!1,"return-type":"timestamp"},{default:d((()=>[h(t,{class:"picker-view"},{default:d((()=>[B.recruitDeadline?(_(),r(a,{key:0,class:"select-text"},{default:d((()=>[v(k(me(B.recruitDeadline)),1)])),_:1})):(_(),r(a,{key:1,class:"placeholder-text"},{default:d((()=>[v("请选择截止日期")])),_:1})),h(a,{class:"iconfont icon-calendar picker-icon"})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),h(t,{class:"form-section"},{default:d((()=>[h(t,{class:"section-header"},{default:d((()=>[h(a,{class:"iconfont icon-phone section-icon"}),h(a,{class:"section-title"},{default:d((()=>[v("联系方式")])),_:1})])),_:1}),h(t,{class:"form-item"},{default:d((()=>[h(a,{class:"form-label"},{default:d((()=>[v("电子邮箱"),h(a,{class:"required"},{default:d((()=>[v("*")])),_:1})])),_:1}),h(n,{type:"text",modelValue:B.email,"onUpdate:modelValue":l[4]||(l[4]=e=>B.email=e),placeholder:"请输入电子邮箱",class:"form-input"},null,8,["modelValue"])])),_:1}),h(t,{class:"form-item"},{default:d((()=>[h(a,{class:"form-label"},{default:d((()=>[v("微信")])),_:1}),h(n,{type:"text",modelValue:B.wechat,"onUpdate:modelValue":l[5]||(l[5]=e=>B.wechat=e),placeholder:"请输入微信号",class:"form-input"},null,8,["modelValue"])])),_:1}),h(t,{class:"form-item"},{default:d((()=>[h(a,{class:"form-label"},{default:d((()=>[v("QQ")])),_:1}),h(n,{type:"text",modelValue:B.qq,"onUpdate:modelValue":l[6]||(l[6]=e=>B.qq=e),placeholder:"请输入QQ号",class:"form-input"},null,8,["modelValue"])])),_:1})])),_:1}),h(t,{class:"form-section"},{default:d((()=>[h(t,{class:"section-header"},{default:d((()=>[h(a,{class:"iconfont icon-graduation section-icon"}),h(a,{class:"section-title"},{default:d((()=>[v("指导老师")])),_:1})])),_:1}),B.teachers.length>0?(_(),r(t,{key:0},{default:d((()=>[(_(!0),y(b,null,g(B.teachers,((e,l)=>(_(),r(t,{key:l,class:"teacher-item"},{default:d((()=>[h(t,{class:"item-header"},{default:d((()=>[h(a,{class:"item-title"},{default:d((()=>[v("指导老师 "+k(l+1),1)])),_:2},1024),h(t,{class:"delete-btn",onClick:e=>function(e){B.teachers.splice(e,1)}(l)},{default:d((()=>[h(a,{class:"iconfont icon-trash"})])),_:2},1032,["onClick"])])),_:2},1024),h(t,{class:"form-item"},{default:d((()=>[h(a,{class:"form-label"},{default:d((()=>[v("选择老师"),h(a,{class:"required"},{default:d((()=>[v("*")])),_:1})])),_:1}),h(t,{class:"select-box",onClick:e=>function(e){A.value.open(),W.value=e}(l)},{default:d((()=>[e.name?(_(),r(a,{key:0,class:"select-text"},{default:d((()=>[v(k(e.name),1)])),_:2},1024)):(_(),r(a,{key:1,class:"placeholder-text"},{default:d((()=>[v("请选择老师")])),_:1})),h(a,{class:"iconfont icon-arrow-left select-arrow"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})):C("",!0),h(t,{class:"add-item-btn",onClick:_e},{default:d((()=>[h(a,{class:"iconfont icon-plus"}),h(a,null,{default:d((()=>[v("添加指导老师")])),_:1})])),_:1})])),_:1}),h(c,{ref_key:"teacherPopup",ref:A,type:"bottom"},{default:d((()=>[h(t,{class:"popup-container"},{default:d((()=>[h(t,{class:"popup-header"},{default:d((()=>[h(a,{class:"popup-title"},{default:d((()=>[v("选择指导老师")])),_:1}),h(a,{class:"popup-close",onClick:de},{default:d((()=>[v("关闭")])),_:1})])),_:1}),h(t,{class:"search-box"},{default:d((()=>[h(t,{class:"search-input-wrapper"},{default:d((()=>[h(a,{class:"iconfont icon-search"}),h(n,{type:"text",modelValue:se.value,"onUpdate:modelValue":l[7]||(l[7]=e=>se.value=e),placeholder:"搜索教师姓名",class:"search-input",onInput:be},null,8,["modelValue"]),se.value?(_(),r(a,{key:0,class:"iconfont icon-times-circle clear-btn",onClick:Ce})):C("",!0)])),_:1})])),_:1}),h(s,{"scroll-x":"true",class:"category-scroll"},{default:d((()=>[h(t,{class:"category-list"},{default:d((()=>[(_(!0),y(b,null,g(J.value,(e=>(_(),r(t,{key:e.id,class:U(["category-tag",{"active-category":K.value===e.id}]),onClick:l=>ce(e.id)},{default:d((()=>[h(a,null,{default:d((()=>[v(k(e.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),h(s,{"scroll-y":"true",class:"competitions-list"},{default:d((()=>[(_(!0),y(b,null,g(z.value,(e=>(_(),r(t,{key:e.id,class:U(["teacher-item-select",{"active-teacher":null!==W.value&&B.teachers[W.value].id===e.id,"disabled-teacher":ge(e.id)}]),onClick:l=>function(e){ge(e.id)?m({title:"该教师已被选择",icon:"none"}):(B.teachers[W.value].id=e.id,B.teachers[W.value].name=e.name)}(e)},{default:d((()=>[h(t,{class:"teacher-info"},{default:d((()=>[h(V,{class:"teacher-avatar",src:e.avatarUrl,mode:"aspectFill"},null,8,["src"]),h(t,{class:"teacher-detail"},{default:d((()=>[h(a,{class:"teacher-name"},{default:d((()=>[v(k(e.name),1)])),_:2},1024),h(a,{class:"teacher-major"},{default:d((()=>[v(k(e.major),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),h(t,{class:"teacher-status"},{default:d((()=>[ge(e.id)?(_(),r(a,{key:0,class:"selected-tag"},{default:d((()=>[v("已选择")])),_:1})):null!==W.value&&B.teachers[W.value].id===e.id?(_(),r(a,{key:1,class:"iconfont icon-check"})):C("",!0)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128)),0===z.value.length?(_(),r(t,{key:0,class:"empty-tip"},{default:d((()=>[h(a,null,{default:d((()=>[v(k(se.value?"没有找到相关教师":"该专业下暂无教师"),1)])),_:1})])),_:1})):C("",!0)])),_:1}),h(t,{class:"popup-footer"},{default:d((()=>[h(o,{class:"confirm-btn",onClick:fe},{default:d((()=>[v("确定")])),_:1})])),_:1})])),_:1})])),_:1},512),h(t,{class:"form-section"},{default:d((()=>[h(t,{class:"section-header"},{default:d((()=>[h(a,{class:"iconfont icon-team section-icon"}),h(a,{class:"section-title"},{default:d((()=>[v("招募角色")])),_:1})])),_:1}),B.roles.length>0?(_(),r(t,{key:0},{default:d((()=>[(_(!0),y(b,null,g(B.roles,((e,l)=>(_(),r(t,{key:l,class:"role-item"},{default:d((()=>[h(t,{class:"item-header"},{default:d((()=>[h(a,{class:"item-title"},{default:d((()=>[v("角色 "+k(l+1),1)])),_:2},1024),h(t,{class:"delete-btn",onClick:e=>function(e){B.roles.splice(e,1)}(l)},{default:d((()=>[h(a,{class:"iconfont icon-trash"})])),_:2},1032,["onClick"])])),_:2},1024),h(t,{class:"form-item"},{default:d((()=>[h(a,{class:"form-label"},{default:d((()=>[v("角色名称"),h(a,{class:"required"},{default:d((()=>[v("*")])),_:1})])),_:1}),h(n,{type:"text",modelValue:e.name,"onUpdate:modelValue":l=>e.name=l,placeholder:"如：算法工程师",class:"form-input"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),h(t,{class:"form-item"},{default:d((()=>[h(a,{class:"form-label"},{default:d((()=>[v("招募人数"),h(a,{class:"required"},{default:d((()=>[v("*")])),_:1})])),_:1}),h(n,{type:"number",modelValue:e.count,"onUpdate:modelValue":l=>e.count=l,placeholder:"请输入招募人数",class:"form-input"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),h(t,{class:"form-item"},{default:d((()=>[h(a,{class:"form-label"},{default:d((()=>[v("角色描述"),h(a,{class:"required"},{default:d((()=>[v("*")])),_:1})])),_:1}),h(i,{modelValue:e.description,"onUpdate:modelValue":l=>e.description=l,placeholder:"请描述该角色的职责",class:"form-textarea"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),h(t,{class:"form-item"},{default:d((()=>[h(a,{class:"form-label"},{default:d((()=>[v("技能要求")])),_:1}),h(t,{class:"skill-tags"},{default:d((()=>[(_(!0),y(b,null,g(e.skills,((e,s)=>(_(),r(t,{key:s,class:"skill-tag"},{default:d((()=>[h(a,null,{default:d((()=>[v(k(e),1)])),_:2},1024),h(a,{class:"iconfont icon-times-circle",onClick:N((e=>function(e,l){B.roles[e].skills.splice(l,1)}(l,s)),["stop"])},null,8,["onClick"])])),_:2},1024)))),128))])),_:2},1024),h(t,{class:"skill-select-btn",onClick:e=>{return a=l,P.value.open(),void(le.value=a);var a}},{default:d((()=>[h(a,{class:"iconfont icon-tag"}),h(a,null,{default:d((()=>[v("选择技能标签")])),_:1}),h(a,{class:"iconfont icon-arrow-right"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})):C("",!0),h(t,{class:"add-item-btn",onClick:he},{default:d((()=>[h(a,{class:"iconfont icon-plus"}),h(a,null,{default:d((()=>[v("添加招募角色")])),_:1})])),_:1})])),_:1})])),_:1}),h(t,{class:"submit-bar"},{default:d((()=>[h(o,{class:"submit-btn",onClick:ke},{default:d((()=>[v("创建团队")])),_:1})])),_:1}),h(c,{ref_key:"skillPopup",ref:P,type:"bottom"},{default:d((()=>[h(t,{class:"popup-container"},{default:d((()=>[h(t,{class:"popup-header"},{default:d((()=>[h(a,{class:"popup-title"},{default:d((()=>[v("选择技能标签")])),_:1}),h(a,{class:"popup-close",onClick:Ve},{default:d((()=>[v("关闭")])),_:1})])),_:1}),h(t,{class:"search-box"},{default:d((()=>[h(t,{class:"search-input-wrapper"},{default:d((()=>[h(a,{class:"iconfont icon-search"}),h(n,{type:"text",modelValue:ae.value,"onUpdate:modelValue":l[8]||(l[8]=e=>ae.value=e),placeholder:"搜索技能标签",class:"search-input",onInput:je},null,8,["modelValue"]),ae.value?(_(),r(a,{key:0,class:"iconfont icon-times-circle clear-btn",onClick:Ue})):C("",!0)])),_:1})])),_:1}),h(s,{"scroll-x":"true",class:"category-scroll"},{default:d((()=>[h(t,{class:"category-list"},{default:d((()=>[(_(!0),y(b,null,g(Z.value,(e=>(_(),r(t,{key:e,class:U(["category-tag",{"active-category":ee.value===e}]),onClick:l=>we(e)},{default:d((()=>[h(a,null,{default:d((()=>[v(k(e),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),h(s,{"scroll-y":"true",class:"competitions-list"},{default:d((()=>[(_(!0),y(b,null,g(te.value,(e=>(_(),r(t,{key:e.id,class:U(["skill-item-select",{"active-skill":xe(e.tagName),"disabled-skill":qe(e.tagName)}]),onClick:l=>function(e){const l=B.roles[le.value];xe(e.tagName)?l.skills=l.skills.filter((l=>l!==e.tagName)):l.skills.push(e.tagName)}(e)},{default:d((()=>[h(t,{class:"skill-info"},{default:d((()=>[h(a,{class:"skill-name"},{default:d((()=>[v(k(e.tagName),1)])),_:2},1024),e.description?(_(),r(a,{key:0,class:"skill-desc"},{default:d((()=>[v(k(e.description),1)])),_:2},1024)):C("",!0)])),_:2},1024),h(t,{class:"skill-check"},{default:d((()=>[h(a,{class:U(["selection-indicator",{selected:xe(e.tagName)}])},{default:d((()=>[v(k(xe(e.tagName)?"已选":"选择"),1)])),_:2},1032,["class"])])),_:2},1024)])),_:2},1032,["class","onClick"])))),128)),0===te.value.length?(_(),r(t,{key:0,class:"empty-tip"},{default:d((()=>[h(a,null,{default:d((()=>[v(k(ae.value?"没有找到相关技能":"该分类下暂无技能标签"),1)])),_:1})])),_:1})):C("",!0)])),_:1}),h(t,{class:"popup-footer"},{default:d((()=>[h(t,{class:"selected-count"},{default:d((()=>[v(" 已选: "),h(a,{class:"count-highlight"},{default:d((()=>[v(k(Ne()),1)])),_:1}),v(" 个技能 ")])),_:1}),h(o,{class:"confirm-btn",onClick:Ie},{default:d((()=>[v("确定")])),_:1})])),_:1})])),_:1})])),_:1},512)])),_:1})}}},[["__scopeId","data-v-a33850dd"]]);export{T as default};
