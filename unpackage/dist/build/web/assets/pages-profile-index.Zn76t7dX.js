import{r as a,o as e,e as s,w as t,i as l,f as o,h as c,j as n,t as i,J as u,s as r,V as f,D as m,d,ag as _,ah as p,b as g,a1 as h,u as w,q as k}from"./index-DZtLzZ3A.js";import{T as v}from"./TabBar.D79MOQrs.js";import{u as b}from"./user.BA7q8pkn.js";import{_ as y}from"./_plugin-vue_export-helper.BCo6x5W8.js";const C=y({__name:"index",setup(y){const C=a({realName:"加载中...",phoneNumber:"",schoolId:null,schoolName:"",role:"",isVerified:!1,creditScore:0,major:"",studentTeacherId:"加载中...",avatarUrl:null,bio:"",skillTags:[],awardsHistory:[]}),x=a(!0);function T(a){"applications"!==a?r({title:`跳转到${a}`,icon:"none"}):u({url:"/pages/application/application"})}function j(){f({title:"退出确认",content:"确定要退出登录吗？",success:function(a){if(a.confirm){m.clearState();try{d("userInteractionState"),d("_DC_STAT_UUID"),d("ai_recommend_cache_time"),d("ai_recommended_teams"),d("ai_summary"),d("token");const a=_().keys;console.log("准备清除所有缓存:",a),a.forEach((a=>{try{d(a),console.log("已清除缓存:",a)}catch(e){console.error("清除缓存失败:",a,e)}})),console.log("所有缓存已清除")}catch(e){console.error("清除缓存出错:",e)}r({title:"已退出登录",icon:"success",success:()=>{setTimeout((()=>{p({url:"/pages/login/login"})}),1500)}})}}})}function I(){u({url:"/pages/profile/user-info"})}function N(a){"home"===a?g({url:"/pages/index/index"}):"competition"===a?g({url:"/pages/competition/index"}):"team"===a&&g({url:"/pages/team/list"})}function S(){h({itemList:["发布竞赛信息","招募队友","发布项目展示"],success:function(a){r({title:`选择了: ${a.tapIndex}`,icon:"none"})}})}return e((()=>{!async function(){try{const a=await b.getUserProfile();200===a.code&&a.data?(C.value=a.data,console.log("个人中心页获取到用户资料:",C.value)):console.error("获取用户资料失败:",a.message)}catch(a){console.error("获取用户资料失败:",a)}finally{x.value=!1}}()})),(a,e)=>{const u=l,r=w,f=k;return o(),s(u,{class:"container"},{default:t((()=>[c(u,{class:"user-info-section"},{default:t((()=>[x.value?(o(),s(u,{key:0,class:"loading-container"},{default:t((()=>[c(u,{class:"loading-circle"}),c(r,{class:"loading-text"},{default:t((()=>[n("加载中...")])),_:1})])),_:1})):(o(),s(u,{key:1},{default:t((()=>[c(u,{class:"user-header"},{default:t((()=>[c(u,{class:"user-info-clickable",onClick:I},{default:t((()=>[c(f,{class:"user-avatar",src:C.value.avatarUrl||"https://images.unsplash.com/photo-1547425260-76bcadfb4f2c?w=200",mode:"aspectFill"},null,8,["src"]),c(u,{class:"user-details"},{default:t((()=>[c(r,{class:"user-name"},{default:t((()=>[n(i(C.value.realName),1)])),_:1}),c(r,{class:"user-id"},{default:t((()=>[n("学号: "+i(C.value.studentTeacherId),1)])),_:1}),c(u,{class:"user-school"},{default:t((()=>[c(r,{class:"school-name"},{default:t((()=>[n(i(C.value.schoolName),1)])),_:1}),c(r,{class:"major-name"},{default:t((()=>[n(i(C.value.major),1)])),_:1})])),_:1})])),_:1})])),_:1}),c(u,{class:"edit-btn",onClick:I},{default:t((()=>[c(r,{class:"iconfont icon-edit"})])),_:1})])),_:1}),c(u,{class:"user-stats"},{default:t((()=>[c(u,{class:"stat-item",onClick:e[0]||(e[0]=a=>T("myCompetitions"))},{default:t((()=>[c(r,{class:"stat-value"},{default:t((()=>[n("4")])),_:1}),c(r,{class:"stat-label"},{default:t((()=>[n("参与竞赛")])),_:1})])),_:1}),c(u,{class:"stat-item",onClick:e[1]||(e[1]=a=>T("myTeams"))},{default:t((()=>[c(r,{class:"stat-value"},{default:t((()=>[n("2")])),_:1}),c(r,{class:"stat-label"},{default:t((()=>[n("我的团队")])),_:1})])),_:1}),c(u,{class:"stat-item",onClick:e[2]||(e[2]=a=>T("myAwards"))},{default:t((()=>[c(r,{class:"stat-value"},{default:t((()=>[n(i(C.value.awardsHistory?C.value.awardsHistory.length:0),1)])),_:1}),c(r,{class:"stat-label"},{default:t((()=>[n("获得奖项")])),_:1})])),_:1}),c(u,{class:"stat-item",onClick:e[3]||(e[3]=a=>T("settings"))},{default:t((()=>[c(r,{class:"stat-value credit-score"},{default:t((()=>[n(i(C.value.creditScore),1)])),_:1}),c(r,{class:"stat-label"},{default:t((()=>[n("信用分")])),_:1})])),_:1})])),_:1})])),_:1}))])),_:1}),c(u,{class:"menu-section"},{default:t((()=>[c(u,{class:"menu-group"},{default:t((()=>[c(u,{class:"menu-item",onClick:e[4]||(e[4]=a=>T("myCompetitions"))},{default:t((()=>[c(r,{class:"iconfont icon-trophy menu-icon"}),c(r,{class:"menu-text"},{default:t((()=>[n("我的竞赛")])),_:1}),c(r,{class:"iconfont icon-arrow-left menu-arrow"})])),_:1}),c(u,{class:"menu-item",onClick:e[5]||(e[5]=a=>T("myTeams"))},{default:t((()=>[c(r,{class:"iconfont icon-users menu-icon"}),c(r,{class:"menu-text"},{default:t((()=>[n("我的团队")])),_:1}),c(r,{class:"iconfont icon-arrow-left menu-arrow"})])),_:1}),c(u,{class:"menu-item",onClick:e[6]||(e[6]=a=>T("myAwards"))},{default:t((()=>[c(r,{class:"iconfont icon-star menu-icon"}),c(r,{class:"menu-text"},{default:t((()=>[n("我的获奖")])),_:1}),c(r,{class:"iconfont icon-arrow-left menu-arrow"})])),_:1}),c(u,{class:"menu-item",onClick:e[7]||(e[7]=a=>T("applications"))},{default:t((()=>[c(r,{class:"iconfont icon-paper-plane menu-icon"}),c(r,{class:"menu-text"},{default:t((()=>[n("申请管理")])),_:1}),c(r,{class:"iconfont icon-arrow-left menu-arrow"})])),_:1})])),_:1}),c(u,{class:"menu-group"},{default:t((()=>[c(u,{class:"menu-item",onClick:e[8]||(e[8]=a=>T("settings"))},{default:t((()=>[c(r,{class:"iconfont icon-settings menu-icon"}),c(r,{class:"menu-text"},{default:t((()=>[n("账号设置")])),_:1}),c(r,{class:"iconfont icon-arrow-left menu-arrow"})])),_:1}),c(u,{class:"menu-item",onClick:e[9]||(e[9]=a=>T("feedback"))},{default:t((()=>[c(r,{class:"iconfont icon-feedback menu-icon"}),c(r,{class:"menu-text"},{default:t((()=>[n("意见反馈")])),_:1}),c(r,{class:"iconfont icon-arrow-left menu-arrow"})])),_:1}),c(u,{class:"menu-item",onClick:e[10]||(e[10]=a=>T("about"))},{default:t((()=>[c(r,{class:"iconfont icon-info-circle menu-icon"}),c(r,{class:"menu-text"},{default:t((()=>[n("关于我们")])),_:1}),c(r,{class:"iconfont icon-arrow-left menu-arrow"})])),_:1})])),_:1})])),_:1}),c(u,{class:"logout-btn",onClick:j},{default:t((()=>[c(r,null,{default:t((()=>[n("退出登录")])),_:1})])),_:1}),c(v,{"active-tab":"profile",onTabChange:N,onPublish:S})])),_:1})}}},[["__scopeId","data-v-62bfd7d6"]]);export{C as default};
