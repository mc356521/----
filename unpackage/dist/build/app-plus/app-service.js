if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((a=>t.resolve(e()).then((()=>a))),(a=>t.resolve(e()).then((()=>{throw a}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e,t,...a){uni.__log__?uni.__log__(e,t,...a):console[e].apply(console,[...a,t])}function a(e,t){return"string"==typeof e?t:e}const o={baseUrl:"http://103.38.83.91:8080",timeout:3e4,uploadUrl:"/api/upload",wsUrl:"wss://api.example.com/ws",debug:!1,version:"1.0.0",env:"production"};o.debug&&(t("log","at utils/request.js:11","当前API环境配置:",o),t("log","at utils/request.js:12","API基础路径:",o.baseUrl),o.actualBaseUrl&&t("log","at utils/request.js:14","实际API地址:",o.actualBaseUrl));const n="auth_token",l=()=>uni.getStorageSync(n)||"",s=e=>{uni.setStorageSync(n,e)},c=e=>{const a={url:e.url.startsWith("http")?e.url:o.baseUrl+e.url,method:e.method||"GET",data:e.data||{},params:e.params||{},header:e.header||{},timeout:e.timeout||o.timeout||6e4};if("GET"===a.method&&Object.keys(a.params).length>0){const e=Object.keys(a.params).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(a.params[e])}`)).join("&");a.url=`${a.url}${a.url.includes("?")?"&":"?"}${e}`}o.debug&&(t("log","at utils/request.js:138",`${a.method} 请求:`,a.url),a.data&&Object.keys(a.data).length>0&&t("log","at utils/request.js:140","请求数据:",a.data));const n=(e=>{const a=l();return a&&(e.header.Authorization=`Bearer ${a}`,o.debug&&t("log","at utils/request.js:49","发送请求头Authorization:",`Bearer ${a}`)),e.header["Content-Type"]||(e.header["Content-Type"]="application/json"),e})(a);return new Promise(((e,a)=>{uni.request({url:n.url,method:n.method,data:n.data,header:n.header,timeout:n.timeout,success:l=>{o.debug&&t("log","at utils/request.js:157","响应数据:",l),l.config=n,(e=>{if(200===e.statusCode)return e.config&&e.config.url&&(e.config.url.includes("/users/login")||e.config.url.includes("/user/login"))&&e.data&&e.data.data?(s(e.data.data),o.debug&&t("log","at utils/request.js:76","已保存token:",e.data.data),Promise.resolve(e.data)):Promise.resolve(e.data);{const t=`请求失败: ${e.statusCode}`;return uni.showToast({title:t,icon:"none"}),401!==e.statusCode&&403!==e.statusCode||(s(""),setTimeout((()=>{uni.navigateTo({url:"/pages/login/login"})}),1500)),Promise.reject(new Error(`HTTP错误: ${e.statusCode}`))}})(l).then((t=>e(t))).catch((e=>a(e)))},fail:e=>{o.debug&&t("error","at utils/request.js:170","请求失败:",e),uni.showToast({title:"网络错误，请检查网络连接",icon:"none"}),a(new Error("网络请求失败"))}})}))},i={login:e=>(t("log","at api/modules/user.js:15","登录请求参数:",e),c({url:"/users/login",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded"},data:{phone:e.phone,password:e.password}}).then((e=>{if(t("log","at api/modules/user.js:27","登录响应:",e),e&&200===e.code&&e.data){const a=e.data;return s(a),t("log","at api/modules/user.js:34","登录成功，已保存token"),{token:a,isLogin:!0}}if(e&&e.message)throw new Error(e.message);return e}))),register:e=>(t("log","at api/modules/user.js:57","注册请求参数:",e),t("log","at api/modules/user.js:58","注册请求URL:","/users/register (将通过代理转发)"),c({url:"/users/register",method:"POST",data:e})),getUserInfo:()=>c({url:"/user/info",method:"GET"}),getUserRole(e){const t=e||l();return t?c({url:`/users/role/parse?token=${encodeURIComponent(t)}`,method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded"}}):Promise.reject(new Error("未登录"))},logout:()=>c({url:"/user/logout",method:"POST"}).finally((()=>{s("")})),updateUserInfo:e=>c({url:"/user/update",method:"PUT",data:e}),changePassword:e=>c({url:"/user/password",method:"PUT",data:e})},r={getTeamList:(e={})=>c({url:"/teams/list",method:"GET",params:e}),getTeamDetail:e=>c({url:`/teams/${e}`,method:"GET"}),getTeamMembers:e=>c({url:`/teams/${e}/members`,method:"GET"}),createTeam:e=>c({url:"/teams",method:"POST",data:e}),applyTeam:e=>c({url:"/team-applications",method:"POST",data:e}),getMyApplications:(e={})=>c({url:"/team-applications/list",method:"GET",params:{...e,role:"applicant"}}),getTeamApplications:(e={})=>c({url:"/team-applications/list",method:"GET",params:{...e,role:"leader"}}),handleApplication:(e,t)=>c({url:`/team-applications/${e}`,method:"PUT",data:t}),cancelApplication:e=>c({url:`/team-applications/${e}`,method:"DELETE"}),checkTeamStatus:e=>c({url:`/teams/${e}/has-applied`,method:"GET"}),disbandTeam:e=>c({url:`/teams/${e}/dissolve`,method:"POST"}),leaveTeam:e=>c({url:`/team-members/teams/${e}`,method:"DELETE"}),getMyTeams:()=>c({url:"/teams/my",method:"GET"})},m={getCompetitionsList:(e={})=>c({url:"/competitions/list",method:"GET",params:e}),getCompetitionDetail(e){const t=l();return t?c({url:`/competitions/${e}`,method:"GET",header:{Authorization:`Bearer ${t}`}}):(uni.showToast({title:"请先登录",icon:"none"}),setTimeout((()=>{uni.navigateTo({url:"/pages/login/login"})}),1500),Promise.reject(new Error("未登录")))},createCompetition(e){const a=l();return a?(t("log","at api/modules/competitions.js:99","准备创建竞赛，数据:",e),c({url:"/competitions",method:"POST",data:e,header:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}}).then((e=>(t("log","at api/modules/competitions.js:110","创建竞赛响应:",e),e))).catch((e=>{throw t("error","at api/modules/competitions.js:113","创建竞赛出错:",e),e}))):(uni.showToast({title:"请先登录",icon:"none"}),setTimeout((()=>{uni.navigateTo({url:"/pages/login/login"})}),1500),Promise.reject(new Error("未登录")))},getCompetitionCategories:()=>c({url:"/competitions/categories",method:"GET"})},d={user:i,team:r,competitions:m},u={__name:"login",setup(a){const o=e.ref(!1),n=e.ref(!0),l=e.ref(!1),s=e.reactive({phone:"",password:""}),c=e.reactive({phone:"",password:"",realName:"",schoolId:1,role:"student",major:"",studentTeacherId:""});function i(){l.value=!l.value}function r(){o.value=!o.value}function m(){n.value=!n.value}async function u(){if(s.phone&&s.password){uni.showLoading({title:"正在登录...",mask:!0});try{t("log","at pages/login/login.vue:178","正在连接登录服务器...");const e=await d.user.login({phone:s.phone,password:s.password});uni.hideLoading(),t("log","at pages/login/login.vue:187","登录响应:",e),uni.showToast({title:"登录成功",icon:"success"}),setTimeout((()=>{uni.switchTab({url:"/pages/index/index"})}),1500)}catch(e){t("error","at pages/login/login.vue:201","登录失败:",e),uni.hideLoading(),uni.showToast({title:e.message||"登录失败，请检查网络连接或服务器配置",icon:"none",duration:3e3})}}else uni.showToast({title:"请输入手机号和密码",icon:"none"})}async function p(){if(c.phone)if(c.password)if(c.realName)if(c.major)if(c.studentTeacherId)try{await d.user.register(c);uni.showToast({title:"注册成功",icon:"success"}),l.value=!1}catch(e){uni.showToast({title:e.message||"注册失败",icon:"none"})}else uni.showToast({title:"请输入学号",icon:"none"});else uni.showToast({title:"请输入专业",icon:"none"});else uni.showToast({title:"请输入姓名",icon:"none"});else uni.showToast({title:"请输入密码",icon:"none"});else uni.showToast({title:"请输入手机号",icon:"none"})}function f(){uni.showToast({title:"忘记密码功能开发中",icon:"none"})}function g(e){uni.showToast({title:`${e}登录功能开发中`,icon:"none"})}function h(){uni.showToast({title:"服务条款",icon:"none"})}function v(){uni.showToast({title:"隐私政策",icon:"none"})}return(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"content-area"},[e.createElementVNode("view",{class:"top-image"},[e.createElementVNode("image",{src:"https://images.unsplash.com/photo-1523050854058-8df90110c9f1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80",mode:"aspectFill",class:"campus-image"})]),e.createElementVNode("view",{class:"welcome-text"},[e.createElementVNode("text",{class:"welcome-title"},e.toDisplayString(l.value?"注册账号":"欢迎回来"),1),e.createElementVNode("text",{class:"welcome-subtitle"},e.toDisplayString(l.value?"创建您的校园平台账号":"登录您的校园平台账号，开启校园新体验"),1)]),l.value?(e.openBlock(),e.createElementBlock("view",{key:1,class:"login-form"},[e.createElementVNode("view",{class:"input-field"},[e.createElementVNode("view",{class:"input-content"},[e.createElementVNode("text",{class:"iconfont icon-mobile"}),e.withDirectives(e.createElementVNode("input",{type:"text",placeholder:"手机号",class:"form-input","onUpdate:modelValue":a[2]||(a[2]=e=>c.phone=e)},null,512),[[e.vModelText,c.phone]])])]),e.createElementVNode("view",{class:"input-field"},[e.createElementVNode("view",{class:"input-content"},[e.createElementVNode("text",{class:"iconfont icon-lock"}),e.withDirectives(e.createElementVNode("input",{type:"text",placeholder:"密码",class:"form-input","onUpdate:modelValue":a[3]||(a[3]=e=>c.password=e),password:n.value},null,8,["password"]),[[e.vModelText,c.password]]),e.createElementVNode("text",{class:e.normalizeClass(["iconfont",n.value?"icon-eye-slash":"icon-eye"]),onClick:m},null,2)])]),e.createElementVNode("view",{class:"input-field"},[e.createElementVNode("view",{class:"input-content"},[e.createElementVNode("text",{class:"iconfont icon-user"}),e.withDirectives(e.createElementVNode("input",{type:"text",placeholder:"真实姓名",class:"form-input","onUpdate:modelValue":a[4]||(a[4]=e=>c.realName=e)},null,512),[[e.vModelText,c.realName]])])]),e.createElementVNode("view",{class:"input-field"},[e.createElementVNode("view",{class:"input-content"},[e.createElementVNode("text",{class:"iconfont icon-graduation"}),e.withDirectives(e.createElementVNode("input",{type:"text",placeholder:"专业",class:"form-input","onUpdate:modelValue":a[5]||(a[5]=e=>c.major=e)},null,512),[[e.vModelText,c.major]])])]),e.createElementVNode("view",{class:"input-field"},[e.createElementVNode("view",{class:"input-content"},[e.createElementVNode("text",{class:"iconfont icon-idcard"}),e.withDirectives(e.createElementVNode("input",{type:"text",placeholder:"学号",class:"form-input","onUpdate:modelValue":a[6]||(a[6]=e=>c.studentTeacherId=e)},null,512),[[e.vModelText,c.studentTeacherId]])])]),e.createElementVNode("button",{class:"login-btn",onClick:p,"hover-class":"btn-hover"},"注册"),e.createElementVNode("button",{class:"register-btn",onClick:i,"hover-class":"register-btn-hover"},"返回登录")])):(e.openBlock(),e.createElementBlock("view",{key:0,class:"login-form"},[e.createElementVNode("view",{class:"input-field"},[e.createElementVNode("view",{class:"input-content"},[e.createElementVNode("text",{class:"iconfont icon-user"}),e.withDirectives(e.createElementVNode("input",{type:"text",placeholder:"学号/手机号",class:"form-input","onUpdate:modelValue":a[0]||(a[0]=e=>s.phone=e)},null,512),[[e.vModelText,s.phone]])])]),e.createElementVNode("view",{class:"input-field"},[e.createElementVNode("view",{class:"input-content"},[e.createElementVNode("text",{class:"iconfont icon-user"}),e.withDirectives(e.createElementVNode("input",{type:"text",placeholder:"密码",class:"form-input","onUpdate:modelValue":a[1]||(a[1]=e=>s.password=e),password:n.value},null,8,["password"]),[[e.vModelText,s.password]]),e.createElementVNode("text",{class:e.normalizeClass(["iconfont",n.value?"icon-eye-slash":"icon-eye"]),onClick:m},null,2)])]),e.createElementVNode("view",{class:"remember-row"},[e.createElementVNode("view",{class:"remember-me"},[e.createElementVNode("checkbox",{value:"1",checked:o.value,onClick:r,class:"remember-checkbox",color:"#4A90E2"},null,8,["checked"]),e.createElementVNode("text",{class:"remember-text"},"记住我")]),e.createElementVNode("text",{class:"forgot-password",onClick:f},"忘记密码?")]),e.createElementVNode("button",{class:"login-btn",onClick:u,"hover-class":"btn-hover"},"登录"),e.createElementVNode("button",{class:"register-btn",onClick:i,"hover-class":"register-btn-hover"},"注册新账号")])),l.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:2,class:"other-login"},[e.createElementVNode("view",{class:"divider"},[e.createElementVNode("view",{class:"divider-line"}),e.createElementVNode("text",{class:"divider-text"},"其他登录方式"),e.createElementVNode("view",{class:"divider-line"})]),e.createElementVNode("view",{class:"social-buttons"},[e.createElementVNode("view",{class:"social-btn",onClick:a[7]||(a[7]=e=>g("wechat")),"hover-class":"social-btn-hover"},[e.createElementVNode("text",{class:"iconfont icon-weixin"})]),e.createElementVNode("view",{class:"social-btn",onClick:a[8]||(a[8]=e=>g("qq")),"hover-class":"social-btn-hover"},[e.createElementVNode("text",{class:"iconfont icon-qq"})]),e.createElementVNode("view",{class:"social-btn",onClick:a[9]||(a[9]=e=>g("phone")),"hover-class":"social-btn-hover"},[e.createElementVNode("text",{class:"iconfont icon-mobile"})])])])),e.createElementVNode("view",{class:"footer-text"},[e.createElementVNode("text",{class:"agreement-text"},e.toDisplayString(l.value?"注册即表示您同意我们的":"登录即表示您同意我们的"),1),e.createElementVNode("text",{class:"link-text",onClick:h},"服务条款"),e.createElementVNode("text",{class:"agreement-text"},"和"),e.createElementVNode("text",{class:"link-text",onClick:v},"隐私政策")])])]))}},p=(e,t)=>{const a=e.__vccOpts||e;for(const[o,n]of t)a[o]=n;return a},f=p({__name:"TeamCard",props:{team:{type:Object,required:!0},index:{type:Number,default:0}},emits:["detail","apply"],setup(t,{emit:a}){const o=t,n=a,l=e.computed((()=>.1*o.index+"s")),s=e.computed((()=>o.team.viewCount&&o.team.viewCount>100)),c=e.computed((()=>"0"===o.team.status||"招募中"===o.team.statusText)),i=e.computed((()=>o.team.positions||o.team.roles||[])),r=e.computed((()=>{if(o.team.avatars)return o.team.avatars;if(o.team.teamMemberAvatars){if("string"==typeof o.team.teamMemberAvatars)return o.team.teamMemberAvatars.split(",").filter((e=>e&&!e.includes(".pdf")));if(Array.isArray(o.team.teamMemberAvatars))return o.team.teamMemberAvatars.filter((e=>e&&!e.includes(".pdf")))}return[]})),m=e.computed((()=>"0"===o.team.status||"招募中"===o.team.statusText));function d(e){return u(e)>=p(e)}function u(e){return e.current||e.currentCount||0}function p(e){return e.total||e.requiredCount||0}function f(){n("detail",o.team.id)}function g(){n("apply",o.team.id)}return e.computed((()=>"number"==typeof o.team.teamProgress)),e.computed((()=>null!==o.team.maxMemberCount&&o.team.maxMemberCount>0)),(a,n)=>(e.openBlock(),e.createElementBlock("view",{class:"team-item card-hover animate__animated animate__fadeInUp",style:e.normalizeStyle({"animation-delay":l.value}),onClick:f},[e.createElementVNode("view",{class:"team-top"},[e.createElementVNode("view",{class:"flex-between"},[e.createElementVNode("view",null,[e.createElementVNode("view",{class:"title-with-icon"},[e.createElementVNode("text",{class:"team-title"},e.toDisplayString(t.team.title||t.team.name),1),s.value?(e.openBlock(),e.createElementBlock("text",{key:0,class:"iconfont icon-spark hot-icon"})):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"view-count"},[e.createElementVNode("text",{class:"view-text"},e.toDisplayString(t.team.viewCount),1)])]),e.createElementVNode("view",{class:"tag-row"},[e.createElementVNode("text",{class:"tag orange-tag"},e.toDisplayString(t.team.competitionName),1)])]),e.createElementVNode("view",null,[e.createElementVNode("text",{class:e.normalizeClass(["status-tag",{pulse:c.value}])},e.toDisplayString(t.team.statusText),3),e.createElementVNode("view",{class:"date-info"},"截止: "+e.toDisplayString(t.team.deadline||t.team.recruitmentDeadlineFormatted),1)])])]),i.value.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"role-tags"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:"role-tag"},[e.createElementVNode("text",{class:"role-name"},e.toDisplayString(t.name),1),e.createElementVNode("text",{class:e.normalizeClass(["role-count",{success:d(t),warning:!d(t)}])},e.toDisplayString(u(t))+"/"+e.toDisplayString(p(t)),3)])))),128))])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"team-desc"},e.toDisplayString(t.team.description),1),e.createElementVNode("view",{class:"team-bottom"},[e.createElementVNode("view",{class:"flex-center"},[e.createElementVNode("view",{class:"team-avatars"},[r.value&&r.value.length>0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(r.value.slice(0,3),((t,a)=>(e.openBlock(),e.createElementBlock("image",{key:a,src:t,class:"team-avatar"},null,8,["src"])))),128)):(e.openBlock(),e.createElementBlock("view",{key:1,class:"empty-avatar"},[e.createElementVNode("text",{class:"iconfont icon-user"})]))]),e.createElementVNode("text",{class:"member-count"},e.toDisplayString(o.team.memberCount||o.team.currentMemberCount||0)+"人已加入",1)]),m.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"join-btn blue-join",onClick:e.withModifiers(g,["stop"])}," 申请加入 ")):(e.openBlock(),e.createElementBlock("view",{key:1,class:"join-btn gray-join"}," 已组满 "))])],4))}},[["__scopeId","data-v-4098bfbd"]]),g=p({__name:"TabBar",props:{activeTab:{type:String,default:"home",validator:e=>["home","competition","team","profile"].includes(e)}},emits:["tab-change","publish"],setup(a,{emit:o}){const n=a,l=e.ref("");e.onMounted((()=>{uni.getStorageSync("token")&&async function(){try{const e=await i.getUserRole();200===e.code&&e.data&&(l.value=e.data,t("log","at components/TabBar.vue:69","当前用户角色:",l.value))}catch(e){t("error","at components/TabBar.vue:72","获取用户角色失败:",e)}}()}));const s=e.computed((()=>"team"===n.activeTab)),c=o;function r(e){if(e!==n.activeTab){const a={home:"/pages/index/index",competition:"/pages/competition/index",team:"/pages/team/list",profile:"/pages/profile/index"};uni.switchTab({url:a[e],fail:a=>{t("error","at components/TabBar.vue:105","切换Tab失败:",a),c("tab-change",e)}})}}function m(){const e=uni.getStorageSync("token");e?(t("log","at components/TabBar.vue:133","当前token:",e),l.value?(t("log","at components/TabBar.vue:155","使用缓存角色信息:",l.value),d()):(t("log","at components/TabBar.vue:137","开始获取用户角色..."),i.getUserRole(e).then((e=>{t("log","at components/TabBar.vue:139","获取角色成功, 完整响应:",e),200===e.code&&e.data?(l.value=e.data,t("log","at components/TabBar.vue:142","设置当前用户角色:",l.value),d()):(t("warn","at components/TabBar.vue:145","获取角色返回异常:",e),d())})).catch((e=>{t("error","at components/TabBar.vue:149","获取用户角色失败:",e),t("error","at components/TabBar.vue:150","错误详情:",JSON.stringify(e)),d()})))):uni.showModal({title:"提示",content:"请先登录后再操作",confirmText:"去登录",success:function(e){e.confirm&&uni.navigateTo({url:"/pages/login/login"})}})}function d(){const e=["创建队伍","发布任务"];"admin"===l.value&&e.unshift("创建竞赛"),uni.showActionSheet({itemList:e,success:function(e){const t=e.tapIndex;1===t?uni.navigateTo({url:"/pages/team/create"}):2===t?uni.navigateTo({url:"/pages/team/create?mode=recruit"}):0===t&&"admin"===l.value&&uni.navigateTo({url:"/pages/competition/create"})}})}return(t,o)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["tab-bar",{"dark-mode":s.value}])},[e.createElementVNode("view",{class:e.normalizeClass(["tab-item",{active:"home"===a.activeTab}]),onClick:o[0]||(o[0]=e=>r("home"))},[e.createElementVNode("text",{class:"iconfont icon-home"}),e.createElementVNode("text",{class:"tab-text"},"首页"),"home"===a.activeTab?(e.openBlock(),e.createElementBlock("view",{key:0,class:"active-indicator"})):e.createCommentVNode("",!0)],2),e.createElementVNode("view",{class:e.normalizeClass(["tab-item",{active:"competition"===a.activeTab}]),onClick:o[1]||(o[1]=e=>r("competition"))},[e.createElementVNode("text",{class:"iconfont icon-trophy"}),e.createElementVNode("text",{class:"tab-text"},"竞赛"),"competition"===a.activeTab?(e.openBlock(),e.createElementBlock("view",{key:0,class:"active-indicator"})):e.createCommentVNode("",!0)],2),e.createElementVNode("view",{class:"publish-btn-container"},[e.createElementVNode("view",{class:"publish-btn pulse",onClick:m},[e.createElementVNode("text",{class:"iconfont icon-plus"})]),e.createElementVNode("text",{class:"publish-text"},"发布")]),e.createElementVNode("view",{class:e.normalizeClass(["tab-item",{active:"team"===a.activeTab}]),onClick:o[2]||(o[2]=e=>r("team"))},[e.createElementVNode("text",{class:"iconfont icon-users"}),e.createElementVNode("text",{class:"tab-text"},"队伍"),"team"===a.activeTab?(e.openBlock(),e.createElementBlock("view",{key:0,class:"active-indicator"})):e.createCommentVNode("",!0)],2),e.createElementVNode("view",{class:e.normalizeClass(["tab-item",{active:"profile"===a.activeTab}]),onClick:o[3]||(o[3]=e=>r("profile"))},[e.createElementVNode("text",{class:"iconfont icon-user"}),e.createElementVNode("text",{class:"tab-text"},"我的"),"profile"===a.activeTab?(e.openBlock(),e.createElementBlock("view",{key:0,class:"active-indicator"})):e.createCommentVNode("",!0)],2)],2))}},[["__scopeId","data-v-a5a14720"]]),h={__name:"index",setup(a){const o=e.ref([]),n=e.ref([]);function l(e){"competition"===e?uni.navigateTo({url:"/pages/competition/index"}):uni.showToast({title:`导航到${e}页面`,icon:"none"})}function s(e){"competition"===e?uni.navigateTo({url:"/pages/competition/index"}):uni.showToast({title:`查看所有${e}`,icon:"none"})}function c(e,t){"competition"===e?uni.navigateTo({url:`/pages/competition/detail?id=${t}`}):uni.navigateTo({url:`/pages/team/detail?id=${t}`})}function i(e){uni.showModal({title:"申请确认",content:"确定要申请加入该团队吗？",success:function(e){e.confirm&&uni.showToast({title:"申请已发送",icon:"success"})}})}function d(){uni.navigateTo({url:"/pages/search/index"})}return e.onMounted((()=>{t("log","at pages/index/index.vue:270","状态栏高度:",uni.getSystemInfoSync().statusBarHeight),async function(){try{const e=await r.getTeamList();200===e.code&&e.data&&e.data.list&&(o.value=e.data.list.slice(0,10),t("log","at pages/index/index.vue:196","获取到队伍列表数据:",o.value))}catch(e){t("error","at pages/index/index.vue:199","获取队伍数据失败:",e)}}(),async function(){try{const e=await m.getCompetitionsList();200===e.code&&e.data&&e.data.list&&(n.value=e.data.list.slice(0,3),t("log","at pages/index/index.vue:183","获取到热门竞赛数据:",n.value))}catch(e){t("error","at pages/index/index.vue:186","获取竞赛数据失败:",e)}}()})),(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"custom-nav-bar"},[e.createElementVNode("view",{class:"title-section"},[e.createElementVNode("text",{class:"page-title"},"校园任务与组队平台")]),e.createElementVNode("view",{class:"search-section",onClick:d},[e.createElementVNode("view",{class:"search-box"},[e.createElementVNode("text",{class:"iconfont icon-search"}),e.createElementVNode("text",{class:"search-placeholder"},"搜索竞赛/队伍")])])]),e.createElementVNode("scroll-view",{"scroll-y":"",class:"content-scroll"},[e.createElementVNode("view",{class:"content-section"},[e.createElementVNode("text",{class:"section-title"},"安全区域自动适配示例"),e.createElementVNode("text",{class:"section-desc"},"此页面已经适配了状态栏高度，不会撞到手机顶部")]),e.createElementVNode("view",{class:"swiper-container"},[e.createElementVNode("swiper",{class:"swiper animate__animated animate__fadeIn",circular:"",autoplay:"",interval:"3000",duration:"500","indicator-dots":"","indicator-active-color":"#3B82F6","indicator-color":"rgba(0, 0, 0, 0.2)"},[e.createElementVNode("swiper-item",null,[e.createElementVNode("view",{class:"swiper-item"},[e.createElementVNode("image",{src:"https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?w=800",mode:"aspectFill"}),e.createElementVNode("view",{class:"swiper-overlay"},[e.createElementVNode("text",{class:"swiper-title"},"互联网+创新创业大赛"),e.createElementVNode("view",{class:"swiper-date"},[e.createElementVNode("text",{class:"iconfont icon-calendar date-icon"}),e.createElementVNode("text",{class:"date-text"},"报名截止：5月15日")])])])]),e.createElementVNode("swiper-item",null,[e.createElementVNode("view",{class:"swiper-item"},[e.createElementVNode("image",{src:"https://images.unsplash.com/photo-1523240795612-9a054b0db644?w=800",mode:"aspectFill"}),e.createElementVNode("view",{class:"swiper-overlay"},[e.createElementVNode("text",{class:"swiper-title"},"挑战杯创业计划大赛"),e.createElementVNode("view",{class:"swiper-date"},[e.createElementVNode("text",{class:"iconfont icon-calendar date-icon"}),e.createElementVNode("text",{class:"date-text"},"报名截止：6月10日")])])])]),e.createElementVNode("swiper-item",null,[e.createElementVNode("view",{class:"swiper-item"},[e.createElementVNode("image",{src:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=800",mode:"aspectFill"}),e.createElementVNode("view",{class:"swiper-overlay"},[e.createElementVNode("text",{class:"swiper-title"},"创青春创业大赛"),e.createElementVNode("view",{class:"swiper-date"},[e.createElementVNode("text",{class:"iconfont icon-calendar date-icon"}),e.createElementVNode("text",{class:"date-text"},"报名截止：7月5日")])])])])])]),e.createElementVNode("view",{class:"menu-container"},[e.createElementVNode("view",{class:"menu-grid"},[e.createElementVNode("view",{class:"menu-item animate__animated animate__fadeInUp",style:{"animation-delay":"0.1s"},onClick:a[0]||(a[0]=e=>l("competition"))},[e.createElementVNode("view",{class:"menu-icon blue"},[e.createElementVNode("text",{class:"iconfont icon-trophy"})]),e.createElementVNode("text",{class:"menu-text"},"竞赛活动")]),e.createElementVNode("view",{class:"menu-item animate__animated animate__fadeInUp",style:{"animation-delay":"0.2s"},onClick:a[1]||(a[1]=e=>l("findPartner"))},[e.createElementVNode("view",{class:"menu-icon green"},[e.createElementVNode("text",{class:"iconfont icon-users"})]),e.createElementVNode("text",{class:"menu-text"},"寻找队友")]),e.createElementVNode("view",{class:"menu-item animate__animated animate__fadeInUp",style:{"animation-delay":"0.3s"},onClick:a[2]||(a[2]=e=>l("project"))},[e.createElementVNode("view",{class:"menu-icon purple"},[e.createElementVNode("text",{class:"iconfont icon-project"})]),e.createElementVNode("text",{class:"menu-text"},"项目展示")]),e.createElementVNode("view",{class:"menu-item animate__animated animate__fadeInUp",style:{"animation-delay":"0.4s"},onClick:a[3]||(a[3]=e=>l("schedule"))},[e.createElementVNode("view",{class:"menu-icon orange"},[e.createElementVNode("text",{class:"iconfont icon-calendar"})]),e.createElementVNode("text",{class:"menu-text"},"日程安排")])])]),e.createElementVNode("view",{class:"section"},[e.createElementVNode("view",{class:"section-header"},[e.createElementVNode("text",{class:"section-title animate__animated animate__fadeInLeft"},"热门竞赛"),e.createElementVNode("text",{class:"view-all animate__animated animate__fadeInRight",onClick:a[4]||(a[4]=e=>s("competition"))},"查看全部")]),e.createElementVNode("view",{class:"competition-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,(t=>(e.openBlock(),e.createElementBlock("view",{class:"competition-item card-hover animate__animated animate__fadeInUp",style:{"animation-delay":"0.1s"},onClick:a[5]||(a[5]=e=>c("competition",2)),key:t.id},[e.createElementVNode("view",{class:"competition-flex"},[e.createElementVNode("view",{class:"competition-image-container"},[e.createElementVNode("image",{class:"competition-image",src:"https://images.unsplash.com/photo-1523240795612-9a054b0db644?w=800",mode:"aspectFill"})]),e.createElementVNode("view",{class:"competition-content"},[e.createElementVNode("view",{class:"flex-between"},[e.createElementVNode("text",{class:"competition-title"},e.toDisplayString(t.title),1),e.createElementVNode("text",{class:"status-tag pulse"},e.toDisplayString(t.status),1)]),e.createElementVNode("view",{class:"tag-row"},[e.createElementVNode("text",{class:"tag green-tag"},e.toDisplayString(t.category),1),e.createElementVNode("text",{class:"tag gray-tag"},e.toDisplayString(t.level),1)]),e.createElementVNode("view",{class:"competition-info"},[e.createElementVNode("view",{class:"info-item"},[e.createElementVNode("text",{class:"iconfont icon-clock"}),e.createElementVNode("text",{class:"info-text"},"报名截止: "+e.toDisplayString(t.registrationDeadlineFormatted),1)]),e.createElementVNode("view",{class:"info-item"},[e.createElementVNode("text",{class:"iconfont icon-team"}),e.createElementVNode("text",{class:"info-text"},"3-6人/队")])])])])])))),128))])]),e.createElementVNode("view",{class:"section"},[e.createElementVNode("view",{class:"section-header"},[e.createElementVNode("text",{class:"section-title animate__animated animate__fadeInLeft"},"热门队伍"),e.createElementVNode("text",{class:"view-all animate__animated animate__fadeInRight",onClick:a[6]||(a[6]=e=>s("team"))},"查看全部")]),e.createElementVNode("view",{class:"team-list"},[o.value.length>0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(o.value,((t,o)=>(e.openBlock(),e.createBlock(f,{key:t.id,team:t,index:o,onDetail:a[7]||(a[7]=e=>c("team",e)),onApply:i},null,8,["team","index"])))),128)):(e.openBlock(),e.createElementBlock("view",{key:1,class:"empty-state"},[e.createElementVNode("text",{class:"empty-text"},"加载中...")]))])])]),e.createVNode(g,{activeTab:"home"})]))}};const v=p({data:()=>({defaultAvatar:"/static/images/default-avatar.png",teamId:null,teamInfo:{},teamMembers:[],showPhone:!1,isLoading:!0,userInfo:null,hasApplied:!1,isTeamMember:!1,isTeamLeader:!1,applyLoading:!1}),computed:{hasAvailableRoles(){return!!this.teamInfo.roles&&this.teamInfo.roles.some((e=>e.currentCount<e.requiredCount))}},onLoad(e){t("log","at pages/team/detail.vue:223","队伍详情页面参数:",e),e&&e.id?(this.teamId=e.id,this.getUserInfo(),this.getTeamDetail()):(uni.showToast({title:"队伍ID不能为空",icon:"none"}),setTimeout((()=>{uni.navigateBack()}),1500))},onShow(){this.getUserInfo(),this.teamId&&this.checkTeamStatus()},methods:{getUserInfo(){const e=uni.getStorageSync("userInfo");e&&(this.userInfo="string"==typeof e?JSON.parse(e):e)},async checkTeamStatus(){if(this.userInfo&&this.userInfo.userId)try{const e=await r.checkTeamStatus(this.teamId);200===e.code&&(this.hasApplied=!0===e.data)}catch(e){t("error","at pages/team/detail.vue:266","检查团队状态失败",e)}},getStatusClass(e){switch(e){case"0":default:return"status-recruiting";case"1":return"status-filled";case"2":return"status-disbanded"}},getStatusIcon(e){switch(e){case"0":default:return"icon-check-circle";case"1":return"icon-hourglass";case"2":return"icon-times-circle"}},hidePhone:e=>e?e.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"):"",togglePhone(){this.showPhone=!this.showPhone},copyText(e){uni.setClipboardData({data:e,success:()=>{uni.showToast({title:"复制成功",icon:"success"})}})},goBack(){uni.navigateBack()},goToCompetition(e){e&&uni.navigateTo({url:`/pages/competition/detail?id=${e}`})},async applyRole(e){this.hasApplied?uni.showToast({title:"您已申请或已加入该团队",icon:"none"}):uni.showModal({title:"申请加入",content:"请输入您的申请理由",editable:!0,placeholderText:"我希望加入团队参与...",success:async a=>{if(a.confirm){const n=a.content||"希望能加入团队，与大家一起学习成长。";this.applyLoading=!0;try{const t={teamId:this.teamId,roleId:e,message:n},a=await r.applyTeam(t);200===a.code?(uni.showToast({title:"申请已提交",icon:"success"}),this.hasApplied=!0):uni.showToast({title:a.message||"申请提交失败",icon:"none"})}catch(o){t("error","at pages/team/detail.vue:363","申请失败",o),uni.showToast({title:"网络异常，请稍后重试",icon:"none"})}finally{this.applyLoading=!1}}}})},showApplyOptions(){if(this.userInfo&&this.userInfo.userId)if(this.hasApplied)uni.showToast({title:"您已申请或已加入该团队",icon:"none"});else if(this.teamInfo.roles&&this.teamInfo.roles.length>0){const e=this.teamInfo.roles.filter((e=>e.currentCount<e.requiredCount));if(e.length>1){const t=e.map((e=>`${e.name}（${e.currentCount}/${e.requiredCount}）`));uni.showActionSheet({itemList:t,success:t=>{this.applyRole(e[t.tapIndex].id)}})}else 1===e.length?this.applyRole(e[0].id):uni.showToast({title:"当前没有可申请的角色",icon:"none"})}else uni.showToast({title:"当前没有可申请的角色",icon:"none"});else uni.showModal({title:"提示",content:"请先登录后再申请加入团队",confirmText:"去登录",success:e=>{e.confirm&&uni.navigateTo({url:"/pages/login/login"})}})},editTeam(){uni.navigateTo({url:`/pages/team/edit?id=${this.teamId}`})},async disbandTeam(){uni.showModal({title:"解散队伍",content:"确定要解散该队伍吗？此操作不可撤销",confirmColor:"#f56c6c",success:async e=>{if(e.confirm)try{const e=await r.disbandTeam(this.teamId);200===e.code?(uni.showToast({title:"队伍已解散",icon:"success"}),setTimeout((()=>{uni.navigateBack()}),1500)):uni.showToast({title:e.message||"解散队伍失败",icon:"none"})}catch(a){t("error","at pages/team/detail.vue:462","解散队伍失败",a),uni.showToast({title:"网络异常，请稍后重试",icon:"none"})}}})},async leaveTeam(){uni.showModal({title:"退出队伍",content:"确定要退出该队伍吗？",confirmColor:"#f56c6c",success:async e=>{if(e.confirm)try{const e=await r.leaveTeam(this.teamId);200===e.code?(uni.showToast({title:"已退出队伍",icon:"success"}),setTimeout((()=>{uni.navigateBack()}),1500)):uni.showToast({title:e.message||"退出失败",icon:"none"})}catch(a){t("error","at pages/team/detail.vue:497","退出队伍失败",a),uni.showToast({title:"网络异常，请稍后重试",icon:"none"})}}})},async getTeamMembers(){try{const e=await r.getTeamMembers(this.teamId);if(e&&200===e.code&&e.data){if(this.teamMembers=e.data,this.userInfo&&this.userInfo.userId){const e=this.userInfo.userId,t=this.teamMembers.some((t=>t.userId===e)),a=t&&this.teamMembers.some((t=>t.userId===e&&t.isLeader));this.isTeamMember=t,this.isTeamLeader=a}t("log","at pages/team/detail.vue:525","获取到队伍成员:",this.teamMembers)}else t("log","at pages/team/detail.vue:527","获取队伍成员失败:",null==e?void 0:e.message)}catch(e){t("error","at pages/team/detail.vue:530","获取队伍成员出错",e)}},async getTeamDetail(){this.isLoading=!0;try{const e=await r.getTeamDetail(this.teamId);e&&200===e.code&&e.data?(this.teamInfo=e.data,t("log","at pages/team/detail.vue:541","获取到队伍详情:",this.teamInfo),this.userInfo&&this.userInfo.userId&&this.teamInfo.leaderId===this.userInfo.userId&&(this.isTeamLeader=!0,this.isTeamMember=!0),this.getTeamMembers(),this.checkTeamStatus()):(uni.showToast({title:(null==e?void 0:e.message)||"获取队伍详情失败",icon:"none"}),t("log","at pages/team/detail.vue:559","获取队伍详情失败:",e))}catch(e){t("error","at pages/team/detail.vue:562","获取队伍详情出错",e),uni.showToast({title:"网络异常，请稍后重试",icon:"none"})}finally{this.isLoading=!1}}}},[["render",function(t,a,o,n,l,s){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"top-bar"},[e.createElementVNode("view",{class:"flex-between px-4 py-3"},[e.createElementVNode("view",{class:"back-btn",onClick:a[0]||(a[0]=(...e)=>s.goBack&&s.goBack(...e))},[e.createElementVNode("text",{class:"iconfont icon-arrow-left"})]),e.createElementVNode("text",{class:"page-title"},e.toDisplayString(l.teamInfo.name||"队伍详情"),1),e.createElementVNode("view",{class:"header-actions"},[e.createElementVNode("text",{class:"iconfont icon-star mr-3"}),e.createElementVNode("text",{class:"iconfont icon-share"})])])]),e.createElementVNode("view",{class:"info-card"},[e.createElementVNode("view",{class:"flex-between mb-3"},[e.createElementVNode("view",{class:"competition-link",onClick:a[1]||(a[1]=e=>s.goToCompetition(l.teamInfo.competitionId))},[e.createElementVNode("text",{class:"iconfont icon-trophy mr-1 blue-text"}),e.createElementVNode("view",{class:"blue-text"},"关联竞赛："+e.toDisplayString(l.teamInfo.competitionName),1)])]),e.createElementVNode("view",{class:"leader-info"},[e.createElementVNode("image",{class:"leader-avatar",src:l.teamInfo.leaderAvatarUrl||l.defaultAvatar},null,8,["src"]),e.createElementVNode("view",{class:"leader-detail"},[e.createElementVNode("text",{class:"leader-name"},"队长："+e.toDisplayString(l.teamInfo.leaderName),1),e.createElementVNode("text",{class:"leader-major"},e.toDisplayString(l.teamInfo.leaderMajor||"未设置专业"),1)]),e.createElementVNode("view",{class:e.normalizeClass(["status-tag",s.getStatusClass(l.teamInfo.status)])},[e.createElementVNode("text",null,e.toDisplayString(l.teamInfo.statusText),1)],2)]),e.createElementVNode("view",{class:"team-desc-section"},[e.createElementVNode("text",{class:"section-title"},"队伍描述"),e.createElementVNode("text",{class:"desc-text"},e.toDisplayString(l.teamInfo.description),1)]),e.createElementVNode("view",{class:"team-meta"},[e.createElementVNode("text",{class:"meta-item"},"组队截止："+e.toDisplayString(l.teamInfo.recruitmentDeadlineFormatted),1),e.createElementVNode("view",{class:"view-count"},[e.createElementVNode("text",{class:"iconfont icon-eye"}),e.createElementVNode("text",null,"浏览次数："+e.toDisplayString(l.teamInfo.viewCount),1)])])]),e.createElementVNode("view",{class:"section-card"},[e.createElementVNode("text",{class:"section-header"},"招募角色"),e.createElementVNode("view",{class:"role-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.teamInfo.roles,(t=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["role-card",{"role-filled":t.currentCount>=t.requiredCount}]),key:t.id},[e.createElementVNode("view",{class:"flex-between mb-2"},[e.createElementVNode("view",null,[e.createElementVNode("text",{class:"role-title"},e.toDisplayString(t.name),1),e.createElementVNode("text",{class:"role-count"},"需求："+e.toDisplayString(t.requiredCount)+"人 / 已招募："+e.toDisplayString(t.currentCount)+"人",1)]),e.createElementVNode("view",{class:e.normalizeClass(["role-status-tag",t.currentCount>=t.requiredCount?"filled-tag":"recruiting-tag"])},e.toDisplayString(t.currentCount>=t.requiredCount?"已满员":"招募中"),3)]),e.createElementVNode("text",{class:"role-desc"},e.toDisplayString(t.description),1),e.createElementVNode("view",{class:"skill-section"},[e.createElementVNode("text",{class:"skill-header"},"技能要求:"),e.createElementVNode("view",{class:"skill-tags"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.skillRequirements,((t,a)=>(e.openBlock(),e.createElementBlock("text",{class:"skill-tag",key:a},e.toDisplayString(t),1)))),128))])]),e.createElementVNode("button",{class:e.normalizeClass(["apply-btn",t.currentCount>=t.requiredCount?"disabled-btn":"active-btn"]),disabled:t.currentCount>=t.requiredCount,onClick:e=>s.applyRole(t.id)},[t.currentCount<t.requiredCount?(e.openBlock(),e.createElementBlock("text",{key:0,class:"iconfont icon-paper-plane"})):e.createCommentVNode("",!0),e.createTextVNode(" 申请加入 ")],10,["disabled","onClick"])],2)))),128))])]),l.teamMembers.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"info-card"},[e.createElementVNode("text",{class:"section-header"},"队伍成员 ("+e.toDisplayString(l.teamMembers.length)+")",1),e.createElementVNode("view",{class:"member-grid"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.teamMembers,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"member-item",key:a},[e.createElementVNode("image",{class:e.normalizeClass(["member-avatar",{"leader-border2":t.isLeader}]),src:t.userAvatarUrl||l.defaultAvatar},null,10,["src"]),e.createElementVNode("text",{class:"member-name"},[e.createTextVNode(e.toDisplayString(t.userName)+" ",1),t.roleName?(e.openBlock(),e.createElementBlock("view",{key:0,class:"member-role"},"("+e.toDisplayString(t.roleName)+")",1)):e.createCommentVNode("",!0),t.isLeader?(e.openBlock(),e.createElementBlock("view",{key:1,class:"leader-label"},"(队长)")):e.createCommentVNode("",!0)])])))),128))])])):e.createCommentVNode("",!0),l.teamInfo.teachers&&l.teamInfo.teachers.length>0?(e.openBlock(),e.createElementBlock("view",{key:1,class:"info-card"},[e.createElementVNode("text",{class:"section-header"},"指导老师"),e.createElementVNode("view",{class:"member-grid"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.teamInfo.teachers,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"member-item",key:a},[e.createElementVNode("image",{class:"member-avatar",src:t.avatarUrl||l.defaultAvatar},null,8,["src"]),e.createElementVNode("text",{class:"member-name"},e.toDisplayString(t.name),1)])))),128))])])):e.createCommentVNode("",!0),l.teamInfo.contactInfo?(e.openBlock(),e.createElementBlock("view",{key:2,class:"info-card"},[e.createElementVNode("text",{class:"section-header"},"联系方式"),e.createElementVNode("view",{class:"contact-list"},[l.teamInfo.contactInfo.wechat?(e.openBlock(),e.createElementBlock("view",{key:0,class:"contact-item"},[e.createElementVNode("text",{class:"iconfont icon-weixin contact-icon wechat-color"}),e.createElementVNode("text",{class:"contact-text"},"微信："+e.toDisplayString(l.teamInfo.contactInfo.wechat),1),e.createElementVNode("text",{class:"copy-btn",onClick:a[2]||(a[2]=e=>s.copyText(l.teamInfo.contactInfo.wechat))},"复制")])):e.createCommentVNode("",!0),l.teamInfo.contactInfo.phone?(e.openBlock(),e.createElementBlock("view",{key:1,class:"contact-item"},[e.createElementVNode("text",{class:"iconfont icon-phone contact-icon phone-color"}),e.createElementVNode("text",{class:"contact-text"},"电话："+e.toDisplayString(l.showPhone?l.teamInfo.contactInfo.phone:s.hidePhone(l.teamInfo.contactInfo.phone)),1),e.createElementVNode("text",{class:"copy-btn",onClick:a[3]||(a[3]=(...e)=>s.togglePhone&&s.togglePhone(...e))},e.toDisplayString(l.showPhone?"隐藏":"查看"),1)])):e.createCommentVNode("",!0),l.teamInfo.contactInfo.qq?(e.openBlock(),e.createElementBlock("view",{key:2,class:"contact-item"},[e.createElementVNode("text",{class:"iconfont icon-qq contact-icon qq-color"}),e.createElementVNode("text",{class:"contact-text"},"QQ群："+e.toDisplayString(l.teamInfo.contactInfo.qq),1),e.createElementVNode("text",{class:"copy-btn",onClick:a[4]||(a[4]=e=>s.copyText(l.teamInfo.contactInfo.qq))},"复制")])):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"footer-bar"},[!l.isTeamMember&&"0"===l.teamInfo.status&&s.hasAvailableRoles?(e.openBlock(),e.createElementBlock("button",{key:0,class:"full-btn primary-btn",onClick:a[5]||(a[5]=(...e)=>s.showApplyOptions&&s.showApplyOptions(...e))},[e.createElementVNode("text",{class:"iconfont icon-user-plus"}),e.createTextVNode(" 申请加入队伍 ")])):e.createCommentVNode("",!0),l.isTeamMember||"1"!==l.teamInfo.status&&"2"!==l.teamInfo.status?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("button",{key:1,class:"full-btn disabled-btn",disabled:""},e.toDisplayString("1"===l.teamInfo.status?"队伍已满员":"队伍已解散"),1)),l.isTeamLeader?(e.openBlock(),e.createElementBlock("view",{key:2,class:"btn-group"},[e.createElementVNode("button",{class:"half-btn primary-btn",onClick:a[6]||(a[6]=(...e)=>s.editTeam&&s.editTeam(...e))},[e.createElementVNode("text",{class:"iconfont icon-edit"}),e.createTextVNode(" 编辑队伍 ")]),e.createElementVNode("button",{class:"half-btn danger-btn",onClick:a[7]||(a[7]=(...e)=>s.disbandTeam&&s.disbandTeam(...e))},[e.createElementVNode("text",{class:"iconfont icon-trash"}),e.createTextVNode(" 解散队伍 ")])])):e.createCommentVNode("",!0),l.isTeamMember&&!l.isTeamLeader?(e.openBlock(),e.createElementBlock("button",{key:3,class:"full-btn danger-btn",onClick:a[8]||(a[8]=(...e)=>s.leaveTeam&&s.leaveTeam(...e))},[e.createElementVNode("text",{class:"iconfont icon-signout"}),e.createTextVNode(" 退出队伍 ")])):e.createCommentVNode("",!0)])])}]]),E={__name:"list",setup(a){const o=e.ref(["全部","学科竞赛","创新创业","体育竞赛","文艺比赛"]),n=e.ref(0),l=e.reactive({pageNum:1,pageSize:10,total:0,pages:0,list:[],hasPrevious:!1,hasNext:!1}),s=e.ref(!1),c=e.ref(!1),i=e.ref(!1),m=e.ref(!1),d=e.reactive({pageNum:1,pageSize:10,keyword:"",orderByViewCount:!1});async function u(e=!1){if(uni.getStorageSync("token")){e?(d.pageNum=1,c.value=!0):s.value=!0;try{const a={};Object.keys(d).forEach((e=>{null!==d[e]&&void 0!==d[e]&&""!==d[e]&&(a[e]=d[e])})),t("log","at pages/team/list.vue:141","请求参数:",a);const o=await r.getTeamList(a);t("log","at pages/team/list.vue:143","响应结果:",o),200===o.code&&o.data?(l.list=e?o.data.list||[]:[...l.list,...o.data.list||[]],l.pageNum=o.data.pageNum,l.pageSize=o.data.pageSize,l.total=o.data.total,l.pages=o.data.pages,l.hasPrevious=o.data.hasPrevious,l.hasNext=o.data.hasNext,m.value=!o.data.hasNext):uni.showToast({title:(null==o?void 0:o.message)||"获取团队列表失败",icon:"none"})}catch(a){t("error","at pages/team/list.vue:168","获取团队列表出错",a),401===a.statusCode||403===a.statusCode?uni.showModal({title:"登录已过期",content:"请重新登录后查看",confirmText:"去登录",success:function(e){e.confirm&&(uni.removeStorageSync("token"),uni.navigateTo({url:"/pages/login/login"}))}}):uni.showToast({title:"网络异常，请稍后重试",icon:"none"})}finally{s.value=!1,c.value=!1,i.value=!1}}else uni.showModal({title:"提示",content:"请先登录后查看团队列表",confirmText:"去登录",success:function(e){e.confirm&&uni.navigateTo({url:"/pages/login/login"})}})}function p(){i.value||m.value||(l.hasNext?(i.value=!0,d.pageNum+=1,u()):m.value=!0)}function h(e){uni.navigateTo({url:`/pages/team/detail?id=${e}`})}function v(e){uni.getStorageSync("token")?r.checkTeamStatus(e).then((t=>{200===t.code&&(!0===t.data?uni.showToast({title:"您已申请或已加入该团队",icon:"none"}):uni.navigateTo({url:`/pages/team/detail?id=${e}`}))})).catch((a=>{t("error","at pages/team/list.vue:289","检查团队状态失败",a),uni.navigateTo({url:`/pages/team/detail?id=${e}`})})):uni.showModal({title:"提示",content:"请先登录后再申请加入团队",confirmText:"去登录",success:function(e){e.confirm&&uni.navigateTo({url:"/pages/login/login"})}})}function E(e){"home"===e?uni.switchTab({url:"/pages/index/index"}):"competition"===e?uni.switchTab({url:"/pages/competition/index"}):"profile"===e&&uni.switchTab({url:"/pages/profile/index"})}function w(){uni.showActionSheet({itemList:["创建新团队","招募队友","发布项目展示"],success:function(e){0===e.tapIndex?uni.navigateTo({url:"/pages/team/create"}):uni.showToast({title:`选择了: ${e.tapIndex}`,icon:"none"})}})}return e.onMounted((()=>{t("log","at pages/team/list.vue:242","组队列表页面加载"),u()})),(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"sticky-header"},[e.createElementVNode("view",{class:"header-title"},[e.createElementVNode("text",{class:"section-title"},"组队广场"),e.createElementVNode("view",{class:"header-actions"},[e.createElementVNode("text",{class:"iconfont icon-search"}),e.createElementVNode("text",{class:"iconfont icon-filter"})])]),e.createElementVNode("scroll-view",{"scroll-x":"true",class:"category-scroll"},[e.createElementVNode("view",{class:"category-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:e.normalizeClass(["category-item",n.value===a?"active-category":""]),onClick:e=>function(e){n.value!==e&&(n.value=e,0===e?delete d.categoryId:d.categoryId=e,u(!0))}(a)},[e.createElementVNode("text",null,e.toDisplayString(t),1)],10,["onClick"])))),128))])])]),e.createElementVNode("scroll-view",{"scroll-y":"true",class:"team-list",onScrolltolower:p},[l.list&&l.list.length>0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(l.list,((t,a)=>(e.openBlock(),e.createBlock(f,{key:t.id,team:t,index:a,onDetail:h,onApply:v},null,8,["team","index"])))),128)):s.value?(e.openBlock(),e.createElementBlock("view",{key:1,class:"loading-state"},[e.createElementVNode("view",{class:"loading-spinner"}),e.createElementVNode("text",{class:"loading-text"},"加载中...")])):(e.openBlock(),e.createElementBlock("view",{key:2,class:"empty-state"},[e.createElementVNode("text",{class:"empty-text"},"暂无团队数据")])),l.list&&l.list.length>0?(e.openBlock(),e.createElementBlock("view",{key:3,class:"load-more"},[i.value?(e.openBlock(),e.createElementBlock("text",{key:0},"正在加载更多...")):l.hasNext?(e.openBlock(),e.createElementBlock("text",{key:1,onClick:p},"点击加载更多")):(e.openBlock(),e.createElementBlock("text",{key:2},"— 没有更多数据了 —"))])):e.createCommentVNode("",!0)],32),e.createVNode(g,{"active-tab":"team",onTabChange:E,onPublish:w})]))}},w={__name:"create",setup(t){const a=e.ref(null),o=e.ref(""),n=e.ref(""),l=e.ref([]);function s(){uni.navigateBack()}function c(){uni.showToast({title:"竞赛选择功能开发中",icon:"none"}),a.value={id:1,title:"互联网+创新创业大赛"}}function i(){l.value.push({name:"",count:1,requirement:""})}function r(){if(!a.value)return uni.showToast({title:"请选择竞赛",icon:"none"});if(!o.value)return uni.showToast({title:"请输入团队名称",icon:"none"});if(0===l.value.length)return uni.showToast({title:"请至少添加一个职位",icon:"none"});for(let e=0;e<l.value.length;e++){if(!l.value[e].name)return uni.showToast({title:`请填写职位${e+1}的名称`,icon:"none"})}uni.showLoading({title:"创建中..."}),setTimeout((()=>{uni.hideLoading(),uni.showToast({title:"创建成功",icon:"success"}),setTimeout((()=>{uni.navigateBack()}),1500)}),2e3)}return(t,m)=>(e.openBlock(),e.createElementBlock("view",{class:"container bg-gray-50"},[e.createElementVNode("view",{class:"sticky-header"},[e.createElementVNode("view",{class:"flex-row px-4 py-3"},[e.createElementVNode("view",{class:"mr-3",onClick:s},[e.createElementVNode("text",{class:"iconfont icon-arrow-left text-gray-600"})]),e.createElementVNode("text",{class:"text-xl font-bold text-gray-800"},"创建团队")])]),e.createElementVNode("view",{class:"form-container"},[e.createElementVNode("view",{class:"form-section"},[e.createElementVNode("text",{class:"section-title"},"选择竞赛"),e.createElementVNode("view",{class:"competition-selector"},[e.createElementVNode("view",{class:"selected-competition",onClick:c},[a.value?(e.openBlock(),e.createElementBlock("text",{key:0,class:"selected-text"},e.toDisplayString(a.value.title),1)):(e.openBlock(),e.createElementBlock("text",{key:1,class:"placeholder-text"},"请选择竞赛")),e.createElementVNode("text",{class:"iconfont icon-arrow-right text-gray-400"})])])]),e.createElementVNode("view",{class:"form-section"},[e.createElementVNode("text",{class:"section-title"},"团队信息"),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("text",{class:"form-label"},"团队名称"),e.withDirectives(e.createElementVNode("input",{class:"form-input",type:"text","onUpdate:modelValue":m[0]||(m[0]=e=>o.value=e),placeholder:"请输入团队名称"},null,512),[[e.vModelText,o.value]])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("text",{class:"form-label"},"团队介绍"),e.withDirectives(e.createElementVNode("textarea",{class:"form-textarea","onUpdate:modelValue":m[1]||(m[1]=e=>n.value=e),placeholder:"请简要介绍团队情况和招募需求"},null,512),[[e.vModelText,n.value]])])]),e.createElementVNode("view",{class:"form-section"},[e.createElementVNode("view",{class:"flex-row justify-between items-center"},[e.createElementVNode("text",{class:"section-title"},"职位设置"),e.createElementVNode("view",{class:"add-btn",onClick:i},[e.createElementVNode("text",{class:"iconfont icon-plus text-blue-500"}),e.createElementVNode("text",{class:"text-blue-500 text-sm"},"添加职位")])]),0===l.value.length?(e.openBlock(),e.createElementBlock("view",{key:0,class:"empty-tip"},[e.createElementVNode("text",{class:"text-gray-500 text-sm"},"请添加招募职位")])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:"position-item"},[e.createElementVNode("view",{class:"position-header"},[e.createElementVNode("text",{class:"text-gray-800 font-medium"},"职位 "+e.toDisplayString(a+1),1),e.createElementVNode("text",{class:"iconfont icon-delete text-gray-500",onClick:e=>function(e){l.value.splice(e,1)}(a)},null,8,["onClick"])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("text",{class:"form-label"},"职位名称"),e.withDirectives(e.createElementVNode("input",{class:"form-input",type:"text","onUpdate:modelValue":e=>t.name=e,placeholder:"如:产品经理"},null,8,["onUpdate:modelValue"]),[[e.vModelText,t.name]])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("text",{class:"form-label"},"招募人数"),e.withDirectives(e.createElementVNode("input",{class:"form-input",type:"number","onUpdate:modelValue":e=>t.count=e,placeholder:"1"},null,8,["onUpdate:modelValue"]),[[e.vModelText,t.count]])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("text",{class:"form-label"},"要求描述"),e.withDirectives(e.createElementVNode("textarea",{class:"form-textarea","onUpdate:modelValue":e=>t.requirement=e,placeholder:"描述该职位的技能要求、经验要求等"},null,8,["onUpdate:modelValue"]),[[e.vModelText,t.requirement]])])])))),128))])]),e.createElementVNode("view",{class:"submit-bar"},[e.createElementVNode("button",{class:"submit-btn",onClick:r},"创建团队")])]))}};const V=p({components:{TabBar:g},data:()=>({categories:["全部竞赛","学科竞赛","创新创业","科技竞赛","文体竞赛"],currentCategory:0,loading:!1,hasMore:!0,currentPage:1,pageSize:10,hotCompetitions:[],competitionList:[],currentHotIndex:0}),onLoad(){this.getHotCompetitions(),this.getCompetitionList()},onPullDownRefresh(){this.onRefresh()},onReachBottom(){this.loadMore()},methods:{onSwiperChange(e){this.currentHotIndex=e.detail.current},switchToSlide(e){this.currentHotIndex=e},async getHotCompetitions(){try{this.loading=!0;const e=await d.competitions.getCompetitionsList({pageSize:3,isHot:!0});e&&200===e.code&&e.data&&Array.isArray(e.data.list)&&(this.hotCompetitions=e.data.list)}catch(e){t("error","at pages/competition/index.vue:213","获取热门竞赛失败:",e),uni.showToast({title:"获取热门竞赛失败",icon:"none"}),this.hotCompetitions=[]}finally{this.loading=!1}},async getCompetitionList(e=!0){try{if(e&&(this.currentPage=1,this.competitionList=[]),!this.hasMore&&!e)return;this.loading=!0;const t={pageNum:this.currentPage,pageSize:this.pageSize};if(this.currentCategory>0){const e=[null,1,2,3,4];t.categoryId=e[this.currentCategory]}const a=await d.competitions.getCompetitionsList(t);a&&200===a.code&&a.data&&(e?this.competitionList=Array.isArray(a.data.list)?a.data.list:[]:Array.isArray(a.data.list)&&(this.competitionList=[...this.competitionList,...a.data.list]),this.hasMore=a.data.hasNext||!1,0===this.competitionList.length&&uni.showToast({title:"暂无竞赛数据",icon:"none"}))}catch(a){t("error","at pages/competition/index.vue:273","获取竞赛列表失败:",a),uni.showToast({title:"获取竞赛列表失败",icon:"none"}),e&&(this.competitionList=[])}finally{this.loading=!1}},loadMore(){!this.loading&&this.hasMore&&(this.currentPage++,this.getCompetitionList(!1))},onRefresh(){this.getCompetitionList(!0),this.getHotCompetitions(),uni.stopPullDownRefresh()},getCategoryClass(e){switch(e){case"创新创业":return"tag-orange";case"学科竞赛":return"tag-green";case"科技竞赛":return"tag-blue";case"文体竞赛":return"tag-purple";default:return""}},getStatusClass(e){switch(e){case"0":return"status-upcoming";case"1":return"status-active";case"2":return"status-ongoing";case"3":return"status-ended";default:return""}},formatDate(e){if(!e)return"";const t=new Date(e);return`${t.getMonth()+1}月${t.getDate()}日`},isUpcoming:e=>"0"===e.status,selectCategory(e){this.currentCategory!==e&&(this.currentCategory=e,this.getCompetitionList(!0))},viewDetail(e){uni.navigateTo({url:`/pages/competition/detail?id=${e}`})},handleTabChange(e){"home"===e?uni.switchTab({url:"/pages/index/index"}):"team"===e?uni.switchTab({url:"/pages/team/list"}):"profile"===e&&uni.switchTab({url:"/pages/profile/index"})},showPublishOptions(){uni.showActionSheet({itemList:["发布竞赛信息","招募队友","发布项目展示"],success:function(e){uni.showToast({title:`选择了: ${e.tapIndex}`,icon:"none"})}})},getActionText(e){switch(e){case"0":return"提醒我";case"1":case"2":default:return"查看详情";case"3":return"查看结果"}}}},[["render",function(t,a,o,n,l,s){const c=e.resolveComponent("tab-bar");return e.openBlock(),e.createElementBlock("view",{class:"container",ref:"instance"},[e.createElementVNode("view",{class:"sticky-header"},[e.createElementVNode("view",{class:"header-inner"},[e.createElementVNode("text",{class:"page-title"},"竞赛广场"),e.createElementVNode("view",{class:"action-buttons"},[e.createElementVNode("view",{class:"action-btn"},[e.createElementVNode("text",{class:"iconfont icon-search"})]),e.createElementVNode("view",{class:"action-btn"},[e.createElementVNode("text",{class:"iconfont icon-filter"})])])]),e.createElementVNode("scroll-view",{"scroll-x":"true",class:"category-scroll"},[e.createElementVNode("view",{class:"category-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.categories,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:e.normalizeClass(["category-item",l.currentCategory===a?"active-category":""]),onClick:e=>s.selectCategory(a)},[e.createElementVNode("text",null,e.toDisplayString(t),1)],10,["onClick"])))),128))])])]),l.hotCompetitions&&l.hotCompetitions.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"section"},[e.createElementVNode("view",{class:"section-header"},[e.createElementVNode("text",{class:"section-title"},"热门竞赛")]),e.createElementVNode("swiper",{class:"hot-swiper",indicator:!1,autoplay:!0,interval:3e3,duration:500,circular:!0,current:l.currentHotIndex,onChange:a[0]||(a[0]=(...e)=>s.onSwiperChange&&s.onSwiperChange(...e))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.hotCompetitions,((t,a)=>(e.openBlock(),e.createElementBlock("swiper-item",{key:a,class:"hot-swiper-item"},[e.createElementVNode("view",{class:"hot-item",onClick:e=>s.viewDetail(t.id)},[e.createElementVNode("image",{class:"hot-img",src:t.coverImageUrl,mode:"aspectFill"},null,8,["src"]),e.createElementVNode("view",{class:"hot-overlay"},[e.createElementVNode("text",{class:"hot-title"},e.toDisplayString(t.title),1),e.createElementVNode("text",{class:"hot-desc"},e.toDisplayString(t.shortDescription),1),e.createElementVNode("view",{class:"hot-info"},[e.createElementVNode("view",{class:"hot-info-item"},[e.createElementVNode("text",{class:"iconfont icon-calendar"}),e.createElementVNode("text",{class:"hot-date"},"报名截止: "+e.toDisplayString(s.formatDate(t.registrationDeadline)),1)]),e.createElementVNode("view",{class:"hot-info-item"},[e.createElementVNode("text",{class:"iconfont icon-team"}),e.createElementVNode("text",{class:"hot-team"},e.toDisplayString(t.teamSize)+"~"+e.toDisplayString(t.teamMax)+"人",1)])])])],8,["onClick"])])))),128))],40,["current"]),e.createElementVNode("view",{class:"dots-container"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.hotCompetitions,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:e.normalizeClass(["dot",{"active-dot":l.currentHotIndex===a}]),onClick:e=>s.switchToSlide(a)},null,10,["onClick"])))),128))])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"section"},[e.createElementVNode("view",{class:"section-header"},[e.createElementVNode("text",{class:"section-title"},"最新竞赛")]),e.createElementVNode("view",{class:"competition-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.competitionList,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"competition-card",key:a,onClick:e=>s.viewDetail(t.id)},[e.createElementVNode("view",{class:"card-image-wrapper"},[e.createElementVNode("image",{class:"card-image",src:t.coverImageUrl,mode:"aspectFill"},null,8,["src"]),e.createElementVNode("view",{class:e.normalizeClass(["status-badge",s.getStatusClass(t.status)])},e.toDisplayString(t.statusText),3)]),e.createElementVNode("view",{class:"card-content"},[e.createElementVNode("text",{class:"card-title"},e.toDisplayString(t.title),1),e.createElementVNode("text",{class:"card-desc"},e.toDisplayString(t.shortDescription),1),e.createElementVNode("view",{class:"card-tags"},[e.createElementVNode("text",{class:e.normalizeClass(["category-tag",s.getCategoryClass(t.categoryName)])},e.toDisplayString(t.categoryName),3),e.createElementVNode("text",{class:"level-tag"},e.toDisplayString(t.level),1),e.createElementVNode("text",{class:"team-tag"},[e.createElementVNode("text",{class:"iconfont icon-team"}),e.createTextVNode(" "+e.toDisplayString(t.teamSize)+"~"+e.toDisplayString(t.teamMax)+"人 ",1)])]),e.createElementVNode("view",{class:"card-footer"},[e.createElementVNode("view",{class:"date-info"},[e.createElementVNode("text",{class:"iconfont icon-calendar"}),e.createElementVNode("text",{class:"date-text"},e.toDisplayString(s.isUpcoming(t)?"报名开始":"报名截止")+": "+e.toDisplayString(s.formatDate(s.isUpcoming(t)?t.registrationStart:t.registrationDeadline)),1)]),e.createElementVNode("view",{class:e.normalizeClass(["action-btn",{"disabled-btn":"0"===t.status||"3"===t.status}])},e.toDisplayString(s.getActionText(t.status)),3)])])],8,["onClick"])))),128)),l.competitionList.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"loading-more"},[l.loading?(e.openBlock(),e.createElementBlock("text",{key:0},"加载中...")):l.hasMore?(e.openBlock(),e.createElementBlock("text",{key:1,onClick:a[1]||(a[1]=(...e)=>s.loadMore&&s.loadMore(...e))},"点击加载更多")):(e.openBlock(),e.createElementBlock("text",{key:2},"没有更多竞赛了"))])):e.createCommentVNode("",!0),0!==l.competitionList.length||l.loading?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:1,class:"empty-state"},[e.createElementVNode("text",{class:"empty-text"},"暂无竞赛数据")]))])]),e.createVNode(c,{"active-tab":"competition",onTabChange:s.handleTabChange,onPublish:s.showPublishOptions},null,8,["onTabChange","onPublish"])],512)}]]),N=[{font_class:"arrow-down",unicode:""},{font_class:"arrow-left",unicode:""},{font_class:"arrow-right",unicode:""},{font_class:"arrow-up",unicode:""},{font_class:"auth",unicode:""},{font_class:"auth-filled",unicode:""},{font_class:"back",unicode:""},{font_class:"bars",unicode:""},{font_class:"calendar",unicode:""},{font_class:"calendar-filled",unicode:""},{font_class:"camera",unicode:""},{font_class:"camera-filled",unicode:""},{font_class:"cart",unicode:""},{font_class:"cart-filled",unicode:""},{font_class:"chat",unicode:""},{font_class:"chat-filled",unicode:""},{font_class:"chatboxes",unicode:""},{font_class:"chatboxes-filled",unicode:""},{font_class:"chatbubble",unicode:""},{font_class:"chatbubble-filled",unicode:""},{font_class:"checkbox",unicode:""},{font_class:"checkbox-filled",unicode:""},{font_class:"checkmarkempty",unicode:""},{font_class:"circle",unicode:""},{font_class:"circle-filled",unicode:""},{font_class:"clear",unicode:""},{font_class:"close",unicode:""},{font_class:"closeempty",unicode:""},{font_class:"cloud-download",unicode:""},{font_class:"cloud-download-filled",unicode:""},{font_class:"cloud-upload",unicode:""},{font_class:"cloud-upload-filled",unicode:""},{font_class:"color",unicode:""},{font_class:"color-filled",unicode:""},{font_class:"compose",unicode:""},{font_class:"contact",unicode:""},{font_class:"contact-filled",unicode:""},{font_class:"down",unicode:""},{font_class:"bottom",unicode:""},{font_class:"download",unicode:""},{font_class:"download-filled",unicode:""},{font_class:"email",unicode:""},{font_class:"email-filled",unicode:""},{font_class:"eye",unicode:""},{font_class:"eye-filled",unicode:""},{font_class:"eye-slash",unicode:""},{font_class:"eye-slash-filled",unicode:""},{font_class:"fire",unicode:""},{font_class:"fire-filled",unicode:""},{font_class:"flag",unicode:""},{font_class:"flag-filled",unicode:""},{font_class:"folder-add",unicode:""},{font_class:"folder-add-filled",unicode:""},{font_class:"font",unicode:""},{font_class:"forward",unicode:""},{font_class:"gear",unicode:""},{font_class:"gear-filled",unicode:""},{font_class:"gift",unicode:""},{font_class:"gift-filled",unicode:""},{font_class:"hand-down",unicode:""},{font_class:"hand-down-filled",unicode:""},{font_class:"hand-up",unicode:""},{font_class:"hand-up-filled",unicode:""},{font_class:"headphones",unicode:""},{font_class:"heart",unicode:""},{font_class:"heart-filled",unicode:""},{font_class:"help",unicode:""},{font_class:"help-filled",unicode:""},{font_class:"home",unicode:""},{font_class:"home-filled",unicode:""},{font_class:"image",unicode:""},{font_class:"image-filled",unicode:""},{font_class:"images",unicode:""},{font_class:"images-filled",unicode:""},{font_class:"info",unicode:""},{font_class:"info-filled",unicode:""},{font_class:"left",unicode:""},{font_class:"link",unicode:""},{font_class:"list",unicode:""},{font_class:"location",unicode:""},{font_class:"location-filled",unicode:""},{font_class:"locked",unicode:""},{font_class:"locked-filled",unicode:""},{font_class:"loop",unicode:""},{font_class:"mail-open",unicode:""},{font_class:"mail-open-filled",unicode:""},{font_class:"map",unicode:""},{font_class:"map-filled",unicode:""},{font_class:"map-pin",unicode:""},{font_class:"map-pin-ellipse",unicode:""},{font_class:"medal",unicode:""},{font_class:"medal-filled",unicode:""},{font_class:"mic",unicode:""},{font_class:"mic-filled",unicode:""},{font_class:"micoff",unicode:""},{font_class:"micoff-filled",unicode:""},{font_class:"minus",unicode:""},{font_class:"minus-filled",unicode:""},{font_class:"more",unicode:""},{font_class:"more-filled",unicode:""},{font_class:"navigate",unicode:""},{font_class:"navigate-filled",unicode:""},{font_class:"notification",unicode:""},{font_class:"notification-filled",unicode:""},{font_class:"paperclip",unicode:""},{font_class:"paperplane",unicode:""},{font_class:"paperplane-filled",unicode:""},{font_class:"person",unicode:""},{font_class:"person-filled",unicode:""},{font_class:"personadd",unicode:""},{font_class:"personadd-filled",unicode:""},{font_class:"personadd-filled-copy",unicode:""},{font_class:"phone",unicode:""},{font_class:"phone-filled",unicode:""},{font_class:"plus",unicode:""},{font_class:"plus-filled",unicode:""},{font_class:"plusempty",unicode:""},{font_class:"pulldown",unicode:""},{font_class:"pyq",unicode:""},{font_class:"qq",unicode:""},{font_class:"redo",unicode:""},{font_class:"redo-filled",unicode:""},{font_class:"refresh",unicode:""},{font_class:"refresh-filled",unicode:""},{font_class:"refreshempty",unicode:""},{font_class:"reload",unicode:""},{font_class:"right",unicode:""},{font_class:"scan",unicode:""},{font_class:"search",unicode:""},{font_class:"settings",unicode:""},{font_class:"settings-filled",unicode:""},{font_class:"shop",unicode:""},{font_class:"shop-filled",unicode:""},{font_class:"smallcircle",unicode:""},{font_class:"smallcircle-filled",unicode:""},{font_class:"sound",unicode:""},{font_class:"sound-filled",unicode:""},{font_class:"spinner-cycle",unicode:""},{font_class:"staff",unicode:""},{font_class:"staff-filled",unicode:""},{font_class:"star",unicode:""},{font_class:"star-filled",unicode:""},{font_class:"starhalf",unicode:""},{font_class:"trash",unicode:""},{font_class:"trash-filled",unicode:""},{font_class:"tune",unicode:""},{font_class:"tune-filled",unicode:""},{font_class:"undo",unicode:""},{font_class:"undo-filled",unicode:""},{font_class:"up",unicode:""},{font_class:"top",unicode:""},{font_class:"upload",unicode:""},{font_class:"upload-filled",unicode:""},{font_class:"videocam",unicode:""},{font_class:"videocam-filled",unicode:""},{font_class:"vip",unicode:""},{font_class:"vip-filled",unicode:""},{font_class:"wallet",unicode:""},{font_class:"wallet-filled",unicode:""},{font_class:"weibo",unicode:""},{font_class:"weixin",unicode:""}];const x=p({name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""},fontFamily:{type:String,default:""}},data:()=>({icons:N}),computed:{unicode(){let e=this.icons.find((e=>e.font_class===this.type));return e?e.unicode:""},iconSize(){return"number"==typeof(e=this.size)||/^[0-9]*$/g.test(e)?e+"px":e;var e},styleObj(){return""!==this.fontFamily?`color: ${this.color}; font-size: ${this.iconSize}; font-family: ${this.fontFamily};`:`color: ${this.color}; font-size: ${this.iconSize};`}},methods:{_onClick(){this.$emit("click")}}},[["render",function(t,a,o,n,l,s){return e.openBlock(),e.createElementBlock("text",{style:e.normalizeStyle(s.styleObj),class:e.normalizeClass(["uni-icons",["uniui-"+o.type,o.customPrefix,o.customPrefix?o.type:""]]),onClick:a[0]||(a[0]=(...e)=>s._onClick&&s._onClick(...e))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)}],["__scopeId","data-v-5610c8db"]]);function y(e){let t="";for(let a in e){t+=`${a}:${e[a]};`}return t}const k=p({name:"uni-easyinput",emits:["click","iconClick","update:modelValue","input","focus","blur","confirm","clear","eyes","change","keyboardheightchange"],model:{prop:"modelValue",event:"update:modelValue"},options:{virtualHost:!0},inject:{form:{from:"uniForm",default:null},formItem:{from:"uniFormItem",default:null}},props:{name:String,value:[Number,String],modelValue:[Number,String],type:{type:String,default:"text"},clearable:{type:Boolean,default:!0},autoHeight:{type:Boolean,default:!1},placeholder:{type:String,default:" "},placeholderStyle:String,focus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},confirmType:{type:String,default:"done"},clearSize:{type:[Number,String],default:24},inputBorder:{type:Boolean,default:!0},prefixIcon:{type:String,default:""},suffixIcon:{type:String,default:""},trim:{type:[Boolean,String],default:!1},cursorSpacing:{type:Number,default:0},passwordIcon:{type:Boolean,default:!0},adjustPosition:{type:Boolean,default:!0},primaryColor:{type:String,default:"#2979ff"},styles:{type:Object,default:()=>({color:"#333",backgroundColor:"#fff",disableColor:"#F7F6F6",borderColor:"#e5e5e5"})},errorMessage:{type:[String,Boolean],default:""}},data:()=>({focused:!1,val:"",showMsg:"",border:!1,isFirstBorder:!1,showClearIcon:!1,showPassword:!1,focusShow:!1,localMsg:"",isEnter:!1}),computed:{isVal(){const e=this.val;return!(!e&&0!==e)},msg(){return this.localMsg||this.errorMessage},inputMaxlength(){return Number(this.maxlength)},boxStyle(){return`color:${this.inputBorder&&this.msg?"#e43d33":this.styles.color};`},inputContentClass(){return function(e){let t="";for(let a in e)e[a]&&(t+=`${a} `);return t}({"is-input-border":this.inputBorder,"is-input-error-border":this.inputBorder&&this.msg,"is-textarea":"textarea"===this.type,"is-disabled":this.disabled,"is-focused":this.focusShow})},inputContentStyle(){const e=this.focusShow?this.primaryColor:this.styles.borderColor;return y({"border-color":(this.inputBorder&&this.msg?"#dd524d":e)||"#e5e5e5","background-color":this.disabled?this.styles.disableColor:this.styles.backgroundColor})},inputStyle(){return y({"padding-right":"password"===this.type||this.clearable||this.prefixIcon?"":"10px","padding-left":this.prefixIcon?"":"10px"})}},watch:{value(e){this.val=e},modelValue(e){this.val=e},focus(e){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))}},created(){this.init(),this.form&&this.formItem&&this.$watch("formItem.errMsg",(e=>{this.localMsg=e}))},mounted(){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))},methods:{init(){this.value||0===this.value?this.val=this.value:this.modelValue||0===this.modelValue||""===this.modelValue?this.val=this.modelValue:this.val=null},onClickIcon(e){this.$emit("iconClick",e)},onEyes(){this.showPassword=!this.showPassword,this.$emit("eyes",this.showPassword)},onInput(e){let t=e.detail.value;this.trim&&("boolean"==typeof this.trim&&this.trim&&(t=this.trimStr(t)),"string"==typeof this.trim&&(t=this.trimStr(t,this.trim))),this.errMsg&&(this.errMsg=""),this.val=t,this.$emit("input",t),this.$emit("update:modelValue",t)},onFocus(){this.$nextTick((()=>{this.focused=!0})),this.$emit("focus",null)},_Focus(e){this.focusShow=!0,this.$emit("focus",e)},onBlur(){this.focused=!1,this.$emit("blur",null)},_Blur(e){if(e.detail.value,this.focusShow=!1,this.$emit("blur",e),!1===this.isEnter&&this.$emit("change",this.val),this.form&&this.formItem){const{validateTrigger:e}=this.form;"blur"===e&&this.formItem.onFieldChange()}},onConfirm(e){this.$emit("confirm",this.val),this.isEnter=!0,this.$emit("change",this.val),this.$nextTick((()=>{this.isEnter=!1}))},onClear(e){this.val="",this.$emit("input",""),this.$emit("update:modelValue",""),this.$emit("clear")},onkeyboardheightchange(e){this.$emit("keyboardheightchange",e)},trimStr:(e,t="both")=>"both"===t?e.trim():"left"===t?e.trimLeft():"right"===t?e.trimRight():"start"===t?e.trimStart():"end"===t?e.trimEnd():"all"===t?e.replace(/\s+/g,""):e}},[["render",function(t,o,n,l,s,c){const i=a(e.resolveDynamicComponent("uni-icons"),x);return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-easyinput",{"uni-easyinput-error":c.msg}]),style:e.normalizeStyle(c.boxStyle)},[e.createElementVNode("view",{class:e.normalizeClass(["uni-easyinput__content",c.inputContentClass]),style:e.normalizeStyle(c.inputContentStyle)},[n.prefixIcon?(e.openBlock(),e.createBlock(i,{key:0,class:"content-clear-icon",type:n.prefixIcon,color:"#c0c4cc",onClick:o[0]||(o[0]=e=>c.onClickIcon("prefix")),size:"22"},null,8,["type"])):e.createCommentVNode("",!0),e.renderSlot(t.$slots,"left",{},void 0,!0),"textarea"===n.type?(e.openBlock(),e.createElementBlock("textarea",{key:1,class:e.normalizeClass(["uni-easyinput__content-textarea",{"input-padding":n.inputBorder}]),name:n.name,value:s.val,placeholder:n.placeholder,placeholderStyle:n.placeholderStyle,disabled:n.disabled,"placeholder-class":"uni-easyinput__placeholder-class",maxlength:c.inputMaxlength,focus:s.focused,autoHeight:n.autoHeight,"cursor-spacing":n.cursorSpacing,"adjust-position":n.adjustPosition,onInput:o[1]||(o[1]=(...e)=>c.onInput&&c.onInput(...e)),onBlur:o[2]||(o[2]=(...e)=>c._Blur&&c._Blur(...e)),onFocus:o[3]||(o[3]=(...e)=>c._Focus&&c._Focus(...e)),onConfirm:o[4]||(o[4]=(...e)=>c.onConfirm&&c.onConfirm(...e)),onKeyboardheightchange:o[5]||(o[5]=(...e)=>c.onkeyboardheightchange&&c.onkeyboardheightchange(...e))},null,42,["name","value","placeholder","placeholderStyle","disabled","maxlength","focus","autoHeight","cursor-spacing","adjust-position"])):(e.openBlock(),e.createElementBlock("input",{key:2,type:"password"===n.type?"text":n.type,class:"uni-easyinput__content-input",style:e.normalizeStyle(c.inputStyle),name:n.name,value:s.val,password:!s.showPassword&&"password"===n.type,placeholder:n.placeholder,placeholderStyle:n.placeholderStyle,"placeholder-class":"uni-easyinput__placeholder-class",disabled:n.disabled,maxlength:c.inputMaxlength,focus:s.focused,confirmType:n.confirmType,"cursor-spacing":n.cursorSpacing,"adjust-position":n.adjustPosition,onFocus:o[6]||(o[6]=(...e)=>c._Focus&&c._Focus(...e)),onBlur:o[7]||(o[7]=(...e)=>c._Blur&&c._Blur(...e)),onInput:o[8]||(o[8]=(...e)=>c.onInput&&c.onInput(...e)),onConfirm:o[9]||(o[9]=(...e)=>c.onConfirm&&c.onConfirm(...e)),onKeyboardheightchange:o[10]||(o[10]=(...e)=>c.onkeyboardheightchange&&c.onkeyboardheightchange(...e))},null,44,["type","name","value","password","placeholder","placeholderStyle","disabled","maxlength","focus","confirmType","cursor-spacing","adjust-position"])),"password"===n.type&&n.passwordIcon?(e.openBlock(),e.createElementBlock(e.Fragment,{key:3},[c.isVal?(e.openBlock(),e.createBlock(i,{key:0,class:e.normalizeClass(["content-clear-icon",{"is-textarea-icon":"textarea"===n.type}]),type:s.showPassword?"eye-slash-filled":"eye-filled",size:22,color:s.focusShow?n.primaryColor:"#c0c4cc",onClick:c.onEyes},null,8,["class","type","color","onClick"])):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0),n.suffixIcon?(e.openBlock(),e.createElementBlock(e.Fragment,{key:4},[n.suffixIcon?(e.openBlock(),e.createBlock(i,{key:0,class:"content-clear-icon",type:n.suffixIcon,color:"#c0c4cc",onClick:o[11]||(o[11]=e=>c.onClickIcon("suffix")),size:"22"},null,8,["type"])):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:5},[n.clearable&&c.isVal&&!n.disabled&&"textarea"!==n.type?(e.openBlock(),e.createBlock(i,{key:0,class:e.normalizeClass(["content-clear-icon",{"is-textarea-icon":"textarea"===n.type}]),type:"clear",size:n.clearSize,color:c.msg?"#dd524d":s.focusShow?n.primaryColor:"#c0c4cc",onClick:c.onClear},null,8,["class","size","color","onClick"])):e.createCommentVNode("",!0)],64)),e.renderSlot(t.$slots,"right",{},void 0,!0)],6)],6)}],["__scopeId","data-v-63e7b685"]]),b={__name:"create",setup(o){const n=e.reactive({title:"",categoryId:null,level:"",shortDescription:"",description:"",requirements:"",registrationStart:"",registrationEnd:"",teamMin:"",teamMax:"",isHot:!1,websiteUrl:"",name:"",contactQQ:"",contactEmail:"",coverUrl:"",coverFile:null,attachments:[]}),l=e.ref([]),s=["国家级","省级","市级","校级"];function c(e){return{"计算机类":"iconfont icon-computer","设计类":"iconfont icon-palette","创新创业":"iconfont icon-lightbulb","学科竞赛":"iconfont icon-book","科技竞赛":"iconfont icon-chip","文化艺术":"iconfont icon-palette","体育竞赛":"iconfont icon-running"}[e]||"iconfont icon-more"}function r(){l.value=[{label:"创新创业",value:2,icon:"iconfont icon-lightbulb",id:2},{label:"学科竞赛",value:1,icon:"iconfont icon-book",id:1},{label:"科技竞赛",value:3,icon:"iconfont icon-chip",id:3},{label:"文化艺术",value:4,icon:"iconfont icon-palette",id:4},{label:"体育竞赛",value:5,icon:"iconfont icon-running",id:5},{label:"其他",value:6,icon:"iconfont icon-more",id:6}]}function d(){uni.showToast({title:"只有管理员才能发布竞赛",icon:"none"}),setTimeout((()=>{uni.navigateBack()}),1500)}function u(){uni.navigateBack()}function p(){if(!n.title)return uni.showToast({title:"请输入竞赛标题",icon:"none"});E(0)}function f(){uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:e=>{n.coverUrl=e.tempFilePaths[0],n.coverFile=e.tempFiles[0]}})}function g(){uni.chooseFile({count:5,type:"all",extension:[".pdf",".doc",".docx",".ppt",".pptx",".xls",".xlsx",".zip"],success:e=>{const t=e.tempFiles.map((e=>({name:e.name||"未命名文件",path:e.path,size:e.size,file:e})));n.attachments=[...n.attachments,...t]}})}function h(){(function(){if(!n.title)return v("请输入竞赛标题"),!1;if(!n.categoryId)return v("请选择竞赛分类"),!1;if(!n.level)return v("请选择竞赛级别"),!1;if(!n.shortDescription)return v("请填写竞赛简介"),!1;if(!n.description)return v("请填写竞赛介绍"),!1;if(!n.requirements)return v("请填写参赛要求"),!1;if(!n.registrationStart||!n.registrationEnd)return v("请选择竞赛时间"),!1;if(!n.teamMin||!n.teamMax)return v("请填写团队人数"),!1;if(!n.name||!n.contactEmail)return v("请填写联系方式"),!1;if(!n.coverUrl)return v("请上传竞赛封面"),!1;return!0})()&&E(1)}function v(e){uni.showToast({title:e,icon:"none"})}async function E(e){const a={title:n.title,categoryId:n.categoryId,level:n.level,shortDescription:n.shortDescription,description:n.description,requirements:n.requirements,registrationStart:n.registrationStart+"T00:00:00",registrationDeadline:n.registrationEnd+"T23:59:59",teamSize:parseInt(n.teamMin)||1,teamMax:parseInt(n.teamMax)||5,status:e.toString(),organizer:"主办方名称",websiteUrl:n.websiteUrl,contactInfo:{email:n.contactEmail,qq:n.contactQQ,name:n.name}};uni.showLoading({title:0===e?"保存中...":"发布中..."});try{const t=new FormData;t.append("competitionData",JSON.stringify(a)),n.coverFile&&t.append("coverImage",n.coverFile),n.attachments.forEach(((e,a)=>{e.file&&t.append("attachmentFiles",e.file)}));const o=uni.getStorageSync("token"),l=await new Promise(((e,t)=>{uni.uploadFile({url:"http://localhost:8080/competitions/with-files",files:n.attachments.map((e=>({name:"attachmentFiles",file:e.file}))),filePath:n.coverUrl,name:"coverImage",formData:{competitionData:JSON.stringify(a)},header:{Authorization:"Bearer "+o},success:t=>{let a;try{a=JSON.parse(t.data)}catch(o){a={code:-1,message:"返回数据解析失败"}}e(a)},fail:e=>{t(e)}})}));200===l.code?(uni.showToast({title:0===e?"保存成功":"发布成功",icon:"success"}),setTimeout((()=>{uni.navigateBack()}),1500)):uni.showToast({title:l.message||"操作失败",icon:"none"})}catch(o){t("error","at pages/competition/create.vue:669","操作失败:",o),uni.showToast({title:"操作失败，请重试",icon:"none"})}finally{uni.hideLoading()}}return e.onMounted((async()=>{await async function(){try{const e=uni.getStorageSync("token");if(!e)return void d();const t=await i.getUserRole(e);200===t.code&&"admin"===t.data||d()}catch(e){t("error","at pages/competition/create.vue:400","获取角色失败:",e),d()}}(),await async function(){try{const e=await m.getCompetitionCategories();200===e.code&&e.data&&Array.isArray(e.data)?l.value=e.data.map((e=>({label:e.name,value:e.id,icon:c(e.name),id:e.id}))):(t("error","at pages/competition/create.vue:350","获取分类失败:",e),r())}catch(e){t("error","at pages/competition/create.vue:354","获取分类出错:",e),r()}}()})),(t,o)=>{const c=a(e.resolveDynamicComponent("uni-easyinput"),k);return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"sticky-header"},[e.createElementVNode("view",{class:"nav-bar"},[e.createElementVNode("view",{class:"back-btn",onClick:u},[e.createElementVNode("text",{class:"iconfont icon-arrow-left"})]),e.createElementVNode("text",{class:"page-title"},"发布竞赛"),e.createElementVNode("view",{class:"draft-btn",onClick:p},"草稿箱")])]),e.createElementVNode("scroll-view",{"scroll-y":"",class:"form-content"},[e.createElementVNode("view",{class:"form-section"},[e.createElementVNode("text",{class:"section-title"},"基本信息"),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"form-label"},[e.createElementVNode("text",null,"竞赛标题"),e.createElementVNode("text",{class:"required"},"*")]),e.createVNode(c,{type:"text",modelValue:n.title,"onUpdate:modelValue":o[0]||(o[0]=e=>n.title=e),placeholder:"请输入竞赛名称（5-50字",clearable:!1},null,8,["modelValue"])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"form-label"},[e.createElementVNode("text",null,"竞赛分类"),e.createElementVNode("text",{class:"required"},"*")]),e.createElementVNode("view",{class:"category-grid"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:e.normalizeClass(["category-item",{"category-active":n.categoryId===t.id}]),onClick:e=>n.categoryId=t.id},[e.createElementVNode("text",{class:e.normalizeClass(["category-icon",t.icon])},null,2),e.createElementVNode("text",null,e.toDisplayString(t.label),1)],10,["onClick"])))),128))])]),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"form-label"},[e.createElementVNode("text",null,"竞赛级别"),e.createElementVNode("text",{class:"required"},"*")]),e.createElementVNode("scroll-view",{class:"level-scroll","scroll-x":""},[e.createElementVNode("view",{class:"level-list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(s,((t,a)=>e.createElementVNode("view",{key:a,class:e.normalizeClass(["level-item",{"level-active":n.level===t}]),onClick:e=>n.level=t},[e.createElementVNode("text",null,e.toDisplayString(t),1)],10,["onClick"]))),64))])])])]),e.createElementVNode("view",{class:"form-section"},[e.createElementVNode("text",{class:"section-title"},"竞赛详情"),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"form-label"},[e.createElementVNode("text",null,"竞赛简介"),e.createElementVNode("text",{class:"required"},"*")]),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":o[1]||(o[1]=e=>n.shortDescription=e),placeholder:"请填写竞赛简介（10-30个字）",class:"form-textarea",maxlength:"140"},null,512),[[e.vModelText,n.shortDescription]])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"form-label"},[e.createElementVNode("text",null,"竞赛介绍"),e.createElementVNode("text",{class:"required"},"*")]),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":o[2]||(o[2]=e=>n.description=e),placeholder:"请详细描述竞赛背景、目的和意义（50-1000字）",class:"form-textarea",maxlength:"2000"},null,512),[[e.vModelText,n.description]])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"form-label"},[e.createElementVNode("text",null,"参赛要求"),e.createElementVNode("text",{class:"required"},"*")]),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":o[3]||(o[3]=e=>n.requirements=e),placeholder:"请说明参赛资格、人数限制等要求（20-500字）",class:"form-textarea form-textarea-medium",maxlength:"1000"},null,512),[[e.vModelText,n.requirements]])])]),e.createElementVNode("view",{class:"form-section"},[e.createElementVNode("text",{class:"section-title"},"时间与团队"),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"form-label"},[e.createElementVNode("text",null,"竞赛时间"),e.createElementVNode("text",{class:"required"},"*")]),e.createElementVNode("view",{class:"time-grid"},[e.createElementVNode("view",{class:"time-column"},[e.createElementVNode("text",{class:"time-label"},"报名开始时间"),e.createElementVNode("picker",{mode:"date",value:n.registrationStart,onChange:o[4]||(o[4]=e=>n.registrationStart=e.detail.value),class:"date-picker"},[e.createElementVNode("view",{class:"picker-view"},[n.registrationStart?(e.openBlock(),e.createElementBlock("text",{key:0},e.toDisplayString(n.registrationStart),1)):(e.openBlock(),e.createElementBlock("text",{key:1,class:"placeholder-text"},"选择日期"))])],40,["value"])]),e.createElementVNode("view",{class:"time-column"},[e.createElementVNode("text",{class:"time-label"},"报名截止时间"),e.createElementVNode("picker",{mode:"date",value:n.registrationEnd,onChange:o[5]||(o[5]=e=>n.registrationEnd=e.detail.value),class:"date-picker"},[e.createElementVNode("view",{class:"picker-view"},[n.registrationEnd?(e.openBlock(),e.createElementBlock("text",{key:0},e.toDisplayString(n.registrationEnd),1)):(e.openBlock(),e.createElementBlock("text",{key:1,class:"placeholder-text"},"选择日期"))])],40,["value"])])])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"form-label"},[e.createElementVNode("text",null,"团队人数"),e.createElementVNode("text",{class:"required"},"*")]),e.createElementVNode("view",{class:"time-grid"},[e.createElementVNode("view",{class:"time-column"},[e.createElementVNode("text",{class:"time-label"},"最少人数"),e.createVNode(c,{type:"number",modelValue:n.teamMin,"onUpdate:modelValue":o[6]||(o[6]=e=>n.teamMin=e),placeholder:"输入人数",clearable:!1},null,8,["modelValue"])]),e.createElementVNode("view",{class:"time-column"},[e.createElementVNode("text",{class:"time-label"},"最多人数"),e.createVNode(c,{type:"number",modelValue:n.teamMax,"onUpdate:modelValue":o[7]||(o[7]=e=>n.teamMax=e),placeholder:"输入人数",clearable:!1},null,8,["modelValue"])])])]),e.createElementVNode("view",{class:"hot-toggle"},[e.createElementVNode("view",{class:"hot-info"},[e.createElementVNode("text",{class:"hot-title"},"设为热门竞赛"),e.createElementVNode("text",{class:"hot-desc"},"热门竞赛将在首页和竞赛列表优先展示")]),e.createElementVNode("switch",{checked:n.isHot,onChange:o[8]||(o[8]=e=>n.isHot=e.detail.value),color:"#00aaff"},null,40,["checked"])])]),e.createElementVNode("view",{class:"form-section"},[e.createElementVNode("text",{class:"section-title"},"联系方式与附件"),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"form-label"},[e.createElementVNode("text",null,"官方网站（可选）")]),e.createVNode(c,{type:"text",modelValue:n.websiteUrl,"onUpdate:modelValue":o[9]||(o[9]=e=>n.websiteUrl=e),placeholder:"输入网站",clearable:!1},null,8,["modelValue"])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"form-label"},[e.createElementVNode("text",null,"联系方式"),e.createElementVNode("text",{class:"required"},"*")]),e.createElementVNode("view",{class:"contact-grid"},[e.createElementVNode("view",{class:"contact-row"},[e.createElementVNode("view",{class:"contact-input"},[e.createElementVNode("text",{class:"contact-icon iconfont icon-user"}),e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":o[10]||(o[10]=e=>n.name=e),placeholder:"联系人"},null,512),[[e.vModelText,n.name]])]),e.createElementVNode("view",{class:"contact-input"},[e.createElementVNode("text",{class:"contact-icon iconfont icon-qq"}),e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":o[11]||(o[11]=e=>n.contactQQ=e),placeholder:"QQ群"},null,512),[[e.vModelText,n.contactQQ]])])]),e.createElementVNode("view",{class:"contact-input contact-email"},[e.createElementVNode("text",{class:"contact-icon iconfont icon-email"}),e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":o[12]||(o[12]=e=>n.contactEmail=e),placeholder:"联系邮箱"},null,512),[[e.vModelText,n.contactEmail]])])])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"form-label"},[e.createElementVNode("text",null,"竞赛封面"),e.createElementVNode("text",{class:"required"},"*")]),e.createElementVNode("view",{class:"upload-box",onClick:f},[n.coverUrl?(e.openBlock(),e.createElementBlock("image",{key:1,src:n.coverUrl,mode:"aspectFill",class:"cover-image"},null,8,["src"])):(e.openBlock(),e.createElementBlock("view",{key:0,class:"upload-placeholder"},[e.createElementVNode("text",{class:"upload-icon iconfont icon-image"}),e.createElementVNode("text",{class:"upload-text"},"点击上传或拖拽图片至此处"),e.createElementVNode("text",{class:"upload-tip"},"建议尺寸：800x400，文件大小不超过2MB")]))])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"form-label"},[e.createElementVNode("text",null,"竞赛附件（可选）")]),e.createElementVNode("view",{class:"upload-box",onClick:g},[0===n.attachments.length?(e.openBlock(),e.createElementBlock("view",{key:0,class:"upload-placeholder"},[e.createElementVNode("text",{class:"upload-icon iconfont icon-file"}),e.createElementVNode("text",{class:"upload-text"},"点击上传或拖拽文件至此处"),e.createElementVNode("text",{class:"upload-tip"},"支持PDF、Word、PPT等格式，单个文件不超过10MB")])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"file-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.attachments,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:"file-item"},[e.createElementVNode("text",{class:"file-icon iconfont icon-file"}),e.createElementVNode("text",{class:"file-name"},e.toDisplayString(t.name),1),e.createElementVNode("text",{class:"delete-icon iconfont icon-close",onClick:e.withModifiers((e=>function(e){n.attachments.splice(e,1)}(a)),["stop"])},null,8,["onClick"])])))),128))]))])])])]),e.createElementVNode("view",{class:"action-bar"},[e.createElementVNode("view",{class:"action-grid"},[e.createElementVNode("button",{class:"draft-button",onClick:p},"保存草稿"),e.createElementVNode("button",{class:"publish-button",onClick:h},[e.createElementVNode("text",{class:"iconfont icon-send"}),e.createElementVNode("text",null,"发布竞赛")])])])])}}},B={__name:"detail",setup(a){const o=e.ref(null),n=e.ref(!1),l=e.ref("details"),s=e.ref({id:null,title:"",category:"",level:"国家级",status:"",statusCode:"",image:"",registrationPeriod:"",registrationStart:"",registrationDeadline:"",competitionPeriod:"",location:"线上初赛 + 线下决赛",teamRequirement:"",description:"",shortDescription:"",requirements:"",organizer:{name:"",description:"",logo:""},contactInfo:{phone:"",email:""},teamSize:0,teamMax:0,websiteUrl:"",viewCount:0,attachments:[],categoryNames:[],coverImageUrl:""}),c=e.ref([{title:"报名阶段",period:"",description:"在此阶段，参赛团队需完成在线报名，提交团队基本信息和项目概述。报名成功后，团队可以开始准备初赛材料。",status:"进行中",active:!0},{title:"初赛阶段",period:"",description:"各参赛团队需提交商业计划书和项目PPT。评审委员会将对所有参赛项目进行评审，选拔优秀项目进入复赛。",status:"未开始",active:!1},{title:"复赛阶段",period:"",description:"入围复赛的团队将进行现场路演和答辩。评委将从项目创新性、商业模式、团队能力等多方面进行评估。",status:"未开始",active:!1},{title:"总决赛",period:"",description:"决赛将在北京举行，入围团队将进行最终路演和展示。评审团将评选出金、银、铜奖项目，并举行颁奖典礼。",status:"未开始",active:!1}]),i=e.ref([{title:"挑战杯创业计划大赛",image:"https://images.unsplash.com/photo-1523240795612-9a054b0db644?w=500",deadline:"6月10日"},{title:"创青春创业大赛",image:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=500",deadline:"7月5日"}]);async function r(e){n.value=!0;try{const a=await d.competitions.getCompetitionDetail(e);if(a&&200===a.code&&a.data){const e=a.data;s.value={...s.value,id:e.id,title:e.title,category:e.categoryNames&&e.categoryNames.length>0?e.categoryNames[0]:"",level:e.level||"国家级",status:m(e.status),statusCode:e.status,image:e.coverImageUrl||"https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?w=800",registrationStart:e.registrationStart,registrationDeadline:e.registrationDeadline,registrationPeriod:u(e.registrationStart,e.registrationDeadline),description:e.description||e.shortDescription||"",shortDescription:e.shortDescription||"",requirements:e.requirements||"",teamRequirement:`${e.teamSize}~${e.teamMax}人/队`,teamSize:e.teamSize,teamMax:e.teamMax,organizer:{name:e.organizer||"未知主办方",description:"",logo:""},contactInfo:e.contactInfo||{phone:"暂无联系方式",email:""},websiteUrl:e.websiteUrl||"",viewCount:e.viewCount||0,attachments:e.attachments||[],categoryNames:e.categoryNames||[],coverImageUrl:e.coverImageUrl||""},function(e){if(e.registrationStart&&e.registrationDeadline){c.value[0].period=u(e.registrationStart,e.registrationDeadline);const t=new Date,a=new Date(e.registrationStart),o=new Date(e.registrationDeadline);t<a?(c.value[0].status="未开始",c.value[0].active=!1):t>=a&&t<=o?(c.value[0].status="进行中",c.value[0].active=!0):(c.value[0].status="已结束",c.value[0].active=!1),"2"===e.status?(c.value[1].active=!0,c.value[1].status="进行中",c.value[0].status="已结束"):"3"===e.status&&(c.value[0].status="已结束",c.value[1].status="已结束",c.value[2].status="已结束",c.value[3].status="已结束")}}(e),t("log","at pages/competition/detail.vue:368","竞赛详情数据:",s.value)}else uni.showToast({title:"获取竞赛详情失败",icon:"none"})}catch(a){t("error","at pages/competition/detail.vue:376","获取竞赛详情错误:",a),uni.showToast({title:"获取竞赛详情失败",icon:"none"})}finally{n.value=!1}}function m(e){switch(e){case"0":return"未开始";case"1":return"报名中";case"2":return"进行中";case"3":return"已截止";default:return"未知状态"}}function u(e,t){if(!e||!t)return"";const a=e=>{const t=new Date(e);return`${t.getFullYear()}年${t.getMonth()+1}月${t.getDate()}日`};return`${a(e)} - ${a(t)}`}function p(e){switch(e){case"创新创业":return"orange-tag";case"学科竞赛":return"green-tag";case"科技竞赛":return"blue-tag";case"文体竞赛":return"purple-tag";default:return"gray-tag"}}function f(e){switch(e){case"未开始":case"已截止":default:return"status-badge bg-gray-500";case"报名中":return"status-badge bg-green-500";case"进行中":return"status-badge bg-blue-500"}}function g(){switch(s.value.status){case"未开始":return"提醒我";case"报名中":return"寻找队伍";case"进行中":return"查看队伍";case"已截止":return"查看结果";default:return"了解详情"}}function h(){if(s.value.registrationDeadline){const e=new Date(s.value.registrationDeadline);return`${e.getFullYear()}年${e.getMonth()+1}月${e.getDate()}日`}if(s.value.registrationPeriod){const e=s.value.registrationPeriod.split(" - ");return e.length>1?e[1]:s.value.registrationPeriod}return"暂无截止日期"}function v(e){l.value=e}function E(){uni.navigateBack()}return e.onMounted((()=>{const e=getCurrentPages(),t=e[e.length-1];t.$page&&t.$page.options?(o.value=t.$page.options.id,o.value?r(o.value).finally((()=>{uni.hideLoading()})):(uni.hideLoading(),uni.showToast({title:"竞赛ID不存在",icon:"none"}))):uni.hideLoading()})),(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"container"},[n.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"loading-container"},[e.createElementVNode("view",{class:"spinner"}),e.createElementVNode("text",{class:"loading-text"},"加载中...")])):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createElementVNode("view",{class:"sticky-header"},[e.createElementVNode("view",{class:"flex-row px-4 py-3"},[e.createElementVNode("view",{class:"mr-3",onClick:E},[e.createElementVNode("text",{class:"iconfont icon-arrow-left text-gray-600"})]),e.createElementVNode("text",{class:"text-xl font-bold text-gray-800"},"竞赛详情"),e.createElementVNode("view",{class:"ml-auto flex-row space-x-3"},[e.createElementVNode("view",{class:"p-2 rounded-full bg-gray-100"},[e.createElementVNode("text",{class:"iconfont icon-bookmark-outline text-gray-600"})]),e.createElementVNode("view",{class:"p-2 rounded-full bg-gray-100"},[e.createElementVNode("text",{class:"iconfont icon-share text-gray-600"})])])])]),e.createElementVNode("view",{class:"relative"},[e.createElementVNode("image",{class:"cover-image",src:s.value.image,mode:"aspectFill"},null,8,["src"]),e.createElementVNode("view",{class:"cover-overlay"},[e.createElementVNode("view",{class:e.normalizeClass(f(s.value.status))},e.toDisplayString(s.value.status),3),e.createElementVNode("text",{class:"text-white text-2xl font-bold"},e.toDisplayString(s.value.title),1),e.createElementVNode("view",{class:"flex-row items-center mt-1 space-x-2"},[e.createElementVNode("text",{class:e.normalizeClass(["category-tag",p(s.value.category)])},e.toDisplayString(s.value.category),3)])])]),e.createElementVNode("view",{class:"bg-white p-4 shadow-sm"},[e.createElementVNode("view",{class:"flex-row justify-between items-center"},[e.createElementVNode("view",{class:"flex-row items-center space-x-2"},[e.createElementVNode("text",{class:"iconfont icon-calendar info-icon"}),e.createElementVNode("text",{class:"text-sm text-gray-700"},"报名截止: "+e.toDisplayString(h()),1)]),e.createElementVNode("view",{class:"flex-row items-center space-x-2"},[e.createElementVNode("text",{class:"iconfont icon-users info-icon"}),e.createElementVNode("text",{class:"text-sm text-gray-700"},e.toDisplayString(s.value.teamRequirement),1)])]),e.createElementVNode("view",{class:"flex-row justify-between items-center mt-3"},[e.createElementVNode("view",{class:"flex-row items-center space-x-2",style:{width:"60%"}},[e.createElementVNode("text",{class:"iconfont icon-university info-icon"}),e.createElementVNode("text",{class:"text-sm text-gray-700"},"主办方: "+e.toDisplayString(s.value.organizer.name),1)]),e.createElementVNode("view",{class:"flex-row items-center space-x-2"},[e.createElementVNode("text",{class:"iconfont icon-trophy info-icon"}),e.createElementVNode("text",{class:"text-sm text-gray-700"},e.toDisplayString(s.value.level),1)])])]),e.createElementVNode("view",{class:"bg-white mt-2 shadow-sm"},[e.createElementVNode("view",{class:"flex-row border-b"},[e.createElementVNode("view",{class:e.normalizeClass(["flex-1 py-3 text-center text-sm font-medium","details"===l.value?"tab-active":"text-gray-500"]),onClick:a[0]||(a[0]=e=>v("details"))},"竞赛详情",2),e.createElementVNode("view",{class:e.normalizeClass(["flex-1 py-3 text-center text-sm font-medium","schedule"===l.value?"tab-active":"text-gray-500"]),onClick:a[1]||(a[1]=e=>v("schedule"))},"赛程安排",2),e.createElementVNode("view",{class:e.normalizeClass(["flex-1 py-3 text-center text-sm font-medium","teams"===l.value?"tab-active":"text-gray-500"]),onClick:a[2]||(a[2]=e=>v("teams"))},"参赛队伍",2)])]),"details"===l.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"bg-white p-4 mt-2 shadow-sm"},[e.createElementVNode("view",{class:"font-bold text-lg text-gray-800 mb-3"},"竞赛简介"),e.createElementVNode("text",{class:"text-gray-700 text-sm leading-relaxed"},e.toDisplayString(s.value.description),1),s.value.requirements?(e.openBlock(),e.createElementBlock("view",{key:0,class:"font-bold text-lg text-gray-800 mt-6 mb-3"},"参赛要求")):e.createCommentVNode("",!0),s.value.requirements?(e.openBlock(),e.createElementBlock("text",{key:1,class:"text-gray-700 text-sm leading-relaxed"},e.toDisplayString(s.value.requirements),1)):(e.openBlock(),e.createElementBlock("view",{key:2,class:"text-gray-700 text-sm space-y-2 list-disc pl-5 mt-6"},[e.createElementVNode("view",{class:"list-item"},"参赛项目须为本校在校生，允许跨校组队"),e.createElementVNode("view",{class:"list-item"},"参赛团队成员"+e.toDisplayString(s.value.teamRequirement),1),e.createElementVNode("view",{class:"list-item"},"参赛项目需具有创新性、可行性和商业价值"),e.createElementVNode("view",{class:"list-item"},"参赛项目需提交商业计划书和路演PPT"),e.createElementVNode("view",{class:"list-item"},"参赛项目需在报名截止前完成在线提交")])),e.createElementVNode("view",{class:"font-bold text-lg text-gray-800 mt-6 mb-3"},"联系方式"),e.createElementVNode("view",{class:"space-y-2 text-sm text-gray-700"},[s.value.contactInfo.phone?(e.openBlock(),e.createElementBlock("text",{key:0},"联系电话："+e.toDisplayString(s.value.contactInfo.phone),1)):(e.openBlock(),e.createElementBlock("text",{key:1},"联系人：竞赛组委会")),s.value.contactInfo.email?(e.openBlock(),e.createElementBlock("view",{key:2},"邮箱："+e.toDisplayString(s.value.contactInfo.email),1)):e.createCommentVNode("",!0),s.value.websiteUrl?(e.openBlock(),e.createElementBlock("view",{key:3},"官网："+e.toDisplayString(s.value.websiteUrl),1)):e.createCommentVNode("",!0)]),s.value.attachments&&s.value.attachments.length>0?(e.openBlock(),e.createElementBlock("view",{key:3,class:"mt-6"},[e.createElementVNode("view",{class:"font-bold text-lg text-gray-800 mb-3"},"相关资料"),e.createElementVNode("view",null,"无"),e.createElementVNode("view",{class:"space-y-3"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value.attachments,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:"flex-row items-center p-3 bg-gray-50 rounded-lg"},[e.createElementVNode("text",{class:"iconfont icon-file text-blue-500 mr-2"}),e.createElementVNode("text",{class:"flex-1 text-sm text-gray-700"},e.toDisplayString(t.fileName),1),e.createElementVNode("view",{class:"px-3 py-1 bg-blue-500 rounded-full"},[e.createElementVNode("text",{class:"text-xs text-white"},"下载")])])))),128))])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"mt-6"},[e.createElementVNode("view",{class:"font-bold text-lg text-gray-800 mb-3"},"相关竞赛"),e.createElementVNode("view",{class:"related-grid"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:"related-card"},[e.createElementVNode("view",{class:"related-image-container"},[e.createElementVNode("image",{src:t.image,class:"related-image"},null,8,["src"])]),e.createElementVNode("view",{class:"p-3"},[e.createElementVNode("text",{class:"font-bold text-sm text-gray-800"},e.toDisplayString(t.title),1),e.createElementVNode("view",{class:"flex-row items-center mt-1"},[e.createElementVNode("text",{class:"text-xs text-gray-500"},"报名截止: "+e.toDisplayString(t.deadline),1)])])])))),128))])])])):e.createCommentVNode("",!0),"schedule"===l.value?(e.openBlock(),e.createElementBlock("view",{key:1,class:"bg-white p-4 mt-2 shadow-sm"},[e.createElementVNode("view",{class:"relative"},[e.createElementVNode("view",{class:"timeline-line"}),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:"timeline-item"},[e.createElementVNode("view",{class:"timeline-dot-container"},[e.createElementVNode("view",{class:e.normalizeClass(["timeline-dot",t.active?"active-dot":""])},[e.createElementVNode("text",{class:"timeline-dot-text"},e.toDisplayString(a+1),1)],2)]),e.createElementVNode("view",{class:e.normalizeClass(["timeline-content",t.active?"active-content":""])},[e.createElementVNode("view",{class:"flex-row justify-between items-center mb-2"},[e.createElementVNode("text",{class:e.normalizeClass(["font-bold",t.active?"text-blue-800":"text-gray-700"])},e.toDisplayString(t.title),3),e.createElementVNode("text",{class:e.normalizeClass(["status-text",t.active?"active-status":"inactive-status"])},e.toDisplayString(t.status),3)]),e.createElementVNode("text",{class:"text-sm text-gray-700 mb-2"},e.toDisplayString(t.period),1),e.createElementVNode("text",{class:"text-xs text-gray-600"},e.toDisplayString(t.description),1)],2)])))),128))])])):e.createCommentVNode("",!0),"teams"===l.value?(e.openBlock(),e.createElementBlock("view",{key:2,class:"bg-white p-4 mt-2 shadow-sm"},[e.createElementVNode("view",{class:"flex-row items-center mb-4"},[e.createElementVNode("view",{class:"relative flex-1"},[e.createElementVNode("input",{type:"text",placeholder:"搜索队伍",class:"w-full pl-10 pr-4 py-2 bg-gray-100 rounded-lg text-sm"}),e.createElementVNode("text",{class:"iconfont icon-search search-icon"})]),e.createElementVNode("view",{class:"ml-2 px-3 py-2 bg-gray-100 rounded-lg text-sm text-gray-700"},[e.createElementVNode("text",{class:"iconfont icon-filter mr-1"}),e.createElementVNode("text",null,"筛选")])]),e.createElementVNode("view",{class:"space-y-4"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.teams,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:"team-card"},[e.createElementVNode("view",{class:"flex-row justify-between items-start"},[e.createElementVNode("view",null,[e.createElementVNode("text",{class:"font-bold text-gray-800"},e.toDisplayString(t.name),1),e.createElementVNode("view",{class:"flex-row items-center mt-1"},[e.createElementVNode("text",{class:"faculty-tag",style:e.normalizeStyle({backgroundColor:t.facultyColor+"20",color:t.facultyColor})},e.toDisplayString(t.faculty),5),e.createElementVNode("text",{class:"text-xs text-gray-500"},e.toDisplayString(t.memberCount)+"人团队",1)])]),e.createElementVNode("view",{class:"team-status",style:e.normalizeStyle({backgroundColor:t.statusColor+"20",color:t.statusColor})},e.toDisplayString(t.status),5)]),e.createElementVNode("text",{class:"text-sm text-gray-600 mt-3"},"项目简介："+e.toDisplayString(t.description),1),e.createElementVNode("view",{class:"flex-row items-center justify-between mt-3"},[e.createElementVNode("view",{class:"flex-row member-avatars"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.avatars,((t,a)=>(e.openBlock(),e.createElementBlock("image",{key:a,src:t,class:"member-avatar"},null,8,["src"])))),128)),t.remainingCount>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"member-avatar-more"},"+"+e.toDisplayString(t.remainingCount),1)):e.createCommentVNode("",!0)]),e.createElementVNode("text",{class:"text-blue-500 text-sm"},e.toDisplayString(t.actionText),1)])])))),128))]),e.createElementVNode("view",{class:"text-center mt-6"},[e.createElementVNode("button",{class:"load-more-btn"},"加载更多")])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"fixed-bottom"},[e.createElementVNode("button",{class:"team-btn"},[e.createElementVNode("text",{class:"iconfont icon-users mr-1"}),e.createElementVNode("text",null,"创建队伍")]),e.createElementVNode("button",{class:e.normalizeClass(["register-btn",{"disabled-btn":"0"===s.value.statusCode||"3"===s.value.statusCode}]),disabled:"0"===s.value.statusCode||"3"===s.value.statusCode},e.toDisplayString(g()),11,["disabled"])])],64))]))}},C={__name:"index",setup(t){function a(e){uni.showToast({title:`跳转到${e}`,icon:"none"})}function o(){uni.showModal({title:"退出确认",content:"确定要退出登录吗？",success:function(e){e.confirm&&uni.showToast({title:"已退出登录",icon:"success",success:()=>{setTimeout((()=>{uni.redirectTo({url:"/pages/login/login"})}),1500)}})}})}function n(e){"home"===e?uni.switchTab({url:"/pages/index/index"}):"competition"===e?uni.switchTab({url:"/pages/competition/index"}):"team"===e&&uni.switchTab({url:"/pages/team/list"})}function l(){uni.showActionSheet({itemList:["发布竞赛信息","招募队友","发布项目展示"],success:function(e){uni.showToast({title:`选择了: ${e.tapIndex}`,icon:"none"})}})}return(t,s)=>(e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"user-info-section"},[e.createElementVNode("view",{class:"user-header"},[e.createElementVNode("image",{class:"user-avatar",src:"https://images.unsplash.com/photo-1547425260-76bcadfb4f2c?w=200",mode:"aspectFill"}),e.createElementVNode("view",{class:"user-details"},[e.createElementVNode("text",{class:"user-name"},"李明"),e.createElementVNode("text",{class:"user-id"},"学号: 2023114514")]),e.createElementVNode("view",{class:"edit-btn"},[e.createElementVNode("text",{class:"iconfont icon-edit"})])]),e.createElementVNode("view",{class:"user-stats"},[e.createElementVNode("view",{class:"stat-item"},[e.createElementVNode("text",{class:"stat-value"},"4"),e.createElementVNode("text",{class:"stat-label"},"参与竞赛")]),e.createElementVNode("view",{class:"stat-item"},[e.createElementVNode("text",{class:"stat-value"},"2"),e.createElementVNode("text",{class:"stat-label"},"我的团队")]),e.createElementVNode("view",{class:"stat-item"},[e.createElementVNode("text",{class:"stat-value"},"1"),e.createElementVNode("text",{class:"stat-label"},"获得奖项")])])]),e.createElementVNode("view",{class:"menu-section"},[e.createElementVNode("view",{class:"menu-group"},[e.createElementVNode("view",{class:"menu-item",onClick:s[0]||(s[0]=e=>a("myCompetitions"))},[e.createElementVNode("text",{class:"iconfont icon-trophy menu-icon"}),e.createElementVNode("text",{class:"menu-text"},"我的竞赛"),e.createElementVNode("text",{class:"iconfont icon-arrow-left menu-arrow"})]),e.createElementVNode("view",{class:"menu-item",onClick:s[1]||(s[1]=e=>a("myTeams"))},[e.createElementVNode("text",{class:"iconfont icon-users menu-icon"}),e.createElementVNode("text",{class:"menu-text"},"我的团队"),e.createElementVNode("text",{class:"iconfont icon-arrow-left menu-arrow"})]),e.createElementVNode("view",{class:"menu-item",onClick:s[2]||(s[2]=e=>a("myAwards"))},[e.createElementVNode("text",{class:"iconfont icon-star menu-icon"}),e.createElementVNode("text",{class:"menu-text"},"我的获奖"),e.createElementVNode("text",{class:"iconfont icon-arrow-left menu-arrow"})])]),e.createElementVNode("view",{class:"menu-group"},[e.createElementVNode("view",{class:"menu-item",onClick:s[3]||(s[3]=e=>a("settings"))},[e.createElementVNode("text",{class:"iconfont icon-settings menu-icon"}),e.createElementVNode("text",{class:"menu-text"},"账号设置"),e.createElementVNode("text",{class:"iconfont icon-arrow-left menu-arrow"})]),e.createElementVNode("view",{class:"menu-item",onClick:s[4]||(s[4]=e=>a("feedback"))},[e.createElementVNode("text",{class:"iconfont icon-feedback menu-icon"}),e.createElementVNode("text",{class:"menu-text"},"意见反馈"),e.createElementVNode("text",{class:"iconfont icon-arrow-left menu-arrow"})]),e.createElementVNode("view",{class:"menu-item",onClick:s[5]||(s[5]=e=>a("about"))},[e.createElementVNode("text",{class:"iconfont icon-info-circle menu-icon"}),e.createElementVNode("text",{class:"menu-text"},"关于我们"),e.createElementVNode("text",{class:"iconfont icon-arrow-left menu-arrow"})])])]),e.createElementVNode("view",{class:"logout-btn",onClick:o},[e.createElementVNode("text",null,"退出登录")]),e.createVNode(g,{"active-tab":"profile",onTabChange:n,onPublish:l})]))}};__definePage("pages/login/login",u),__definePage("pages/index/index",h),__definePage("pages/team/detail",v),__definePage("pages/team/list",E),__definePage("pages/team/create",w),__definePage("pages/competition/index",V),__definePage("pages/competition/create",b),__definePage("pages/competition/detail",B),__definePage("pages/profile/index",C);const T={onLaunch:function(){t("warn","at App.vue:4","当前组件仅支持 uni_modules 目录结构 ，请升级 HBuilderX 到 3.1.0 版本以上！"),t("log","at App.vue:5","App Launch")},onShow:function(){t("log","at App.vue:8","App Show")},onHide:function(){t("log","at App.vue:11","App Hide")}};const{app:_,Vuex:S,Pinia:I}={app:e.createVueApp(T)};uni.Vuex=S,uni.Pinia=I,_.provide("__globalStyles",__uniConfig.styles),_._component.mpType="app",_._component.render=()=>{},_.mount("#app")}(Vue);
