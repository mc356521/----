if (typeof Promise !== "undefined" && !Promise.prototype.finally) {
  Promise.prototype.finally = function(callback) {
    const promise = this.constructor;
    return this.then(
      (value) => promise.resolve(callback()).then(() => value),
      (reason) => promise.resolve(callback()).then(() => {
        throw reason;
      })
    );
  };
}
;
if (typeof uni !== "undefined" && uni && uni.requireGlobal) {
  const global2 = uni.requireGlobal();
  ArrayBuffer = global2.ArrayBuffer;
  Int8Array = global2.Int8Array;
  Uint8Array = global2.Uint8Array;
  Uint8ClampedArray = global2.Uint8ClampedArray;
  Int16Array = global2.Int16Array;
  Uint16Array = global2.Uint16Array;
  Int32Array = global2.Int32Array;
  Uint32Array = global2.Uint32Array;
  Float32Array = global2.Float32Array;
  Float64Array = global2.Float64Array;
  BigInt64Array = global2.BigInt64Array;
  BigUint64Array = global2.BigUint64Array;
}
;
if (uni.restoreGlobal) {
  uni.restoreGlobal(Vue, weex, plus, setTimeout, clearTimeout, setInterval, clearInterval);
}
(function(vue) {
  "use strict";
  const ON_SHOW = "onShow";
  function formatAppLog(type, filename, ...args) {
    if (uni.__log__) {
      uni.__log__(type, filename, ...args);
    } else {
      console[type].apply(console, [...args, filename]);
    }
  }
  function resolveEasycom(component, easycom) {
    return typeof component === "string" ? easycom : component;
  }
  const createHook = (lifecycle) => (hook, target = vue.getCurrentInstance()) => {
    !vue.isInSSRComponentSetup && vue.injectHook(lifecycle, hook, target);
  };
  const onShow = /* @__PURE__ */ createHook(ON_SHOW);
  const test = {
    // API基础路径
    baseUrl: "http://103.38.83.91:8080",
    // 超时时间
    timeout: 1e5,
    // 上传接口
    uploadUrl: "/api/upload",
    // WebSocket地址
    wsUrl: "ws://103.38.83.91:8080/ws",
    // 调试模式
    debug: true,
    // 版本号
    version: "1.0.0",
    // 环境名称
    env: "test"
  };
  const config = {
    // API基础路径
    baseUrl: "http://localhost:8080",
    // 超时时间
    timeout: 1e5,
    // 上传接口 
    uploadUrl: "/api/upload",
    // WebSocket地址
    wsUrl: "ws://localhost:8080/ws",
    // 调试模式
    debug: true,
    // 版本号
    version: "1.0.0",
    // 环境名称
    env: "development"
  };
  const prod = {
    // API基础路径
    baseUrl: "http://103.38.83.91:8080",
    // 超时时间
    timeout: 1e5,
    // 上传接口
    uploadUrl: "/api/upload",
    // WebSocket地址
    wsUrl: "ws://103.38.83.91:8080/ws",
    // 调试模式
    debug: false,
    // 版本号
    version: "1.0.0",
    // 环境名称
    env: "production"
  };
  const envConfigs = {
    development: config,
    test,
    production: prod
  };
  const defaultEnv = "dev";
  function getEnv() {
    let currentEnv = "development";
    {
      formatAppLog("log", "at config/env/index.js:28", "当前平台:", "app");
    }
    const envConfig = envConfigs[currentEnv] || envConfigs[defaultEnv];
    envConfig.runtimePlatform = "app";
    envConfig.actualBaseUrl = envConfig.baseUrl;
    return envConfig;
  }
  const env$1 = getEnv();
  getEnv();
  const env = getEnv();
  if (env.debug) {
    formatAppLog("log", "at utils/request.js:11", "当前API环境配置:", env);
    formatAppLog("log", "at utils/request.js:12", "API基础路径:", env.baseUrl);
    if (env.actualBaseUrl) {
      formatAppLog("log", "at utils/request.js:14", "实际API地址:", env.actualBaseUrl);
    }
  }
  const TOKEN_KEY = "token";
  const getToken = () => {
    return uni.getStorageSync(TOKEN_KEY) || "";
  };
  const setToken = (token) => {
    uni.setStorageSync(TOKEN_KEY, token);
  };
  const requestInterceptor = (config2) => {
    const token = getToken();
    if (token) {
      config2.header["Authorization"] = `Bearer ${token}`;
      if (env.debug) {
        formatAppLog("log", "at utils/request.js:49", "发送请求头Authorization:", `Bearer ${token}`);
      }
    }
    if (!config2.header["Content-Type"]) {
      config2.header["Content-Type"] = "application/json";
    }
    if (env.debug) {
      formatAppLog("log", "at utils/request.js:60", "完整请求配置:", {
        url: config2.url,
        method: config2.method,
        headers: config2.header,
        data: config2.data,
        params: config2.params
      });
      if (config2.url.includes("/users/register")) {
        formatAppLog("log", "at utils/request.js:70", "注册请求完整数据:", JSON.stringify(config2.data));
        formatAppLog("log", "at utils/request.js:71", "注册请求Content-Type:", config2.header["Content-Type"]);
      }
    }
    return config2;
  };
  const responseInterceptor = (response) => {
    if (response.statusCode === 200) {
      if (response.config && response.config.url && (response.config.url.includes("/users/login") || response.config.url.includes("/user/login"))) {
        if (response.data && response.data.data && typeof response.data.data === "string") {
          setToken(response.data.data);
          if (env.debug) {
            formatAppLog("log", "at utils/request.js:93", "已保存token:", response.data.data);
          }
          return Promise.resolve(response.data);
        }
      }
      return Promise.resolve(response.data);
    } else {
      const errorMsg = `请求失败: ${response.statusCode}`;
      if (env.debug) {
        formatAppLog("error", "at utils/request.js:108", "请求失败状态码:", response.statusCode);
        formatAppLog("error", "at utils/request.js:109", "请求地址:", response.config.url);
        formatAppLog("error", "at utils/request.js:110", "请求方法:", response.config.method);
        formatAppLog("error", "at utils/request.js:111", "请求头:", response.config.header);
        formatAppLog("error", "at utils/request.js:112", "请求数据:", response.config.data);
        formatAppLog("error", "at utils/request.js:113", "响应数据:", response.data);
      }
      if (response.statusCode === 400) {
        formatAppLog("error", "at utils/request.js:118", "400错误详情:", response.data);
        formatAppLog("error", "at utils/request.js:119", "请求的原始数据:", response.config.data);
      }
      uni.showToast({
        title: errorMsg,
        icon: "none"
      });
      if (response.statusCode === 401 || response.statusCode === 403) {
        setToken("");
        setTimeout(() => {
          uni.navigateTo({
            url: "/pages/login/login"
          });
        }, 1500);
      }
      return Promise.reject(new Error(`HTTP错误: ${response.statusCode}`));
    }
  };
  const request = (options) => {
    const config2 = {
      url: options.url || "",
      method: options.method || "GET",
      data: options.data || {},
      params: options.params || {},
      header: options.header || {},
      timeout: options.timeout || env.timeout || 6e4
    };
    if (!config2.url.startsWith("http://") && !config2.url.startsWith("https://")) {
      if (!config2.url.startsWith(env.baseUrl)) {
        if (config2.url.startsWith("/") && env.baseUrl.endsWith("/")) {
          config2.url = env.baseUrl + config2.url.substring(1);
        } else if (!config2.url.startsWith("/") && !env.baseUrl.endsWith("/")) {
          config2.url = env.baseUrl + "/" + config2.url;
        } else {
          config2.url = env.baseUrl + config2.url;
        }
      }
    }
    if (config2.method === "GET" && Object.keys(config2.params).length > 0) {
      const queryString = Object.keys(config2.params).map((key) => `${encodeURIComponent(key)}=${encodeURIComponent(config2.params[key])}`).join("&");
      config2.url = `${config2.url}${config2.url.includes("?") ? "&" : "?"}${queryString}`;
    }
    if (env.debug) {
      formatAppLog("log", "at utils/request.js:187", `${config2.method} 请求:`, config2.url);
      if (config2.data && Object.keys(config2.data).length > 0) {
        formatAppLog("log", "at utils/request.js:189", "请求数据:", config2.data);
      }
    }
    const interceptedConfig = requestInterceptor(config2);
    return new Promise((resolve, reject) => {
      uni.request({
        url: interceptedConfig.url,
        method: interceptedConfig.method,
        data: interceptedConfig.data,
        header: interceptedConfig.header,
        timeout: interceptedConfig.timeout,
        success: (res) => {
          if (env.debug) {
            formatAppLog("log", "at utils/request.js:206", "响应数据:", res);
          }
          res.config = interceptedConfig;
          responseInterceptor(res).then((data) => resolve(data)).catch((error) => reject(error));
        },
        fail: (err) => {
          if (env.debug) {
            formatAppLog("error", "at utils/request.js:219", "请求失败:", err);
          }
          uni.showToast({
            title: "网络错误，请检查网络连接",
            icon: "none"
          });
          reject(new Error("网络请求失败"));
        }
      });
    });
  };
  const userApi = {
    /**
     * 获取学校列表
     * @returns {Promise} 请求结果Promise对象
     */
    getSchools() {
      return request({
        url: "/api/schools",
        method: "GET"
      });
    },
    /**
     * 用户登录
     * @param {Object} data - 登录参数，包含phone和password
     * @returns {Promise} 请求结果Promise对象
     */
    login(data) {
      formatAppLog("log", "at api/modules/user.js:27", "登录请求参数:", data);
      return request({
        url: "/users/login",
        method: "POST",
        header: {
          "Content-Type": "application/x-www-form-urlencoded"
        },
        data: {
          phone: data.phone,
          password: data.password
        }
      }).then((result) => {
        formatAppLog("log", "at api/modules/user.js:39", "登录响应:", result);
        if (result && result.code === 200 && result.data) {
          const token = result.data;
          uni.setStorageSync("token", token);
          formatAppLog("log", "at api/modules/user.js:46", "登录成功，已保存token");
          return {
            token,
            isLogin: true
          };
        }
        if (result && result.message) {
          throw new Error(result.message);
        }
        return result;
      });
    },
    /**
     * 用户注册
     * @param {Object} data - 注册参数，包含手机号、密码等信息
     * @returns {Promise} 请求结果Promise对象
     */
    register(data) {
      formatAppLog("log", "at api/modules/user.js:69", "注册请求参数 (原始):", data);
      const requestData = {
        phoneNumber: data.phoneNumber || data.phone,
        // 兼容处理，优先使用phoneNumber，如果没有则使用phone
        password: data.password,
        realName: data.realName,
        schoolId: data.schoolId || 1,
        // 确保有默认值
        role: data.role || "student",
        // 确保有默认值
        major: data.major,
        studentTeacherId: data.studentTeacherId
      };
      if (typeof requestData.studentTeacherId === "number") {
        requestData.studentTeacherId = String(requestData.studentTeacherId);
      }
      if (typeof requestData.schoolId !== "number") {
        requestData.schoolId = Number(requestData.schoolId) || 1;
      }
      formatAppLog("log", "at api/modules/user.js:91", "注册请求数据 (转换后):", requestData);
      formatAppLog("log", "at api/modules/user.js:92", "注册请求URL:", "/users/register");
      return request({
        url: "/users/register",
        method: "POST",
        data: requestData,
        header: {
          "Content-Type": "application/json"
        }
      }).then((response) => {
        formatAppLog("log", "at api/modules/user.js:102", "注册响应:", response);
        return response;
      }).catch((error) => {
        formatAppLog("error", "at api/modules/user.js:105", "注册请求错误:", error);
        if (error.response && error.response.data) {
          formatAppLog("error", "at api/modules/user.js:107", "服务器错误详情:", error.response.data);
        }
        throw error;
      });
    },
    /**
     * 获取用户信息
     * @returns {Promise} 请求结果Promise对象
     */
    getUserInfo() {
      return request({
        url: "/user/info",
        method: "GET"
      });
    },
    /**
     * 获取用户角色
     * @param {String} token - 用户token，如不传则使用本地存储的token
     * @returns {Promise} 请求结果Promise对象，返回用户角色（student/teacher/admin）
     */
    getUserRole(token) {
      const authToken = token || getToken();
      if (!authToken) {
        return Promise.reject(new Error("未登录"));
      }
      return request({
        url: `/users/role/parse?token=${encodeURIComponent(authToken)}`,
        // 直接在URL中添加token作为查询参数
        method: "POST",
        header: {
          "Content-Type": "application/x-www-form-urlencoded"
        }
      });
    },
    /**
     * 解析用户角色
     * @param {String} token - 用户token
     * @returns {Promise} 请求结果Promise对象，返回用户角色（student/teacher/admin）
     */
    parseUserRole(token) {
      if (!token) {
        return Promise.reject(new Error("未提供token"));
      }
      return request({
        url: `/users/role/parse?token=${encodeURIComponent(token)}`,
        method: "POST",
        header: {
          "Content-Type": "application/x-www-form-urlencoded"
        }
      });
    },
    /**
     * 退出登录
     * @returns {Promise} 请求结果Promise对象
     */
    logout() {
      return request({
        url: "/user/logout",
        method: "POST"
      }).finally(() => {
        setToken("");
      });
    },
    /**
     * 修改用户信息
     * @param {Object} data - 要修改的用户信息
     * @returns {Promise} 请求结果Promise对象
     */
    updateUserInfo(data) {
      return request({
        url: "/user/update",
        method: "PUT",
        data
      });
    },
    /**
     * 修改密码
     * @param {Object} data - 包含旧密码和新密码
     * @returns {Promise} 请求结果Promise对象
     */
    changePassword(data) {
      return request({
        url: "/user/password",
        method: "PUT",
        data
      });
    },
    /**
     * 获取用户个人资料信息
     * @returns {Promise} 用户个人资料的Promise对象
     */
    getUserProfile() {
      return request({
        url: "/users/profile",
        method: "GET"
      });
    },
    /**
     * 更新用户个人资料
     * @param {Object} data - 更新的个人资料数据
     * @param {String} data.realName - 真实姓名
     * @param {Number} data.schoolId - 学校ID
     * @param {String} data.major - 专业
     * @param {String} data.bio - 个人简介
     * @param {Array} data.skillTags - 技能标签数组
     * @param {Array} data.awardsHistory - 获奖经历数组
     * @returns {Promise} 更新结果的Promise对象
     */
    updateUserProfile(data) {
      return request({
        url: "/users/profile",
        method: "PUT",
        data,
        header: {
          "Content-Type": "application/json"
        }
      });
    },
    /**
     * 上传用户头像
     * @param {String} filePath - 本地文件路径
     * @param {Function} onProgress - 上传进度回调函数
     * @returns {Promise} 上传结果的Promise对象
     */
    uploadAvatar(filePath, onProgress) {
      return new Promise((resolve, reject) => {
        const uploadTask = uni.uploadFile({
          url: getEnv().baseUrl + "/users/avatar",
          filePath,
          name: "file",
          header: {
            "Authorization": "Bearer " + getToken()
          },
          success: (res) => {
            let data;
            try {
              data = JSON.parse(res.data);
              resolve(data);
            } catch (e) {
              reject(new Error("解析响应数据失败"));
            }
          },
          fail: (err) => {
            reject(err);
          }
        });
        if (onProgress && typeof onProgress === "function") {
          uploadTask.onProgressUpdate((res) => {
            onProgress(res.progress);
          });
        }
      });
    },
    /**
     * 获取所有技能标签（按分类分组）
     * @returns {Promise} 技能标签的Promise对象
     */
    getSkillTags() {
      return request({
        url: "/api/skill-tags/group-by-category",
        method: "GET"
      });
    },
    /**
     * 获取用户勋章数据
     * @returns {Promise} 用户勋章数据的Promise对象
     */
    getUserBadges() {
      return request({
        url: "/user/honors/simple-badges",
        method: "GET",
        header: {
          "Authorization": "Bearer " + getToken()
        }
      });
    },
    /**
     * 获取用户详细勋章数据
     * @returns {Promise} 用户详细勋章数据的Promise对象
     */
    getUserBadgesDetail() {
      return request({
        url: "/user/honors/badges",
        method: "GET",
        header: {
          "Authorization": "Bearer " + getToken()
        }
      });
    }
  };
  const competitionsApi = {
    /**
     * 获取竞赛列表
     * @param {Object} params - 查询参数
     * @param {String} [params.pageNum] - 页码，可选
     * @param {String} [params.pageSize] - 页数大小，可选
     * @param {Array} [params.keyword] - 关键字数组，可选
     * @param {String} [params.categoryId] - 类型，可选
     * @param {String} [params.level] - 等级，可选
     * @param {Boolean} [params.isHot] - 是否热门竞赛，可选
     * @returns {Promise} 请求结果Promise对象
     */
    getCompetitionsList(params = {}) {
      return request({
        url: "/competitions/list",
        method: "GET",
        params
      });
    },
    /**
     * 获取竞赛详情
     * @param {Number|String} id - 竞赛ID
     * @returns {Promise} 请求结果Promise对象
     */
    getCompetitionDetail(id) {
      const token = getToken();
      if (!token) {
        uni.showToast({
          title: "请先登录",
          icon: "none"
        });
        setTimeout(() => {
          uni.navigateTo({
            url: "/pages/login/login"
          });
        }, 1500);
        return Promise.reject(new Error("未登录"));
      }
      return request({
        url: `/competitions/${id}`,
        method: "GET",
        header: {
          "Authorization": `Bearer ${token}`
        }
      });
    },
    /**
     * 创建竞赛（仅管理员可用）
     * @param {Object} data - 竞赛信息
     * @param {String} data.title - 竞赛标题
     * @param {String} data.registrationStart - 报名开始时间
     * @param {String} data.registrationDeadline - 报名截止时间
     * @param {String} data.status - 竞赛状态
     * @param {String} data.level - 竞赛级别
     * @param {String} data.organizer - 主办方
     * @param {String} data.description - 详细描述
     * @param {String} [data.shortDescription] - 简短描述
     * @param {String} [data.requirements] - 参赛要求
     * @param {Boolean} [data.isHot] - 是否热门竞赛
     * @param {Number} data.teamSize - 团队最小人数
     * @param {Number} data.teamMax - 团队最大人数
     * @param {String} [data.websiteUrl] - 竞赛官网
     * @param {Object} data.contactInfo - 联系信息
     * @param {Array} data.categoryIds - 关联的分类ID列表
     * @returns {Promise} 请求结果Promise对象
     */
    createCompetition(data) {
      const token = getToken();
      if (!token) {
        uni.showToast({
          title: "请先登录",
          icon: "none"
        });
        setTimeout(() => {
          uni.navigateTo({
            url: "/pages/login/login"
          });
        }, 1500);
        return Promise.reject(new Error("未登录"));
      }
      formatAppLog("log", "at api/modules/competitions.js:99", "准备创建竞赛，数据:", data);
      return request({
        url: "/competitions",
        method: "POST",
        data,
        header: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${token}`
        }
      }).then((res) => {
        formatAppLog("log", "at api/modules/competitions.js:110", "创建竞赛响应:", res);
        return res;
      }).catch((err) => {
        formatAppLog("error", "at api/modules/competitions.js:113", "创建竞赛出错:", err);
        throw err;
      });
    },
    /**
     * 创建比赛阶段
     * @param {Object} data - 阶段信息
     * @param {Number} data.competitionId - 关联的竞赛ID
     * @param {String} data.stageName - 阶段名称
     * @param {String} data.startTime - 开始时间
     * @param {String} data.endTime - 结束时间
     * @param {String} data.description - 阶段描述
     * @param {String} data.status - 阶段状态 (pending/active/completed)
     * @param {String} data.metadata - 元数据JSON字符串，包含地点等信息
     * @returns {Promise} 请求结果Promise对象
     */
    createCompetitionStage(data) {
      const token = getToken();
      if (!token) {
        uni.showToast({
          title: "请先登录",
          icon: "none"
        });
        setTimeout(() => {
          uni.navigateTo({
            url: "/pages/login/login"
          });
        }, 1500);
        return Promise.reject(new Error("未登录"));
      }
      return request({
        url: "/competitionStages",
        method: "POST",
        data,
        header: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${token}`
        }
      });
    },
    /**
     * 批量创建比赛阶段
     * @param {Array} stages - 阶段信息数组
     * @param {Number} competitionId - 关联的竞赛ID
     * @returns {Promise} 请求结果Promise对象
     */
    createCompetitionStages(stages, competitionId) {
      const token = getToken();
      if (!token) {
        uni.showToast({
          title: "请先登录",
          icon: "none"
        });
        setTimeout(() => {
          uni.navigateTo({
            url: "/pages/login/login"
          });
        }, 1500);
        return Promise.reject(new Error("未登录"));
      }
      const stagesWithCompetitionId = stages.map((stage) => ({
        ...stage,
        competitionId
      }));
      return Promise.all(
        stagesWithCompetitionId.map(
          (stage) => this.createCompetitionStage(stage)
        )
      );
    },
    /**
     * 获取所有竞赛分类
     * @returns {Promise} 包含所有竞赛分类的Promise对象
     */
    getCompetitionCategories() {
      return request({
        url: "/competitions/categories",
        method: "GET"
      });
    },
    /**
     * 获取竞赛基本信息列表（用于选择）
     * @returns {Promise} 包含竞赛基本信息的Promise对象
     */
    getCompetitionsBasicInfo() {
      return request({
        url: "/competitions/basic-info",
        method: "GET"
      });
    },
    /**
     * 获取竞赛阶段列表
     * @param {Number|String} competitionId - 竞赛ID
     * @returns {Promise} 请求结果Promise对象
     */
    getCompetitionStages(competitionId) {
      return request({
        url: `/competitionStages/list/${competitionId}`,
        method: "GET"
      });
    },
    /**
     * 获取比赛结果
     * @param {Number|String} competitionId - 竞赛ID
     * @returns {Promise} 请求结果Promise对象
     */
    getCompetitionResults(competitionId) {
      return request({
        url: `/competitionResults/${competitionId}`,
        method: "GET"
      });
    },
    /**
     * 获取竞赛报名团队数量
     * @param {Number|String} competitionId - 竞赛ID
     * @returns {Promise} 请求结果Promise对象，包含团队数量信息
     */
    getCompetitionTeamCount(competitionId) {
      return request({
        url: `/competitions/${competitionId}/team-count`,
        method: "GET"
      });
    },
    /**
     * 按文件类型获取竞赛附件
     * @param {Number|String} competitionId - 竞赛ID
     * @param {String} fileType - 文件类型，默认为 'document'
     * @returns {Promise} 请求结果Promise对象，包含附件列表
     */
    getCompetitionAttachmentsByType(competitionId, fileType = "document") {
      return request({
        url: `/competitions/attachments/list-by-type/${competitionId}`,
        method: "GET",
        params: {
          fileType
        }
      });
    },
    /**
     * 获取用户参与的所有竞赛
     * @param {Number|String} userId - 用户ID，如果不传则获取当前登录用户的参赛信息
     * @returns {Promise} 请求结果Promise对象
     */
    getUserParticipatedCompetitions(userId) {
      return request({
        url: userId ? `/competitions/user/${userId}/participated` : "/competitions/user/participated",
        method: "GET"
      });
    }
  };
  const teamApi = {
    /**
     * 获取团队列表
     * @param {Object} params - 查询参数
     * @param {Number} params.pageNum - 页码
     * @param {Number} params.pageSize - 每页条数
     * @param {String} params.keyword - 搜索关键词
     * @param {Number} params.categoryId - 分类ID
     * @param {Number} params.competitionId - 竞赛ID
     * @param {Boolean} params.orderByViewCount - 是否按浏览量排序
     * @returns {Promise} 团队列表的Promise对象
     */
    getTeamList(params = {}) {
      return request({
        url: "/teams/list",
        method: "GET",
        params
      });
    },
    /**
     * 获取团队详情
     * @param {Number} id 团队ID
     * @returns {Promise} 团队详情的Promise对象
     */
    getTeamDetail(id) {
      return request({
        url: `/teams/${id}`,
        method: "GET"
      });
    },
    /**
     * 获取团队成员
     * @param {Number} teamId 团队ID
     * @returns {Promise} 团队成员的Promise对象
     */
    getTeamMembers(teamId) {
      return request({
        url: `/teams/${teamId}/members`,
        method: "GET"
      });
    },
    /**
      * 申请加入团队
      * @param {Object} data - 申请数据
      * @param {Number} data.teamId - 要申请的队伍ID
      * @param {Number} data.roleId - 要申请的角色ID
      * @param {String} data.message - 申请留言
      * @returns {Promise} 申请结果的Promise对象
      */
    applyTeam(data) {
      if (!data.teamId || !data.roleId || !data.message) {
        formatAppLog("error", "at api/modules/team.js:61", "申请加入团队缺少必要参数", data);
        return Promise.reject(new Error("申请加入团队缺少必要参数"));
      }
      const requestData = {
        teamId: Number(data.teamId),
        roleId: Number(data.roleId),
        message: String(data.message)
      };
      formatAppLog("log", "at api/modules/team.js:72", "申请加入团队，请求数据:", requestData);
      return request({
        url: "/team-applications",
        method: "POST",
        data: requestData,
        header: {
          "Content-Type": "application/json"
        }
      });
    },
    /**
     * 获取我的申请列表
     * @param {Object} params - 查询参数
     * @param {String} params.status - 按申请状态筛选
     * @param {Number} params.pageNum - 页码
     * @param {Number} params.pageSize - 每页数量
     * @returns {Promise} 请求结果Promise对象
     */
    getMyApplications(params = {}) {
      return request({
        url: "/team-applications/list",
        method: "GET",
        params: { ...params, role: "applicant" }
      });
    },
    /**
     * 获取我收到的申请列表 (队长)
     * @param {Object} params - 查询参数
     * @param {Number} params.teamId - 按队伍ID筛选
     * @param {String} params.status - 按申请状态筛选
     * @param {Number} params.pageNum - 页码
     * @param {Number} params.pageSize - 每页数量
     * @returns {Promise} 请求结果Promise对象
     */
    getTeamApplications(params = {}) {
      return request({
        url: "/team-applications/list",
        method: "GET",
        params: { ...params, role: "leader" }
      });
    },
    /**
     * 处理队伍申请 (队长)
     * @param {Number} id - 申请ID
     * @param {Object} data - 处理数据
     * @param {String} data.status - 处理结果: "approved" 或 "rejected"
     * @param {String} data.reviewNotes - 处理备注
     * @returns {Promise} 请求结果Promise对象
     */
    handleApplication(id, data) {
      return request({
        url: `/team-applications/${id}`,
        method: "PUT",
        data
      });
    },
    /**
     * 取消申请 (申请者)
     * @param {Number} id - 申请ID
     * @returns {Promise} 请求结果Promise对象
     */
    cancelApplication(id) {
      return request({
        url: `/team-applications/${id}`,
        method: "DELETE"
      });
    },
    /**
     * 检查用户是否申请或加入队伍
     * @param {Number} teamId - 队伍ID
     * @returns {Promise} 请求结果Promise对象
     */
    checkTeamStatus(teamId) {
      return request({
        url: `/teams/${teamId}/has-applied`,
        method: "GET"
      });
    },
    /**
     * 解散团队 (队长)
     * @param {Number} teamId - 团队ID
     * @returns {Promise} 请求结果Promise对象
     */
    disbandTeam(teamId) {
      return request({
        url: `/teams/${teamId}/dissolve`,
        method: "POST"
      });
    },
    /**
     * 退出团队 (队员)
     * @param {String|Number} teamId - 团队ID
     * @returns {Promise} 请求结果Promise对象
     */
    leaveTeam(teamId) {
      return request({
        url: `/team-members/teams/${teamId}`,
        method: "DELETE"
      });
    },
    /**
     * 创建团队
     * @param {Object} data - 团队数据
     * @param {Number} data.competitionId - 关联竞赛ID
     * @param {String} data.name - 团队名称
     * @param {String} data.description - 团队描述
     * @param {String} data.direction - 研究方向
     * @param {String} data.recruitmentDeadline - 招募截止日期
     * @param {Object} data.contactInfo - 联系方式
     * @param {Array} data.teacherIds - 指导老师ID列表
     * @param {Array} data.teacherRoles - 指导老师角色列表
     * @param {Array} data.roles - 招募角色列表
     * @returns {Promise} 创建结果的Promise对象
     */
    createTeam(data) {
      return request({
        url: "/teams",
        method: "POST",
        data
      });
    },
    /**
     * 获取我的队伍列表
     * @returns {Promise} 请求结果Promise对象
     */
    getMyTeams() {
      return request({
        url: "/teams/my",
        method: "GET"
      });
    },
    /**
     * 删除团队记录（仅适用于已解散的团队）
     * @param {Number|String} teamId - 团队ID
     * @returns {Promise} 请求结果Promise对象
     */
    deleteTeamRecord(teamId) {
      return request({
        url: `/teams/${teamId}/delete-record`,
        method: "POST"
      });
    },
    /**
     * 获取AI智能推荐的队伍
     * @param {Object} params - 查询参数
     * @param {Boolean} params.useCache - 是否使用服务器端缓存的结果
     * @returns {Promise} 智能推荐队伍的Promise对象
     */
    getRecommendedTeams(params = { useCache: true }) {
      return request({
        url: "/teams/recommend",
        method: "GET",
        params
      });
    },
    /**
     * 移除团队成员 (队长)
     * @param {Number} teamId - 团队ID
     * @param {Number} memberId - 要移除的成员ID
     * @returns {Promise} 请求结果Promise对象
     */
    removeTeamMember(teamId, memberId) {
      return request({
        url: `/teams/${teamId}/members/${memberId}`,
        method: "DELETE"
      });
    },
    /**
     * 更新团队基本信息（队长）
     * @param {Object} data - 团队数据
     * @param {Number} data.id - 团队ID（必需）
     * @param {String} data.name - 团队名称（必需）
     * @param {String} data.description - 团队简介
     * @param {String} data.direction - 研究方向
     * @param {String} data.recruitmentDeadline - 招募截止时间
     * @param {Object} data.contactInfo - 联系方式
     * @returns {Promise} 更新结果的Promise对象
     */
    updateTeamInfo(data) {
      if (!data.id || !data.name) {
        formatAppLog("error", "at api/modules/team.js:268", "更新团队信息缺少必要参数:", data);
        return Promise.reject(new Error("更新团队信息缺少团队ID或团队名称"));
      }
      return request({
        url: "/teams",
        method: "PUT",
        data
      });
    }
  };
  const baseApiUrl$1 = config.baseUrl;
  function getTaskList(params) {
    return request({
      url: `${baseApiUrl$1}/tasks/list`,
      method: "GET",
      params
    });
  }
  function getTaskParticipants(taskId, params) {
    return request({
      url: `${baseApiUrl$1}/tasks/${taskId}/participants`,
      method: "GET",
      params
    });
  }
  function getTaskDetail(id) {
    return request({
      url: `${baseApiUrl$1}/tasks/${id}`,
      method: "GET"
    });
  }
  function createTask(data) {
    return request({
      url: `${baseApiUrl$1}/tasks`,
      method: "POST",
      data
    });
  }
  function updateTask(id, data) {
    return request({
      url: `${baseApiUrl$1}/tasks/${id}`,
      method: "PUT",
      data
    });
  }
  function updateTaskStatus(id, data) {
    return request({
      url: `${baseApiUrl$1}/tasks/${id}/status`,
      method: "PUT",
      data
    });
  }
  function deleteTask(id) {
    return request({
      url: `${baseApiUrl$1}/tasks/${id}`,
      method: "DELETE"
    });
  }
  function toggleFavoriteTask(id, isFavorite) {
    return request({
      url: `${baseApiUrl$1}/tasks/${id}/favorite`,
      method: isFavorite ? "POST" : "DELETE"
    });
  }
  function applyTask(id) {
    return request({
      url: `${baseApiUrl$1}/tasks/${id}/apply`,
      method: "POST"
    });
  }
  function getTaskCategories() {
    return request({
      url: `${baseApiUrl$1}/taskCategories`,
      method: "GET"
    });
  }
  function getRewardTypes() {
    return request({
      url: `${baseApiUrl$1}/rewardTypes`,
      method: "GET"
    });
  }
  function getMyCreatedTasks(params) {
    return request({
      url: `${baseApiUrl$1}/tasks/my/created`,
      method: "GET",
      params
    });
  }
  function getMyParticipatedTasks(params) {
    return request({
      url: `${baseApiUrl$1}/tasks/my/participated`,
      method: "GET",
      params
    });
  }
  function removeTaskParticipant(taskId, participantId) {
    return request({
      url: `${baseApiUrl$1}/tasks/${taskId}/participants/${participantId}`,
      method: "DELETE"
    });
  }
  function updateParticipationStatus(participationId, data, taskId) {
    const requestData = {
      ...data,
      taskId
    };
    return request({
      url: `${baseApiUrl$1}/tasks/my/participation/record/${participationId}/status`,
      method: "PUT",
      data: requestData
    });
  }
  const tasksApi = {
    getTaskList,
    getTaskDetail,
    createTask,
    updateTask,
    updateTaskStatus,
    deleteTask,
    toggleFavoriteTask,
    applyTask,
    getTaskCategories,
    getRewardTypes,
    getMyCreatedTasks,
    getMyParticipatedTasks,
    getTaskParticipants,
    removeTaskParticipant,
    updateParticipationStatus
  };
  const baseApiUrl = config.baseUrl;
  function createTaskApplication(data) {
    return request({
      url: `${baseApiUrl}/task-applications`,
      method: "POST",
      data
    });
  }
  function getTaskApplicationList(params) {
    return request({
      url: `${baseApiUrl}/task-applications/list`,
      method: "GET",
      params
    });
  }
  function updateTaskApplication(id, data) {
    return request({
      url: `${baseApiUrl}/task-applications/${id}`,
      method: "PUT",
      data
    });
  }
  function cancelTaskApplication(id) {
    return request({
      url: `${baseApiUrl}/task-applications/${id}`,
      method: "DELETE"
    });
  }
  function checkTaskApplication(taskId) {
    return request({
      url: `${baseApiUrl}/task-participations/check`,
      method: "GET",
      params: { taskId }
    });
  }
  function getTaskApplicationDetail(id) {
    return request({
      url: `${baseApiUrl}/task-applications/${id}`,
      method: "GET"
    });
  }
  const taskApplicationApi = {
    createTaskApplication,
    getTaskApplicationList,
    updateTaskApplication,
    cancelTaskApplication,
    checkTaskApplication,
    getTaskApplicationDetail
  };
  const taskApplicationsApi = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
    __proto__: null,
    cancelTaskApplication,
    checkTaskApplication,
    createTaskApplication,
    default: taskApplicationApi,
    getTaskApplicationDetail,
    getTaskApplicationList,
    updateTaskApplication
  }, Symbol.toStringTag, { value: "Module" }));
  const competitionResultsApi = {
    /**
     * 获取比赛结果列表
     * @param {Number|String} competitionId - 竞赛ID
     * @returns {Promise} 请求结果Promise对象
     */
    getCompetitionResults(competitionId) {
      const token = getToken();
      if (!token) {
        uni.showToast({
          title: "请先登录",
          icon: "none"
        });
        setTimeout(() => {
          uni.navigateTo({
            url: "/pages/login/login"
          });
        }, 1500);
        return Promise.reject(new Error("未登录"));
      }
      return request({
        url: `/competitionResults/competition/${competitionId}`,
        method: "GET",
        header: {
          "Authorization": `Bearer ${token}`
        }
      });
    },
    /**
     * 获取队伍详情
     * @param {Number|String} teamId - 队伍ID
     * @returns {Promise} 请求结果Promise对象
     */
    getTeamDetail(teamId) {
      return request({
        url: `/teams/${teamId}`,
        method: "GET"
      });
    },
    /**
     * 获取团队成员
     * @param {Number|String} teamId - 团队ID
     * @returns {Promise} 团队成员的Promise对象
     */
    getTeamMembers(teamId) {
      return request({
        url: `/teams/${teamId}/members`,
        method: "GET"
      });
    },
    /**
     * 获取用户的获奖记录
     * @param {Object} params - 查询参数
     * @param {Number} [params.pageNum=1] - 页码
     * @param {Number} [params.pageSize=10] - 每页记录数
     * @returns {Promise} 请求结果Promise对象
     */
    getMyAwards(params = {}) {
      const defaultParams = {
        pageNum: 1,
        pageSize: 10,
        ...params
      };
      const token = getToken();
      if (!token) {
        uni.showToast({
          title: "请先登录",
          icon: "none"
        });
        setTimeout(() => {
          uni.navigateTo({
            url: "/pages/login/login"
          });
        }, 1500);
        return Promise.reject(new Error("未登录"));
      }
      return request({
        url: `/competitionResults/my-awards`,
        method: "GET",
        params: defaultParams,
        header: {
          "Authorization": `Bearer ${token}`
        }
      });
    },
    /**
     * 获取团队的获奖记录
     * @param {Number|String} teamId - 团队ID
     * @returns {Promise} 请求结果Promise对象
     */
    getTeamAwards(teamId) {
      const token = getToken();
      if (!token) {
        uni.showToast({
          title: "请先登录",
          icon: "none"
        });
        setTimeout(() => {
          uni.navigateTo({
            url: "/pages/login/login"
          });
        }, 1500);
        return Promise.reject(new Error("未登录"));
      }
      return request({
        url: `/competitionResults/team/${teamId}`,
        method: "GET",
        header: {
          "Authorization": `Bearer ${token}`
        }
      });
    }
  };
  const api = {
    user: userApi,
    competitions: competitionsApi,
    team: teamApi,
    tasks: tasksApi,
    taskApplications: taskApplicationsApi,
    competitionResults: competitionResultsApi
    // 其他模块
    // course: courseApi,
    // notice: noticeApi
  };
  const mimaIcon = `<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M775.836735 929.959184h-527.67347c-45.97551 0-83.591837-37.616327-83.591836-83.591837v-309.812245c0-45.97551 37.616327-83.591837 83.591836-83.591837h527.151021c45.97551 0 83.591837 37.616327 83.591836 83.591837V846.367347c0.522449 45.97551-37.093878 83.591837-83.069387 83.591837z m-527.67347-435.2c-22.987755 0-41.795918 18.808163-41.795918 41.795918V846.367347c0 22.987755 18.808163 41.795918 41.795918 41.795918h527.151021c22.987755 0 41.795918-18.808163 41.795918-41.795918v-309.812245c0-22.987755-18.808163-41.795918-41.795918-41.795918H248.163265z" fill="#000000"></path><path d="M294.661224 494.759184c-11.493878 0-20.897959-9.404082-20.897959-20.89796V332.277551C273.763265 201.142857 380.342857 94.040816 512 94.040816c94.040816 0 179.722449 55.379592 217.861224 141.583674 13.583673 30.302041 20.37551 63.216327 20.375511 96.653061 0 11.493878-9.404082 20.897959-20.897959 20.897959s-20.897959-9.404082-20.89796-20.897959c0-27.689796-5.746939-54.857143-16.718367-79.934694C660.37551 181.812245 589.844898 135.836735 512 135.836735c-108.669388 0-196.440816 88.293878-196.440816 196.440816v141.583673c0 11.493878-9.404082 20.897959-20.89796 20.89796zM509.387755 829.64898c-32.391837 0-59.036735-26.644898-59.036735-59.036735v-45.453061c-22.465306-18.285714-35.526531-45.453061-35.52653-74.710204 0-53.289796 43.363265-97.17551 97.17551-97.175511s97.17551 43.363265 97.17551 97.175511c0 31.869388-15.15102 61.126531-40.75102 78.889796v40.75102c0 32.914286-26.644898 59.559184-59.036735 59.559184z m2.612245-234.579592c-30.302041 0-55.379592 24.555102-55.379592 55.379592 0 18.808163 9.404082 36.571429 25.6 46.497959 6.269388 3.657143 9.404082 10.44898 9.404082 17.763265v55.902041c0 9.404082 7.836735 17.240816 17.240816 17.240816s17.240816-7.836735 17.240816-17.240816v-52.767347c0-7.836735 4.179592-15.15102 10.971429-18.285714 18.285714-9.404082 29.779592-28.212245 29.779592-49.110204 0.522449-30.302041-24.555102-55.379592-54.857143-55.379592z" fill="#000000"></path></svg>`;
  const zhanghaoIcon = `<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M620.256 806.176A32 32 0 0 1 592 774.4v-80.736a32 32 0 0 1 13.216-25.92c52.864-38.272 99.168-99.68 124.736-169.152a32 32 0 0 1 19.584-19.2c9.76-3.36 21.536-24.224 32.416-70.72 5.92-25.152-1.024-40.96-16.576-50.4a32 32 0 0 1-15.264-24.48C736.448 181.312 650.144 96 514.24 96 376 96 286.304 184.064 273.568 338.432a32 32 0 0 1-15.04 24.544c-16.416 10.24-22.272 23.36-16.224 44.032 11.392 38.88 23.84 60.352 36.8 68.48a32 32 0 0 1 13.12 16.384c25.088 70.496 72.224 133.536 126.72 173.504A32 32 0 0 1 432 691.168V774.4a32 32 0 0 1-28.256 31.776c-125.12 14.72-212.608 54.4-225.952 88.672 2.304 1.056 5.12 2.176 8.384 3.296 17.184 6.016 43.52 11.52 77.12 16.096C328.8 923.136 418.464 928 512 928s183.2-4.864 248.704-13.76c33.6-4.576 59.936-10.08 77.12-16.096 3.296-1.12 6.08-2.24 8.384-3.296-13.344-34.272-100.832-73.92-225.92-88.64zM656 746.4c151.36 22.656 256 79.168 256 157.376C912 970.784 755.84 992 512 992s-400-21.216-400-88.224c0-78.208 104.64-134.72 256-157.376v-39.52c-56.64-45.536-104.576-110.944-132.576-184.128-23.936-19.392-40.928-51.296-54.528-97.792-12.8-43.648 0.064-81.344 30.336-106.592C231.456 140.48 346.336 32 514.24 32c165.6 0 276.992 105.728 298.08 281.44 29.44 24.864 42.72 63.904 31.968 109.856-13.312 56.768-30.848 92.512-58.976 109.632C756.864 603.552 710.336 666.112 656 709.504V746.4z" fill="#000000"></path></svg>`;
  const mingzi = `<svg t="1746979614837" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="23320" width="200" height="200"><path d="M917.333333 448h-298.666666a21.333333 21.333333 0 0 0 0 42.666667h298.666666a21.333333 21.333333 0 0 0 0-42.666667z m-597.333333-85.333333A234.922667 234.922667 0 0 0 85.333333 597.333333c0 64.597333 26.24 123.178667 68.650667 165.674667 0.128 0.128 0.128 0.298667 0.213333 0.384 0.554667 0.554667 1.237333 0.938667 1.834667 1.493333 10.069333 9.856 20.906667 18.858667 32.597333 26.752 1.536 1.066667 3.2 1.92 4.778667 2.944 11.264 7.253333 23.04 13.696 35.498667 18.986667 1.578667 0.682667 3.2 1.109333 4.778666 1.749333 12.672 5.034667 25.856 9.173333 39.509334 11.946667l2.645333 0.384c14.293333 2.773333 29.056 4.352 44.16 4.352s29.866667-1.578667 44.16-4.309333c0.896-0.170667 1.792-0.213333 2.645333-0.384 13.653333-2.773333 26.794667-6.912 39.509334-11.946667 1.578667-0.64 3.2-1.109333 4.778666-1.749333a232.106667 232.106667 0 0 0 35.498667-18.986667c1.578667-1.024 3.2-1.877333 4.778667-2.944 11.690667-7.936 22.570667-16.938667 32.64-26.794667 0.554667-0.554667 1.237333-0.938667 1.792-1.493333 0.128-0.128 0.128-0.256 0.213333-0.384A233.813333 233.813333 0 0 0 554.666667 597.333333c0-129.408-105.301333-234.666667-234.666667-234.666666z m115.242667 387.242666c-4.437333 3.328-8.832 6.741333-13.525334 9.6-3.882667 2.432-8.106667 4.437333-12.16 6.613334a199.253333 199.253333 0 0 1-179.328-0.128c-3.925333-2.090667-7.978667-4.010667-11.733333-6.4-4.864-2.986667-9.386667-6.485333-13.994667-9.941334a208.213333 208.213333 0 0 1-9.557333-7.893333C217.429333 693.162667 266.026667 661.333333 320 661.333333s102.528 31.829333 125.098667 80.469334c-3.242667 2.773333-6.442667 5.546667-9.856 8.106666zM256 554.666667c0-35.285333 28.714667-64 64-64S384 519.381333 384 554.666667s-28.714667 64-64 64S256 589.952 256 554.666667z m219.648 154.197333a182.186667 182.186667 0 0 0-84.864-75.008A106.026667 106.026667 0 0 0 426.666667 554.666667c0-58.794667-47.829333-106.666667-106.666667-106.666667S213.333333 495.872 213.333333 554.666667c0 31.530667 14.037333 59.605333 35.84 79.189333a181.845333 181.845333 0 0 0-84.821333 75.008A190.378667 190.378667 0 0 1 128 597.333333c0-105.856 86.144-192 192-192S512 491.477333 512 597.333333c0 41.685333-13.696 80-36.352 111.530667zM917.333333 576h-298.666666a21.333333 21.333333 0 0 0 0 42.666667h298.666666a21.333333 21.333333 0 0 0 0-42.666667z m0-341.333333H640V128a21.333333 21.333333 0 0 0-21.333333-21.333333h-170.666667a21.333333 21.333333 0 0 0-21.333333 21.333333v106.666667H106.666667A106.794667 106.794667 0 0 0 0 341.333333v469.333334c0 58.794667 47.829333 106.666667 106.666667 106.666666h810.666666c58.837333 0 106.666667-47.872 106.666667-106.666666V341.333333c0-58.794667-47.829333-106.666667-106.666667-106.666666zM469.333333 149.333333h128v128h-128v-128zM981.333333 810.666667c0 35.285333-28.714667 64-64 64h-810.666666c-35.285333 0-64-28.714667-64-64V341.333333c0-35.285333 28.714667-64 64-64H426.666667V298.666667a21.333333 21.333333 0 0 0 21.333333 21.333333h170.666667A21.333333 21.333333 0 0 0 640 298.666667v-21.333334h277.333333c35.285333 0 64 28.714667 64 64v469.333334z m-64-106.666667h-298.666666a21.333333 21.333333 0 0 0 0 42.666667h298.666666a21.333333 21.333333 0 0 0 0-42.666667z" p-id="23321"></path></svg>`;
  const school = `<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24"><g fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M14 22v-4a2 2 0 1 0-4 0v4"/><path d="m18 10l3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10m12-5v17M4 6l7.106-3.553a2 2 0 0 1 1.788 0L20 6M6 5v17"/><circle cx="12" cy="9" r="2"/></g></svg>`;
  const zhuanye = `<svg t="1747030839150" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11152" width="200" height="200"><path d="M855.262679 1023.976727h-686.545455a100.072727 100.072727 0 0 1-98.955636-100.770909V100.770909A100.072727 100.072727 0 0 1 168.717224 0h686.545455A100.072727 100.072727 0 0 1 954.218315 100.770909v822.458182a100.072727 100.072727 0 0 1-98.955636 100.747636zM168.717224 81.850182a18.990545 18.990545 0 0 0-18.618182 18.897454v822.458182a18.990545 18.990545 0 0 0 18.618182 18.897455h686.545455a18.990545 18.990545 0 0 0 18.618181-18.897455V100.770909a18.990545 18.990545 0 0 0-18.618181-18.897454z" p-id="11153"></path><path d="M110.791406 809.774545h763.345454v81.850182h-763.345454z m130.327273-259.630545a40.517818 40.517818 0 0 1-40.075637-40.936727V44.939636a40.075636 40.075636 0 1 1 80.151273 0V509.207273a40.517818 40.517818 0 0 1-40.075636 40.936727z" p-id="11154"></path><path d="M244.190679 557.847273a40.936727 40.936727 0 0 1-26.228364-72.378182l147.549091-122.717091a40.936727 40.936727 0 0 1 52.386909 62.836364L270.465588 548.398545a40.773818 40.773818 0 0 1-26.274909 9.448728z m293.236363-9.774546a40.936727 40.936727 0 0 1-40.936727-40.936727V42.868364a40.936727 40.936727 0 1 1 81.850182 0v464.174545a40.936727 40.936727 0 0 1-40.913455 41.029818z" p-id="11155"></path><path d="M530.375406 555.776a40.750545 40.750545 0 0 1-26.181818-9.472l-147.432728-122.810182a40.936727 40.936727 0 0 1 52.386909-62.836363l147.432728 122.810181a40.936727 40.936727 0 0 1-26.228364 72.378182z" p-id="11156"></path></svg>`;
  const studentuser = `<svg t="1746980658471" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="48231" width="200" height="200"><path d="M686.699739 539.678484a225.807905 225.807905 0 0 0 48.185202-210.207946l113.837541-59.68942a56.617613 56.617613 0 0 0-0.602315-101.128693L532.326396 6.629682a60.773587 60.773587 0 0 0-55.232288 0L160.396865 168.652425a56.49715 56.49715 0 0 0-0.481852 101.128693l113.777309 59.508726a225.868137 225.868137 0 0 0 52.762797 215.508318 420.295428 420.295428 0 0 0-158.950937 131.84676A396.684679 396.684679 0 0 0 90.407858 911.668247a79.264658 79.264658 0 0 0 80.348825 77.939565h252.490461a45.29409 45.29409 0 0 0 10.239356-1.20463l53.726501 30.115751c13.010005 7.22778 28.790658 7.22778 41.800663 0l106.308603-59.508725a40.294876 40.294876 0 0 0 20.900331-35.054735v-119.077681a40.294876 40.294876 0 0 0-20.900331-35.054735l-106.308603-59.508725a43.005293 43.005293 0 0 0-41.800663 0l-106.308603 59.508725a40.294876 40.294876 0 0 0-20.900332 35.054735v103.718648H173.948953a318.022336 318.022336 0 0 1 61.797522-185.211872 338.501047 338.501047 0 0 1 157.927001-118.656061 42.162052 42.162052 0 0 0 9.275652-4.758289A245.142218 245.142218 0 0 0 613.217305 596.296097c3.61389 2.891112 7.709632 5.179909 12.046301 6.745928a330.1891 330.1891 0 0 1 224.543043 305.73511 40.47557 40.47557 0 1 0 3.19227 80.890908A79.264658 79.264658 0 0 0 933.648901 911.78871v-0.120463A409.995841 409.995841 0 0 0 686.699739 539.678484z m-242.913652 288.569131l64.50794-36.138902 64.507939 36.138902v72.277804l-64.507939 36.138902-64.50794-36.138902v-72.277804z m60.592892-287.424733a150.638989 150.638989 0 0 1 9.516577-301.037052 150.699221 150.699221 0 0 1 145.820469 150.458295 153.168712 153.168712 0 0 1-155.337046 150.578757z m0-382.28935a241.106707 241.106707 0 0 0-194.848912 97.514804l-69.627618-36.44006 265.018614-135.46065 264.054909 135.46065-70.229933 36.560523a241.106707 241.106707 0 0 0-194.547755-97.635267h0.180695z" fill="#000000" p-id="48232"></path></svg>`;
  const xiazhankai = `<svg t="1746980335433" class="icon" viewBox="0 0 1446 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="40393" width="200" height="200"><path d="M693.7236 0.280133H133.030358C119.345104 0.280133 108.27213 15.769922 108.27213 34.805193v103.485815c0 19.09886 11.072974 34.525061 24.758228 34.525061h560.693242c13.656037 0 24.759946-15.426201 24.759946-34.525061V34.805193c0-19.035272-11.10219-34.525061-24.759946-34.52506M133.030358 598.423502h486.540581c13.625102 0 24.698076-15.491508 24.698076-34.526779v-103.484097c0-19.09886-11.071255-34.497563-24.698076-34.497563H133.030358c-13.654319 0-24.758227 15.396984-24.758228 34.497563v103.484097c0 19.035272 11.103908 34.526779 24.758228 34.526779M693.7236 851.491561H133.030358c-13.685254 0-24.758227 15.489789-24.758228 34.495845v103.485815c0 19.128076 11.072974 34.525061 24.758228 34.52506h560.693242c13.656037 0 24.759946-15.396984 24.759946-34.52506v-103.485815c0-19.006055-11.10219-34.495844-24.759946-34.495845" fill="#000000" p-id="40394"></path></svg>`;
  const sousuo = `<svg t="1746980802612" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="52505" width="200" height="200"><path d="M965.213 922.599l-148.659-148.647c-1.501-1.501-3.428-2.164-5.092-3.381 144.754-172.944 136.125-431.612-26.34-594.078-83.242-83.228-193.91-129.070-311.613-129.070-117.715 0-228.384 45.843-311.612 129.071-171.831 171.831-171.831 451.419 0 623.226 83.228 83.255 193.897 129.098 311.612 129.098 104.51 0 203.353-36.297 282.482-102.666 1.205 1.641 1.854 3.542 3.338 5.025l148.66 148.646c7.904 7.904 18.258 11.856 28.612 11.856s20.722-3.952 28.612-11.856c15.809-15.808 15.809-41.417 0-57.225zM473.509 847.881c-96.098 0-186.441-37.438-254.389-105.385-140.269-140.269-140.269-368.481 0-508.776 67.948-67.948 158.29-105.36 254.389-105.36 96.085 0 186.441 37.413 254.389 105.359 140.269 140.295 140.269 368.508 0 508.776-67.961 67.948-158.302 105.386-254.389 105.386z" fill="#000000" p-id="52506"></path></svg>`;
  const XiaoXi = `<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M9 11h9v2H9zm9-4H6v2h12zm4-3v18l-4-4H4a2 2 0 0 1-2-2V4c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2m-2 0H4v12h14.83L20 17.17z"/></svg>`;
  const back = `<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M17.77 3.77L16 2L6 12l10 10l1.77-1.77L9.54 12z"/></svg>`;
  const WeiShouchang = `<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M12 14.3q1.275-1.175 2.063-1.937t1.212-1.313t.575-.962T16 9.2q0-.9-.65-1.55T13.8 7q-.525 0-1.013.213T12 7.8q-.3-.375-.775-.587T10.2 7q-.9 0-1.55.65T8 9.2q0 .475.137.875t.563.95t1.2 1.313T12 14.3M5 21V3h14v18l-7-3zm2-3.05l5-2.15l5 2.15V5H7zM7 5h10z"/></svg>`;
  const souchang = `<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="#0284c7" d="M12 14.3q1.275-1.175 2.063-1.937t1.212-1.313t.575-.962T16 9.2q0-.9-.65-1.55T13.8 7q-.525 0-1.013.213T12 7.8q-.3-.375-.775-.587T10.2 7q-.9 0-1.55.65T8 9.2q0 .475.137.875t.563.95t1.2 1.313T12 14.3M5 21V3h14v18l-7-3zm2-3.05l5-2.15l5 2.15V5H7zM7 5h10z"/></svg>`;
  const fenxiang = `<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M17 22q-1.25 0-2.125-.875T14 19q0-.15.075-.7L7.05 14.2q-.4.375-.925.588T5 15q-1.25 0-2.125-.875T2 12t.875-2.125T5 9q.6 0 1.125.213t.925.587l7.025-4.1q-.05-.175-.062-.337T14 5q0-1.25.875-2.125T17 2t2.125.875T20 5t-.875 2.125T17 9q-.6 0-1.125-.213T14.95 8.2l-7.025 4.1q.05.175.063.338T8 12t-.012.363t-.063.337l7.025 4.1q.4-.375.925-.587T17 16q1.25 0 2.125.875T20 19t-.875 2.125T17 22"/></svg>`;
  const baoming = `<svg t="1746982508826" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="58769" width="200" height="200"><path d="M184.32 205.531429c63.268571-35.401143 184.612571-87.771429 286.427429-40.228572l0.731428 0.292572c16.310857 8.045714 30.208 15.140571 42.422857 21.357714 53.613714 27.209143 67.218286 33.499429 95.085715 32.914286 29.257143-0.731429 67.364571-19.529143 110.372571-54.418286 17.408-14.628571 48.420571-24.502857 75.922286-11.849143 11.337143 5.12 37.595429 22.162286 37.595428 67.437714v270.336c-0.146286 16.384-3.730286 70.948571-42.934857 95.012572-1.170286 0.731429-96.987429 57.417143-192.073143 57.417143a187.684571 187.684571 0 0 1-68.973714-12.141715 3317.028571 3317.028571 0 0 1-19.017143-7.606857c-66.121143-26.550857-119.881143-47.981714-190.171428-19.748571l76.580571 247.661714a35.328 35.328 0 0 1-67.584 20.845714l-96.548571-312.685714-0.438858-1.901714c-23.552-72.923429-63.634286-204.507429-82.285714-265.874286-10.020571-33.572571 4.388571-69.485714 34.816-86.820571z m256.292571 23.552c-76.068571-35.108571-180.370286 14.921143-221.769142 38.034285a3.949714 3.949714 0 0 0-1.755429 4.681143c18.651429 61.293714 58.733714 192.950857 81.846857 264.557714a242.541714 242.541714 0 0 1 86.235429-16.018285c56.246857 0 105.472 19.748571 151.113143 38.107428 6.144 2.56 12.288 4.973714 18.505142 7.460572 61.952 24.356571 166.985143-20.626286 198.217143-39.789715 4.096-3.072 9.289143-21.211429 9.216-37.156571V221.622857c-55.369143 44.470857-106.276571 67.657143-151.405714 68.754286-46.518857 1.243429-74.166857-12.726857-128.877714-40.594286l-12.434286-6.290286z" fill="#000000" p-id="58770"></path></svg>`;
  const Baominrenshu = `<svg t="1746983544943" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10924" width="200" height="200"><path d="M927 693.9c0 3.72-0.12 7.41-0.29 11.09h-0.31c2.06 11.8-1.23 23.89-9.05 33.2-7.82 9.31-19.42 14.95-31.84 15.49v0.11h-43.34l-6.15-44.36h3.38v-0.11c15.34-0.74 29.15-9.18 36.37-22.22 7.22-13.04 6.79-28.78-1.13-41.44-17.38-66.12-68.95-118.95-136.44-139.8l-0.24-0.49s-23.06-3.61-23.06-22.18S737.96 461 737.96 461l-0.19-1.28c1.35 0.33 2.73 0.58 4.06 0.92 37.47-17.72 57.86-57.48 49.68-96.87-8.19-39.4-42.89-68.56-84.57-71.06l-26.31-43.03c60.42-8.8 119.67 21.65 145.67 74.86 25.99 53.21 12.55 116.52-33.06 155.66C875.53 522.08 927.02 604.33 927 693.9zM623.77 491.17c114.46 46.24 188.65 154.29 187.95 273.71v37.71c0 9.41-3.88 18.44-10.8 25.1-6.92 6.66-16.3 10.39-26.09 10.39H249.17c-9.78 0-19.16-3.74-26.09-10.39-6.92-6.65-10.8-15.68-10.8-25.1v-37.71c-0.73-120.58 74.91-229.44 191-274.9-58.95-45.46-81.54-121.83-56.29-190.33 25.24-68.5 92.77-114.13 168.33-113.72 75.54 0.41 142.54 46.77 166.98 115.54 24.43 68.77 0.95 144.89-58.53 189.7zM258.98 752.09c-0.38 2.02-0.58 4.08-0.59 6.13 0 1.09 0.07 2.17 0.17 3.24 0 0.4-0.05 0.79-0.07 1.2h0.21c2.32 17.74 17.99 31.04 36.56 31.05h433.45c18.58-0.02 34.25-13.32 36.57-31.05h0.2c0-0.4-0.05-0.8-0.05-1.2 0.1-1.07 0.17-2.15 0.17-3.24a34.14 34.14 0 0 0-0.6-6.13c-7.48-116.87-100.22-212.15-220.96-226.98-20.32 3.35-41.1 3.24-61.38-0.33-121.9 13.7-216.13 109.44-223.68 227.31z m255.33-521.76c-72.58 0-131.42 56.6-131.42 126.42 0 69.83 58.84 126.44 131.42 126.44s131.42-56.61 131.42-126.44c-0.01-69.82-58.84-126.42-131.42-126.42zM229.63 381.15c-0.04 33.67 19.72 64.47 51.04 79.5 1.33-0.35 2.69-0.6 4.03-0.92l-0.19 1.28s22.87 3.61 22.87 22.19c0 18.57-22.87 22.18-22.87 22.18l-0.23 0.49c-67.14 21.05-118.28 73.88-135.33 139.8-7.84 12.63-8.27 28.28-1.13 41.29 7.15 13.01 20.83 21.49 36.09 22.37v0.11h3.35l-6.09 44.36h-42.99v-0.11c-23.15-1.26-41.23-19.72-41.16-42.03 0.02-2.23 0.21-4.45 0.59-6.65h-0.31c-0.18-3.69-0.27-7.39-0.28-11.09-0.17-89.34 50.84-171.5 132.68-213.7-42.42-36.75-57.03-94.79-36.81-146.14 20.23-51.35 71.14-85.5 128.23-85.98 6.79 0.05 13.58 0.58 20.29 1.61l-26.1 43.03c-48.35 3.1-85.84 41.81-85.68 88.41z m0 0" fill="#000000" p-id="10925"></path></svg>`;
  const Baominrenshulunbotu = `<svg t="1747021708115" class="icon" viewBox="0 0 1192 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="91685" width="200" height="200"><path d="M1016.48935742 517.86047656c-21.48841406-18.55817578-45.41869336-34.18611328-71.30246484-46.39543945 33.69774023-33.20936719 63.48849609-83.51179102 62.51175-144.07004883-1.95349219-103.04671289-92.30250586-151.39564453-140.16306446-163.11659766-7.3255957-1.95349219-15.6279375-0.48837305-21.9767871 3.90698438s-11.23258008 10.74420703-12.69769922 18.06980273c-3.90698437 15.6279375 5.86047656 31.74424805 21.48841406 35.16285938 0.97674609 0.48837305 92.79087891 22.9535332 94.74437109 106.95369726 0.97674609 62.51175-46.8838125 109.88393555-77.65131445 125.51187305-11.23258008 5.37210352-17.58142969 17.58142969-16.11631055 29.79075586 1.46511914 12.20932617 10.74420703 22.46516016 22.95353321 24.90702539 8.79071484 1.46511914 207.07017187 49.81405078 182.65151953 294.00057422-0.97674609 8.3023418 1.46511914 16.60468359 7.3255957 22.46516016 5.37210352 6.34884961 13.18607227 9.76746094 21.97678711 9.76746093 15.13956445 0 27.83726367-11.23258008 29.30238281-26.37214453 15.13956445-154.32588281-47.37218555-242.7214043-103.04671289-290.58196289zM296.13911328 509.06976172c12.20932617-2.93023828 21.48841406-12.69769922 22.9535332-24.90702539 1.46511914-12.20932617-4.88373047-24.41865234-16.11631054-29.79075586-30.76750195-14.65119141-79.11643359-63.00012305-78.1396875-125.51187305 1.46511914-83.02341797 90.83738672-105.97695117 95.23274414-106.95369726 15.6279375-3.90698437 25.39539844-19.53492187 21.48841406-35.65123243-3.90698437-15.6279375-19.53492187-25.39539844-35.65123242-21.48841406-46.8838125 11.23258008-137.23282617 59.58151172-139.67469141 163.11659766-0.97674609 60.55825781 29.30238281 110.86068164 63.00012305 144.07004883-25.88377148 12.20932617-49.81405078 27.83726367-71.30246484 46.39543945-55.1861543 47.37218555-118.18627734 136.25608008-102.55833985 291.07033594 2.44186523 15.6279375 16.60468359 26.37214453 31.74424805 24.90702539 15.6279375-1.46511914 27.34889063-15.13956445 26.37214453-30.76750196-23.9302793-244.67489648 174.34917773-292.53545508 182.65151953-294.48894726z" p-id="91686" fill="#e6e6e6"></path><path d="M962.76832227 815.27966211c0-101.58159375-39.06984375-173.86080469-109.3955625-239.79116602a364.47280488 364.47280488 0 0 0-138.20957227-80.09317968C780.11680273 452.90686133 819.67501953 380.13927734 819.67501953 301.99958984c0-127.46536523-103.53508594-230.51207812-231.00045117-231.00045117-126.97699219 0.48837305-230.02370508 103.53508594-230.51207813 231.00045117 0 77.65131445 39.06984375 149.93052539 103.53508594 192.41898047-52.74428906 16.11631055-100.60484766 43.46520117-141.13981055 80.58155274-70.32571875 65.93036133-109.3955625 138.20957227-109.3955625 239.79116601 0 4.88373047-0.48837305 10.74420703-0.48837304 16.6046836-0.97674609 26.37214453-2.93023828 58.60476562 18.55817578 82.04667187 12.69769922 13.18607227 30.27912891 21.00004102 53.72103516 21.00004102 38.5814707 0.48837305 297.41918555 0.48837305 507.90796875 0.48837304h106.46532421c21.48841406 0 38.5814707-6.34884961 50.30242383-19.04654882 21.00004102-21.97678711 18.55817578-52.74428906 17.09305664-80.09317969-0.97674609-7.3255957-1.46511914-13.67444531-1.95349218-20.51166797zM416.76725586 302.48796289c0-95.23274414 77.16294141-171.9073125 171.9073125-171.9073125 94.74437109 0.48837305 171.9073125 77.16294141 171.9073125 171.9073125-0.48837305 94.74437109-77.16294141 171.9073125-171.9073125 171.9073125-94.74437109-0.48837305-171.9073125-77.16294141-171.9073125-171.9073125z m487.39630078 572.86158398c-0.48837305 0.48837305-3.41861133 0.97674609-8.3023418 0.9767461H790.37263672c-171.9073125 0-466.88463281 0-506.93122266-0.48837305-7.3255957 0-10.74420703-1.46511914-11.72095312-2.93023828-4.39535742-4.88373047-3.41861133-26.86051758-2.93023828-38.5814707 0.48837305-6.34884961 0.48837305-12.69769922 0.48837304-19.04654883 0-173.86080469 133.81421484-280.32612891 317.44248047-280.32612891s317.44248047 106.46532422 317.44248047 280.32612891c0 7.81396875 0.48837305 16.11631055 0.97674609 23.44190625 0.97674609 10.74420703 2.44186523 31.255875-0.97674609 36.62797851z" p-id="91687" fill="#e6e6e6"></path></svg>`;
  const baomingrhenshu2 = `<svg t="1747029692512" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="109794" width="200" height="200"><path d="M588.8 516.608c2.048-1.024 7.68-4.608 8.704-5.12 6.144-3.584 19.968-13.312 21.504-14.336 5.12-4.096 18.432-16.384 20.48-18.432 3.584-4.096 23.04-29.184 24.576-32.256 3.584-6.144 7.168-12.8 10.24-19.456 0.512-1.024 1.024-1.536 1.536-2.56 10.752-24.064 16.896-50.688 16.896-78.848 0-105.472-81.92-190.976-182.272-190.976S328.192 240.128 328.192 345.6c0 75.264 42.496 140.8 103.424 171.52-115.2 35.328-201.216 145.408-204.8 276.48 0 0.512-0.512 1.024-0.512 1.536v1.024c0 3.584 1.024 7.168 2.56 10.24 4.096 8.704 12.288 14.848 22.528 14.848 10.24 0 18.944-6.144 22.528-15.36 1.024-2.56 1.536-5.12 1.536-7.68 0-1.024 0.512-2.048 0.512-3.072v-11.776c0-2.048 0.512-4.096 1.024-6.144h-0.512c7.68-68.608 41.984-128.512 91.648-168.448 1.024-0.512 2.048-1.024 2.56-1.536l0.512 0.512c29.184-23.04 64-39.424 101.376-46.592 0.512 0 1.536 0 2.048-0.512 5.632-1.024 11.264-1.536 16.384-2.048 5.12-0.512 9.728-0.512 14.848-0.512h5.12c7.68 0 15.36 0.512 23.04 1.536 110.592 11.264 199.168 102.912 211.968 218.112h-0.512c0.512 2.048 1.024 3.584 1.024 6.144v11.776c0 1.024-0.512 2.048-0.512 3.072 0 1.024 0.512 2.048 0.512 3.072 0.512 2.56 0.512 5.632 1.536 7.68 4.096 9.216 12.288 15.36 22.528 15.36 9.728 0 18.432-6.144 22.528-14.848 1.536-3.072 2.56-6.656 2.56-10.24v-1.024c0-0.512-0.512-1.024-0.512-1.536-4.608-132.096-90.624-242.176-205.824-277.504z m-79.36-31.232c-73.728 0-134.144-62.976-134.144-140.288C375.296 267.776 435.2 204.8 509.44 204.8c73.728 0 134.144 62.976 134.144 140.288 0 77.312-59.904 140.288-134.144 140.288z m513.024 313.856c-3.584-131.072-89.6-241.152-204.8-276.48 60.928-30.72 103.424-96.256 103.424-171.52 0-104.96-81.408-190.464-181.76-190.976v0.512c-12.288 1.024-22.016 11.776-22.016 24.576 0 13.312 9.728 23.552 22.016 24.576h1.536c72.704 1.536 131.584 64 131.584 140.288 0 71.168-52.736 137.728-119.296 147.456-6.144 1.024-11.776 3.584-15.872 7.68-6.144 5.632-9.728 13.824-9.728 23.04 0 9.728 4.608 18.432 11.264 24.064 5.12 4.608 11.776 7.68 18.944 7.68h0.512c5.632 0.512 11.264 1.536 16.384 2.048 0.512 0 1.536 0 2.048 0.512 37.376 6.656 72.192 23.04 101.376 46.592l0.512-0.512c1.024 0.512 2.048 1.024 2.56 1.536 49.664 39.936 83.968 99.84 91.648 168.448h-0.512c0.512 2.048 1.024 3.584 1.024 6.144v11.776c0 1.024-0.512 2.048-0.512 3.072 0 1.024 0.512 2.048 0.512 3.072 0.512 2.56 0.512 5.632 1.536 7.68 4.096 9.216 12.288 15.36 22.528 15.36 9.728 0 18.432-6.144 22.528-14.848 1.536-3.072 2.56-6.656 2.56-10.24v-1.024-0.512z m-773.12-235.008c5.632-1.024 11.264-1.536 16.384-2.048h0.512c7.168 0 13.824-3.072 18.944-7.68 6.656-5.632 11.264-14.336 11.264-24.064 0-9.216-3.584-17.408-9.728-23.04-4.096-4.096-9.728-6.656-15.872-7.68-66.048-10.752-118.784-76.8-118.784-148.48 0-76.288 58.88-138.752 131.584-140.288h1.536c12.288-1.024 22.016-11.776 22.016-24.576 0-13.312-9.728-23.552-22.016-24.576v-0.512c-100.352 0.512-181.76 86.016-181.76 190.976 0 75.264 42.496 140.8 103.424 171.52-115.2 35.328-201.216 145.408-204.8 276.48 0 0.512-0.512 1.024-0.512 2.048v1.024c0 3.584 1.024 7.168 2.56 10.24 4.096 8.704 12.288 14.848 22.528 14.848 10.24 0 18.944-6.144 22.528-15.36 1.024-2.56 1.536-5.12 1.536-7.68 0-1.024 0.512-2.048 0.512-3.072 0-1.024-0.512-2.048-0.512-3.072v-11.776c0-2.048 0.512-4.096 1.024-6.144h-1.024c7.68-68.608 41.984-128.512 91.648-168.448 1.024-0.512 2.048-1.024 2.56-1.536l0.512 0.512c29.184-23.04 64-39.424 101.376-46.592 1.024-1.024 1.536-1.024 2.56-1.024z" fill="#040000" p-id="109795"></path></svg>`;
  const Zhubanfang = `<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 14 14"><g fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round"><path d="M3.481 8.68h7.037v4.71H3.481zm1.588-2.702h3.81"/><path d="M5.943 11.628c0-.584.473-1.057 1.057-1.057v0c.584 0 1.058.473 1.058 1.057v1.761H5.943zM5.067 8.68V5.968l1.91-2.938l1.91 2.938v2.71M.59 6.71v6.68h2.892V6.71L2.036 4.513L.59 6.711Zm9.929 0v6.68h2.89V6.71l-1.445-2.198l-1.445 2.199Z"/><path d="M6.977 3.031V.55h1.25"/></g></svg>`;
  const dengji = `<svg t="1747012786627" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19042" width="200" height="200"><path d="M832 627.2c-64 76.8-185.6 198.4-288 204.8v89.6h172.8c12.8 0 32 19.2 32 32s-12.8 32-25.6 32H307.2c-12.8 0-25.6-19.2-25.6-32s19.2-32 32-32h172.8V832C390.4 832 256 704 198.4 627.2 115.2 627.2 57.6 569.6 51.2 454.4V281.6c0-25.6 6.4-32 32-32h89.6V102.4c0-12.8 0-19.2 19.2-25.6h640c19.2 6.4 25.6 12.8 32 32V256h89.6c25.6 0 32 12.8 32 32v172.8c-12.8 102.4-51.2 166.4-153.6 166.4zM166.4 454.4V307.2h-57.6v147.2c0 57.6 12.8 108.8 57.6 115.2V454.4z m633.6-294.4c0-12.8-19.2-32-32-32H249.6c-12.8 0-32 19.2-32 32v326.4C230.4 646.4 384 774.4 512 768c160-6.4 281.6-134.4 288-281.6V160z m115.2 294.4V307.2c0-6.4 0 0 0 0h-57.6v262.4c32-6.4 64-32 57.6-115.2z m0-147.2c0 6.4 0 0 0 0zM633.6 595.2L512 537.6l-128 57.6 19.2-134.4-96-96L448 339.2l64-115.2 64 115.2 134.4 25.6-89.6 96 12.8 134.4zM537.6 390.4L512 339.2l-25.6 51.2-64 12.8 44.8 44.8-6.4 64 51.2-32 51.2 32-6.4-64 38.4-44.8-57.6-12.8z m0 0" p-id="19043" fill="#2c2c2c"></path></svg>`;
  const chuangjianduiwu = `<svg t="1746983056433" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5327" data-darkreader-inline-fill="" width="200" height="200"><path d="M211.797333 598.997333c9.386667 18.346667 2.048 40.832-16.341333 50.218667-25.088 12.8-45.482667 33.152-58.24 58.24l-2.688 5.717333c-9.216 21.376-11.52 49.194667-11.818667 134.528L122.666667 896a37.333333 37.333333 0 1 1-74.666667 0v-50.517333c0.426667-106.24 3.84-134.997333 22.656-171.946667a208 208 0 0 1 90.88-90.88 37.333333 37.333333 0 0 1 50.261333 16.341333z m462.208-38.997333a37.333333 37.333333 0 0 1 0 74.666667h-187.349333l-30.890667 0.298666c-62.037333 0.853333-81.834667 3.968-99.925333 13.226667-23.296 11.861333-42.24 30.805333-54.144 54.101333l-2.56 5.546667c-7.253333 16.938667-9.813333 38.570667-10.666667 94.378667l-0.256 39.850666h385.792c19.029333 0 34.730667 14.250667 37.034667 32.64l0.298667 4.693334a37.333333 37.333333 0 0 1-37.333334 37.333333H250.88a37.333333 37.333333 0 0 1-37.333333-37.333333l0.042666-48.597334c0.384-100.053333 3.669333-127.232 21.589334-162.432a198.528 198.528 0 0 1 86.741333-86.741333l8.021333-3.84c31.786667-14.549333 62.037333-17.408 154.453334-17.749333l189.610666-0.042667z m146.602667 20.266667c20.650667 0 37.333333 16.725333 37.333333 37.333333v83.541333h83.584a37.333333 37.333333 0 0 1 0 74.666667h-83.584v83.584a37.333333 37.333333 0 0 1-74.666666 0v-83.584H699.733333a37.333333 37.333333 0 1 1 0-74.666667h83.541334v-83.541333c0-20.608 16.725333-37.333333 37.333333-37.333333zM512 90.666667a186.666667 186.666667 0 1 0 0 373.333333 186.666667 186.666667 0 0 0 0-373.333333z m0 74.666666a112 112 0 1 1 0 224 112 112 0 0 1 0-224zM234.666667 124.16a37.333333 37.333333 0 1 1 42.666666 61.226667A111.786667 111.786667 0 0 0 229.376 277.333333c0 37.12 18.176 71.04 47.786667 91.776l6.528 4.266667a37.333333 37.333333 0 1 1-38.528 63.957333 186.538667 186.538667 0 0 1-90.453334-160 186.453333 186.453333 0 0 1 79.957334-153.173333z m502.698666 9.258667a37.333333 37.333333 0 0 1 52.010667-9.258667 186.453333 186.453333 0 0 1 79.957333 153.173333 186.453333 186.453333 0 0 1-79.957333 153.173334 37.333333 37.333333 0 1 1-42.752-61.226667A111.786667 111.786667 0 0 0 794.666667 277.333333a111.786667 111.786667 0 0 0-48.042667-91.946666 37.333333 37.333333 0 0 1-9.258667-51.968z" fill="#000000" p-id="3715"></path></svg>`;
  const xiazai = `<svg t="1746984471332" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17835" width="200" height="200"><path d="M960 1024H64a64 64 0 0 1-64-64v-256a64 64 0 0 1 128 0v192h768v-192a64 64 0 0 1 128 0v256a64 64 0 0 1-64 64zM256 448h192V64a64 64 0 0 1 128 0v384h192l-256 320z" fill="#ffffff" p-id="17836"></path></svg>`;
  const tixingwo = `<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="#000000" d="M3.23 9.827q0-1.923.767-3.578t2.084-2.857l.675.735q-1.173 1.062-1.85 2.525t-.675 3.175zm16.54 0q0-1.711-.677-3.185q-.676-1.473-1.849-2.534l.675-.716q1.318 1.202 2.084 2.857t.766 3.578zM5 18.769v-1h1.616V9.846q0-1.96 1.24-3.447T11 4.546V4q0-.413.293-.707T12 3t.707.293T13 4v.546q1.904.365 3.144 1.853t1.24 3.447v7.923H19v1zm7 2.616q-.671 0-1.143-.473q-.472-.472-.472-1.143h3.23q0 .672-.472 1.144t-1.143.47M7.616 17.77h8.769V9.846q0-1.823-1.281-3.104T12 5.462t-3.104 1.28t-1.28 3.104z"/></svg>`;
  const remen = `<svg t="1747011064412" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5065" width="200" height="200"><path d="M867.157333 614.4a624.128 624.128 0 0 0-53.077333-185.002667A1339.392 1339.392 0 0 0 619.349333 125.781333c-21.674667-26.453333-44.032-52.565333-68.266666-77.482666l-1.024-0.853334-2.218667-2.389333a25.770667 25.770667 0 0 0-42.154667 24.917333 571.050667 571.050667 0 0 1 9.557334 61.610667 310.954667 310.954667 0 0 1-38.741334 189.610667 538.965333 538.965333 0 0 1-104.277333 119.466666c-17.066667-33.109333-11.264-75.434667-3.925333-110.933333a24.064 24.064 0 0 0 0-7.850667 25.258667 25.258667 0 0 0-37.888-21.845333 422.229333 422.229333 0 0 0-111.445334 113.493333 367.104 367.104 0 0 0-60.586666 261.12 319.658667 319.658667 0 0 0 68.266666 163.157334A485.717333 485.717333 0 0 0 353.109333 938.666667l8.021334 4.608 2.730666 1.706666 23.722667 12.970667 3.584 1.877333 18.602667 9.386667h1.706666l3.242667 1.536 2.901333 1.365333 11.093334 5.12 3.754666 1.706667c3.754667 1.706667 19.968 9.216 6.826667 2.901333l5.461333 2.218667a20.309333 20.309333 0 0 0 18.773334-2.048 22.869333 22.869333 0 0 0 12.8-15.36 75.093333 75.093333 0 0 1 25.941333-51.2c4.096-2.730667 8.192-5.12 12.288-7.509333a73.386667 73.386667 0 0 1 38.741333 58.368 19.626667 19.626667 0 0 0 12.288 15.530666 19.968 19.968 0 0 0 19.114667 2.218667l5.290667-2.218667h0.853333a759.637333 759.637333 0 0 0 82.432-41.472h1.024c61.098667-36.352 121.344-81.066667 158.208-143.36 35.669333-51.541333 41.301333-122.538667 34.645333-182.613333zM650.752 896c-17.066667 10.24-35.328 19.797333-53.589333 28.672a113.493333 113.493333 0 0 0-39.424-51.2 83.114667 83.114667 0 0 0-40.789334-18.944 83.968 83.968 0 0 0-40.618666 18.944 24.064 24.064 0 0 0-4.949334 4.266667 109.568 109.568 0 0 0-34.133333 46.933333c-9.386667-4.608-18.602667-9.216-27.818667-14.165333-3.754667-2.048-7.68-3.925333-11.434666-6.144-11.605333-6.314667-22.869333-13.141333-34.133334-20.138667a464.213333 464.213333 0 0 1-79.530666-61.44c-63.317333-62.464-87.04-156.501333-76.117334-243.541333a347.818667 347.818667 0 0 1 55.637334-140.629334 429.397333 429.397333 0 0 1 47.445333-57.344 150.698667 150.698667 0 0 0 39.594667 114.688 25.941333 25.941333 0 0 0 36.181333 0c51.2-46.250667 102.4-94.037333 137.557333-153.6a356.693333 356.693333 0 0 0 42.325334-199.850666q47.445333 55.978667 89.429333 115.882666c68.266667 97.792 131.242667 206.165333 154.624 324.266667 11.946667 60.245333 13.824 135.338667-21.162667 188.757333-32.256 54.442667-85.674667 92.842667-139.093333 124.586667z" fill="#e3361f" p-id="5066"></path><path d="M375.637333 655.189333h-66.389333v-66.048h-33.792v167.765334h33.792v-73.386667h66.389333v73.386667H409.6v-167.765334h-33.962667v66.048zM518.826667 586.24a91.818667 91.818667 0 0 0-36.181334 6.656 65.194667 65.194667 0 0 0-21.674666 15.189333 77.994667 77.994667 0 0 0-15.701334 23.381334 106.666667 106.666667 0 0 0-7.509333 43.008 86.869333 86.869333 0 0 0 22.016 62.976 78.848 78.848 0 0 0 59.392 22.869333 77.824 77.824 0 0 0 59.050667-23.04 87.552 87.552 0 0 0 22.186666-63.488 88.234667 88.234667 0 0 0-22.357333-64 78.336 78.336 0 0 0-59.221333-23.552z m34.133333 129.877333a45.226667 45.226667 0 0 1-66.730667 0 63.488 63.488 0 0 1-13.141333-43.178666 63.488 63.488 0 0 1 12.8-43.349334 46.933333 46.933333 0 0 1 67.413333 0 63.146667 63.146667 0 0 1 12.629334 43.008 64.512 64.512 0 0 1-13.482667 44.202667zM614.741333 617.472h49.834667v139.434667h33.792v-139.434667h49.664v-28.330667h-133.290667v28.330667z" fill="#e3361f" p-id="5067"></path></svg>`;
  const zhinnegtuijzudui = `<svg t="1747011289535" class="icon" viewBox="0 0 1328 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12832" width="200" height="200"><path d="M859.589792 158.080905h-81.155741a25.106239 25.106239 0 0 1-25.950146-18.776935L724.91627 56.53074l-58.440572 105.488398A27.356658 27.356658 0 0 1 618.865268 162.019138l-22.715169-40.929498L573.083303 147.954018a26.161123 26.161123 0 0 1-21.09768 9.91591H468.931091a19.550516 19.550516 0 0 1 0-39.101033h77.358159L576.669908 82.691863a27.497309 27.497309 0 0 1 44.938058 4.219536l21.09768 37.553869L703.67794 14.335381a25.24689 25.24689 0 0 1 26.442425-14.06512 25.457867 25.457867 0 0 1 23.48875 18.565958l33.264008 100.003002h72.716669a19.550516 19.550516 0 1 1 0 39.101032z" fill="#3A4362" p-id="12833"></path><path d="M312.667611 164.480534a78.13174 78.13174 0 1 1 60.620666-28.76317l146.347571 263.650669a30.802612 30.802612 0 0 1 3.867908 15.120004v2.39107A31.224566 31.224566 0 0 1 492.27919 445.782928a31.365217 31.365217 0 0 1-27.00503-16.034236l-147.683757-265.338484h-4.993117z m726.674411 0a78.13174 78.13174 0 1 0-60.550341-28.76317l-146.628873 263.650669a31.576194 31.576194 0 0 0-3.867908 15.120004v2.39107a31.224566 31.224566 0 0 0 31.224566 28.903821 31.365217 31.365217 0 0 0 26.934704-16.034236l147.683757-265.338484h4.993118zM156.26348 867.73652H78.13174A78.13174 78.13174 0 0 1 0 789.60478v-78.202066A78.13174 78.13174 0 0 1 78.13174 633.200649h78.13174zM1172.187077 633.200649h78.13174a78.13174 78.13174 0 0 1 78.13174 78.13174v78.202065a78.13174 78.13174 0 0 1-78.13174 78.13174h-78.13174z" fill="#4A5B9F" p-id="12834"></path><path d="M781.458052 242.612274A390.729026 390.729026 0 0 1 1172.187077 633.200649v312.597285a78.202066 78.202066 0 0 1-78.13174 78.13174H234.465546a78.202066 78.202066 0 0 1-78.13174-78.13174V633.200649a390.729026 390.729026 0 0 1 390.729025-390.588375zM507.961799 477.007494a117.232773 117.232773 0 1 0 0 234.39522h312.597285a117.232773 117.232773 0 1 0 0-234.39522z" fill="#A4BEFF" p-id="12835"></path><path d="M617.38843 594.240267a78.413042 78.413042 0 0 1-1.547163 15.190329 70.888203 70.888203 0 0 1-4.430513 14.69805 76.162623 76.162623 0 0 1-7.03256 13.572841 74.123181 74.123181 0 0 1-9.704932 11.8147 76.865879 76.865879 0 0 1-11.744375 9.704933 81.366718 81.366718 0 0 1-28.13024 11.674049 75.670344 75.670344 0 0 1-30.450984 0 72.365041 72.365041 0 0 1-14.69805-4.500838 75.529693 75.529693 0 0 1-13.502515-7.03256 81.788671 81.788671 0 0 1-11.8147-9.704932 74.123181 74.123181 0 0 1-9.704933-11.814701 81.01509 81.01509 0 0 1-7.03256-13.57284 72.646343 72.646343 0 0 1-4.430513-14.698051 78.342717 78.342717 0 0 1-1.476837-15.190329 74.404483 74.404483 0 0 1 1.547163-15.260655 72.716669 72.716669 0 0 1 4.360187-14.627724 83.124858 83.124858 0 0 1 7.03256-13.502515 74.685786 74.685786 0 0 1 9.704933-11.885026 77.358158 77.358158 0 0 1 11.8147-9.704933 82.77323 82.77323 0 0 1 13.502515-7.03256 76.936205 76.936205 0 0 1 14.69805-4.430512 75.670344 75.670344 0 0 1 30.450984 0 75.459367 75.459367 0 0 1 14.69805 4.430512 74.967088 74.967088 0 0 1 25.317216 16.878144 74.685786 74.685786 0 0 1 9.704933 11.885026 78.061414 78.061414 0 0 1 7.032559 13.502515 70.325599 70.325599 0 0 1 4.500839 14.627724 79.608578 79.608578 0 0 1 1.336186 14.979353z" fill="#5B79FB" p-id="12836"></path><path d="M867.395933 594.240267a78.342717 78.342717 0 0 1-1.476838 15.190329 79.467926 79.467926 0 0 1-11.603723 28.13024 78.624019 78.624019 0 0 1-9.775258 11.8147 77.358158 77.358158 0 0 1-11.814701 9.704933 73.208948 73.208948 0 0 1-13.502515 7.03256 72.365041 72.365041 0 0 1-14.69805 4.500838 73.419925 73.419925 0 0 1-15.260655 1.547163 74.263832 74.263832 0 0 1-15.190329-1.547163 79.25695 79.25695 0 0 1-28.13024-11.674049 78.694345 78.694345 0 0 1-11.885026-9.704933 74.123181 74.123181 0 0 1-9.704932-11.533398 76.162623 76.162623 0 0 1-7.03256-13.572841 77.358158 77.358158 0 0 1-4.500839-14.69805 78.342717 78.342717 0 0 1-1.476837-15.190329 79.678903 79.678903 0 0 1 1.547163-15.260655 83.335834 83.335834 0 0 1 4.430513-14.627724 78.061414 78.061414 0 0 1 7.03256-13.502515 76.3736 76.3736 0 0 1 21.589958-21.589959 76.725228 76.725228 0 0 1 13.43219-7.03256 75.459367 75.459367 0 0 1 14.69805-4.430513 74.263832 74.263832 0 0 1 15.190329-1.547163 73.419925 73.419925 0 0 1 15.260655 1.547163 76.936205 76.936205 0 0 1 14.69805 4.430513 82.77323 82.77323 0 0 1 13.502515 7.03256 78.834996 78.834996 0 0 1 21.589959 21.589959 82.77323 82.77323 0 0 1 7.03256 13.502515 81.366718 81.366718 0 0 1 6.048001 29.888379z" fill="#FF7E71" p-id="12837"></path><path d="M898.690824 914.503043H1054.883979a39.101033 39.101033 0 1 0 0-78.13174H273.566579a39.101033 39.101033 0 1 0 0 78.13174z" fill="#FFFFFF" p-id="12838"></path><path d="M312.667611 594.240267a195.294187 195.294187 0 0 1 195.294188-195.364513h312.597285a195.364513 195.364513 0 0 1 0 390.729026H507.961799a195.294187 195.294187 0 0 1-195.294188-195.364513z m31.224566 0a163.999296 163.999296 0 0 0 164.069622 164.139947h312.597285A163.999296 163.999296 0 0 0 984.55838 594.310593a163.999296 163.999296 0 0 0-164.069621-164.069622H507.961799A163.999296 163.999296 0 0 0 343.892177 594.310593z" fill="#4A5B9F" p-id="12839"></path></svg>`;
  const Shouye = `<svg t="1747011703930" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16363" width="200" height="200"><path d="M958.400956 451.54921c-0.058328-5.760191-2.597151-11.215436-6.965645-14.97097L524.345166 69.511143c-7.498788-6.445806-18.581194-6.445806-26.079982 0L309.582871 231.6755l0-102.017488c0-11.04966-8.901741-19.532869-19.951401-19.532869l-88.034009 0c-11.048637 0-19.928888 8.482185-19.928888 19.532869l0 211.954343L71.176063 436.57824c-4.423753 3.800559-6.967692 9.341762-6.967692 15.173584l0 105.500822c0 7.819083 4.554736 14.921851 11.660574 18.183128 2.670829 1.226944 5.51562 1.824555 8.343015 1.824555 4.699022 0 9.346879-1.654686 13.048177-4.836145l53.29788-45.825698 0 324.100516c0 60.677964 49.364291 110.042255 110.042255 110.042255L764.792447 960.741257c60.677964 0 110.042255-49.364291 110.042255-110.042255L874.834702 527.026228l51.585889 44.335764c5.955642 5.119601 14.356986 6.282077 21.481244 2.965541 7.122211-3.313465 11.645225-10.488889 11.565407-18.342764L958.400956 451.54921zM221.578538 150.034085l48.095391 0 0 115.941616-48.095391 41.336454L221.578538 150.034085zM570.718333 920.725892 436.666244 920.725892 436.666244 700.642404c0-11.031241 8.976442-20.007683 20.007683-20.007683l94.0357 0c11.031241 0 20.007683 8.976442 20.007683 20.007683L570.71731 920.725892zM834.818313 495.895207l0 354.803795c0 38.612413-31.414477 70.02689-70.02689 70.02689l-154.058748 0L610.732675 700.642404c0-33.096792-26.926256-60.023048-60.023048-60.023048l-94.0357 0c-33.096792 0-60.023048 26.926256-60.023048 60.023048l0 220.084511L260.59925 920.726915c-38.612413 0-70.02689-31.414477-70.02689-70.02689L190.57236 495.895207c0-1.172709-0.121773-2.314719-0.315178-3.432169l322.113255-276.958846 322.70268 277.348726C834.921667 493.848595 834.818313 494.858598 834.818313 495.895207zM525.411451 173.947727c-7.502881-6.445806-18.587334-6.446829-26.086122 0.00307L104.223736 513.663896l0-52.726875 407.081439-349.870436 407.176606 349.9523 0.521886 51.205219L525.411451 173.947727z" fill="#2c2c2c" p-id="16364"></path></svg>`;
  const Shouyexuanzhong = `<svg t="1747011703930" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16363" width="200" height="200"><path d="M958.400956 451.54921c-0.058328-5.760191-2.597151-11.215436-6.965645-14.97097L524.345166 69.511143c-7.498788-6.445806-18.581194-6.445806-26.079982 0L309.582871 231.6755l0-102.017488c0-11.04966-8.901741-19.532869-19.951401-19.532869l-88.034009 0c-11.048637 0-19.928888 8.482185-19.928888 19.532869l0 211.954343L71.176063 436.57824c-4.423753 3.800559-6.967692 9.341762-6.967692 15.173584l0 105.500822c0 7.819083 4.554736 14.921851 11.660574 18.183128 2.670829 1.226944 5.51562 1.824555 8.343015 1.824555 4.699022 0 9.346879-1.654686 13.048177-4.836145l53.29788-45.825698 0 324.100516c0 60.677964 49.364291 110.042255 110.042255 110.042255L764.792447 960.741257c60.677964 0 110.042255-49.364291 110.042255-110.042255L874.834702 527.026228l51.585889 44.335764c5.955642 5.119601 14.356986 6.282077 21.481244 2.965541 7.122211-3.313465 11.645225-10.488889 11.565407-18.342764L958.400956 451.54921zM221.578538 150.034085l48.095391 0 0 115.941616-48.095391 41.336454L221.578538 150.034085zM570.718333 920.725892 436.666244 920.725892 436.666244 700.642404c0-11.031241 8.976442-20.007683 20.007683-20.007683l94.0357 0c11.031241 0 20.007683 8.976442 20.007683 20.007683L570.71731 920.725892zM834.818313 495.895207l0 354.803795c0 38.612413-31.414477 70.02689-70.02689 70.02689l-154.058748 0L610.732675 700.642404c0-33.096792-26.926256-60.023048-60.023048-60.023048l-94.0357 0c-33.096792 0-60.023048 26.926256-60.023048 60.023048l0 220.084511L260.59925 920.726915c-38.612413 0-70.02689-31.414477-70.02689-70.02689L190.57236 495.895207c0-1.172709-0.121773-2.314719-0.315178-3.432169l322.113255-276.958846 322.70268 277.348726C834.921667 493.848595 834.818313 494.858598 834.818313 495.895207zM525.411451 173.947727c-7.502881-6.445806-18.587334-6.446829-26.086122 0.00307L104.223736 513.663896l0-52.726875 407.081439-349.870436 407.176606 349.9523 0.521886 51.205219L525.411451 173.947727z" fill="#1296db" p-id="16364"></path></svg>`;
  const jingshai = `<svg t="1747016440717" class="icon" viewBox="0 0 1113 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="60678" width="200" height="200"><path d="M971.769052 144.902286h-23.039835V52.230948c0-25.599817-20.479854-46.079671-46.079671-46.07967H282.109983c-22.527839 0-45.055678-2.047985-67.583517-5.63196-13.311905-2.047985-26.62381 2.047985-36.863736 10.751923-10.239927 8.703938-15.871887 21.503846-15.871887 35.327747v98.303298h-23.039835c-76.799451-0.511996-138.751008 61.439561-138.751008 138.239011v92.671338c0 76.799451 61.951557 138.751008 138.751008 138.751007h59.903572C255.99817 638.978753 373.757328 723.970145 509.948354 740.354028v190.462638H278.526009c-25.599817 0-46.079671 20.99185-46.079671 46.079671 0 25.599817 20.479854 46.079671 46.079671 46.07967h555.004031c25.599817 0 46.079671-20.99185 46.079671-46.07967 0-25.599817-20.479854-46.079671-46.079671-46.079671h-231.422345v-184.830678-5.63196c136.191026-15.871887 253.950184-101.375275 311.293774-225.790386h59.903572c76.799451 0 138.751008-61.951557 138.751008-138.751007V283.141297c0-76.799451-62.463553-138.751008-139.263004-138.239011h-1.023993zM138.751008 422.404301c-25.599817 0-46.079671-20.479854-46.079671-46.07967V283.653293c0-25.599817 20.479854-46.079671 46.079671-46.07967h23.039835v113.151191c0 24.063828 2.047985 48.639652 7.167949 72.191484l-30.207784-0.511997z m717.306871-72.191483c0 165.886814-134.655037 300.541851-301.053847 300.541851-165.886814 0-300.541851-134.655037-300.541851-300.541851V98.310619h601.595698v251.902199z m161.790843 26.111813c0 25.599817-20.479854 46.079671-46.07967 46.07967h-30.207784c4.607967-24.063828 6.655952-48.127656 7.167949-72.191483v-112.639195h23.039835c25.599817 0 46.079671 20.479854 46.07967 46.07967v92.671338z" p-id="60679" fill="#2c2c2c"></path><path d="M493.564471 195.077927h263.166118c11.263919 0 20.479854-20.479854 20.479854-32.767766s-9.215934-32.767766-20.479854-32.767766H493.564471c-11.263919 0-20.479854 20.479854-20.479854 32.767766s9.215934 32.767766 20.479854 32.767766z m0 173.566759h262.142126c11.263919 0 20.479854-20.479854 20.479853-32.767766 0-11.775916-9.215934-32.767766-20.479853-32.767766H493.564471c-11.263919 0-20.479854 20.479854-20.479854 32.767766 0 11.775916 9.215934 32.767766 20.479854 32.767766z m263.166118 108.543224H493.564471c-11.263919 0-20.479854 20.479854-20.479854 32.767765s9.215934 32.767766 20.479854 32.767766h263.166118c11.263919 0 20.479854-20.479854 20.479854-32.767766s-9.215934-32.767766-20.479854-32.767765zM350.205496 173.574081c0 22.527839 18.431868 40.447711 40.959707 40.44771s40.959707-17.919872 40.959707-40.44771-18.431868-40.447711-40.959707-40.447711-40.959707 18.431868-40.959707 40.447711zM345.085533 334.852927c0 22.527839 18.431868 40.447711 40.959707 40.447711s40.959707-17.919872 40.959707-40.447711-18.431868-40.447711-40.959707-40.44771-40.959707 17.919872-40.959707 40.447711zM345.085533 497.155767c0 22.527839 18.431868 40.447711 40.959707 40.447711s40.959707-17.919872 40.959707-40.447711-18.431868-40.447711-40.959707-40.447711-40.959707 17.919872-40.959707 40.447711z" p-id="60680" fill="#2c2c2c"></path></svg>`;
  const jingshaixuanzhong = `<svg t="1747016440717" class="icon" viewBox="0 0 1113 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="60678" width="200" height="200"><path d="M971.769052 144.902286h-23.039835V52.230948c0-25.599817-20.479854-46.079671-46.079671-46.07967H282.109983c-22.527839 0-45.055678-2.047985-67.583517-5.63196-13.311905-2.047985-26.62381 2.047985-36.863736 10.751923-10.239927 8.703938-15.871887 21.503846-15.871887 35.327747v98.303298h-23.039835c-76.799451-0.511996-138.751008 61.439561-138.751008 138.239011v92.671338c0 76.799451 61.951557 138.751008 138.751008 138.751007h59.903572C255.99817 638.978753 373.757328 723.970145 509.948354 740.354028v190.462638H278.526009c-25.599817 0-46.079671 20.99185-46.079671 46.079671 0 25.599817 20.479854 46.079671 46.079671 46.07967h555.004031c25.599817 0 46.079671-20.99185 46.079671-46.07967 0-25.599817-20.479854-46.079671-46.079671-46.079671h-231.422345v-184.830678-5.63196c136.191026-15.871887 253.950184-101.375275 311.293774-225.790386h59.903572c76.799451 0 138.751008-61.951557 138.751008-138.751007V283.141297c0-76.799451-62.463553-138.751008-139.263004-138.239011h-1.023993zM138.751008 422.404301c-25.599817 0-46.079671-20.479854-46.079671-46.07967V283.653293c0-25.599817 20.479854-46.079671 46.079671-46.07967h23.039835v113.151191c0 24.063828 2.047985 48.639652 7.167949 72.191484l-30.207784-0.511997z m717.306871-72.191483c0 165.886814-134.655037 300.541851-301.053847 300.541851-165.886814 0-300.541851-134.655037-300.541851-300.541851V98.310619h601.595698v251.902199z m161.790843 26.111813c0 25.599817-20.479854 46.079671-46.07967 46.07967h-30.207784c4.607967-24.063828 6.655952-48.127656 7.167949-72.191483v-112.639195h23.039835c25.599817 0 46.079671 20.479854 46.07967 46.07967v92.671338z" p-id="60679" fill="#1296db"></path><path d="M493.564471 195.077927h263.166118c11.263919 0 20.479854-20.479854 20.479854-32.767766s-9.215934-32.767766-20.479854-32.767766H493.564471c-11.263919 0-20.479854 20.479854-20.479854 32.767766s9.215934 32.767766 20.479854 32.767766z m0 173.566759h262.142126c11.263919 0 20.479854-20.479854 20.479853-32.767766 0-11.775916-9.215934-32.767766-20.479853-32.767766H493.564471c-11.263919 0-20.479854 20.479854-20.479854 32.767766 0 11.775916 9.215934 32.767766 20.479854 32.767766z m263.166118 108.543224H493.564471c-11.263919 0-20.479854 20.479854-20.479854 32.767765s9.215934 32.767766 20.479854 32.767766h263.166118c11.263919 0 20.479854-20.479854 20.479854-32.767766s-9.215934-32.767766-20.479854-32.767765zM350.205496 173.574081c0 22.527839 18.431868 40.447711 40.959707 40.44771s40.959707-17.919872 40.959707-40.44771-18.431868-40.447711-40.959707-40.447711-40.959707 18.431868-40.959707 40.447711zM345.085533 334.852927c0 22.527839 18.431868 40.447711 40.959707 40.447711s40.959707-17.919872 40.959707-40.447711-18.431868-40.447711-40.959707-40.44771-40.959707 17.919872-40.959707 40.447711zM345.085533 497.155767c0 22.527839 18.431868 40.447711 40.959707 40.447711s40.959707-17.919872 40.959707-40.447711-18.431868-40.447711-40.959707-40.447711-40.959707 17.919872-40.959707 40.447711z" p-id="60680" fill="#1296db"></path></svg>`;
  const duiwutubiao = `<svg t="1747016563174" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="61812" width="200" height="200"><path d="M814.854912 699.376415c51.369172 20.244274 82.039177 45.714805 82.039177 73.406031 0 65.783199-173.040279 119.147018-386.494956 119.147018-213.403712 0-386.444591-53.363819-386.444591-119.147018 0-27.691225 30.632231-53.161756 82.014194-73.406031-12.293065 8.570189-19.058079 17.783942-19.058079 27.388431 0 44.70549 144.843996 80.903947 323.488275 80.903947 178.695444 0 323.513858-36.198457 323.513858-80.903947C833.912991 717.160157 827.185552 707.946604 814.854912 699.376415L814.854912 699.376415zM320.673168 157.838977c38.798095 0 70.25117 31.452675 70.25117 70.238179 0 38.798694-31.453075 70.264161-70.25117 70.264161-38.798694 0-70.25117-31.465666-70.25117-70.264161C250.421998 189.291452 281.874673 157.838977 320.673168 157.838977L320.673168 157.838977zM699.090601 157.838977c-38.773711 0-70.226187 31.452675-70.226187 70.238179 0 38.798694 31.452475 70.264161 70.226187 70.264161 38.823678 0 70.276153-31.465666 70.276153-70.264161C769.366753 189.291452 737.914278 157.838977 699.090601 157.838977L699.090601 157.838977zM629.684858 561.864848l0 185.170055 49.514229 0 19.777591-129.799596 19.828556 129.799596 53.906252 0L772.711486 541.960543c21.368512-11.157435 36.059352-33.522272 36.059352-59.219649l0-104.909671c0-36.690524-29.975477-66.704574-66.691583-66.704574l-82.06516 0c-5.288414 0-10.475897 0.618581-15.423543 1.804776 10.993546 16.79961 17.380216 36.830029 17.380216 58.311265l0 114.186781C661.970968 514.648061 649.967106 542.049482 629.684858 561.864848L629.684858 561.864848zM511.585329 131.850997c42.207184 0 76.435976 34.229193 76.435976 76.435577 0 42.219175-34.228793 76.448368-76.435976 76.448368-42.231167 0-76.447968-34.229193-76.447968-76.448368C435.137361 166.08019 469.353962 131.850997 511.585329 131.850997L511.585329 131.850997zM587.112921 550.012883c23.425118-12.040836 39.606147-36.526035 39.606147-64.583412l0-114.186781c0-39.908742-32.664853-72.573595-72.573595-72.573595l-89.334631 0c-39.934924 0-72.586586 32.664853-72.586586 72.573595l0 114.186781c0 27.931462 15.991558 52.302939 39.278369 64.432715l0 223.160097 58.652034 0 21.556785-141.246835 21.5334 141.246835 53.868277 0L587.113121 550.012883 587.112921 550.012883zM390.090902 561.864848c-20.269657-19.815565-32.260128-47.216787-32.260128-76.435577l0-114.186781c0-21.481436 6.361087-41.511655 17.366625-58.311265-4.947046-1.186196-10.122137-1.804776-15.422943-1.804776l-82.06516 0c-36.715907 0-66.692183 30.01405-66.692183 66.704574l0 104.909671c0 25.697577 14.691439 48.062214 36.072543 59.219649l0 205.07436 53.89386 0 19.828556-129.799596 19.777591 129.799596 49.501238 0L390.090902 561.864848z" fill="#2c2c2c" p-id="61813" data-spm-anchor-id="a313x.search_index.0.i27.c37e3a81TwHjNn" class=""></path></svg>`;
  const duiwutubiaoxuanzhong = `<svg t="1747016563174" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="61812" width="200" height="200"><path d="M814.854912 699.376415c51.369172 20.244274 82.039177 45.714805 82.039177 73.406031 0 65.783199-173.040279 119.147018-386.494956 119.147018-213.403712 0-386.444591-53.363819-386.444591-119.147018 0-27.691225 30.632231-53.161756 82.014194-73.406031-12.293065 8.570189-19.058079 17.783942-19.058079 27.388431 0 44.70549 144.843996 80.903947 323.488275 80.903947 178.695444 0 323.513858-36.198457 323.513858-80.903947C833.912991 717.160157 827.185552 707.946604 814.854912 699.376415L814.854912 699.376415zM320.673168 157.838977c38.798095 0 70.25117 31.452675 70.25117 70.238179 0 38.798694-31.453075 70.264161-70.25117 70.264161-38.798694 0-70.25117-31.465666-70.25117-70.264161C250.421998 189.291452 281.874673 157.838977 320.673168 157.838977L320.673168 157.838977zM699.090601 157.838977c-38.773711 0-70.226187 31.452675-70.226187 70.238179 0 38.798694 31.452475 70.264161 70.226187 70.264161 38.823678 0 70.276153-31.465666 70.276153-70.264161C769.366753 189.291452 737.914278 157.838977 699.090601 157.838977L699.090601 157.838977zM629.684858 561.864848l0 185.170055 49.514229 0 19.777591-129.799596 19.828556 129.799596 53.906252 0L772.711486 541.960543c21.368512-11.157435 36.059352-33.522272 36.059352-59.219649l0-104.909671c0-36.690524-29.975477-66.704574-66.691583-66.704574l-82.06516 0c-5.288414 0-10.475897 0.618581-15.423543 1.804776 10.993546 16.79961 17.380216 36.830029 17.380216 58.311265l0 114.186781C661.970968 514.648061 649.967106 542.049482 629.684858 561.864848L629.684858 561.864848zM511.585329 131.850997c42.207184 0 76.435976 34.229193 76.435976 76.435577 0 42.219175-34.228793 76.448368-76.435976 76.448368-42.231167 0-76.447968-34.229193-76.447968-76.448368C435.137361 166.08019 469.353962 131.850997 511.585329 131.850997L511.585329 131.850997zM587.112921 550.012883c23.425118-12.040836 39.606147-36.526035 39.606147-64.583412l0-114.186781c0-39.908742-32.664853-72.573595-72.573595-72.573595l-89.334631 0c-39.934924 0-72.586586 32.664853-72.586586 72.573595l0 114.186781c0 27.931462 15.991558 52.302939 39.278369 64.432715l0 223.160097 58.652034 0 21.556785-141.246835 21.5334 141.246835 53.868277 0L587.113121 550.012883 587.112921 550.012883zM390.090902 561.864848c-20.269657-19.815565-32.260128-47.216787-32.260128-76.435577l0-114.186781c0-21.481436 6.361087-41.511655 17.366625-58.311265-4.947046-1.186196-10.122137-1.804776-15.422943-1.804776l-82.06516 0c-36.715907 0-66.692183 30.01405-66.692183 66.704574l0 104.909671c0 25.697577 14.691439 48.062214 36.072543 59.219649l0 205.07436 53.89386 0 19.828556-129.799596 19.777591 129.799596 49.501238 0L390.090902 561.864848z" fill="#1296db" p-id="61813" data-spm-anchor-id="a313x.search_index.0.i27.c37e3a81TwHjNn" class=""></path></svg>`;
  const wode = `<svg t="1747016677504" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="66638" width="200" height="200"><path d="M512 599.900583c-165.406093 0-299.968593-134.562499-299.968593-299.944191S346.593907 0 512 0s299.956392 134.562499 299.956392 299.956392S677.393892 599.900583 512 599.900583z m0-553.256968c-139.686831 0-253.324977 113.638147-253.324977 253.312777s113.638147 253.300575 253.324977 253.300575 253.312776-113.638147 253.312776-253.300575S651.67463 46.643615 512 46.643615z" p-id="66639" fill="#2c2c2c"></path><path d="M512 463.178544a106.537287 106.537287 0 0 1-90.17603-49.413195l19.64327-12.566812a83.660809 83.660809 0 0 0 144.103516-5.148733l20.509526 11.114919a106.939913 106.939913 0 0 1-94.080282 56.013821zM987.95277 1024H36.04723l1.598304-24.828605C53.67737 749.982485 262.03024 554.782066 512 554.782066s458.347031 195.21262 474.366667 444.438132zM86.521894 977.295381h850.956212c-26.097487-212.68415-208.389472-375.906302-425.478106-375.906302S112.655983 764.586829 86.521894 977.295381z" p-id="66640" fill="#2c2c2c"></path></svg>`;
  const wodexuanzhong = `<svg t="1747016677504" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="66638" width="200" height="200"><path d="M512 599.900583c-165.406093 0-299.968593-134.562499-299.968593-299.944191S346.593907 0 512 0s299.956392 134.562499 299.956392 299.956392S677.393892 599.900583 512 599.900583z m0-553.256968c-139.686831 0-253.324977 113.638147-253.324977 253.312777s113.638147 253.300575 253.324977 253.300575 253.312776-113.638147 253.312776-253.300575S651.67463 46.643615 512 46.643615z" p-id="66639" fill="#1296db"></path><path d="M512 463.178544a106.537287 106.537287 0 0 1-90.17603-49.413195l19.64327-12.566812a83.660809 83.660809 0 0 0 144.103516-5.148733l20.509526 11.114919a106.939913 106.939913 0 0 1-94.080282 56.013821zM987.95277 1024H36.04723l1.598304-24.828605C53.67737 749.982485 262.03024 554.782066 512 554.782066s458.347031 195.21262 474.366667 444.438132zM86.521894 977.295381h850.956212c-26.097487-212.68415-208.389472-375.906302-425.478106-375.906302S112.655983 764.586829 86.521894 977.295381z" p-id="66640" fill="#1296db"></path></svg>`;
  const chuangjiantubiao = `<svg t="1747017520520" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="70747" width="200" height="200"><path d="M851.7 462.3H655.4c-21.3 0-38.6-17.3-38.6-38.6V219.5c0-35.9-29.4-65.3-65.3-65.3h-23.9c-35.9 0-65.3 29.4-65.3 65.3v204.1c0 21.3-17.3 38.6-38.6 38.6H227.3c-35.9 0-65.3 29.4-65.3 65.3v23.9c0 35.9 29.4 65.3 65.3 65.3h196.4c21.3 0 38.6 17.3 38.6 38.6v204.1c0 35.9 29.4 65.3 65.3 65.3h23.9c35.9 0 65.3-29.4 65.3-65.3v-204c0-21.3 17.3-38.6 38.6-38.6h196.4c35.9 0 65.3-29.4 65.3-65.3v-23.9c-0.1-36-29.5-65.3-65.4-65.3z" fill="#9c4fda" p-id="70748"></path><path d="M512.8 902.5h-23.9c-45 0-81.6-36.6-81.6-81.6V616.7c0-12.3-10-22.3-22.3-22.3H188.6c-45 0-81.6-36.6-81.6-81.6v-23.9c0-45 36.6-81.6 81.6-81.6H385c12.3 0 22.3-10 22.3-22.3V180.9c0-45 36.6-81.6 81.6-81.6h23.9c45 0 81.6 36.6 81.6 81.6V385c0 12.3 10 22.3 22.3 22.3h196.4c45 0 81.6 36.6 81.6 81.6v23.9c0 45-36.6 81.6-81.6 81.6H616.7c-12.3 0-22.3 10-22.3 22.3 0 9-7.3 16.4-16.4 16.4-9 0-16.4-7.3-16.4-16.4 0-30.3 24.7-55 55-55H813c27 0 48.9-21.9 48.9-48.9v-23.9c0-27-21.9-48.9-48.9-48.9H616.7c-30.3 0-55-24.7-55-55V180.9c0-27-21.9-48.9-48.9-48.9h-23.9c-27 0-48.9 21.9-48.9 48.9V385c0 30.3-24.7 55-55 55H188.6c-27 0-48.9 21.9-48.9 48.9v23.9c0 27 21.9 48.9 48.9 48.9H385c30.3 0 55 24.7 55 55v204.1c0 27 21.9 48.9 48.9 48.9h23.9c27 0 48.9-21.9 48.9-48.9V720.7c0-9 7.3-16.4 16.4-16.4 9 0 16.4 7.3 16.4 16.4v100.1c0 45-36.7 81.7-81.7 81.7z" fill="#c2c2cd" p-id="70749"></path></svg>`;
  const liulan = `<svg t="1747020422874" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="89622" width="200" height="200"><path d="M512 416a96 96 0 1 1-96 96 96 96 0 0 1 96-96m0-64a160 160 0 1 0 160 160 160 160 0 0 0-160-160z" fill="#333333" p-id="89623"></path><path d="M512 298.88c188.64 0 288 113.92 366.72 213.12C800 611.36 700.64 725.12 512 725.12S224 611.36 145.28 512C224 412.64 323.36 298.88 512 298.88m0-64C264.64 234.88 147.52 406.56 64 512c83.52 105.44 200.64 277.12 448 277.12S876.48 617.44 960 512c-83.52-105.44-200.64-277.12-448-277.12z" fill="#333333" p-id="89624"></path></svg>`;
  const guanlian = `<svg t="1747025607928" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="99668" width="200" height="200"><path d="M958.559699 580.330112L718.325746 340.080809c-37.690339-37.691362-87.991878-58.45932-141.631434-58.45932a200.669944 200.669944 0 0 0-73.944982 14.090899L358.145197 151.107231c-78.115969-78.114946-205.193972-78.114946-283.251613 0l-9.468633 9.441004C277.734612 198.23755 6.979958 248.538066 6.979958 302.165344c0 53.64058 20.754655 103.941096 58.444993 141.632457l240.234976 240.262606c37.690339 37.676012 87.990854 58.430667 141.618132 58.430667 25.798521 0 50.752816-4.889347 73.972611-14.075549l144.606179 144.619483c37.704665 37.704665 88.006204 58.444993 141.618132 58.444994 53.64058 0 103.928816-20.741352 141.632458-58.444994l9.453284-9.45533c37.705688-37.704665 58.460343-87.990854 58.460343-141.618132-0.001023-53.64058-20.755678-103.927793-58.461367-141.631434zM350.409018 639.30927L110.160739 399.047688c-25.742239-25.728936-39.917048-60.136515-39.917049-96.883368 0-36.732526 14.174809-71.141128 39.917049-96.868017l9.454307-9.468634c53.428756-53.401127 140.350258-53.415453 193.79334 0l133.517656 133.516633c-4.029772 3.452628-8.045217 6.946189-11.835536 10.723204l-9.482959 9.48296c-35.901603 35.87295-57.543462 85.680233-59.360851 136.588591-0.930183 25.728936 3.197825 50.625926 11.736276 73.733158L169.930911 351.832434c-25.221377-25.220354-25.221377-66.265084-0.057305-91.43018l4.833065-4.804413c25.207051-25.220354 66.237455-25.220354 91.444506 0l83.509806 83.497526c8.228389 8.242715 21.572275 8.242715 29.800663 0 8.256018-8.228389 8.256018-21.585578 0-29.813966l-83.497526-83.511852c-41.649502-41.649502-109.40861-41.663829-151.058112-0.041956l-4.834089 4.804413c-41.635176 41.678155-41.635176 109.464892 0.01535 151.100068l225.537258 225.552608c20.036295 20.036295 47.512012 31.153472 75.74702 31.153472 5.199408 0 10.413143-0.366343 15.598226-1.142007 22.825822-3.366671 43.481217-13.779814 59.741519-30.011465l4.79111-4.804413c40.395955-40.395955 41.494983-105.293904 3.522213-147.211512a66.098285 66.098285 0 0 1 5.099125-5.805204l4.776784-4.818739c5.002934-4.987584 10.736507-8.721621 16.738186-11.722973 1.255594 2.015909 2.692313 3.959164 4.454443 5.721294 25.474134 25.459807 39.225295 59.290243 38.69113 95.205148-0.507559 35.943558-15.132622 70.084055-41.157293 96.123052l-9.454307 9.439981c-25.756566 25.742239-60.149818 39.917048-96.896671 39.917049-36.717176-0.002047-71.139081-14.175832-96.866994-39.919095z m563.430243 179.535643l-9.483983 9.468634c-53.41443 53.401127-140.321605 53.401127-193.750361 0L577.074981 694.782588c4.042051-3.452628 8.05852-6.945165 11.848839-10.722181l9.441004-9.469657c37.733317-37.732294 58.938226-87.413711 59.699564-139.940936 0.352017-24.53167-3.987816-48.315306-12.244857-70.604917l208.86968 208.884007c25.206028 25.192725 25.206028 66.208802 0.02763 91.388224l-4.833066 4.833066c-12.145597 12.144574-28.391574 18.824703-45.723276 18.824703-17.316353 0-33.561306-6.679106-45.706903-18.824703l-88.218028-88.202678c-8.228389-8.242715-21.585578-8.242715-29.828293 0-8.242715 8.228389-8.242715 21.570228 0 29.79964L728.613023 798.96416c20.134533 20.134533 46.947148 31.194404 75.548499 31.194404 28.603398 0 55.431363-11.074198 75.50859-31.153471l4.833066-4.832043c41.663829-41.664852 41.663829-109.42396 0-151.086765L656.14774 414.743127c-41.663829-41.663829-109.422936-41.649502-151.086765 0l-4.775761 4.79111c-20.106903 20.092577-31.195427 46.933845-31.195427 75.536219 0 26.756334 9.791997 51.879474 27.518695 71.478818-1.606588 2.028189-3.057633 4.128009-4.918 6.016006l-4.79111 4.776783a64.079306 64.079306 0 0 1-16.146716 11.737299c-1.309829-2.183731-2.81818-4.283551-4.691849-6.171547-24.882664-24.895967-37.874533-58.45932-36.592334-94.528745 1.267874-35.069657 16.161042-69.378998 40.874862-94.107143l9.468633-9.454307c25.756566-25.742239 60.164144-39.917048 96.883367-39.917048 36.732526 0 71.167734 14.174809 96.89667 39.917048l240.247256 240.262605c53.41443 53.413407 53.41443 140.334908 0 193.764688z" fill="#1296db" p-id="99669"></path></svg>`;
  const qqtubiao = `<svg t="1747025712253" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="100957" width="200" height="200"><path d="M512 73.28A438.72 438.72 0 1 0 950.72 512 438.72 438.72 0 0 0 512 73.28zM759.84 646.4c-9.6 8.16-20.8-6.08-29.76-20.32s-14.88-26.72-16-21.76a158.4 158.4 0 0 1-37.44 70.72c-1.28 1.6 28.8 12.48 37.44 35.68s24 57.6-80 68.8a145.76 145.76 0 0 1-80-16c-16.96-8.32-27.52-16-29.6-16a73.6 73.6 0 0 1-13.28 0 108 108 0 0 1-14.4 0c-1.76 0-22.24 32-113.12 32-70.4 0-88.64-44.32-74.4-68.8s37.76-32 34.4-35.36a192 192 0 0 1-34.4-57.6 98.56 98.56 0 0 1-4.16-13.44c-1.28-4.64-6.56 8.64-13.92 21.76s-14.4 22.72-22.88 22.72a11.52 11.52 0 0 1-6.56-2.4c-20.96-16-19.2-55.2-5.44-93.12s48-75.04 48-83.2c1.28-30.24-3.04-35.2 0-43.2 6.56-17.76 14.72-10.88 14.72-20.16 0-116.32 86.4-210.56 192.96-210.56s192.96 94.24 192.96 210.56c0 4.48 11.68 0 17.12 20.16a196.96 196.96 0 0 1 0 43.2c0 11.04 29.44 24.48 44.8 83.2S768 640 759.84 646.4z" fill="#68A5E1" p-id="100958"></path></svg>`;
  const weixintubiao = `<svg t="1747025762795" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="102018" width="200" height="200"><path d="M337.387283 341.82659c-17.757225 0-35.514451 11.83815-35.514451 29.595375s17.757225 29.595376 35.514451 29.595376 29.595376-11.83815 29.595376-29.595376c0-18.49711-11.83815-29.595376-29.595376-29.595375zM577.849711 513.479769c-11.83815 0-22.936416 12.578035-22.936416 23.6763 0 12.578035 11.83815 23.676301 22.936416 23.676301 17.757225 0 29.595376-11.83815 29.595376-23.676301s-11.83815-23.676301-29.595376-23.6763zM501.641618 401.017341c17.757225 0 29.595376-12.578035 29.595376-29.595376 0-17.757225-11.83815-29.595376-29.595376-29.595375s-35.514451 11.83815-35.51445 29.595375 17.757225 29.595376 35.51445 29.595376zM706.589595 513.479769c-11.83815 0-22.936416 12.578035-22.936416 23.6763 0 12.578035 11.83815 23.676301 22.936416 23.676301 17.757225 0 29.595376-11.83815 29.595376-23.676301s-11.83815-23.676301-29.595376-23.6763z" fill="#28C445" p-id="102019"></path><path d="M510.520231 2.959538C228.624277 2.959538 0 231.583815 0 513.479769s228.624277 510.520231 510.520231 510.520231 510.520231-228.624277 510.520231-510.520231-228.624277-510.520231-510.520231-510.520231zM413.595376 644.439306c-29.595376 0-53.271676-5.919075-81.387284-12.578034l-81.387283 41.433526 22.936416-71.768786c-58.450867-41.433526-93.965318-95.445087-93.965317-159.815029 0-113.202312 105.803468-201.988439 233.803468-201.98844 114.682081 0 216.046243 71.028902 236.023121 166.473989-7.398844-0.739884-14.797688-1.479769-22.196532-1.479769-110.982659 1.479769-198.289017 85.086705-198.289017 188.67052 0 17.017341 2.959538 33.294798 7.398844 49.572255-7.398844 0.739884-15.537572 1.479769-22.936416 1.479768z m346.265896 82.867052l17.757225 59.190752-63.630058-35.514451c-22.936416 5.919075-46.612717 11.83815-70.289017 11.83815-111.722543 0-199.768786-76.947977-199.768786-172.393063-0.739884-94.705202 87.306358-171.653179 198.289017-171.65318 105.803468 0 199.028902 77.687861 199.028902 172.393064 0 53.271676-34.774566 100.624277-81.387283 136.138728z" fill="#28C445" p-id="102020"></path></svg>`;
  const youxiang = `<svg t="1747025799359" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="103080" width="200" height="200"><path d="M512 537.6l512-156.444444V312.888889c0-62.577778-51.2-113.777778-113.777778-113.777778H113.777778c-62.577778 0-113.777778 51.2-113.777778 113.777778v68.266667l512 156.444444z" fill="#4B9AFC" p-id="103081"></path><path d="M537.6 620.088889l-5.688889 14.222222-19.911111-5.688889-22.755556 5.688889-5.688888-14.222222-483.555556-147.911111V824.888889c0 62.577778 51.2 113.777778 113.777778 113.777778h796.444444c62.577778 0 113.777778-51.2 113.777778-113.777778V472.177778l-486.4 147.911111z" fill="#4B9AFC" p-id="103082"></path></svg>`;
  const weizhi = `<svg t="1747029909767" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="110857" width="200" height="200"><path d="M775.9 172.8C706.8 103.3 611.5 64.1 512 64.1c-99.5 0-194.8 39.2-263.9 108.8-145.6 146.2-145.6 378.3 0 524.5L512 959.9l263.9-262.5c145.6-146.3 145.6-378.3 0-524.6z m-39.7 487.6L511.5 870.3 289.7 650.8c-122.5-121.6-122.5-314.8 0-436.3 58.2-57.7 138.3-90.3 221.9-90.3s163.6 32.6 221.9 90.3c122.4 121.6 126.5 321.9 2.7 445.9zM512.1 273.1c-90.7 0-164.2 73.5-164.2 164.2s73.5 164.2 164.2 164.2S676.3 528 676.3 437.3s-73.5-164.2-164.2-164.2z m0 268.8c-57.7 0-104.5-46.8-104.5-104.5s46.8-104.5 104.5-104.5 104.5 46.8 104.5 104.5-46.8 104.5-104.5 104.5z" fill="#333333" p-id="110858"></path></svg>`;
  const renshu = `<svg t="1747029966643" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="111896" width="200" height="200"><path d="M576 563.2h-44.8c83.2-44.8 134.4-128 140.8-230.4 0-70.4-25.6-134.4-70.4-185.6-44.8-51.2-108.8-76.8-179.2-83.2-70.4-6.4-140.8 19.2-192 70.4S147.2 256 147.2 326.4c0 96 57.6 192 140.8 236.8h-51.2c-128 0-236.8 108.8-236.8 236.8v25.6C0 902.4 57.6 960 128 960h556.8c70.4 0 128-57.6 128-134.4v-25.6c0-128-102.4-236.8-236.8-236.8z m192 262.4c0 44.8-38.4 83.2-83.2 83.2H128c-44.8 0-83.2-38.4-83.2-83.2v-25.6c0-108.8 83.2-192 192-192h70.4c12.8 0 25.6-12.8 25.6-25.6v-32c0-6.4-6.4-19.2-12.8-19.2-76.8-38.4-128-115.2-128-204.8 0-57.6 25.6-115.2 70.4-160 44.8-44.8 102.4-64 160-57.6 115.2 6.4 204.8 108.8 204.8 224 0 83.2-51.2 160-128 192-6.4 6.4-12.8 12.8-12.8 25.6v38.4c0 12.8 12.8 25.6 25.6 25.6h64c102.4 0 192 89.6 192 192v19.2z" fill="#333333" p-id="111897"></path><path d="M832 512h-19.2c57.6-38.4 96-102.4 96-172.8 0-57.6-19.2-108.8-57.6-153.6s-89.6-64-140.8-70.4c-19.2 0-32 0-51.2 6.4-12.8 0-19.2 12.8-19.2 25.6s12.8 19.2 25.6 19.2c12.8-6.4 25.6-6.4 38.4-6.4 89.6 6.4 160 83.2 153.6 172.8 0 64-38.4 121.6-96 147.2-6.4 6.4-12.8 12.8-12.8 19.2v32c0 12.8 12.8 25.6 25.6 25.6h57.6c83.2 0 147.2 64 147.2 147.2v19.2c0 32-25.6 64-64 64h-44.8c-12.8 0-25.6 12.8-25.6 25.6s12.8 25.6 25.6 25.6h44.8c57.6 0 108.8-51.2 108.8-108.8V704c0-108.8-83.2-192-192-192z" fill="#333333" p-id="111898"></path></svg>`;
  const chuangjianrenwu = `<svg t="1747030601446" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="119307" width="200" height="200"><path d="M508.9 926.4c-36.3-1.6-64.6-32.2-64.6-68.6V166.1c0-36.3 28.3-66.9 64.6-68.6 38.8-1.7 70.7 29.2 70.7 67.6v693.7c0 38.4-31.9 69.4-70.7 67.6z" fill="#cdcdcd" p-id="119308"></path><path d="M858.9 579.6H165.2c-37.4 0-67.6-30.3-67.6-67.6 0-37.4 30.3-67.6 67.6-67.6h693.7c37.4 0 67.6 30.3 67.6 67.6 0 37.4-30.3 67.6-67.6 67.6z" fill="#cdcdcd" p-id="119309"></path></svg>`;
  const shijian = `<svg t="1747030975024" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12181" width="200" height="200"><path d="M512 170.666667C323.477333 170.666667 170.666667 323.477333 170.666667 512s152.810667 341.333333 341.333333 341.333333 341.333333-152.810667 341.333333-341.333333S700.522667 170.666667 512 170.666667zM85.333333 512C85.333333 276.352 276.352 85.333333 512 85.333333s426.666667 191.018667 426.666667 426.666667-191.018667 426.666667-426.666667 426.666667S85.333333 747.648 85.333333 512z" fill="#000000" p-id="12182"></path><path d="M554.666667 490.026667V277.333333h-85.333334v234.666667a42.666667 42.666667 0 0 0 17.856 34.730667l149.333334 106.666666 49.621333-69.461333L554.666667 490.048z" fill="#0078FF" p-id="12183"></path></svg>`;
  const zhengshu = `<svg t="1747031103925" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16980" width="200" height="200"><path d="M939.52 891.733333l-82.090667-141.994666a166.4 166.4 0 0 0-51.2-220.330667V168.96a39.936 39.936 0 0 0-39.936-39.936H196.608A39.765333 39.765333 0 0 0 156.842667 168.96v680.106667a39.765333 39.765333 0 0 0 39.765333 39.765333h290.986667l-1.706667 2.901333a17.066667 17.066667 0 0 0 0 18.090667 17.066667 17.066667 0 0 0 17.066667 7.509333l53.077333-6.826666 20.650667 49.322666a17.066667 17.066667 0 0 0 14.677333 10.410667h1.024a17.066667 17.066667 0 0 0 14.848-8.533333L682.666667 831.317333a174.250667 174.250667 0 0 0 30.208 2.901334 178.005333 178.005333 0 0 0 30.378666-2.901334L819.2 961.706667a17.066667 17.066667 0 0 0 14.848 8.533333h1.024a17.066667 17.066667 0 0 0 14.677333-10.410667L870.4 910.506667l53.077333 6.826666a17.066667 17.066667 0 0 0 17.066667-25.6z m-742.912-37.034666a5.632 5.632 0 0 1-5.632-5.632V168.96a5.802667 5.802667 0 0 1 5.632-5.802667h569.344a5.802667 5.802667 0 0 1 5.802667 5.802667V512a162.474667 162.474667 0 0 0-46.592-10.410667v-274.773333a17.066667 17.066667 0 0 0-17.066667-17.066667H254.464a17.066667 17.066667 0 0 0-17.066667 17.066667v564.224a17.066667 17.066667 0 0 0 17.066667 17.066667H534.186667l-26.965334 46.592zM546.133333 667.477333a166.229333 166.229333 0 0 0 21.845334 82.261334l-14.165334 24.234666H271.530667V243.882667h419.498666v258.56A166.912 166.912 0 0 0 546.133333 667.477333z m48.469334 247.466667l-12.288-29.525333a17.066667 17.066667 0 0 0-17.066667-10.24l-31.744 3.925333 57.344-99.328A166.4 166.4 0 0 0 648.533333 821.248zM580.266667 667.477333a132.437333 132.437333 0 1 1 132.437333 132.608A132.608 132.608 0 0 1 580.266667 667.477333z m280.746666 207.701334a17.066667 17.066667 0 0 0-17.92 10.24l-12.288 29.525333-54.101333-93.696A166.4 166.4 0 0 0 836.266667 779.776l57.344 99.328z" fill="#3D3D63" p-id="16981"></path><path d="M794.794667 629.248L753.322667 614.4l-27.136-34.133333A17.066667 17.066667 0 0 0 699.733333 580.266667l-27.136 34.133333-41.130666 14.848a17.066667 17.066667 0 0 0-10.410667 10.752 17.066667 17.066667 0 0 0 2.048 14.848l24.917333 36.522667 0.512 44.202666a17.066667 17.066667 0 0 0 6.997334 13.312 17.066667 17.066667 0 0 0 14.848 2.56l42.325333-12.458666 42.496 12.458666a14.677333 14.677333 0 0 0 4.778667 0 17.066667 17.066667 0 0 0 9.898666-3.242666 17.066667 17.066667 0 0 0 7.168-13.312l1.194667-44.202667 24.917333-36.522667a17.066667 17.066667 0 0 0 2.218667-14.848 17.066667 17.066667 0 0 0-10.581333-10.069333z m-47.445334 47.104a17.066667 17.066667 0 0 0-3.072 9.045333v27.136L716.8 704.853333a17.066667 17.066667 0 0 0-9.557333 0l-24.576 7.68-0.853334-27.136a17.066667 17.066667 0 0 0-3.072-9.045333l-15.189333-22.528 25.429333-9.045333a18.602667 18.602667 0 0 0 7.850667-5.632l17.066667-21.504 17.066666 21.504a18.602667 18.602667 0 0 0 7.850667 5.632l25.429333 9.045333zM558.250667 295.253333h-153.6a17.066667 17.066667 0 0 0 0 34.133334h153.6a17.066667 17.066667 0 0 0 0-34.133334zM337.749333 642.901333h87.210667a17.066667 17.066667 0 0 0 0-34.133333h-87.210667a17.066667 17.066667 0 0 0 0 34.133333zM494.933333 684.202667h-157.184a17.066667 17.066667 0 0 0 0 34.133333H494.933333a17.066667 17.066667 0 0 0 0-34.133333z" fill="#3D3D63" p-id="16982"></path></svg>`;
  const xuefen = `<svg t="1747031327013" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="28981" width="200" height="200"><path d="M881.2 170.8c-2.3-36.7-20.4-71.3-52.2-90.8-14.8-9.1-32.4-13.9-49.8-14H272c-9 0-18-0.1-27 0-24.6 0.1-46.5 9.5-65.2 25.1-10.1 8.4-18.8 19.6-24.7 31.3-7.6 15-11.6 30.1-13.1 46.8-0.7 7.4-0.4 15-0.4 22.5V929.9c0 11.3 6.1 21.9 15.8 27.6 10.4 6.1 21.9 5.2 32.3 0l33.6-16.8c26.9-13.4 53.9-26.8 80.8-40.2 32.6-16.2 65.1-32.4 97.7-48.7 28.1-14 56.3-28 84.4-42.1l25.5-12.6c5.8 2.9 11.5 5.7 17.3 8.6 26.9 13.3 53.9 26.7 80.8 40 32.6 16.1 65.1 32.3 97.7 48.4 28.1 13.9 56.3 27.9 84.4 41.8 13.6 6.8 27.2 13.6 40.9 20.3l0.6 0.3c10.5 5.2 21.9 6.1 32.3 0 9.7-5.7 15.8-16.4 15.8-27.6v-23.4-63.2V750 639.2 521 405.2 302.9 225v-43.6c-0.2-3.4-0.1-7-0.3-10.6zM750.4 844.4c-32.6-16.1-65.1-32.3-97.7-48.4-28.2-13.9-56.3-27.9-84.5-41.8-13.4-6.7-26.8-13.5-40.3-20-6.8-3.2-13.2-5-20.8-4-4.5 0.6-8.3 2.1-12.4 4-1.5 0.7-2.9 1.5-4.4 2.2-6.9 3.4-13.8 6.9-20.8 10.3L393 784.8c-32.5 16.2-65 32.4-97.6 48.6-29.3 14.6-58.5 29.2-87.8 43.7-0.8 0.4-1.5 0.8-2.3 1.2v-24.2-82.3-99.5-109.6-109.9-102-85.6-60.5-26.9c0-2.7 0.1-5.4 0.3-8 0.9-4.6 2.1-9.1 3.7-13.6 1.8-3.8 3.9-7.4 6.3-10.9 2.5-2.9 5.2-5.6 8-8.1 2.6-1.8 5.4-3.4 8.2-4.8 2.7-0.9 5.5-1.7 8.3-2.3 5.5-0.4 11.1-0.2 16.5-0.2h455.6c21.9 0 43.9 0.3 65.9 0h0.9c1.4 0 2.7 0.1 4.1 0.2 2.8 0.6 5.5 1.3 8.2 2.2 2.8 1.4 5.4 2.9 8 4.7 2.8 2.4 5.4 5 7.8 7.8 2.3 3.4 4.4 7 6.2 10.7 1.6 4.4 2.8 8.8 3.7 13.4 0.7 8.3 0.4 16.8 0.4 25.1v683.6c-22.4-11.1-44.7-22.2-67-33.2z" fill="#2c2c2c" p-id="28982"></path><path d="M705.4 436.2c12.8-12.2 17.6-28.5 12.8-43.5-4.8-15-18.1-25.5-35.6-28l-89.2-13c-1.5-0.5-4.3-2.5-5.3-3.8l-39.3-78.6c-7.8-15.7-21.9-25.1-37.5-25.1h-0.1c-15.6 0-29.7 9.3-37.5 25l-40 79.5c-1 1.3-3.8 3.3-5.4 3.9l-89.2 13c-17.5 2.6-30.8 13-35.6 28-4.8 15 0 31.2 12.8 43.5l64.4 61.7c0.9 1.2 1.8 4.2 1.9 5.7L367.7 591c-3 17.3 2.8 33.2 15.5 42.5 6.8 5 14.8 7.5 23.2 7.5 7.2 0 14.8-1.9 22-5.6l79.7-41.4c1.6-0.5 5.2-0.5 6.8 0l79.6 40.8c15.7 8 32.6 7.2 45.2-2.1 12.6-9.4 18.3-25.3 15.2-42.6l-15.6-86.6c0-1.5 0.9-4.2 1.8-5.5l64.3-61.8z m-109 15.7c-15.8 15.1-24.2 40.8-20.3 62.3l7.8 43.1-40.2-20.6c-19.1-9.8-45.8-9.7-64.9 0.2l-40.4 21 7.4-43.1c3.7-21.5-4.7-47-20.5-62.1l-31.8-30.5 44.5-6.5c21.4-3.1 43-18.8 52.7-38l20.5-40.7 19.8 39.7c9.7 19.3 31.3 35 52.7 38.1l44.4 6.5-31.7 30.6z" fill="#2c2c2c" p-id="28983"></path></svg>`;
  const zhiyaunshichang = `<svg t="1747031454007" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="37394" width="200" height="200"><path d="M409.6 910.222222h-318.577778v-819.2h762.311111v261.688889h-56.888889v-204.8h-648.533333V853.333333h261.688889z" fill="#2c2c2c" p-id="37395"></path><path d="M709.688889 996.124444c-153.6 0-284.444444-125.155556-284.444445-284.444444 0-153.6 125.155556-284.444444 284.444445-284.444444 153.6 0 284.444444 125.155556 284.444444 284.444444s-125.155556 284.444444-284.444444 284.444444M244.622222 233.244444h455.111111v73.955556h-455.111111zM244.622222 403.911111h170.666667v73.955556h-170.666667z" fill="#2c2c2c" p-id="37396"></path><path d="M866.424615 867.73652H617.569231c-39.934924 0-72.586586 32.664853-72.586586 72.573595v72.573595h248.855391v-72.573595c0-39.908742 32.651662-72.573595 72.586586-72.573595h248.855391v-72.573595c0-39.908742-32.651662-72.573595-72.586586-72.573595z" fill="#2c2c2c" p-id="37397"></path></svg>`;
  const xianjin = `<svg t="1747031541355" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="42812" width="200" height="200"><path d="M512 42.666667c259.2 0 469.333333 210.133333 469.333333 469.333333a467.370667 467.370667 0 0 1-103.850666 294.485333l-60.757334-60.8A382.336 382.336 0 0 0 896 512c0-212.074667-171.925333-384-384-384S128 299.925333 128 512s171.925333 384 384 384c93.376 0 178.986667-33.322667 245.546667-88.746667l60.565333 60.522667A467.498667 467.498667 0 0 1 512 981.333333C252.8 981.333333 42.666667 771.2 42.666667 512S252.8 42.666667 512 42.666667z m97.834667 225.834666l60.330666 60.330667L593.706667 405.333333 682.666667 405.333333v85.333334h-127.914667v42.666666H682.666667v85.333334h-127.914667v128h-85.333333v-128H341.333333v-85.333334h128.085334v-42.666666H341.333333v-85.333334l88.96-0.021333-76.458666-76.48 60.330666-60.330667L512 366.293333l97.834667-97.813333z" fill="#333333" p-id="42813"></path></svg>`;
  const liping = `<svg t="1747031594902" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="45964" width="200" height="200"><path d="M787.692308 920.812308H236.307692c-39.384615 0-70.892308-31.507692-70.892307-70.892308v-354.461538c0-17.329231 14.178462-31.507692 31.507692-31.507693h630.153846c17.329231 0 31.507692 14.178462 31.507692 31.507693v354.461538c0 38.596923-31.507692 70.892308-70.892307 70.892308z m-559.261539-393.846154v322.953846c0 4.726154 3.150769 7.876923 7.876923 7.876923h551.384616c4.726154 0 7.876923-3.150769 7.876923-7.876923v-322.953846H228.430769z" fill="#2c2c2c" p-id="45965"></path><path d="M590.769231 495.245785v393.846153h-157.538462v-393.846153z" fill="#2c2c2c" p-id="45966"></path><path d="M590.769231 920.812308H433.230769c-17.329231 0-31.507692-14.178462-31.507692-31.507693v-393.846153c0-17.329231 14.178462-31.507692 31.507692-31.507693h157.538462c17.329231 0 31.507692 14.178462 31.507692 31.507693v393.846153c0 17.329231-14.178462 31.507692-31.507692 31.507693z m-126.030769-63.015385h94.523076v-330.830769H464.738462v330.830769z" fill="#2c2c2c" p-id="45967"></path><path d="M866.461538 526.966154H157.538462c-39.384615 0-70.892308-31.507692-70.892308-70.892308v-78.769231c0-39.384615 31.507692-70.892308 70.892308-70.892307h708.923076c39.384615 0 70.892308 31.507692 70.892308 70.892307v78.769231c0 38.596923-31.507692 70.892308-70.892308 70.892308z m-708.923076-157.538462c-4.726154 0-7.876923 3.150769-7.876924 7.876923v78.769231c0 4.726154 3.150769 7.876923 7.876924 7.876923h708.923076c4.726154 0 7.876923-3.150769 7.876924-7.876923v-78.769231c0-4.726154-3.150769-7.876923-7.876924-7.876923H157.538462z" fill="#2c2c2c" p-id="45968"></path><path d="M590.769231 369.427692H433.230769c-17.329231 0-31.507692-14.178462-31.507692-31.507692v-7.876923c0-56.713846 45.686154-102.4 102.4-102.4h15.753846c56.713846 0 102.4 45.686154 102.4 102.4v7.876923c0 17.329231-14.178462 31.507692-31.507692 31.507692z m-118.153846-63.015384h78.76923c-7.089231-9.452308-18.904615-15.753846-31.507692-15.753846h-15.753846c-12.603077 0-24.418462 6.301538-31.507692 15.753846z" fill="#2c2c2c" p-id="45969"></path><path d="M445.046154 290.658462l-187.470769-149.661539c-25.993846-17.329231-60.652308 1.575385-60.652308 33.083077v163.052308h236.307692v-7.876923c0-14.178462 4.726154-27.569231 11.815385-38.596923z" fill="#2c2c2c" p-id="45970"></path><path d="M433.230769 369.427692H196.923077c-17.329231 0-31.507692-14.178462-31.507692-31.507692V174.08c0-25.993846 14.178462-49.624615 37.021538-62.227692 22.843077-12.603077 50.412308-11.027692 72.467692 3.150769 0.787692 0.787692 1.575385 0.787692 2.363077 1.575385l187.47077 149.661538c12.603077 10.24 15.753846 28.356923 6.301538 41.747692-3.938462 6.301538-6.301538 14.178462-6.301538 22.055385v7.876923c0 17.329231-14.178462 31.507692-31.507692 31.507692z m-204.8-63.015384h175.655385c0.787692-2.363077 0.787692-3.938462 1.575384-6.301539L239.458462 166.990769c-3.150769-1.575385-5.513846-0.787692-7.089231 0-1.575385 0.787692-3.938462 3.150769-3.938462 7.089231v132.332308z" fill="#2c2c2c" p-id="45971"></path><path d="M766.424615 140.996923l-187.470769 149.661539c7.089231 11.027692 11.815385 24.418462 11.815385 39.384615v7.876923h236.307692V174.08c0-30.72-34.658462-49.624615-60.652308-33.083077z" fill="#2c2c2c" p-id="45972"></path><path d="M827.076923 369.427692H590.769231c-17.329231 0-31.507692-14.178462-31.507693-31.507692v-7.876923c0-7.876923-2.363077-14.966154-6.301538-22.055385-9.452308-13.390769-6.301538-31.507692 6.301538-41.747692l187.47077-149.661538c0.787692-0.787692 1.575385-1.575385 2.363077-1.575385 22.055385-14.178462 49.624615-15.753846 72.467692-3.150769 22.843077 12.603077 37.021538 36.233846 37.021538 62.227692v163.052308c0 18.116923-14.178462 32.295385-31.507692 32.295384z m-207.163077-63.015384H795.569231V174.08c0-3.938462-2.363077-6.301538-3.938462-7.089231-1.575385-0.787692-3.938462-1.575385-7.089231 0L617.550769 300.110769c0.787692 1.575385 1.575385 3.938462 2.363077 6.301539z" fill="#2c2c2c" p-id="45973"></path></svg>`;
  const shixijihui = `<svg t="1747031692880" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="53958" width="200" height="200"><path d="M838.3 960.4H184.7C117.6 960.4 63 905.8 63 838.7v-620c0-32.9 7.6-60 22.5-80.7 12.8-17.8 37.1-39 80.2-39h82.2c19.3 0 35 15.7 35 35s-15.7 35-35 35h-82.2c-9.8 0-32.7 0-32.7 49.7v620c0 28.5 23.2 51.7 51.7 51.7h653.7c28.5 0 51.7-23.2 51.7-51.7v-620c0-28.5-23.2-51.7-51.7-51.7h-90.6c-19.3 0-35-15.7-35-35s15.7-35 35-35h90.6c67 0 121.6 54.6 121.6 121.7v620c0 67.1-54.6 121.7-121.7 121.7z" fill="#2c2c2c" p-id="53959"></path><path d="M339.1 220.7c-18.6 0-33.7-15.1-33.7-33.7V94.4c0-18.6 15.1-33.7 33.7-33.7s33.7 15.1 33.7 33.7V187c0 18.6-15.1 33.7-33.7 33.7zM419.3 140.7c0-18.6 15.1-33.7 33.7-33.7h92.6c18.6 0 33.7 15.1 33.7 33.7s-15.1 33.7-33.7 33.7H453c-18.6 0-33.7-15.1-33.7-33.7zM659.6 220.7c-18.6 0-33.7-15.1-33.7-33.7V94.4c0-18.6 15.1-33.7 33.7-33.7s33.7 15.1 33.7 33.7V187c0 18.6-15.1 33.7-33.7 33.7zM303.5 495h158.9c4.1-26.5 6.7-56.5 7.8-89.8H330.4c-18.3 0-33.2-14.9-33.2-33.2 0-18.3 14.9-33.2 33.2-33.2h355.5c18.3 0 33.2 14.9 33.2 33.2 0 18.3-14.9 33.2-33.2 33.2H541.5c-1.3 28.5-3.1 58.4-5.4 89.8h174.6c18.3 0 33.2 14.9 33.2 33.2 0 0 1.1 35.8-33.2 34.2H557.2c28.9 66 75.7 114.2 140.5 144.5 23.9 11.2 31.2 41.6 14.7 62.2-17.1 18.9-41.9 16.9-51.4 11.6-70.3-37.6-122.5-96-156.8-175.3-25.8 66.3-77.4 123.1-154.6 170.5-6.5 3.1-34.9 11.2-50.4-8.1-17.1-18.1-12.4-45.6 10.7-59.8 76.9-42.2 122.7-90.8 137.4-145.6H303.5c-35.3 0.4-33.2-34.2-33.2-34.2s0.4-33.4 33.2-33.2z" fill="#2c2c2c" p-id="53960"></path></svg>`;
  const bianji = `<svg t="1747044161140" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="55913" width="200" height="200"><path d="M526.41 117.029v58.514a7.314 7.314 0 0 1-7.315 7.314H219.429a36.571 36.571 0 0 0-35.987 29.989l-0.585 6.583V804.57a36.571 36.571 0 0 0 29.989 35.987l6.583 0.585H804.57a36.571 36.571 0 0 0 35.987-29.989l0.585-6.583v-317.44a7.314 7.314 0 0 1 7.314-7.314h58.514a7.314 7.314 0 0 1 7.315 7.314v317.44a109.714 109.714 0 0 1-99.182 109.203l-10.533 0.512H219.43a109.714 109.714 0 0 1-109.203-99.182l-0.512-10.533V219.43a109.714 109.714 0 0 1 99.182-109.203l10.533-0.512h299.666a7.314 7.314 0 0 1 7.314 7.315z m307.345 31.817l41.4 41.399a7.314 7.314 0 0 1 0 10.313L419.985 655.726a7.314 7.314 0 0 1-10.313 0l-41.399-41.4a7.314 7.314 0 0 1 0-10.312l455.168-455.168a7.314 7.314 0 0 1 10.313 0z" p-id="55914"></path></svg>`;
  const weituo = `<svg t="1747044540567" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="61968" width="200" height="200"><path d="M935.3812325 756.16843719c-14.42459062-12.23541188-169.07659594-150.99337781-178.76296406-160.8896672-14.39460187-14.90441063-32.17793344-19.58265657-42.67399782-19.67262187l-266.63001373 0.11995501c-28.519305 2.519055-70.59352781 23.961015-69.57390939 72.66275062 0.80969625 38.29563937 25.160565 69.78383063 62.10670969 79.83006375H347.06185156a5433.06260156 5433.06260156 0 0 1-111.70810875-83.638635c-35.26677469-25.61039625-68.25440438-35.08684219-98.03323781-28.18942875a81.32950125 81.32950125 0 0 0-52.48032 39.94502062c-7.88704219 17.24353406-11.24578313 44.14344656 5.24803219 63.24628218 0.7797075 0.8996625 1.64938125 1.799325 2.519055 2.57903344 43.09383938 39.07534688 188.86917375 170.15619187 200.53479937 180.20242407a57.00862219 57.00862219 0 0 0 47.62214156 12.83518594c32.26789969-0.0599775 279.19530187-0.2998875 300.93714844 0 11.45570437 0.14994375 20.51230781 7.85705344 20.7822075 8.09696437 0 0 48.67174781 42.73397438 60.36736219 52.51030875 14.99437689 12.56528813 28.96913625 15.92402812 39.58515562 15.92402813 2.5790325 0 5.00812219-0.20992125 7.16731219-0.50980875a52.0604775 52.0604775 0 0 0 32.95764094-19.31275781l135.5791575-147.75459188c0.74971875-0.839685 1.46944875-1.70935875 2.12920125-2.57903344 16.61376938-22.01174531 14.63451188-48.85168031-4.88816625-65.40547218z m-174.89441531 172.91515687a7155.16681219 7155.16681219 0 0 1-57.84830625-50.35111875c-2.5790325-2.36911125-25.91028375-22.97138531-60.06747469-23.481195-23.6611275-0.32987625-293.82981375-0.02998875-305.31550687 0-2.06922375 0-4.16843719 0.20992125-6.17768344 0.62976469a45860.00249906 45860.00249906 0 0 1-192.46782469-173.00512313 21.80182406 21.80182406 0 0 1 12.23541187-8.06697562c11.84555813-2.72897625 29.239035 3.74859469 48.43183782 17.69336531 46.93240031 36.55629094 119.62514063 89.39647594 120.34487062 89.96626313a29.98875375 29.98875375 0 0 0 17.63338781 5.72785125h177.83331188a29.80882125 29.80882125 0 0 0 17.48344406-5.637885l50.35111875-36.13644938c15.50418562-10.46607563 22.37161031-25.61039625 18.38310563-40.48481812-1.40947125-5.36798719-8.03698594-23.03136281-33.04760719-24.83068875-73.11258281-5.21804343-102.08171906-8.78670469-112.33787249-10.61601844-16.52380313-3.68861719-18.11320781-18.77296031-18.20317407-23.33125125-0.1799325-8.03698594 8.27689594-10.67599687 14.12470312-11.54566969h262.76146405c-2.3991 0.02998875-3.20879625-0.20992125-1.07959499 1.40947124 10.43608688 10.76596311 134.28964125 121.66437562 172.34537063 155.46170157l-125.38298156 136.59877594z" fill="#1296db" p-id="61969"></path><path d="M188.18143156 606.82444062c16.55379188 0 29.98875375-14.81444437 29.98875469-31.36823625l-0.2998875-483.38872968h416.09396436v103.22129156a74.46207655 74.46207655 0 0 0 74.37211033 74.37211125h103.2212925v308.49431438a29.98875375 29.98875375 0 0 0 59.97750843 0V182.93340031L723.45070625 32.08996625H217.87029875c-32.92765219 0-59.67762094 27.799575-59.67762094 61.9267772v484.16843717c0 16.58378062 13.43496188 28.63926 29.98875375 28.63926zM811.58765469 207.46420062v2.27914594h-103.2212925a14.39460187 14.39460187 0 0 1-14.39460188-14.39460187V92.06747469h4.37835844l113.23753594 115.39672594z" fill="#1296db" p-id="61970"></path><path d="M694.93140031 305.55741594h-359.86505062a29.98875375 29.98875375 0 0 0 0 59.97750843h359.86505062a29.98875375 29.98875375 0 0 0 0-59.97750843zM694.93140031 425.51243281h-359.86505062a29.98875375 29.98875375 0 0 0 0 59.97750844h359.86505062a29.98875375 29.98875375 0 0 0 0-59.97750844z" fill="#1296db" p-id="61971"></path></svg>`;
  const xunzhaoduiyou = `<svg t="1747045576412" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="103729" width="200" height="200"><path d="M702.171429 515.657143m-160.914286 0a160.914286 160.914286 0 1 0 321.828571 0 160.914286 160.914286 0 1 0-321.828571 0Z" fill="#1296db" opacity=".1" p-id="103730"></path><path d="M680.228571 757.028571h-32.914285c-7.314286 0-10.971429 0-14.628572-3.657142-80.457143-21.942857-146.285714-84.114286-168.228571-164.571429 0-3.657143-3.657143-3.657143-3.657143-3.657143h-3.657143l-10.971428 10.971429c-21.942857 25.6-58.514286 29.257143-80.457143 7.314285-3.657143-3.657143-7.314286-3.657143-7.314286-7.314285l-21.942857-29.257143c-18.285714-21.942857-47.542857-29.257143-73.142857-14.628572-76.8 43.885714-138.971429 113.371429-168.228572 201.142858-14.628571 29.257143-3.657143 62.171429 21.942857 80.457142 10.971429 3.657143 21.942857 7.314286 32.914286 7.314286h501.028572c32.914286 3.657143 58.514286-21.942857 62.171428-54.857143 0-10.971429 0-21.942857-7.314286-29.257143h-25.6z m-226.742857-241.371428c3.657143-3.657143 0-10.971429 0-18.285714 3.657143-58.514286 29.257143-109.714286 69.485715-153.6 25.6-18.285714 29.257143-51.2 14.628571-76.8-51.2-80.457143-168.228571-124.342857-252.342857-36.571429C193.828571 329.142857 230.4 530.285714 402.285714 530.285714c14.628571 0 43.885714 0 51.2-14.628571z" fill="#1296db" p-id="103731"></path><path d="M643.657143 497.371429c-3.657143 0-10.971429-3.657143-14.628572-7.314286-7.314286-7.314286-7.314286-18.285714 0-25.6 25.6-25.6 91.428571-54.857143 146.285715 0 7.314286 7.314286 7.314286 18.285714 0 25.6-7.314286 7.314286-18.285714 7.314286-25.6 0-43.885714-43.885714-91.428571 0-95.085715 0-3.657143 7.314286-7.314286 7.314286-10.971428 7.314286z" fill="#1296db" p-id="103732"></path><path d="M936.228571 724.114286l-98.742857-98.742857c25.6-29.257143 40.228571-69.485714 40.228572-113.371429 0-98.742857-80.457143-179.2-179.2-179.2s-179.2 80.457143-179.2 179.2 80.457143 179.2 179.2 179.2c43.885714 0 80.457143-14.628571 113.371428-40.228571l98.742857 98.742857c3.657143 3.657143 7.314286 3.657143 14.628572 3.657143s10.971429 0 14.628571-3.657143c3.657143-7.314286 3.657143-18.285714-3.657143-25.6z m-376.685714-208.457143c0-76.8 62.171429-142.628571 142.628572-142.628572S841.142857 438.857143 841.142857 515.657143 778.971429 658.285714 698.514286 658.285714s-138.971429-65.828571-138.971429-142.628571z" fill="#1296db" p-id="103733"></path></svg>`;
  const xiangmuzhanshi = `<svg t="1747044971373" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="80176" width="200" height="200"><path d="M534 512m-490 0a490 490 0 1 0 980 0 490 490 0 1 0-980 0Z" fill="#d4699a" p-id="80177" data-spm-anchor-id="a313x.search_index.0.i37.6ee83a81CNsn9u" class="selected"></path><path d="M371.44 717.06h157.42v82.46h-157.42z" fill="#445EA0" p-id="80178"></path><path d="M371.44 717.06h39.684v82.46H371.44z" fill="#2E4C89" p-id="80179"></path><path d="M633.712 797.526H255.12c-5.612 0-10.202 4.592-10.202 10.204v51.142c0 5.612 4.592 10.204 10.202 10.204h378.592v-71.55z" fill="#293D7C" p-id="80180"></path><path d="M284.602 858.87v-51.142c0-5.612 4.592-10.204 10.204-10.204H255.12c-5.612 0-10.202 4.592-10.202 10.204v51.142c0 5.612 4.592 10.204 10.202 10.204h39.684c-5.61 0-10.202-4.592-10.202-10.204z" fill="#1A2B63" p-id="80181"></path><path d="M890.108 117.928H10.204C4.592 117.928 0 122.52 0 128.132V708.86a10.232 10.232 0 0 0 10.204 10.204h623.508V413.536c0-7.718 6.28-14 14-14h252.6V128.132c0-5.612-4.592-10.204-10.204-10.204z" fill="#293D7C" p-id="80182"></path><path d="M44.792 617.028a6.138 6.138 0 0 0 6.122 6.12h582.798V413.536c0-7.718 6.28-14 14-14H855.52v-181.54H44.792v399.032z" fill="#FFFFFF" p-id="80183"></path><path d="M84.478 617.028V217.996H44.792v399.032a6.138 6.138 0 0 0 6.122 6.12H90.6a6.14 6.14 0 0 1-6.122-6.12z" fill="#D9EAFC" p-id="80184"></path><path d="M450.16 670.92m-27.548 0a27.548 27.548 0 1 0 55.096 0 27.548 27.548 0 1 0-55.096 0Z" fill="#445EA0" p-id="80185"></path><path d="M633.712 446.292h-106.848c-3.3 0-6 2.7-6 6v119.278c0 3.3 2.7 6 6 6h106.848v-131.278z" fill="#C3DDF4" p-id="80186"></path><path d="M560.548 571.57v-119.278c0-3.3 2.7-6 6-6h-39.684c-3.3 0-6 2.7-6 6v119.278c0 3.3 2.7 6 6 6h39.684c-3.3 0-6-2.7-6-6z" fill="#AEC1ED" p-id="80187"></path><path d="M647.712 399.536h93.236v-130.764c0-5.5-4.5-10-10-10H169.364c-5.5 0-10 4.5-10 10v133.05c0 5.5 4.5 10 10 10h464.466c0.848-6.912 6.746-12.286 13.882-12.286z" fill="#C3DDF4" p-id="80188"></path><path d="M199.048 401.82v-133.05c0-5.5 4.5-10 10-10H169.364c-5.5 0-10 4.5-10 10v133.05c0 5.5 4.5 10 10 10h39.684c-5.5 0-10-4.5-10-10z" fill="#AEC1ED" p-id="80189"></path><path d="M849.398 169.966H50.914a6.14 6.14 0 0 0-6.122 6.124v43.906H855.52V176.09a6.14 6.14 0 0 0-6.122-6.124z" fill="#d4699a" p-id="80190" data-spm-anchor-id="a313x.search_index.0.i36.6ee83a81CNsn9u" class="selected"></path><path d="M90.6 169.966H50.914a6.14 6.14 0 0 0-6.122 6.124v43.906h39.684V176.09a6.142 6.142 0 0 1 6.124-6.124z" fill="#FF9518" p-id="80191"></path><path d="M343.008 477.958h-168.34c-8.284 0-15-6.714-15-15s6.716-15 15-15h168.34c8.284 0 15 6.714 15 15s-6.716 15-15 15zM343.008 526.932h-168.34c-8.284 0-15-6.714-15-15s6.716-15 15-15h168.34a15 15 0 0 1 0 30zM343.008 575.906h-168.34c-8.284 0-15-6.714-15-15s6.716-15 15-15h168.34c8.284 0 15 6.714 15 15s-6.716 15-15 15zM475.12 477.958h-86.652c-8.284 0-15-6.714-15-15s6.716-15 15-15h86.652c8.284 0 15 6.714 15 15s-6.716 15-15 15zM475.12 526.932h-86.652c-8.284 0-15-6.714-15-15s6.716-15 15-15h86.652a15 15 0 0 1 0 30zM475.12 575.906h-86.652c-8.284 0-15-6.714-15-15s6.716-15 15-15h86.652c8.284 0 15 6.714 15 15s-6.716 15-15 15z" fill="#5DC1D8" p-id="80192"></path><path d="M1008 397.536c8.8 0 16 7.2 16 16v483.54c0 8.8-7.2 16-16 16H647.712c-8.8 0-16-7.2-16-16v-483.54c0-8.8 7.2-16 16-16H1008z" fill="#445EA0" p-id="80193"></path><path d="M675.134 850.25c-5.5 0-10-4.5-10-10V438.36c0-5.5 4.5-10 10-10H980.58c5.5 0 10 4.5 10 10v401.89c0 5.5-4.5 10-10 10H675.134z" fill="#FFFFFF" p-id="80194"></path><path d="M704.818 840.25V438.36c0-5.5 4.5-10 10-10h-39.684c-5.5 0-10 4.5-10 10v401.89c0 5.5 4.5 10 10 10h39.684c-5.5 0-10-4.5-10-10z" fill="#D9EAFC" p-id="80195"></path><path d="M809.134 890.25c-5.5 0-10-4.5-10-10v-3.89c0-5.5 4.5-10 10-10h37.446c5.5 0 10 4.5 10 10v3.89c0 5.5-4.5 10-10 10h-37.446z" fill="#445EA0" p-id="80196"></path><path d="M990.58 466.946V438.36c0-5.5-4.5-10-10-10H675.134c-5.5 0-10 4.5-10 10v28.586H990.58z" fill="#FFAF10" p-id="80197"></path><path d="M714.818 428.36h-39.684c-5.5 0-10 4.5-10 10v28.586h39.684V438.36c0-5.5 4.5-10 10-10z" fill="#FF9518" p-id="80198"></path><path d="M896.026 649.866h-136.338c-8.284 0-15-6.714-15-15s6.716-15 15-15h136.338a15 15 0 0 1 0 30zM896.026 696.12h-136.338a15 15 0 0 1 0-30h136.338a15 15 0 0 1 0 30zM896.026 742.37h-136.338a15 15 0 0 1 0-30h136.338a15 15 0 0 1 0 30z" fill="#5DC1D8" p-id="80199"></path><path d="M959.512 584.514c0 5.5-4.5 10-10 10H706.202c-5.5 0-10-4.5-10-10v-82.488c0-5.5 4.5-10 10-10h243.31c5.5 0 10 4.5 10 10v82.488z" fill="#C3DDF4" p-id="80200"></path><path d="M735.886 584.514v-82.488c0-5.5 4.5-10 10-10h-39.684c-5.5 0-10 4.5-10 10v82.488c0 5.5 4.5 10 10 10h39.684c-5.5 0-10-4.5-10-10z" fill="#AEC1ED" p-id="80201"></path><path d="M923.514 818.832c0 5.5-4.5 10-10 10H742.2c-5.5 0-10-4.5-10-10v-33.82c0-5.5 4.5-10 10-10h171.314c5.5 0 10 4.5 10 10v33.82z" fill="#C3DDF4" p-id="80202"></path><path d="M771.884 818.832v-33.82c0-5.5 4.5-10 10-10H742.2c-5.5 0-10 4.5-10 10v33.82c0 5.5 4.5 10 10 10h39.684c-5.5 0-10-4.5-10-10z" fill="#AEC1ED" p-id="80203"></path></svg>`;
  const rchenganpan = `<svg t="1747045662827" class="icon" viewBox="0 0 1034 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="104983" width="200" height="200"><path d="M959.967805 236.413144v612.937736c0 66.537152-54.440243 120.969087-120.973241 120.969088H181.707034c-66.537152 0-120.977396-54.436089-120.977395-120.969088V236.413144" fill="#F0F0F0" p-id="104984"></path><path d="M838.994564 1022.246945H181.707034c-95.342085 0-172.904373-77.562288-172.904373-172.896065V236.413144h103.853956v612.937736c0 38.068706 30.977558 69.04211 69.050417 69.04211h657.28753c38.07286 0 69.046264-30.973404 69.046264-69.04211V236.413144h103.853955v612.937736c0 95.333777-77.562288 172.896065-172.900219 172.896065z" fill="#F0F0F0" p-id="104985"></path><path d="M416.80331 797.037566h-83.083164v-181.981209l-25.863789 25.859635-58.748105-58.748106 167.695058-167.695058zM631.328195 802.288422c-74.168341 0-132.272552-80.24172-132.272552-182.679108 0-102.437387 58.100057-182.679108 132.272552-182.679107s132.268398 80.24172 132.268397 182.679107c-0.004154 102.433233-58.100057 182.679108-132.268397 182.679108z m0-282.270897c-20.056276 0-49.189387 38.795684-49.189388 99.595944 0 60.796105 29.133112 99.595943 49.189388 99.595943 20.052122 0 49.185233-38.799838 49.185233-99.595943-0.004154-60.80026-29.133112-99.595943-49.185233-99.595944z" fill="#666666" p-id="104986"></path><path d="M8.308316 248.231724V137.477712c0-60.912422 63.512925-110.749858 141.137526-110.749858H871.251602c77.632909 0 141.14168 49.837436 141.14168 110.749858v110.754012" fill="#F06262" p-id="104987"></path></svg>`;
  const yidubiaoji = `<svg t="1747046557391" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="110484" width="200" height="200"><path d="M512 48a122.666667 122.666667 0 0 1 122.581333 117.973333l0.085334 4.693334v69.333333H874.666667a122.666667 122.666667 0 0 1 122.581333 117.973333l0.085333 4.693334v106.666666A37.333333 37.333333 0 0 1 960 506.666667h-26.666667V853.333333a122.666667 122.666667 0 0 1-117.973333 122.581334l-4.693333 0.085333H213.333333a122.666667 122.666667 0 0 1-122.581333-117.973333L90.666667 853.333333V506.666667H64a37.333333 37.333333 0 0 1-37.205333-34.261334L26.666667 469.333333v-106.666666A122.666667 122.666667 0 0 1 149.333333 240h240V170.666667A122.666667 122.666667 0 0 1 512 48z m346.666667 458.666667H165.333333V853.333333a48 48 0 0 0 44.714667 47.893334l3.285333 0.106666h133.717334a37.418667 37.418667 0 0 1-0.256-2.261333L346.666667 896v-128a37.333333 37.333333 0 0 1 74.538666-3.072l0.128 3.072v128c0 1.813333-0.128 3.626667-0.384 5.354667h182.101334a37.418667 37.418667 0 0 1-0.256-2.282667L602.666667 896v-128a37.333333 37.333333 0 0 1 74.538666-3.072l0.128 3.072v128c0 1.813333-0.128 3.626667-0.384 5.354667L810.666667 901.333333a48 48 0 0 0 47.893333-44.714666L858.666667 853.333333V506.666667z m16-192H149.333333A48 48 0 0 0 101.333333 362.666667v69.333333h821.333334V362.666667a48 48 0 0 0-44.714667-47.893334L874.666667 314.666667z m-362.666667-192a48 48 0 0 0-47.893333 44.714666L464 170.666667v69.333333h96V170.666667A48 48 0 0 0 512 122.666667z" fill="#1296db" p-id="110485"></path></svg>`;
  const jibenxinxi = `<svg t="1747048407970" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9856" width="200" height="200"><path d="M902.545946 0.362456a83.787859 83.787859 0 0 1 83.787859 83.667041v855.820187a83.787859 83.787859 0 0 1-83.787859 83.72745H120.727292a83.72745 83.72745 0 0 1-83.787859-83.72745V84.029497A83.72745 83.72745 0 0 1 120.727292 0.362456h781.818654z m0 55.8183H120.727292a27.84874 27.84874 0 0 0-27.90915 27.848741v855.820187a27.90915 27.90915 0 0 0 27.90915 27.90915h781.818654a27.90915 27.90915 0 0 0 27.90915-27.90915V84.029497a27.90915 27.90915 0 0 0-27.90915-27.848741z m-116.167306 762.789688v55.8183H251.574086v-55.8183h534.864963z m0-148.848799v55.8183H251.574086v-55.8183h534.864963z m0-148.8488v55.8183H251.574086v-55.8183h534.864963zM418.4853 149.211256a83.787859 83.787859 0 0 1 83.78786 83.72745v111.57619a83.787859 83.787859 0 0 1-83.78786 83.72745H306.788291a83.787859 83.787859 0 0 1-83.787859-83.72745V232.938706A83.787859 83.787859 0 0 1 306.788291 149.211256h111.697009z m0 55.8183H306.788291a27.90915 27.90915 0 0 0-27.90915 27.90915v111.57619a27.90915 27.90915 0 0 0 27.90915 27.90915h111.697009a27.90915 27.90915 0 0 0 27.90915-27.90915V232.938706a27.84874 27.84874 0 0 0-27.90915-27.90915z m367.832931-55.8183v55.8183H619.890291V149.211256h166.42794z m0 0" fill="#1296db" p-id="9857"></path></svg>`;
  const zhaomuxingxi = `<svg t="1747048365367" class="icon" viewBox="0 0 1609 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7566" width="200" height="200"><path d="M744.228571 1007.542857c-3.657143 0-5.485714-1.828571-7.314285-5.485714-1.828571-3.657143 0-9.142857 3.657143-12.8l47.542857-25.6c3.657143-1.828571 9.142857 0 12.8 3.657143s0 9.142857-3.657143 12.8L749.714286 1005.714286c-1.828571 0-3.657143 1.828571-5.485715 1.828571z m-10.971428-25.6s-1.828571 0 0 0c-7.314286-1.828571-9.142857-5.485714-9.142857-10.971428l9.142857-54.857143c0-5.485714 5.485714-9.142857 10.971428-7.314286 5.485714 0 9.142857 5.485714 7.314286 10.971429l-9.142857 54.857142c-1.828571 3.657143-5.485714 7.314286-9.142857 7.314286z m107.885714-27.428571c-3.657143 0-5.485714-1.828571-7.314286-5.485715-1.828571-3.657143 0-9.142857 3.657143-12.8l47.542857-25.6c3.657143-1.828571 9.142857 0 12.8 3.657143s0 9.142857-3.657142 12.8l-47.542858 25.6c-1.828571 1.828571-3.657143 1.828571-5.485714 1.828572z m96.914286-53.028572c-3.657143 0-5.485714-1.828571-7.314286-5.485714-1.828571-3.657143 0-9.142857 3.657143-12.8l47.542857-25.6c3.657143-1.828571 9.142857 0 12.8 3.657143 1.828571 3.657143 0 9.142857-3.657143 12.8l-47.542857 25.6c-1.828571 1.828571-3.657143 1.828571-5.485714 1.828571z m-186.514286-27.428571c-1.828571 0-1.828571 0 0 0-7.314286-1.828571-9.142857-5.485714-9.142857-10.971429l7.314286-42.057143c-1.828571-1.828571-3.657143-3.657143-3.657143-7.314285 0-5.485714 3.657143-9.142857 9.142857-9.142857h3.657143c1.828571 0 5.485714 1.828571 7.314286 3.657142 1.828571 1.828571 1.828571 5.485714 1.828571 7.314286l-7.314286 49.371429c-1.828571 5.485714-5.485714 9.142857-9.142857 9.142857z m283.428572-23.771429c-3.657143 0-5.485714-1.828571-7.314286-5.485714-1.828571-3.657143 0-9.142857 3.657143-12.8l47.542857-25.6c3.657143-1.828571 9.142857 0 12.8 3.657143 1.828571 3.657143 0 9.142857-3.657143 12.8l-47.542857 25.6c-3.657143 1.828571-5.485714 1.828571-5.485714 1.828571zM1276.342857 822.857143h-54.857143c-5.485714 0-9.142857-3.657143-9.142857-9.142857s3.657143-9.142857 9.142857-9.142857h54.857143c5.485714 0 9.142857 3.657143 9.142857 9.142857s-3.657143 9.142857-9.142857 9.142857z m-109.714286 0h-54.857142c-5.485714 0-9.142857-3.657143-9.142858-9.142857s3.657143-9.142857 9.142858-9.142857h54.857142c5.485714 0 9.142857 3.657143 9.142858 9.142857s-3.657143 9.142857-9.142858 9.142857z m-466.285714 0h-54.857143c-5.485714 0-9.142857-3.657143-9.142857-9.142857s3.657143-9.142857 9.142857-9.142857h54.857143c5.485714 0 9.142857 3.657143 9.142857 9.142857s-5.485714 9.142857-9.142857 9.142857z m-109.714286 0h-54.857142c-5.485714 0-9.142857-3.657143-9.142858-9.142857s3.657143-9.142857 9.142858-9.142857h54.857142c5.485714 0 9.142857 3.657143 9.142858 9.142857s-5.485714 9.142857-9.142858 9.142857z m-109.714285 0h-54.857143c-5.485714 0-9.142857-3.657143-9.142857-9.142857s3.657143-9.142857 9.142857-9.142857h54.857143c5.485714 0 9.142857 3.657143 9.142857 9.142857s-5.485714 9.142857-9.142857 9.142857z m-109.714286 0h-54.857143c-5.485714 0-9.142857-3.657143-9.142857-9.142857s3.657143-9.142857 9.142857-9.142857h54.857143c5.485714 0 9.142857 3.657143 9.142857 9.142857s-5.485714 9.142857-9.142857 9.142857z m-109.714286 0h-54.857143c-5.485714 0-9.142857-3.657143-9.142857-9.142857s3.657143-9.142857 9.142857-9.142857h54.857143c5.485714 0 9.142857 3.657143 9.142857 9.142857s-5.485714 9.142857-9.142857 9.142857zM164.571429 808.228571c-3.657143 0-7.314286-3.657143-9.142858-7.314285l-10.971428-53.028572c-1.828571-5.485714 1.828571-9.142857 7.314286-10.971428 5.485714-1.828571 9.142857 1.828571 10.971428 7.314285l10.971429 53.028572c0 3.657143-3.657143 9.142857-9.142857 10.971428z m1137.371428-25.6h-1.828571c-5.485714-1.828571-7.314286-7.314286-5.485715-10.971428l16.457143-53.028572c1.828571-5.485714 7.314286-7.314286 10.971429-5.485714 5.485714 1.828571 7.314286 7.314286 5.485714 10.971429l-16.457143 53.028571c-1.828571 3.657143-5.485714 5.485714-9.142857 5.485714zM142.628571 700.342857c-3.657143 0-7.314286-3.657143-9.142857-7.314286L122.514286 640c-1.828571-5.485714 1.828571-9.142857 7.314285-10.971429 5.485714-1.828571 9.142857 1.828571 10.971429 7.314286l10.971429 53.028572c1.828571 5.485714-1.828571 9.142857-9.142858 10.971428 1.828571 0 0 0 0 0z m1190.4-21.942857h-1.828571c-5.485714-1.828571-7.314286-7.314286-5.485714-10.971429l16.457143-53.028571c1.828571-5.485714 7.314286-7.314286 10.971428-5.485714 5.485714 1.828571 7.314286 7.314286 5.485714 10.971428l-16.457142 53.028572c-1.828571 1.828571-5.485714 5.485714-9.142858 5.485714zM120.685714 592.457143c-3.657143 0-7.314286-3.657143-9.142857-7.314286l-9.142857-54.857143c-1.828571-5.485714 1.828571-9.142857 7.314286-10.971428s9.142857 1.828571 10.971428 7.314285l10.971429 53.028572c0 7.314286-3.657143 10.971429-10.971429 12.8 1.828571 0 1.828571 0 0 0z m1243.428572-20.114286h-1.828572c-5.485714-1.828571-7.314286-7.314286-5.485714-10.971428l16.457143-53.028572c1.828571-5.485714 7.314286-7.314286 10.971428-5.485714 5.485714 1.828571 7.314286 7.314286 5.485715 10.971428l-16.457143 53.028572c-1.828571 3.657143-5.485714 5.485714-9.142857 5.485714zM100.571429 484.571429c-3.657143 0-7.314286-3.657143-9.142858-7.314286l-10.971428-53.028572c-1.828571-5.485714 1.828571-9.142857 7.314286-10.971428 5.485714-1.828571 9.142857 1.828571 10.971428 7.314286l10.971429 53.028571c0 5.485714-1.828571 9.142857-9.142857 10.971429 1.828571 0 0 0 0 0z m1294.628571-16.457143h-1.828571c-5.485714-1.828571-7.314286-7.314286-5.485715-10.971429l16.457143-53.028571c1.828571-5.485714 7.314286-7.314286 10.971429-5.485715 5.485714 1.828571 7.314286 7.314286 5.485714 10.971429l-16.457143 53.028571c-1.828571 1.828571-5.485714 5.485714-9.142857 5.485715z m-1316.571429-91.428572c-3.657143 0-7.314286-3.657143-9.142857-7.314285l-10.971428-53.028572c-1.828571-5.485714 1.828571-9.142857 7.314285-10.971428 5.485714-1.828571 9.142857 1.828571 10.971429 7.314285l10.971429 53.028572c1.828571 5.485714-1.828571 10.971429-9.142858 10.971428 1.828571 0 1.828571 0 0 0z m1347.657143-14.628571h-1.828571c-5.485714-1.828571-7.314286-7.314286-5.485714-10.971429l16.457142-53.028571c1.828571-5.485714 7.314286-7.314286 10.971429-5.485714 5.485714 1.828571 7.314286 7.314286 5.485714 10.971428l-16.457143 53.028572c-1.828571 3.657143-5.485714 5.485714-9.142857 5.485714zM56.685714 268.8c-3.657143 0-7.314286-1.828571-9.142857-7.314286v-1.828571c0-1.828571 0-5.485714 1.828572-7.314286s3.657143-3.657143 5.485714-3.657143l54.857143-7.314285c5.485714 0 9.142857 1.828571 10.971428 7.314285 0 5.485714-1.828571 9.142857-7.314285 10.971429l-49.371429 7.314286s-1.828571 1.828571-3.657143 1.828571h-3.657143z m1400.685715-10.971429h-1.828572c-5.485714-1.828571-7.314286-7.314286-5.485714-10.971428l16.457143-53.028572c1.828571-5.485714 7.314286-7.314286 10.971428-5.485714 5.485714 1.828571 7.314286 7.314286 5.485715 10.971429l-16.457143 53.028571c-1.828571 1.828571-5.485714 5.485714-9.142857 5.485714zM164.571429 252.342857c-3.657143 0-9.142857-3.657143-9.142858-7.314286 0-5.485714 1.828571-9.142857 7.314286-10.971428l54.857143-7.314286c5.485714 0 9.142857 1.828571 10.971429 7.314286 0 5.485714-1.828571 9.142857-7.314286 10.971428l-56.685714 7.314286c1.828571 0 0 0 0 0z m107.885714-16.457143c-3.657143 0-9.142857-3.657143-9.142857-7.314285 0-5.485714 1.828571-9.142857 7.314285-10.971429l54.857143-7.314286c5.485714 0 9.142857 1.828571 10.971429 7.314286 0 5.485714-1.828571 9.142857-7.314286 10.971429l-56.685714 7.314285c1.828571 0 1.828571 0 0 0z m109.714286-16.457143c-3.657143 0-9.142857-3.657143-9.142858-7.314285 0-5.485714 1.828571-9.142857 7.314286-10.971429l54.857143-7.314286c5.485714 0 9.142857 1.828571 10.971429 7.314286 0 5.485714-1.828571 9.142857-7.314286 10.971429l-56.685714 7.314285z m107.885714-16.457142c-3.657143 0-9.142857-3.657143-9.142857-7.314286 0-5.485714 1.828571-9.142857 7.314285-10.971429l54.857143-7.314285c5.485714 0 9.142857 1.828571 10.971429 7.314285 0 5.485714-1.828571 9.142857-7.314286 10.971429l-56.685714 7.314286z m107.885714-16.457143c-3.657143 0-9.142857-3.657143-9.142857-7.314286 0-5.485714 1.828571-9.142857 7.314286-10.971429l54.857143-7.314285c5.485714 0 9.142857 1.828571 10.971428 7.314285s-3.657143 9.142857-7.314286 9.142858l-56.685714 9.142857c1.828571 0 1.828571 0 0 0z m109.714286-16.457143c-3.657143 0-9.142857-3.657143-9.142857-7.314286 0-5.485714 1.828571-9.142857 7.314285-10.971428l54.857143-7.314286c5.485714 0 9.142857 1.828571 10.971429 7.314286 0 5.485714-1.828571 9.142857-7.314286 10.971428l-56.685714 7.314286z m107.885714-16.457143c-3.657143 0-9.142857-3.657143-9.142857-7.314286 0-5.485714 1.828571-9.142857 7.314286-10.971428l54.857143-7.314286c5.485714 0 9.142857 1.828571 10.971428 7.314286 0 5.485714-1.828571 9.142857-7.314286 10.971428l-56.685714 7.314286z m672.914286-1.828571h-1.828572c-5.485714-1.828571-7.314286-5.485714-5.485714-10.971429l16.457143-53.028571c1.828571-5.485714 7.314286-7.314286 10.971429-5.485715 5.485714 1.828571 7.314286 7.314286 5.485714 10.971429L1497.6 146.285714c-1.828571 3.657143-5.485714 5.485714-9.142857 5.485715z m-565.028572-14.628572c-3.657143 0-9.142857-3.657143-9.142857-7.314286 0-5.485714 1.828571-9.142857 7.314286-10.971428l54.857143-7.314286c5.485714 0 9.142857 1.828571 10.971428 7.314286s-3.657143 9.142857-7.314285 9.142857l-56.685715 9.142857c1.828571 0 1.828571 0 0 0z m109.714286-16.457143c-3.657143 0-9.142857-3.657143-9.142857-7.314285 0-5.485714 1.828571-9.142857 7.314286-10.971429l54.857143-7.314286c5.485714 0 9.142857 1.828571 10.971428 7.314286 0 5.485714-1.828571 9.142857-7.314286 10.971429l-56.685714 7.314285z m107.885714-16.457143c-3.657143 0-9.142857-3.657143-9.142857-7.314285 0-5.485714 1.828571-9.142857 7.314286-10.971429l54.857143-7.314286c5.485714 0 9.142857 1.828571 10.971428 7.314286s-1.828571 9.142857-7.314285 10.971429l-56.685715 7.314285z m107.885715-16.457142c-3.657143 0-9.142857-3.657143-9.142857-7.314286 0-5.485714 1.828571-9.142857 7.314285-10.971429l54.857143-7.314285c5.485714 0 9.142857 1.828571 10.971429 7.314285 0 5.485714-1.828571 9.142857-7.314286 10.971429l-56.685714 7.314286c1.828571 0 1.828571 0 0 0z m109.714285-16.457143c-3.657143 0-9.142857-3.657143-9.142857-7.314286 0-5.485714 1.828571-9.142857 7.314286-10.971429l54.857143-7.314285c5.485714 0 9.142857 1.828571 10.971428 7.314285 0 5.485714-1.828571 9.142857-7.314285 10.971429l-56.685715 7.314286z m107.885715-16.457143c-3.657143 0-9.142857-3.657143-9.142857-7.314286 0-5.485714 1.828571-9.142857 7.314285-10.971428l54.857143-7.314286c3.657143 0 5.485714 0 9.142857 3.657143s3.657143 5.485714 1.828572 9.142857-5.485714 7.314286-9.142857 7.314286l-54.857143 5.485714z" fill="#4A90E2" p-id="7567"></path><path d="M911.506286 323.126857l106.569143-16.896 3.712 23.478857-106.550858 16.896zM873.6 372.406857l198.674286-31.451428 3.419428 21.668571-198.656 31.451429zM600.502857 557.348571l128.237714-20.297142 14.884572 93.915428-128.237714 20.297143z" fill="#4A90E2" p-id="7568"></path><path d="M111.542857 299.885714l91.428572 479.085715h610.742857L788.114286 932.571429l277.942857-153.6h190.171428L1464.685714 93.257143l-1353.142857 206.628571z m402.285714 373.028572c3.657143 23.771429-5.485714 36.571429-29.257142 40.228571l-36.571429 5.485714-10.971429-27.428571c10.971429-1.828571 21.942857-1.828571 32.914286-3.657143 10.971429-1.828571 14.628571-7.314286 12.8-18.285714l-14.628571-96.914286c-16.457143 9.142857-31.085714 18.285714-47.542857 27.428572l-12.8-29.257143c18.285714-7.314286 38.4-16.457143 54.857142-27.428572l-14.628571-89.6-51.2 7.314286-3.657143-27.428571 51.2-7.314286-10.971428-73.142857 29.257142-3.657143 10.971429 73.142857 47.542857-7.314286 3.657143 27.428572-47.542857 7.314285 12.8 78.628572c12.8-9.142857 27.428571-18.285714 40.228571-29.257143l5.485715 29.257143c-12.8 10.971429-25.6 20.114286-40.228572 29.257143l18.285714 115.2z m29.257143-171.885715c21.942857-18.285714 36.571429-38.4 45.714286-58.514285 7.314286-18.285714 10.971429-43.885714 12.8-71.314286l-67.657143 10.971429-3.657143-29.257143 197.485715-31.085715c10.971429 74.971429 14.628571 120.685714 9.142857 137.142858-7.314286 16.457143-20.114286 25.6-40.228572 29.257142-9.142857 1.828571-20.114286 1.828571-31.085714 3.657143l-10.971429-23.771428c12.8-1.828571 23.771429-1.828571 32.914286-3.657143 14.628571-3.657143 21.942857-10.971429 25.6-21.942857s0-40.228571-7.314286-87.771429l-76.8 10.971429c-1.828571 34.742857-5.485714 62.171429-14.628571 84.114285-10.971429 23.771429-27.428571 47.542857-53.028571 71.314286l-18.285715-20.114286zM749.714286 674.742857l-1.828572-16.457143-128 20.114286 1.828572 16.457143-27.428572 3.657143-25.6-164.571429 184.685715-29.257143 25.6 164.571429-29.257143 5.485714z m426.057143-148.114286c-23.771429-3.657143-43.885714-9.142857-62.171429-14.628571 7.314286 43.885714 7.314286 71.314286 0 85.942857-7.314286 12.8-21.942857 21.942857-43.885714 25.6-14.628571 1.828571-25.6 3.657143-34.742857 3.657143L1024 603.428571c14.628571 0 27.428571-1.828571 40.228571-3.657142 18.285714-3.657143 25.6-10.971429 27.428572-21.942858 0-12.8 0-25.6-1.828572-38.4l-89.6 14.628572c-5.485714 14.628571-10.971429 27.428571-20.114285 40.228571-16.457143 23.771429-49.371429 43.885714-96.914286 64l-14.628571-23.771428c42.057143-16.457143 71.314286-34.742857 87.771428-54.857143 5.485714-7.314286 9.142857-14.628571 12.8-21.942857l-82.285714 12.8-3.657143-20.114286c-14.628571 10.971429-32.914286 20.114286-51.2 31.085714l-16.457143-21.942857c42.057143-20.114286 73.142857-42.057143 93.257143-64l-89.6 14.628572-3.657143-23.771429 113.371429-18.285714c3.657143-7.314286 7.314286-14.628571 9.142857-23.771429l-78.628572 14.628572-16.457142-102.4 45.714285-7.314286-3.657143-21.942857-95.085714 14.628571-3.657143-23.771428 95.085715-14.628572-3.657143-23.771428 27.428571-3.657143 3.657143 23.771428 106.057143-16.457143-3.657143-23.771428 27.428571-3.657143 3.657143 23.771429 95.085715-14.628572 3.657142 23.771429-95.085714 14.628571 3.657143 21.942857 45.714286-7.314285 16.457143 102.4-146.285715 23.771428c-1.828571 7.314286-3.657143 16.457143-7.314285 21.942857l201.142857-31.085714 3.657143 23.771429-89.6 14.628571c25.6 16.457143 62.171429 27.428571 109.714285 31.085714l-7.314285 21.942857z" fill="#4A90E2" p-id="7569"></path><path d="M945.371429 490.057143c-12.8 20.114286-31.085714 38.4-53.028572 54.857143l85.942857-14.628572c1.828571-10.971429 1.828571-21.942857 1.828572-32.914285l27.428571-1.828572c0 10.971429 0 20.114286-1.828571 29.257143l104.228571-16.457143c-27.428571-9.142857-49.371429-21.942857-64-36.571428l-100.571428 18.285714zM879.085714 412.781714l198.656-31.451428 3.437715 21.650285-198.674286 31.451429z" fill="#4A90E2" p-id="7570"></path><path d="M217.6 91.428571L54.857143 162.742857 292.571429 201.142857z" fill="#4A90E2" fill-opacity=".6" p-id="7571"></path><path d="M1243.428571 650.971429l219.428572 111.542857-135.314286 36.571428z" fill="#4A90E2" fill-opacity=".4" p-id="7572"></path></svg>`;
  const lianxifangshi = `<svg t="1747048264026" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4900" width="200" height="200"><path d="M245.800036 0.153986c47.096917 1.228615 90.917526 19.207351 131.05229 80.474297l3.071538 4.709692 29.896304 47.915993c33.786918 55.901992 46.482609 97.388233 34.319318 147.843365l-1.801969 5.610676a173.521422 173.521422 0 0 1-69.908206 83.013434l-7.207876 4.668738a107.872416 107.872416 0 0 0-33.459287 38.414703l3.440122-6.061169-0.286677 9.951784c0.245723 18.01969 4.914461 35.711749 13.514768 51.519931l4.668738 7.740276 4.709691 6.552614 2.375323 3.522031a604.232963 604.232963 0 0 0 126.301644 146.491887c35.220303 29.036273 54.3867 39.356641 68.024329 36.57178 10.893722-2.252461 19.371167-9.009845 38.906149-30.633473l9.050799-9.992737c29.609627-31.78018 50.455132-46.154978 86.003065-51.642793 53.813346-8.31363 93.743341 10.852768 141.577427 52.830454 3.849661 3.399169 18.674951 16.791075 22.524612 20.067382l21.582674 18.593044 13.76049 12.245198c40.339533 37.267995 60.693592 70.440606 57.335377 114.670754l-0.819077 5.405907a138.546843 138.546843 0 0 1-59.874515 87.23168l3.685846-2.621046-11.057537 10.811814a692.119905 692.119905 0 0 1-14.29289 13.105229l-14.661475 12.695691-14.989106 12.286152-3.440122 2.45723a318.620879 318.620879 0 0 1-190.148682 49.677009 382.099332 382.099332 0 0 1-176.511053-54.181931 867.443297 867.443297 0 0 1-235.320768-200.550957 839.717546 839.717546 0 0 1-166.477361-274.145009A379.273517 379.273517 0 0 1 115.075377 91.890589l2.784862-3.276307c15.521506-16.299629 32.107811-31.45255 49.758916-45.376855l-2.866769 2.293415 3.931569-4.177292c9.009845-9.214614 19.125444-17.323475 30.305842-24.244674L206.48435 12.767769z m12.286153 78.836143l-3.153446 1.187662a81.293373 81.293373 0 0 0-31.002057 22.115074l-5.528769 5.201138a394.631207 394.631207 0 0 0-41.15861 37.595625l1.474339-1.515292-5.446861 7.412645a297.529652 297.529652 0 0 0-39.069964 266.937133l3.849661 10.77086a762.355742 762.355742 0 0 0 151.815887 249.408889 790.859615 790.859615 0 0 0 215.08957 183.555113c42.182456 25.432335 89.934634 40.134764 139.324966 42.837717a236.83606 236.83606 0 0 0 141.372658-36.858456l-1.679108 0.982892 11.467075-9.419383c8.723168-7.330737 17.241567-14.907198 25.555197-22.729382l12.286152-11.876614 6.552615-5.323999c12.572829-8.190768 21.377905-21.050274 24.490396-35.670795l-0.819077 2.907723 0.040954-0.655262c-0.737169-11.630891-10.361322-25.841873-31.534457-45.458763l-6.102122-5.487814c-4.423015-3.890615-23.179874-19.862613-27.480027-23.67132l-20.354059-18.183505-8.600307-7.453599c-27.684796-23.179874-46.523563-31.24778-68.515775-27.848612-13.719537 2.1296-23.097966 9.255568-44.598732 33.172611l-9.009845 9.828922c-26.783812 28.872458-45.294948 42.141502-76.297005 48.571254-48.079809 9.828922-81.539097-8.190768-136.949643-53.813346a686.673044 686.673044 0 0 1-143.74798-166.641177l1.023846 1.556246L286.753877 524.035515a192.892589 192.892589 0 0 1-33.090703-125.482568l1.187661-10.23846 0.941939-6.962153 3.276307-6.224984a189.001974 189.001974 0 0 1 70.80919-75.39602c16.463444-10.23846 29.241042-25.473289 36.448918-43.492979l-0.286677 0.655262-0.941938 2.047692 0.450492-2.211508c3.603938-22.360797-4.423015-45.868301-26.333319-81.989588l-5.283046-8.600307-20.067382-32.066857-10.074644-15.398644c-17.978736-26.12855-31.657319-38.087072-43.001533-39.520456L258.086189 78.990129z m371.123703 89.975588a348.353368 348.353368 0 0 1 139.365919 91.449926 350.442014 350.442014 0 0 1 72.324482 141.454565 40.953841 40.953841 0 0 1-79.45045 19.821659 267.22381 267.22381 0 0 0-54.018116-106.807616A264.930394 264.930394 0 0 0 602.098449 246.286568a40.953841 40.953841 0 1 1 27.111443-77.320851z m39.725225-166.764039a573.353768 573.353768 0 0 1 207.021664 120.486199l17.118705 16.913936a627.863329 627.863329 0 0 1 103.408448 217.464894 40.953841 40.953841 0 1 1-79.368543 20.313105 545.955648 545.955648 0 0 0-79.65522-174.750038l-8.190768-11.467075-10.074645-9.419384a491.446087 491.446087 0 0 0-159.597117-96.118663l-16.135813-5.610677a40.953841 40.953841 0 1 1 25.473289-77.812297z" fill="#008df0" p-id="4901"></path></svg>`;
  const zhidaolaoshi = `<svg t="1747048221793" class="icon" viewBox="0 0 1263 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3519" data-spm-anchor-id="a313x.search_index.0.i4.1b1c3a81aXXGBp" width="200" height="200"><path d="M528.299836 658.129008l0.981918 21.464723-12.683573 20.979375 38.897973 169.908252-54.953732 26.705359-54.953732-26.705359 38.892362-169.908252-12.683573-20.979375 0.976307-21.464723C496.985074 656.7936 504.085742 656.7936 528.299836 658.129008L528.299836 658.129008z" p-id="3520" fill="#1296db"></path><path d="M489.847934 67.581195l538.478115 0c16.810433 0 32.111518 6.873425 43.198773 17.960679 11.087255 11.045173 17.963485 26.346258 17.963485 43.198773l0 336.275989c0 16.768351-6.87623 32.06663-17.963485 43.159496l-0.047693 0.039277 0 0.047693c-11.134948 11.047978-26.38834 17.924208-43.153885 17.924208l-238.044932 0-84.223299 66.170038-30.024241 23.594082 5.76526-37.700033 7.005282-46.035112 29.895189 4.480351-1.240022 8.295803 138.06606-108.485085 18.715353 23.72594-45.415101 35.705337 199.486422 0c8.517436 0 16.232504-3.456351 21.821019-9.047671l0.047693-0.047693c5.549238-5.543627 9.008395-13.306389 9.008395-21.821019L1059.186323 128.743452c0-8.472548-3.459156-16.232504-9.056088-21.821019-5.633403-5.588515-13.351277-9.092559-21.821019-9.092559L489.847934 97.829874c-8.51463 0-16.277392 3.459156-21.865907 9.047671-5.588515 5.633403-9.047671 13.348471-9.047671 21.865907l0 21.997764-30.248679 0L428.685677 128.743452c0-16.810433 6.873425-32.06663 17.918597-43.153885l0.089775-0.044888C457.781304 74.457425 473.037501 67.581195 489.847934 67.581195L489.847934 67.581195z" p-id="3521" fill="#1296db"></path><path d="M676.039189 374.587616c10.374663-138.110948-9.092559-217.635068-174.660734-195.457753-56.190948 7.496241-117.221348-9.002784-152.037348 16.499025-43.776701 41.293852-46.879562 103.252866-34.995551 175.945644-2.623123 1.419573-5.277107 3.013085-7.891814 4.833841l-7.802038 5.277107-0.137468 9.359079c-0.401184 24.216899 2.623123 44.663233 9.140252 60.317808 5.9392 14.235003 14.678268 24.839715 26.385534 31.224986 13.9264 47.45749 33.935079 83.070247 58.95154 108.706718 27.274871 27.945381 60.096175 43.818784 97.212668 50.077808l3.33291 0.530236 3.327299-0.667704c41.114301-8.691375 73.935605-25.27737 100.107923-52.953425 24.256175-25.639277 42.357129-60.26731 55.663518-106.490389 11.266805-6.564822 19.694466-17.253699 25.414838-31.359649 6.253414-15.567605 9.134641-35.657644 8.736263-59.386389l-0.134663-9.359079-7.804844-5.277107C677.899222 375.740668 676.970608 375.165545 676.039189 374.587616L676.039189 374.587616z" p-id="3522" fill="#1296db"></path><path d="M273.629633 641.2288l-7.361578-0.044888-5.639014 4.878729c-39.652647 34.594367-62.890433 85.02286-76.412844 136.475353-13.037063 49.892647-16.94229 100.854181-17.702575 138.422356l-0.401184 19.918904 19.871211 0L802.17074 940.879255l17.475332 0 1.904921-17.475332c4.878729-45.238356-2.83634-102.545885-19.697271-155.058849-16.055759-50.161973-40.749589-96.730126-71.045962-125.343211l-5.942005-5.633403-8.026477 0.263715-94.603573 3.237523 0 38.984942 87.463627-2.976614c22.749633 24.306674 41.86617 62.130148 55.082784 103.390334 13.13806 40.889863 20.179814 84.621677 19.161425 121.519342-476.693041 0-90.072723 0-577.816548 0 1.593512-32.285458 5.807342-71.315288 15.834126-109.467003 11.087255-42.354323 29.314455-83.47143 59.03851-112.067682l79.299682 0.706981 0-38.94286L273.629633 641.2288z" p-id="3523" fill="#1296db"></path><path d="M873.662773 322.251397 873.662773 345.270356 999.760658 345.270356 999.760658 322.251397Z" p-id="3524" fill="#1296db"></path><path d="M740.570827 322.251397 740.570827 345.270356 853.66251 345.270356 853.66251 322.251397Z" p-id="3525" fill="#1296db"></path><path d="M936.199715 244.323595 936.199715 267.342553 999.760658 267.342553 999.760658 244.323595Z" p-id="3526" fill="#1296db"></path><path d="M885.156822 244.323595 885.156822 267.342553 910.700712 267.342553 910.700712 244.323595Z" p-id="3527" fill="#1296db"></path><path d="M811.086553 244.323595 811.086553 267.342553 862.179945 267.342553 862.179945 244.323595Z" p-id="3528" fill="#1296db"></path><path d="M740.570827 244.323595 740.570827 267.342553 791.574444 267.342553 791.574444 244.323595Z" p-id="3529" fill="#1296db"></path><path d="M740.570827 172.250827 740.570827 195.269786 999.763463 195.269786 999.763463 172.250827Z" p-id="3530" fill="#1296db"></path><path d="M335.100493 408.071014c0.799562 11.752153 2.794258 21.644274 6.034586 29.364953 3.234718 7.846926 7.670181 12.905205 13.303584 14.633381l9.577907 2.973808 2.620318 9.667682c12.332888 45.459989 30.069129 78.545008 52.296942 101.34514 20.712855 21.209425 45.63954 33.61806 73.935605 38.984942 32.1536-7.313885 57.700296-20.443529 77.835222-41.686619 21.332866-22.530805 37.253962-54.687211 49.146389-99.041841l2.48846-9.224416 9.047671-3.195441c5.501545-1.907726 9.847233-7.095058 13.039868-14.944789 3.060778-7.670181 5.007781-17.340668 5.804537-28.787025-5.279912 0.047693-10.643989 0.179551-16.765545 0.931419l-2.437962-8.203222-5.190137 0.311408-2.979419-15.747156c-2.30891-12.285195-5.857841-23.681052-10.461633-34.151101-13.842236 5.855036-29.364953-4.923616-43.375518-12.994981l-7.095058 22.264285-11.446356-1.506542 1.509348-13.57291-12.063562 19.383058-10.733764-2.129359 10.559825-28.739332 0 0c-59.122674 52.465271-128.269326 49.09589-166.811003 19.781436-1.240022 2.971003-2.395879 6.031781-3.45074 9.134641-2.6624 10.646795-5.639014 24.483419-8.295803 35.040438l-0.715397 3.857534-0.266521-0.044888c-0.575123 2.129359-1.108164 3.989392-1.641205 5.633403C353.731682 404.213479 343.884449 406.738411 335.100493 408.071014L335.100493 408.071014z" fill="#ffffff" p-id="3531" data-spm-anchor-id="a313x.search_index.0.i1.1b1c3a81aXXGBp" class="selected"></path></svg>`;
  const zhaomujiaose = `<svg t="1747048156363" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="123464" width="200" height="200"><path d="M711.111111 682.666667h-398.222222c-17.066667 0-28.444444-11.377778-28.444445-28.444445s11.377778-28.444444 28.444445-28.444444h398.222222c17.066667 0 28.444444 11.377778 28.444445 28.444444s-11.377778 28.444444-28.444445 28.444445z m0 113.777777h-398.222222c-17.066667 0-28.444444-11.320889-28.444445-28.387555s11.377778-28.444444 28.444445-28.444445h398.222222c17.066667 0 28.444444 11.377778 28.444445 28.444445s-11.377778 28.444444-28.444445 28.444444z" fill="#1296db" p-id="123465"></path><path d="M796.444444 170.666667c34.133333 0 56.888889 22.755556 56.888889 56.888889v568.888888c0 34.190222-22.755556 56.945778-56.888889 56.945778H227.498667c-34.133333 0-56.888889-22.755556-56.888889-56.888889V227.555556c0-34.133333 22.755556-56.888889 56.888889-56.888889h568.888889z m0-56.888889H227.498667c-62.577778 0-113.777778 51.2-113.777778 113.777778v568.888888c0 62.634667 51.2 113.834667 113.777778 113.834667h568.888889c62.577778 0 113.834667-51.2 113.834666-113.777778V227.555556C910.222222 164.977778 859.022222 113.777778 796.444444 113.777778z" fill="#1296db" p-id="123466"></path><path d="M512 449.422222c-62.577778 0-108.088889-51.2-108.088889-113.777778S449.422222 227.555556 512 227.555556c62.577778 0 108.088889 51.2 108.088889 108.088888 0 56.888889-45.511111 113.777778-108.088889 113.777778zM512 284.444444c-28.444444 0-51.2 22.755556-51.2 51.2s22.755556 51.2 51.2 51.2 51.2-22.755556 51.2-51.2S540.444444 284.444444 512 284.444444z" fill="#1296db" p-id="123467"></path><path d="M688.355556 568.888889h-56.888889c0-68.266667-56.888889-119.466667-119.466667-119.466667s-119.466667 51.2-119.466667 119.466667h-56.888889c0-96.711111 79.644444-176.355556 176.355556-176.355556 96.711111 0 176.355556 79.644444 176.355556 176.355556z" fill="#1296db" p-id="123468"></path></svg>`;
  const xialaxuanze = `<svg t="1747048600747" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10961" width="200" height="200"><path d="M490.666667 601.6L797.866667 298.666667l59.733333 59.733333-302.933333 302.933333-59.733334 64-59.733333-59.733333L128 358.4 187.733333 298.666667l302.933334 302.933333z" fill="#444444" p-id="10962"></path></svg>`;
  const rqi = `<svg t="1747048687363" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11999" width="200" height="200"><path d="M833 128c0-53-43-96-96-96h-16c-53 0-96 43-96 96H400c0-53-43-96-96-96h-16c-53 0-96 43-96 96H64c-35.3 0-64 28.7-64 64v736c0 35.3 28.7 64 64 64h896c35.3 0 64-28.7 64-64V192c0-35.3-28.7-64-64-64H833zM729 96c22.1 0 40 17.9 40 40v80c0 22.1-17.9 40-40 40s-40-17.9-40-40v-80c0-22.1 17.9-40 40-40z m-433 0c22.1 0 40 17.9 40 40v80c0 22.1-17.9 40-40 40s-40-17.9-40-40v-80c0-22.1 17.9-40 40-40z m632 832H96c-17.7 0-32-14.3-32-32V448h896v448c0 17.7-14.3 32-32 32z m32-544H64V224c0-17.7 14.3-32 32-32h96v32c0 53 43 96 96 96h16c53 0 96-43 96-96v-32h225v24c0 57.4 46.6 104 104 104s104-46.6 104-104v-24h95c17.7 0 32 14.3 32 32v160z" p-id="12000"></path><path d="M304 560v64H144v-64h160m48-48H96v160h256V512zM304 752v64H144v-64h160m48-48H96v160h256V704zM592 560v64H432v-64h160m48-48H384v160h256V512zM592 752v64H432v-64h160m48-48H384v160h256V704zM880 560v64H720v-64h160m48-48H672v160h256V512zM880 752v64H720v-64h160m48-48H672v160h256V704z" p-id="12001"></path></svg>`;
  const shuaxin = `<svg t="1747052156619" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14762" width="200" height="200"><path d="M512 0a512 512 0 1 0 512 512A512 512 0 0 0 512 0z m0 819.2a307.2 307.2 0 0 1-307.2-307.2H153.6l102.4-102.4 102.4 102.4H307.2a204.8 204.8 0 0 0 204.8 204.8 204.8 204.8 0 0 0 163.84-81.92l81.92 61.44A307.2 307.2 0 0 1 512 819.2z m256-204.8l-102.4-102.4h51.2a204.8 204.8 0 0 0-204.8-204.8 204.8 204.8 0 0 0-163.84 81.92L266.24 327.68A307.2 307.2 0 0 1 819.2 512h51.2z" p-id="14763" fill="#1296db"></path></svg>`;
  const jiuyuan = `<svg t="1747239679845" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9517" width="200" height="200"><path d="M924.16 601.6c-12.8 0-23.04-10.24-23.04-23.04v-125.44h-15.36v389.12c0 17.92-15.36 30.72-30.72 30.72-17.92 0-30.72-12.8-30.72-30.72v-250.88h-15.36v250.88c0 17.92-15.36 30.72-30.72 30.72-17.92 0-30.72-12.8-30.72-30.72V453.12h-12.8v-64c7.68-2.56 17.92-2.56 28.16-2.56H793.6l25.6 40.96 25.6-40.96h25.6s71.68 0 76.8 58.88v133.12c0 12.8-10.24 23.04-23.04 23.04z m-107.52-232.96c-30.72 0-56.32-25.6-56.32-53.76 0-30.72 25.6-53.76 56.32-53.76 30.72 0 56.32 23.04 56.32 53.76s-25.6 53.76-56.32 53.76z m-199.68 606.72c0 25.6-20.48 46.08-48.64 46.08-25.6 0-48.64-20.48-48.64-46.08V637.44c17.92 0 33.28-10.24 38.4-28.16l56.32-212.48v15.36l23.04-20.48h-20.48l25.6-94.72c30.72 10.24 64 30.72 66.56 79.36L614.4 506.88l2.56 468.48z m-87.04-419.84c-5.12 17.92-23.04 28.16-38.4 23.04-17.92-5.12-25.6-23.04-23.04-40.96l122.88-471.04c5.12-17.92 23.04-28.16 38.4-23.04 17.92 5.12 25.6 23.04 23.04 38.4l-122.88 473.6zM307.2 276.48c-94.72 25.6-171.52-33.28-194.56-79.36-17.92-25.6-30.72-71.68-35.84-97.28-2.56-5.12 5.12-7.68 10.24-5.12 56.32 71.68 138.24 15.36 261.12-64 130.56-84.48 209.92 35.84 217.6 51.2-5.12 23.04-79.36 291.84-79.36 291.84-28.16-84.48-92.16-120.32-179.2-97.28z m-156.16 35.84c0-5.12 2.56-10.24 2.56-15.36 30.72 15.36 66.56 20.48 107.52 15.36v2.56c0 30.72-25.6 53.76-56.32 53.76-28.16-2.56-53.76-25.6-53.76-56.32zM153.6 384h30.72l25.6 40.96 25.6-40.96h30.72c10.24 0 20.48 2.56 28.16 2.56v64H281.6v389.12c0 17.92-15.36 30.72-30.72 30.72-17.92 0-33.28-12.8-33.28-30.72V588.8h-15.36v250.88c0 17.92-15.36 30.72-30.72 30.72-17.92 0-30.72-12.8-30.72-30.72V450.56h-17.92v125.44c0 12.8-10.24 23.04-23.04 23.04S76.8 588.8 76.8 576v-133.12C81.92 384 153.6 384 153.6 384z m202.24-81.92c46.08 7.68 81.92 35.84 104.96 84.48l-48.64 181.76c-5.12 20.48 7.68 40.96 28.16 46.08l61.44 15.36V972.8c0 25.6-20.48 46.08-48.64 46.08-25.6 0-48.64-20.48-48.64-46.08V552.96c-7.68-5.12-15.36-10.24-15.36-17.92v-2.56l-79.36-163.84c0 7.68-2.56-40.96 46.08-66.56z m46.08 115.2v-28.16h-23.04l23.04 28.16z" p-id="9518" fill="#2c2c2c"></path></svg>`;
  const saixuanx = `<svg t="1747240128471" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10592" width="200" height="200"><path d="M855.342766 151.46262c-6.056949-11.851932-18.984377-19.393699-33.219589-19.393699L101.903901 132.068921c-14.360056 0-27.412326 7.704472-33.396621 19.744693-5.988388 12.015661-3.845585 26.157753 5.520737 36.192294l255.896134 274.308483 0 309.339324c0 12.847609 7.895831 24.602328 20.389376 30.328749l189.116195 86.432535c5.154393 2.371 10.771321 3.515057 16.33913 3.515057 6.541997 0 13.090133-1.607614 18.926048-4.797259 10.718109-5.945409 17.427928-16.503882 17.809621-28.037567l12.957103-396.767536 245.078765-274.90507C859.543438 177.316451 861.425298 163.313529 855.342766 151.46262zM520.773827 804.275693l-117.384477-53.647851L403.38935 483.628836l127.858016 0L520.773827 804.275693zM550.774095 416.986019c-1.963725-0.299829-3.761674-1.090844-5.809309-1.090844L383.519814 415.895175 181.938726 199.803605l562.427506 0L550.774095 416.986019zM685.454494 524.008498l273.392624 0 0 59.759035-273.392624 0 0-59.759035ZM685.454494 654.104485l273.392624 0 0 59.759035-273.392624 0 0-59.759035ZM685.454494 773.618463l273.392624 0 0 59.759035-273.392624 0 0-59.759035Z" fill="#272636" p-id="10593"></path></svg>`;
  const shiwu = `<svg t="1747241889457" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12606" width="200" height="200"><path d="M25.6 284.16v153.6a25.6 25.6 0 0 0 25.6 25.6h389.12v-204.8H51.2a25.6 25.6 0 0 0-25.6 25.6z m61.44 255.91296v430.93504a25.6 25.6 0 0 0 25.6 25.6h327.68v-482.13504H112.64a25.6 25.6 0 0 0-25.6 25.6zM972.8 258.56h-389.12v204.8h389.12a25.6 25.6 0 0 0 25.6-25.6v-153.6a25.6 25.6 0 0 0-25.6-25.6z m-61.44 255.91296h-327.68v482.13504h327.68a25.6 25.6 0 0 0 25.6-25.6v-430.93504a25.6 25.6 0 0 0-25.6-25.6zM628.08064 24.98048c-56.94976 0-103.12192 46.17216-103.12192 103.12192 0 27.3408-0.08192 102.92736-0.08192 102.92736s73.58976 0.19456 103.19872 0.19456c56.94976 0 103.12192-46.17216 103.12192-103.12192s-46.16704-103.12192-103.1168-103.12192z m-230.2976 0c-56.94976 0-103.1168 46.17216-103.1168 103.12192s46.16704 103.12192 103.1168 103.12192c29.61408 0 103.19872-0.19456 103.19872-0.19456s-0.08192-75.58656-0.08192-102.92736c0.00512-56.95488-46.16704-103.12192-103.1168-103.12192z" fill="" p-id="12607"></path></svg>`;
  const xunzhang = `<svg t="1747242005134" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18243" width="200" height="200"><path d="M762.643692 536.024615a32.413538 32.413538 0 0 0-26.387692-22.212923l-121.974154-17.723077-54.508308-110.552615a32.964923 32.964923 0 0 0-29.302153-18.156308 32.964923 32.964923 0 0 0-29.341539 18.195693L446.621538 496.088615l-121.895384 17.723077a32.452923 32.452923 0 0 0-26.387692 22.252308 33.043692 33.043692 0 0 0 8.192 33.516308l88.260923 86.016-20.755693 121.422769a32.334769 32.334769 0 0 0 12.918154 31.940923 32.531692 32.531692 0 0 0 34.461539 2.56l109.095384-57.344 108.859077 57.265231a33.083077 33.083077 0 0 0 34.579692-2.402462 32.413538 32.413538 0 0 0 12.996924-31.980307l-20.795077-121.462154 88.221538-86.016a32.964923 32.964923 0 0 0 8.310154-33.516308z m-161.71323 98.38277l16.620307 96.964923-87.118769-45.764923-87.079385 45.804307 16.580923-97.004307-70.459076-68.68677 97.437538-14.178461 43.559385-88.221539 43.52 88.221539 97.398153 14.178461-70.498461 68.68677z" fill="#333333" p-id="18244"></path><path d="M247.374769 328.585846l-101.415384-121.698461V24.339692h770.756923l20.283077 162.264616-101.415385 121.698461-283.963077-101.415384h-81.132308l-121.698461 40.566153z" fill="#333333" p-id="18245"></path><path d="M364.307692 57.895385h332.288v177.900307H364.307692V57.895385z m0 0h60.691693v87.276307h-60.652308V57.895385z m271.596308 0h60.691692v87.276307h-60.652307V57.895385z" fill="#ffffff" p-id="18246" data-spm-anchor-id="a313x.search_index.0.i17.645a3a81dIuBwZ" class="selected"></path><path d="M530.471385 178.609231C302.552615 178.609231 117.76 363.401846 117.76 591.320615c0 227.918769 184.792615 412.711385 412.711385 412.711385 227.918769 0 412.672-184.792615 412.672-412.711385 0-227.918769-184.753231-412.711385-412.672-412.711384z m0 764.731077c-194.087385 0-352.019692-157.932308-352.019693-352.019693 0-194.087385 157.932308-352.019692 352.019693-352.019692 194.087385 0 351.980308 157.932308 351.980307 352.019692 0 194.087385-157.932308 352.019692-351.980307 352.019693z" fill="#333333" p-id="18247"></path><path d="M530.471385 0H117.76v181.681231l91.529846 91.844923 42.929231-42.929231-73.767385-74.003692V60.691692h704v95.901539l-73.767384 74.043077 42.92923 42.92923 91.529847-91.884307V0z" fill="#333333" p-id="18248"></path></svg>`;
  const shenqing = `<svg t="1747242132482" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="22049" width="200" height="200"><path d="M829.269333 989.866667s-0.170667 0 0 0l-644.608-0.853334c-45.397333 0-82.432-41.472-82.432-92.501333v-699.733333c0-51.029333 37.034667-92.330667 82.432-92.330667h120.149334c14.165333 0 25.6 11.434667 25.6 25.6s-11.434667 25.6-25.6 25.6h-120.149334c-17.066667 0-31.232 18.944-31.232 41.130667v699.733333c0 22.357333 14.336 41.301333 31.232 41.301333l644.437334 0.853334c11.093333 0 21.333333-4.266667 29.184-12.117334 7.850667-7.850667 12.117333-18.261333 12.117333-29.184V196.949333c0-22.357333-14.336-41.130667-31.232-41.130666h-124.757333c-14.165333 0-25.6-11.434667-25.6-25.6s11.434667-25.6 25.6-25.6h124.757333c45.568 0 82.432 41.472 82.432 92.330666v700.416c0 24.746667-9.557333 47.957333-27.136 65.536A91.374933 91.374933 0 0 1 829.269333 989.866667z" fill="#333333" p-id="22050"></path><path d="M676.352 218.965333H347.648c-32.938667 0-59.733333-26.794667-59.733333-59.733333V93.866667c0-32.938667 26.794667-59.733333 59.733333-59.733334h328.874667c32.938667 0 59.733333 26.794667 59.733333 59.733334v65.365333a60.0576 60.0576 0 0 1-59.904 59.733333zM347.648 85.333333c-4.778667 0-8.533333 3.754667-8.533333 8.533334v65.365333c0 4.778667 3.754667 8.533333 8.533333 8.533333h328.874667c4.778667 0 8.533333-3.754667 8.533333-8.533333V93.866667c0-4.778667-3.754667-8.533333-8.533333-8.533334H347.648zM608.768 836.266667c-10.069333 0-20.138667-3.925333-27.477333-11.776l-68.266667-71.338667a25.6 25.6 0 0 1 37.034667-35.328l59.221333 61.952 151.381333-141.482667c10.24-9.728 26.453333-9.045333 36.181334 1.194667s9.045333 26.453333-1.194667 36.181333l-160.938667 150.357334c-7.338667 6.997333-16.725333 10.24-25.941333 10.24zM628.224 406.869333H293.376c-14.165333 0-25.6-11.434667-25.6-25.6s11.434667-25.6 25.6-25.6h334.848c14.165333 0 25.6 11.434667 25.6 25.6s-11.434667 25.6-25.6 25.6zM469.504 598.528H293.376c-14.165333 0-25.6-11.434667-25.6-25.6s11.434667-25.6 25.6-25.6h176.128c14.165333 0 25.6 11.434667 25.6 25.6s-11.434667 25.6-25.6 25.6z" fill="#333333" p-id="22051"></path><path d="M445.610667 657.066667m-228.010667 0a228.010667 228.010667 0 1 0 456.021333 0 228.010667 228.010667 0 1 0-456.021333 0Z" fill="#333333" opacity=".3" p-id="22052"></path></svg>`;
  const shezhi = `<svg t="1747242203865" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="23071" width="200" height="200"><path d="M880.46 283.61l-36 14.93a144.31 144.31 0 0 1-120.57-122.69l14.29-34.52a42 42 0 0 0-22.71-54.83L667 66.43a42 42 0 0 0-54.84 22.71l-14 33.87-0.24-0.06a144.35 144.35 0 0 1-32.6 18.79 144.15 144.15 0 0 1-139.16-16L411 89.14a42 42 0 0 0-54.83-22.71l-48.5 20.07A42 42 0 0 0 285 141.33L299.33 176A144.4 144.4 0 0 1 176.8 297.74l-34.12-14.13a42 42 0 0 0-54.83 22.71l-20.07 48.47a42 42 0 0 0 22.71 54.83l33.87 14c-0.06 0.27-0.13 0.54-0.19 0.82a145.09 145.09 0 0 1 18.08 31.67 144.15 144.15 0 0 1-16.7 140.16l-35.06 14.56a42 42 0 0 0-22.71 54.83l20.07 48.46a42 42 0 0 0 54.83 22.71l35.07-14.52a144.39 144.39 0 0 1 120.52 122.48l0.72 0.45-14 33.87a42 42 0 0 0 22.71 54.83L356.13 954A42 42 0 0 0 411 931.31l14-33.87a144.37 144.37 0 0 1 172.38-1.8l14.77 35.66A42 42 0 0 0 667 954l48.46-20.08a42 42 0 0 0 22.71-54.83l-14.77-35.66a144.42 144.42 0 0 1 123.17-120.6l33.87 14a42 42 0 0 0 54.83-22.71l20.07-48.46a42 42 0 0 0-22.71-54.83l-34.51-14.3a144.3 144.3 0 0 1-1.53-172l36-14.93a42 42 0 0 0 22.71-54.83l-20.07-48.47a42 42 0 0 0-54.77-22.69zM588.25 695.36C486 737.71 368.79 689.15 326.44 586.91s6.2-219.47 108.44-261.82 219.47 6.2 261.82 108.45S690.5 653 588.25 695.36z" p-id="23072"></path></svg>`;
  const yijianfankui = `<svg t="1747242260158" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="24273" width="200" height="200"><path d="M329.95328 255.67232 698.1632 255.67232c14.62272 0 26.43968-11.83744 26.43968-26.4192 0-14.58176-11.81696-26.4192-26.43968-26.4192L329.95328 202.83392c-14.60224 0-26.4192 11.83744-26.4192 26.4192C303.53408 243.83488 315.35104 255.67232 329.95328 255.67232L329.95328 255.67232zM329.95328 402.51392l262.43072 0c14.60224 0 26.35776-11.83744 26.35776-26.4192s-11.75552-26.39872-26.35776-26.39872L329.95328 349.696c-14.60224 0-26.4192 11.81696-26.4192 26.39872S315.35104 402.51392 329.95328 402.51392L329.95328 402.51392zM930.01728 319.5904l-66.21184-38.48192L863.80544 82.18624c0-14.76608-11.96032-26.74688-26.70592-26.74688L191.05792 55.43936c-14.7456 0-26.7264 11.96032-26.7264 26.74688l0 198.94272-66.23232 38.48192-52.79744 26.46016 0 30.53568 0 2.78528 0 570.30656 0 0c0 3.62496 0.73728 7.08608 2.08896 10.21952 0.1024 0.26624 0.26624 0.47104 0.38912 0.75776 0.7168 1.51552 1.57696 3.01056 2.60096 4.42368 4.62848 6.41024 11.96032 10.56768 20.3776 10.87488 0.32768 0 0.63488 0.1024 0.96256 0.1024L956.416 976.0768c14.60224 0 26.39872-11.83744 26.39872-26.37824L982.81472 380.19072l0-2.78528 0-28.8768L930.01728 319.5904 930.01728 319.5904zM863.80544 342.2208l62.27968 36.18816-62.27968 36.16768L863.80544 342.2208 863.80544 342.2208zM234.27072 108.2368l559.57504 0c13.12768 0 17.18272 4.01408 17.18272 17.1008l0 319.91808-296.96 172.52352-296.93952-172.52352L217.12896 125.35808C217.14944 112.25088 221.184 108.2368 234.27072 108.2368L234.27072 108.2368zM164.33152 414.55616l-62.27968-36.16768 62.27968-36.18816L164.33152 414.55616 164.33152 414.55616zM930.01728 923.21792 98.11968 923.21792 98.11968 437.20704l402.65728 233.8816c0.36864 0.3072 0.8192 0.4096 1.2288 0.59392 0.59392 0.32768 1.16736 0.53248 1.76128 0.79872 0.98304 0.43008 1.96608 0.79872 2.9696 1.1264 0.65536 0.16384 1.29024 0.26624 1.96608 0.43008 0.96256 0.2048 1.92512 0.36864 2.92864 0.45056 0.8192 0.04096 1.6384 0.04096 2.4576 0.04096s1.6384 0 2.4576-0.04096c0.98304-0.1024 1.9456-0.26624 2.92864-0.45056 0.65536-0.18432 1.31072-0.28672 1.96608-0.43008 1.00352-0.32768 1.98656-0.69632 2.99008-1.1264 0.59392-0.26624 1.16736-0.47104 1.76128-0.79872 0.4096-0.2048 0.83968-0.3072 1.2288-0.59392l402.6368-233.8816L930.05824 923.21792 930.01728 923.21792zM930.01728 923.21792" fill="#272636" p-id="24274"></path></svg>`;
  const guanyuwomen = `<svg t="1747242338176" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4152" width="200" height="200"><path d="M512 0C794.775704 0 1024 229.224296 1024 512S794.775704 1024 512 1024 0 794.81363 0 512C0 229.224296 229.224296 0 512 0z m0 100.048593C284.444444 100.048593 100.048593 284.444444 100.048593 512c0 227.555556 184.433778 411.951407 411.951407 411.951407 227.555556 0 411.951407-184.433778 411.951407-411.951407 0-227.555556-184.433778-411.951407-411.951407-411.951407z m0 324.570074a50.062222 50.062222 0 0 1 49.796741 45.207703l0.227555 4.816593v244.318815a50.062222 50.062222 0 0 1-99.821037 4.816592l-0.227555-4.816592v-244.280889c0-27.648 22.376296-50.024296 50.024296-50.024296z m0-172.183704a58.861037 58.861037 0 0 1 0 117.722074 58.861037 58.861037 0 0 1 0-117.76z" fill="#2c2c2c" p-id="4153"></path></svg>`;
  const zuojiantou = `<svg t="1747242739682" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5824" width="200" height="200"><path d="M764.907 531.794c0.581-1.163 1.598-2.179 2.035-3.341 10.172-21.215 6.831-47.37-11.187-64.371l-410.637-388.405c-22.378-21.215-57.687-20.197-78.903 2.179s-20.197 57.687 2.179 78.903l368.499 348.592-367.044 353.677c-22.232 21.362-22.813 56.669-1.451 78.903 10.898 11.334 25.574 17.146 40.104 17.147 13.949 0 27.899-5.23 38.651-15.694l406.859-392.182c0.726-0.726 1.018-1.887 1.889-2.616 0.582-0.582 1.163-1.018 1.887-1.598 3.341-3.341 4.941-7.411 7.119-11.187v0zM764.907 531.794z" p-id="5825"></path></svg>`;
  const yichu = `<svg t="1747243122323" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9366" width="200" height="200"><path d="M697 471H327v80h370v-80z" fill="#323338" p-id="9367"></path><path d="M512.5 961C760.2 961 961 760.2 961 512.5S760.2 64 512.5 64 64 264.8 64 512.5 264.8 961 512.5 961z m0-88C313.401 873 152 711.599 152 512.5S313.401 152 512.5 152 873 313.401 873 512.5 711.599 873 512.5 873z" fill="#323338" p-id="9368"></path></svg>`;
  const iconToDataUrl = (svgString) => {
    return svgString;
  };
  const icons = {
    mima: iconToDataUrl(mimaIcon),
    zhanghao: iconToDataUrl(zhanghaoIcon),
    mingzi: iconToDataUrl(mingzi),
    school: iconToDataUrl(school),
    zhuanye: iconToDataUrl(zhuanye),
    studentuser: iconToDataUrl(studentuser),
    xiazhankai: iconToDataUrl(xiazhankai),
    sousuo: iconToDataUrl(sousuo),
    xiaoxi: iconToDataUrl(XiaoXi),
    back: iconToDataUrl(back),
    weishouchang: iconToDataUrl(WeiShouchang),
    souchang: iconToDataUrl(souchang),
    fenxiang: iconToDataUrl(fenxiang),
    baoming: iconToDataUrl(baoming),
    Baominrenshu: iconToDataUrl(Baominrenshu),
    Zhubanfang: iconToDataUrl(Zhubanfang),
    dengji: iconToDataUrl(dengji),
    chuangjianduiwu: iconToDataUrl(chuangjianduiwu),
    xiazai: iconToDataUrl(xiazai),
    tixingwo: iconToDataUrl(tixingwo),
    remen: iconToDataUrl(remen),
    zhinnegtuijzudui: iconToDataUrl(zhinnegtuijzudui),
    Shouye: iconToDataUrl(Shouye),
    Shouyexuanzhong: iconToDataUrl(Shouyexuanzhong),
    jingshai: iconToDataUrl(jingshai),
    jingshaixuanzhong: iconToDataUrl(jingshaixuanzhong),
    duiwutubiao: iconToDataUrl(duiwutubiao),
    duiwutubiaoxuanzhong: iconToDataUrl(duiwutubiaoxuanzhong),
    wode: iconToDataUrl(wode),
    wodexuanzhong: iconToDataUrl(wodexuanzhong),
    chuangjiantubiao: iconToDataUrl(chuangjiantubiao),
    baomingrhenshu2: iconToDataUrl(baomingrhenshu2),
    Baominrenshulunbotu: iconToDataUrl(Baominrenshulunbotu),
    liulan: iconToDataUrl(liulan),
    guanlian: iconToDataUrl(guanlian),
    qqtubiao: iconToDataUrl(qqtubiao),
    weixintubiao: iconToDataUrl(weixintubiao),
    youxiang: iconToDataUrl(youxiang),
    weizhi: iconToDataUrl(weizhi),
    renshu: iconToDataUrl(renshu),
    chuangjianrenwu: iconToDataUrl(chuangjianrenwu),
    shijian: iconToDataUrl(shijian),
    zhengshu: iconToDataUrl(zhengshu),
    xuefen: iconToDataUrl(xuefen),
    zhiyaunshichang: iconToDataUrl(zhiyaunshichang),
    xianjin: iconToDataUrl(xianjin),
    liping: iconToDataUrl(liping),
    shixijihui: iconToDataUrl(shixijihui),
    bianji: iconToDataUrl(bianji),
    weituo: iconToDataUrl(weituo),
    xunzhaoduiyou: iconToDataUrl(xunzhaoduiyou),
    xiangmuzhanshi: iconToDataUrl(xiangmuzhanshi),
    rchenganpan: iconToDataUrl(rchenganpan),
    yidubiaoji: iconToDataUrl(yidubiaoji),
    jibenxinxi: iconToDataUrl(jibenxinxi),
    zhaomuxingxi: iconToDataUrl(zhaomuxingxi),
    lianxifangshi: iconToDataUrl(lianxifangshi),
    zhidaolaoshi: iconToDataUrl(zhidaolaoshi),
    zhaomujiaose: iconToDataUrl(zhaomujiaose),
    xialaxuanze: iconToDataUrl(xialaxuanze),
    rqi: iconToDataUrl(rqi),
    shuaxin: iconToDataUrl(shuaxin),
    jiuyuan: iconToDataUrl(jiuyuan),
    saixuanx: iconToDataUrl(saixuanx),
    shiwu: iconToDataUrl(shiwu),
    xunzhang: iconToDataUrl(xunzhang),
    shenqing: iconToDataUrl(shenqing),
    shezhi: iconToDataUrl(shezhi),
    yijianfankui: iconToDataUrl(yijianfankui),
    guanyuwomen: iconToDataUrl(guanyuwomen),
    zuojiantou: iconToDataUrl(zuojiantou),
    yichu: iconToDataUrl(yichu)
  };
  const _export_sfc = (sfc, props) => {
    const target = sfc.__vccOpts || sfc;
    for (const [key, val] of props) {
      target[key] = val;
    }
    return target;
  };
  const defaultFallbackIcon = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAADCgAwAEAAAAAQAAADAAAAAA9+0L2AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAAAWlJREFUaAXtmLEOAiEQRFmNhYXGyt7Ozs7a3v//BL/EeJvsBh1Fkzi8xLAMbIC5eS+XK7fbzUopxUktpRT9/S5M/K5Kpafyn+J3lW8YJZUYsUDATkACCDigEAwBCSgg4IBCMASUU0C5/DYYl+86XyxWx7lXP9p0PqyjhW1XoPYC24X8GhJQQAEHFIIhIAEFBBxQCIaABAQEnB9fYi+Pq7FX/bjO51j2a3NfxvVnc+7H8UDXe/M0D+wDSEABBxxQCIaABBQQcEAhGAISUEDAAYVgCEhAAQEHFIIhIAEFBBxQCIaABJbzQAghhGD8uUZ88uvrNe73u3k8Hubxnlc3jDGaj1k/z6ZPyONt3ufPKlR/gdmlLZsUUEABBxSCISABBQQcUAiGgAQUEHBAIRgCElBAwAGFYAhIQAEBBxSCIbCcB+ov5Dbvaxuou5yl7UJ+FQkoIAEHFIIhIAEFBBxQCIaABBQQcODvhfyYXSZ9dCWDAAAAAElFTkSuQmCC";
  const _sfc_main$O = {
    __name: "SvgIcon",
    props: {
      // 图标名称（与icons.js中的导出名称一致）
      name: {
        type: String,
        required: true
      },
      // 图标颜色（某些SVG支持颜色更改）
      color: {
        type: String,
        default: ""
      },
      // 图标大小
      size: {
        type: [Number, String],
        default: 24
      }
    },
    setup(__props, { expose: __expose }) {
      __expose();
      const props = __props;
      const useFallback = vue.ref(false);
      const loadFailed = vue.ref(false);
      const svgHtml = vue.ref("");
      const isMP = vue.ref(false);
      vue.onMounted(() => {
        initSvgContent();
      });
      function initSvgContent() {
        try {
          const svgContent = icons[props.name];
          if (!svgContent) {
            formatAppLog("error", "at components/SvgIcon.vue:68", "未找到图标:", props.name);
            return;
          }
          let finalSvg = svgContent;
          finalSvg = finalSvg.replace(/(width|height)=["']([^"']*)["']/g, "");
          if (props.color) {
            if (finalSvg.includes("fill=")) {
              finalSvg = finalSvg.replace(/fill="[^"]*"/g, `fill="${props.color}"`);
            }
            finalSvg = finalSvg.replace(/fill="currentColor"/g, `fill="${props.color}"`);
          }
          if (!finalSvg.includes("preserveAspectRatio")) {
            finalSvg = finalSvg.replace("<svg ", '<svg preserveAspectRatio="xMidYMid meet" ');
          }
          svgHtml.value = finalSvg;
        } catch (e) {
          formatAppLog("error", "at components/SvgIcon.vue:97", "初始化SVG内容失败:", e);
          useFallback.value = true;
        }
      }
      vue.watchEffect(() => {
        initSvgContent();
      });
      const fallbackSrc = vue.computed(() => {
        try {
          if (loadFailed.value) {
            return defaultFallbackIcon;
          }
          const svgString = icons[props.name];
          if (!svgString) {
            return defaultFallbackIcon;
          }
          const encodedSvg = encodeURIComponent(svgString);
          return `data:image/svg+xml;charset=utf-8,${encodedSvg}`;
        } catch (e) {
          formatAppLog("error", "at components/SvgIcon.vue:125", "生成图标URL失败:", e);
          return defaultFallbackIcon;
        }
      });
      function handleError2() {
        formatAppLog("error", "at components/SvgIcon.vue:132", "图标加载失败:", props.name);
        loadFailed.value = true;
      }
      const iconStyle = vue.computed(() => {
        const style = {};
        let sizeValue = props.size;
        if (typeof sizeValue === "number" || !isNaN(Number(sizeValue))) {
          const size = Number(sizeValue);
          style.width = `${size}px`;
          style.height = `${size}px`;
        } else if (typeof sizeValue === "string") {
          if (sizeValue.includes("rpx") || sizeValue.includes("px") || sizeValue.includes("%")) {
            style.width = sizeValue;
            style.height = sizeValue;
          } else {
            style.width = `${sizeValue}px`;
            style.height = `${sizeValue}px`;
          }
        }
        if (props.color) {
          style.color = props.color;
        }
        return style;
      });
      const __returned__ = { props, useFallback, loadFailed, svgHtml, isMP, defaultFallbackIcon, initSvgContent, fallbackSrc, handleError: handleError2, iconStyle, computed: vue.computed, ref: vue.ref, onMounted: vue.onMounted, watchEffect: vue.watchEffect, get icons() {
        return icons;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$N(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        class: "svg-icon-container",
        style: vue.normalizeStyle($setup.iconStyle)
      },
      [
        vue.createCommentVNode(" 使用编码后的base64图片作为fallback "),
        $setup.useFallback ? (vue.openBlock(), vue.createElementBlock("image", {
          key: 0,
          src: $setup.fallbackSrc,
          mode: "aspectFit",
          class: "svg-image",
          onError: $setup.handleError
        }, null, 40, ["src"])) : (vue.openBlock(), vue.createElementBlock(
          vue.Fragment,
          { key: 1 },
          [
            vue.createCommentVNode(" 使用静态div显示SVG内容 "),
            vue.createCommentVNode(" eslint-disable vue/no-v-text-v-html-on-component "),
            vue.createElementVNode("view", {
              class: "svg-content",
              innerHTML: $setup.svgHtml
            }, null, 8, ["innerHTML"])
          ],
          2112
          /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
        )),
        vue.createCommentVNode(" eslint-enable vue/no-v-text-v-html-on-component ")
      ],
      4
      /* STYLE */
    );
  }
  const SvgIcon = /* @__PURE__ */ _export_sfc(_sfc_main$O, [["render", _sfc_render$N], ["__scopeId", "data-v-4c110535"], ["__file", "D:/Uniapp/htmlTest/赛创项目/components/SvgIcon.vue"]]);
  const _imports_0$a = "/static/image/Lianxi/mc/LOG1.png";
  const _imports_1$1 = "/static/image/Lianxi/weixin.png";
  const _imports_2$1 = "/static/image/Lianxi/qq.png";
  const _imports_3$1 = "/static/image/Lianxi/Shouji.png";
  const _sfc_main$N = {
    __name: "login",
    setup(__props, { expose: __expose }) {
      __expose();
      const isRemember = vue.ref(false);
      const showPassword = vue.ref(true);
      const isRegistering = vue.ref(false);
      const schools = vue.ref([]);
      const schoolMultiArray = vue.ref([[], []]);
      const schoolMultiIndex = vue.ref([0, 0]);
      const provinces = vue.ref([]);
      const schoolsByProvince = vue.ref({});
      const selectedSchoolName = vue.computed(() => {
        if (schoolMultiArray.value[0].length === 0 || schoolMultiArray.value[1].length === 0) {
          return "";
        }
        const provinceIndex = schoolMultiIndex.value[0];
        const schoolIndex = schoolMultiIndex.value[1];
        if (!schoolMultiArray.value[0][provinceIndex] || !schoolMultiArray.value[1][schoolIndex]) {
          return "";
        }
        const provinceName = schoolMultiArray.value[0][provinceIndex].name;
        const schoolName = schoolMultiArray.value[1][schoolIndex].name;
        return `${provinceName} - ${schoolName}`;
      });
      const loginForm = vue.reactive({
        phone: "",
        password: ""
      });
      const registerForm = vue.reactive({
        phoneNumber: "",
        password: "",
        realName: "",
        schoolId: 1,
        role: "student",
        major: "",
        studentTeacherId: ""
      });
      vue.onMounted(async () => {
        try {
          const result = await api.user.getSchools();
          if (result && result.data) {
            schools.value = result.data;
            const provinceMap = {};
            const schoolMap = {};
            result.data.forEach((school2) => {
              if (!provinceMap[school2.province]) {
                provinceMap[school2.province] = {
                  id: school2.province,
                  name: school2.province
                };
                schoolMap[school2.province] = [];
              }
              schoolMap[school2.province].push(school2);
            });
            provinces.value = Object.values(provinceMap);
            schoolsByProvince.value = schoolMap;
            schoolMultiArray.value[0] = provinces.value;
            if (provinces.value.length > 0) {
              const firstProvince = provinces.value[0].name;
              schoolMultiArray.value[1] = schoolsByProvince.value[firstProvince] || [];
            }
            if (registerForm.schoolId) {
              const selectedSchool = schools.value.find((school2) => school2.id === registerForm.schoolId);
              if (selectedSchool) {
                const provinceIndex = provinces.value.findIndex((p) => p.name === selectedSchool.province);
                if (provinceIndex !== -1) {
                  schoolMultiIndex.value[0] = provinceIndex;
                  const schoolsInProvince = schoolsByProvince.value[selectedSchool.province] || [];
                  const schoolIndex = schoolsInProvince.findIndex((s) => s.id === selectedSchool.id);
                  if (schoolIndex !== -1) {
                    schoolMultiArray.value[1] = schoolsInProvince;
                    schoolMultiIndex.value[1] = schoolIndex;
                  }
                }
              }
            }
          }
        } catch (error) {
          formatAppLog("error", "at pages/login/login.vue:241", "获取学校列表失败:", error);
          uni.showToast({
            title: "获取学校列表失败",
            icon: "none"
          });
        }
        const token = uni.getStorageSync("token");
        const savedLoginInfo = uni.getStorageSync("loginInfo");
        if (token) {
          try {
            formatAppLog("log", "at pages/login/login.vue:256", "检测到已有token，尝试自动登录");
            uni.switchTab({
              url: "/pages/index/index"
            });
            return;
          } catch (error) {
            formatAppLog("error", "at pages/login/login.vue:263", "自动登录失败，token可能已过期:", error);
            uni.removeStorageSync("token");
          }
        }
        if (savedLoginInfo) {
          try {
            const loginInfo = JSON.parse(savedLoginInfo);
            loginForm.phone = loginInfo.phone || "";
            loginForm.password = loginInfo.password || "";
            isRemember.value = true;
          } catch (error) {
            formatAppLog("error", "at pages/login/login.vue:277", "解析保存的登录信息失败:", error);
          }
        }
      });
      function onSchoolColumnChange(e) {
        const { column, value } = e.detail;
        if (column === 0) {
          schoolMultiIndex.value[0] = value;
          schoolMultiIndex.value[1] = 0;
          const selectedProvince = schoolMultiArray.value[0][value].name;
          schoolMultiArray.value[1] = schoolsByProvince.value[selectedProvince] || [];
        } else {
          schoolMultiIndex.value[1] = value;
        }
      }
      function onSchoolChange(e) {
        const [provinceIndex, schoolIndex] = e.detail.value;
        schoolMultiIndex.value = [provinceIndex, schoolIndex];
        if (schoolMultiArray.value[1] && schoolMultiArray.value[1][schoolIndex]) {
          registerForm.schoolId = schoolMultiArray.value[1][schoolIndex].id;
        }
      }
      function toggleRegister() {
        isRegistering.value = !isRegistering.value;
      }
      function toggleRemember() {
        isRemember.value = !isRemember.value;
      }
      function togglePasswordVisibility() {
        showPassword.value = !showPassword.value;
      }
      function saveLoginInfo() {
        if (isRemember.value) {
          const loginInfo = {
            phone: loginForm.phone,
            password: loginForm.password
          };
          uni.setStorageSync("loginInfo", JSON.stringify(loginInfo));
        } else {
          uni.removeStorageSync("loginInfo");
        }
      }
      async function handleLogin() {
        if (!loginForm.phone || !loginForm.password) {
          uni.showToast({
            title: "请输入手机号和密码",
            icon: "none"
          });
          return;
        }
        uni.removeStorageSync("token");
        uni.showLoading({
          title: "正在登录...",
          mask: true
        });
        try {
          formatAppLog("log", "at pages/login/login.vue:362", "正在连接登录服务器...");
          const res = await api.user.login({
            phone: loginForm.phone,
            password: loginForm.password
          });
          uni.hideLoading();
          formatAppLog("log", "at pages/login/login.vue:371", "登录响应:", res);
          if (res && res.token) {
            uni.setStorageSync("token", res.token);
            saveLoginInfo();
            uni.showToast({
              title: "登录成功",
              icon: "success"
            });
            setTimeout(() => {
              uni.switchTab({
                url: "/pages/index/index"
              });
            }, 1500);
          } else {
            uni.showToast({
              title: "登录失败，请检查账号密码",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/login/login.vue:401", "登录失败:", error);
          uni.hideLoading();
          uni.showToast({
            title: error.message || "登录失败，请检查网络连接或服务器配置",
            icon: "none",
            duration: 3e3
          });
        }
      }
      async function handleRegister() {
        if (!registerForm.phoneNumber) {
          uni.showToast({
            title: "请输入手机号",
            icon: "none"
          });
          return;
        }
        if (!registerForm.password) {
          uni.showToast({
            title: "请输入密码",
            icon: "none"
          });
          return;
        }
        if (!registerForm.realName) {
          uni.showToast({
            title: "请输入姓名",
            icon: "none"
          });
          return;
        }
        if (!registerForm.schoolId) {
          uni.showToast({
            title: "请选择学校",
            icon: "none"
          });
          return;
        }
        if (!registerForm.major) {
          uni.showToast({
            title: "请输入专业",
            icon: "none"
          });
          return;
        }
        if (!registerForm.studentTeacherId) {
          uni.showToast({
            title: "请输入学号",
            icon: "none"
          });
          return;
        }
        try {
          uni.removeStorageSync("token");
          formatAppLog("log", "at pages/login/login.vue:469", "发送的注册数据:", JSON.stringify(registerForm));
          const res = await api.user.register(registerForm);
          uni.showToast({
            title: "注册成功",
            icon: "success"
          });
          isRegistering.value = false;
        } catch (error) {
          uni.showToast({
            title: error.message || "注册失败",
            icon: "none",
            duration: 3e3
          });
          formatAppLog("error", "at pages/login/login.vue:486", "注册失败:", error);
        }
      }
      function forgotPassword() {
        uni.showToast({
          title: "忘记密码功能开发中",
          icon: "none"
        });
      }
      function socialLogin(type) {
        uni.showToast({
          title: `${type}登录功能开发中`,
          icon: "none"
        });
      }
      function openTerms() {
        uni.showToast({
          title: "服务条款",
          icon: "none"
        });
      }
      function openPrivacy() {
        uni.showToast({
          title: "隐私政策",
          icon: "none"
        });
      }
      const __returned__ = { isRemember, showPassword, isRegistering, schools, schoolMultiArray, schoolMultiIndex, provinces, schoolsByProvince, selectedSchoolName, loginForm, registerForm, onSchoolColumnChange, onSchoolChange, toggleRegister, toggleRemember, togglePasswordVisibility, saveLoginInfo, handleLogin, handleRegister, forgotPassword, socialLogin, openTerms, openPrivacy, ref: vue.ref, reactive: vue.reactive, onMounted: vue.onMounted, computed: vue.computed, get api() {
        return api;
      }, SvgIcon };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$M(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 主内容区 "),
      vue.createElementVNode("view", { class: "content-area" }, [
        vue.createCommentVNode(" 顶部图片 "),
        vue.createElementVNode("view", { class: "top-image" }, [
          vue.createElementVNode("image", {
            src: _imports_0$a,
            mode: "aspectFill",
            class: "campus-image"
          })
        ]),
        vue.createCommentVNode(" 欢迎文字 "),
        vue.createElementVNode("view", { class: "welcome-text" }, [
          vue.createElementVNode(
            "text",
            { class: "welcome-title" },
            vue.toDisplayString($setup.isRegistering ? "注册账号" : "欢迎回来"),
            1
            /* TEXT */
          ),
          vue.createElementVNode(
            "text",
            { class: "welcome-subtitle" },
            vue.toDisplayString($setup.isRegistering ? "创建您的校园平台账号" : "登录您的校园平台账号，开启校园新体验"),
            1
            /* TEXT */
          )
        ]),
        vue.createCommentVNode(" 登录表单 "),
        !$setup.isRegistering ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 0,
          class: "login-form"
        }, [
          vue.createElementVNode("view", { class: "input-field" }, [
            vue.createElementVNode("view", { class: "input-content" }, [
              vue.createVNode($setup["SvgIcon"], {
                name: "zhanghao",
                class: "input-icon"
              }),
              vue.withDirectives(vue.createElementVNode(
                "input",
                {
                  type: "text",
                  placeholder: "学号/手机号",
                  class: "form-input",
                  "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.loginForm.phone = $event)
                },
                null,
                512
                /* NEED_PATCH */
              ), [
                [vue.vModelText, $setup.loginForm.phone]
              ])
            ])
          ]),
          vue.createElementVNode("view", { class: "input-field" }, [
            vue.createElementVNode("view", { class: "input-content" }, [
              vue.createVNode($setup["SvgIcon"], {
                name: "mima",
                class: "input-icon"
              }),
              vue.withDirectives(vue.createElementVNode("input", {
                type: "text",
                placeholder: "密码",
                class: "form-input",
                "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.loginForm.password = $event),
                password: $setup.showPassword
              }, null, 8, ["password"]), [
                [vue.vModelText, $setup.loginForm.password]
              ]),
              vue.createElementVNode(
                "text",
                {
                  class: vue.normalizeClass(["iconfont", $setup.showPassword ? "icon-eye-slash" : "icon-eye"]),
                  onClick: $setup.togglePasswordVisibility
                },
                null,
                2
                /* CLASS */
              )
            ])
          ]),
          vue.createElementVNode("view", { class: "remember-row" }, [
            vue.createElementVNode("view", { class: "remember-me" }, [
              vue.createElementVNode("checkbox", {
                value: "1",
                checked: $setup.isRemember,
                onClick: $setup.toggleRemember,
                class: "remember-checkbox",
                color: "#4A90E2"
              }, null, 8, ["checked"]),
              vue.createElementVNode("text", { class: "remember-text" }, "记住我")
            ]),
            vue.createElementVNode("text", {
              class: "forgot-password",
              onClick: $setup.forgotPassword
            }, "忘记密码?")
          ]),
          vue.createElementVNode("button", {
            class: "login-btn",
            onClick: $setup.handleLogin,
            "hover-class": "btn-hover"
          }, "登录"),
          vue.createElementVNode("button", {
            class: "register-btn",
            onClick: $setup.toggleRegister,
            "hover-class": "register-btn-hover"
          }, "注册新账号")
        ])) : (vue.openBlock(), vue.createElementBlock(
          vue.Fragment,
          { key: 1 },
          [
            vue.createCommentVNode(" 注册表单 "),
            vue.createElementVNode("view", { class: "login-form" }, [
              vue.createElementVNode("view", { class: "input-field" }, [
                vue.createElementVNode("view", { class: "input-content" }, [
                  vue.createVNode($setup["SvgIcon"], {
                    name: "zhanghao",
                    class: "input-icon"
                  }),
                  vue.withDirectives(vue.createElementVNode(
                    "input",
                    {
                      type: "text",
                      placeholder: "手机号",
                      class: "form-input",
                      "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => $setup.registerForm.phoneNumber = $event)
                    },
                    null,
                    512
                    /* NEED_PATCH */
                  ), [
                    [vue.vModelText, $setup.registerForm.phoneNumber]
                  ])
                ])
              ]),
              vue.createElementVNode("view", { class: "input-field" }, [
                vue.createElementVNode("view", { class: "input-content" }, [
                  vue.createVNode($setup["SvgIcon"], {
                    name: "mima",
                    class: "input-icon"
                  }),
                  vue.withDirectives(vue.createElementVNode("input", {
                    type: "text",
                    placeholder: "密码",
                    class: "form-input",
                    "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => $setup.registerForm.password = $event),
                    password: $setup.showPassword
                  }, null, 8, ["password"]), [
                    [vue.vModelText, $setup.registerForm.password]
                  ]),
                  vue.createElementVNode(
                    "text",
                    {
                      class: vue.normalizeClass(["iconfont", $setup.showPassword ? "icon-eye-slash" : "icon-eye"]),
                      onClick: $setup.togglePasswordVisibility
                    },
                    null,
                    2
                    /* CLASS */
                  )
                ])
              ]),
              vue.createElementVNode("view", { class: "input-field" }, [
                vue.createElementVNode("view", { class: "input-content" }, [
                  vue.createVNode($setup["SvgIcon"], {
                    name: "mingzi",
                    class: "input-icon"
                  }),
                  vue.withDirectives(vue.createElementVNode(
                    "input",
                    {
                      type: "text",
                      placeholder: "真实姓名",
                      class: "form-input",
                      "onUpdate:modelValue": _cache[4] || (_cache[4] = ($event) => $setup.registerForm.realName = $event)
                    },
                    null,
                    512
                    /* NEED_PATCH */
                  ), [
                    [vue.vModelText, $setup.registerForm.realName]
                  ])
                ])
              ]),
              vue.createCommentVNode(" 学校选择 "),
              vue.createElementVNode("view", { class: "input-field" }, [
                vue.createElementVNode("view", { class: "input-content" }, [
                  vue.createVNode($setup["SvgIcon"], {
                    name: "school",
                    class: "input-icon"
                  }),
                  vue.createElementVNode("picker", {
                    mode: "multiSelector",
                    onChange: $setup.onSchoolChange,
                    onColumnchange: $setup.onSchoolColumnChange,
                    value: $setup.schoolMultiIndex,
                    range: $setup.schoolMultiArray,
                    "range-key": "name",
                    class: "school-picker"
                  }, [
                    vue.createElementVNode("view", { class: "picker-content" }, [
                      vue.createElementVNode(
                        "text",
                        { class: "picker-text" },
                        vue.toDisplayString($setup.selectedSchoolName || "请选择学校（省份-学校）"),
                        1
                        /* TEXT */
                      ),
                      vue.createVNode($setup["SvgIcon"], {
                        name: "xiazhankai",
                        class: "input-icon"
                      })
                    ])
                  ], 40, ["value", "range"])
                ])
              ]),
              vue.createElementVNode("view", { class: "input-field" }, [
                vue.createElementVNode("view", { class: "input-content" }, [
                  vue.createVNode($setup["SvgIcon"], {
                    name: "zhuanye",
                    class: "input-icon"
                  }),
                  vue.withDirectives(vue.createElementVNode(
                    "input",
                    {
                      type: "text",
                      placeholder: "专业",
                      class: "form-input",
                      "onUpdate:modelValue": _cache[5] || (_cache[5] = ($event) => $setup.registerForm.major = $event)
                    },
                    null,
                    512
                    /* NEED_PATCH */
                  ), [
                    [vue.vModelText, $setup.registerForm.major]
                  ])
                ])
              ]),
              vue.createElementVNode("view", { class: "input-field" }, [
                vue.createElementVNode("view", { class: "input-content" }, [
                  vue.createVNode($setup["SvgIcon"], {
                    name: "studentuser",
                    class: "input-icon"
                  }),
                  vue.withDirectives(vue.createElementVNode(
                    "input",
                    {
                      type: "text",
                      placeholder: "学号",
                      class: "form-input",
                      "onUpdate:modelValue": _cache[6] || (_cache[6] = ($event) => $setup.registerForm.studentTeacherId = $event)
                    },
                    null,
                    512
                    /* NEED_PATCH */
                  ), [
                    [vue.vModelText, $setup.registerForm.studentTeacherId]
                  ])
                ])
              ]),
              vue.createElementVNode("button", {
                class: "login-btn",
                onClick: $setup.handleRegister,
                "hover-class": "btn-hover"
              }, "注册"),
              vue.createElementVNode("button", {
                class: "register-btn",
                onClick: $setup.toggleRegister,
                "hover-class": "register-btn-hover"
              }, "返回登录")
            ])
          ],
          2112
          /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
        )),
        vue.createCommentVNode(" 其他登录方式 "),
        !$setup.isRegistering ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 2,
          class: "other-login"
        }, [
          vue.createElementVNode("view", { class: "divider" }, [
            vue.createElementVNode("view", { class: "divider-line" }),
            vue.createElementVNode("text", { class: "divider-text" }, "其他登录方式"),
            vue.createElementVNode("view", { class: "divider-line" })
          ]),
          vue.createElementVNode("view", { class: "social-buttons" }, [
            vue.createElementVNode("view", {
              class: "social-btn",
              onClick: _cache[7] || (_cache[7] = ($event) => $setup.socialLogin("wechat")),
              "hover-class": "social-btn-hover"
            }, [
              vue.createElementVNode("image", {
                src: _imports_1$1,
                mode: "aspectFit",
                class: "social-icon"
              })
            ]),
            vue.createElementVNode("view", {
              class: "social-btn",
              onClick: _cache[8] || (_cache[8] = ($event) => $setup.socialLogin("qq")),
              "hover-class": "social-btn-hover"
            }, [
              vue.createElementVNode("image", {
                src: _imports_2$1,
                mode: "aspectFit",
                class: "social-icon"
              })
            ]),
            vue.createElementVNode("view", {
              class: "social-btn",
              onClick: _cache[9] || (_cache[9] = ($event) => $setup.socialLogin("phone")),
              "hover-class": "social-btn-hover"
            }, [
              vue.createElementVNode("image", {
                src: _imports_3$1,
                mode: "aspectFit",
                class: "social-icon"
              })
            ])
          ])
        ])) : vue.createCommentVNode("v-if", true),
        vue.createCommentVNode(" 底部文字 "),
        vue.createElementVNode("view", { class: "footer-text" }, [
          vue.createElementVNode(
            "text",
            { class: "agreement-text" },
            vue.toDisplayString($setup.isRegistering ? "注册即表示您同意我们的" : "登录即表示您同意我们的"),
            1
            /* TEXT */
          ),
          vue.createElementVNode("text", {
            class: "link-text",
            onClick: $setup.openTerms
          }, "服务条款"),
          vue.createElementVNode("text", { class: "agreement-text" }, "和"),
          vue.createElementVNode("text", {
            class: "link-text",
            onClick: $setup.openPrivacy
          }, "隐私政策")
        ])
      ])
    ]);
  }
  const PagesLoginLogin = /* @__PURE__ */ _export_sfc(_sfc_main$N, [["render", _sfc_render$M], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/login/login.vue"]]);
  class MPAnimation {
    constructor(options, _this) {
      this.options = options;
      this.animation = uni.createAnimation({
        ...options
      });
      this.currentStepAnimates = {};
      this.next = 0;
      this.$ = _this;
    }
    _nvuePushAnimates(type, args) {
      let aniObj = this.currentStepAnimates[this.next];
      let styles = {};
      if (!aniObj) {
        styles = {
          styles: {},
          config: {}
        };
      } else {
        styles = aniObj;
      }
      if (animateTypes1.includes(type)) {
        if (!styles.styles.transform) {
          styles.styles.transform = "";
        }
        let unit = "";
        if (type === "rotate") {
          unit = "deg";
        }
        styles.styles.transform += `${type}(${args + unit}) `;
      } else {
        styles.styles[type] = `${args}`;
      }
      this.currentStepAnimates[this.next] = styles;
    }
    _animateRun(styles = {}, config2 = {}) {
      let ref = this.$.$refs["ani"].ref;
      if (!ref)
        return;
      return new Promise((resolve, reject) => {
        nvueAnimation.transition(ref, {
          styles,
          ...config2
        }, (res) => {
          resolve();
        });
      });
    }
    _nvueNextAnimate(animates, step = 0, fn) {
      let obj = animates[step];
      if (obj) {
        let {
          styles,
          config: config2
        } = obj;
        this._animateRun(styles, config2).then(() => {
          step += 1;
          this._nvueNextAnimate(animates, step, fn);
        });
      } else {
        this.currentStepAnimates = {};
        typeof fn === "function" && fn();
        this.isEnd = true;
      }
    }
    step(config2 = {}) {
      this.animation.step(config2);
      return this;
    }
    run(fn) {
      this.$.animationData = this.animation.export();
      this.$.timer = setTimeout(() => {
        typeof fn === "function" && fn();
      }, this.$.durationTime);
    }
  }
  const animateTypes1 = [
    "matrix",
    "matrix3d",
    "rotate",
    "rotate3d",
    "rotateX",
    "rotateY",
    "rotateZ",
    "scale",
    "scale3d",
    "scaleX",
    "scaleY",
    "scaleZ",
    "skew",
    "skewX",
    "skewY",
    "translate",
    "translate3d",
    "translateX",
    "translateY",
    "translateZ"
  ];
  const animateTypes2 = ["opacity", "backgroundColor"];
  const animateTypes3 = ["width", "height", "left", "right", "top", "bottom"];
  animateTypes1.concat(animateTypes2, animateTypes3).forEach((type) => {
    MPAnimation.prototype[type] = function(...args) {
      this.animation[type](...args);
      return this;
    };
  });
  function createAnimation(option, _this) {
    if (!_this)
      return;
    clearTimeout(_this.timer);
    return new MPAnimation(option, _this);
  }
  const _sfc_main$M = {
    name: "uniTransition",
    emits: ["click", "change"],
    props: {
      show: {
        type: Boolean,
        default: false
      },
      modeClass: {
        type: [Array, String],
        default() {
          return "fade";
        }
      },
      duration: {
        type: Number,
        default: 300
      },
      styles: {
        type: Object,
        default() {
          return {};
        }
      },
      customClass: {
        type: String,
        default: ""
      },
      onceRender: {
        type: Boolean,
        default: false
      }
    },
    data() {
      return {
        isShow: false,
        transform: "",
        opacity: 1,
        animationData: {},
        durationTime: 300,
        config: {}
      };
    },
    watch: {
      show: {
        handler(newVal) {
          if (newVal) {
            this.open();
          } else {
            if (this.isShow) {
              this.close();
            }
          }
        },
        immediate: true
      }
    },
    computed: {
      // 生成样式数据
      stylesObject() {
        let styles = {
          ...this.styles,
          "transition-duration": this.duration / 1e3 + "s"
        };
        let transform = "";
        for (let i in styles) {
          let line = this.toLine(i);
          transform += line + ":" + styles[i] + ";";
        }
        return transform;
      },
      // 初始化动画条件
      transformStyles() {
        return "transform:" + this.transform + ";opacity:" + this.opacity + ";" + this.stylesObject;
      }
    },
    created() {
      this.config = {
        duration: this.duration,
        timingFunction: "ease",
        transformOrigin: "50% 50%",
        delay: 0
      };
      this.durationTime = this.duration;
    },
    methods: {
      /**
       *  ref 触发 初始化动画
       */
      init(obj = {}) {
        if (obj.duration) {
          this.durationTime = obj.duration;
        }
        this.animation = createAnimation(Object.assign(this.config, obj), this);
      },
      /**
       * 点击组件触发回调
       */
      onClick() {
        this.$emit("click", {
          detail: this.isShow
        });
      },
      /**
       * ref 触发 动画分组
       * @param {Object} obj
       */
      step(obj, config2 = {}) {
        if (!this.animation)
          return;
        for (let i in obj) {
          try {
            if (typeof obj[i] === "object") {
              this.animation[i](...obj[i]);
            } else {
              this.animation[i](obj[i]);
            }
          } catch (e) {
            formatAppLog("error", "at uni_modules/uni-transition/components/uni-transition/uni-transition.vue:148", `方法 ${i} 不存在`);
          }
        }
        this.animation.step(config2);
        return this;
      },
      /**
       *  ref 触发 执行动画
       */
      run(fn) {
        if (!this.animation)
          return;
        this.animation.run(fn);
      },
      // 开始过度动画
      open() {
        clearTimeout(this.timer);
        this.transform = "";
        this.isShow = true;
        let { opacity, transform } = this.styleInit(false);
        if (typeof opacity !== "undefined") {
          this.opacity = opacity;
        }
        this.transform = transform;
        this.$nextTick(() => {
          this.timer = setTimeout(() => {
            this.animation = createAnimation(this.config, this);
            this.tranfromInit(false).step();
            this.animation.run();
            this.$emit("change", {
              detail: this.isShow
            });
          }, 20);
        });
      },
      // 关闭过度动画
      close(type) {
        if (!this.animation)
          return;
        this.tranfromInit(true).step().run(() => {
          this.isShow = false;
          this.animationData = null;
          this.animation = null;
          let { opacity, transform } = this.styleInit(false);
          this.opacity = opacity || 1;
          this.transform = transform;
          this.$emit("change", {
            detail: this.isShow
          });
        });
      },
      // 处理动画开始前的默认样式
      styleInit(type) {
        let styles = {
          transform: ""
        };
        let buildStyle = (type2, mode) => {
          if (mode === "fade") {
            styles.opacity = this.animationType(type2)[mode];
          } else {
            styles.transform += this.animationType(type2)[mode] + " ";
          }
        };
        if (typeof this.modeClass === "string") {
          buildStyle(type, this.modeClass);
        } else {
          this.modeClass.forEach((mode) => {
            buildStyle(type, mode);
          });
        }
        return styles;
      },
      // 处理内置组合动画
      tranfromInit(type) {
        let buildTranfrom = (type2, mode) => {
          let aniNum = null;
          if (mode === "fade") {
            aniNum = type2 ? 0 : 1;
          } else {
            aniNum = type2 ? "-100%" : "0";
            if (mode === "zoom-in") {
              aniNum = type2 ? 0.8 : 1;
            }
            if (mode === "zoom-out") {
              aniNum = type2 ? 1.2 : 1;
            }
            if (mode === "slide-right") {
              aniNum = type2 ? "100%" : "0";
            }
            if (mode === "slide-bottom") {
              aniNum = type2 ? "100%" : "0";
            }
          }
          this.animation[this.animationMode()[mode]](aniNum);
        };
        if (typeof this.modeClass === "string") {
          buildTranfrom(type, this.modeClass);
        } else {
          this.modeClass.forEach((mode) => {
            buildTranfrom(type, mode);
          });
        }
        return this.animation;
      },
      animationType(type) {
        return {
          fade: type ? 0 : 1,
          "slide-top": `translateY(${type ? "0" : "-100%"})`,
          "slide-right": `translateX(${type ? "0" : "100%"})`,
          "slide-bottom": `translateY(${type ? "0" : "100%"})`,
          "slide-left": `translateX(${type ? "0" : "-100%"})`,
          "zoom-in": `scaleX(${type ? 1 : 0.8}) scaleY(${type ? 1 : 0.8})`,
          "zoom-out": `scaleX(${type ? 1 : 1.2}) scaleY(${type ? 1 : 1.2})`
        };
      },
      // 内置动画类型与实际动画对应字典
      animationMode() {
        return {
          fade: "opacity",
          "slide-top": "translateY",
          "slide-right": "translateX",
          "slide-bottom": "translateY",
          "slide-left": "translateX",
          "zoom-in": "scale",
          "zoom-out": "scale"
        };
      },
      // 驼峰转中横线
      toLine(name2) {
        return name2.replace(/([A-Z])/g, "-$1").toLowerCase();
      }
    }
  };
  function _sfc_render$L(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.withDirectives((vue.openBlock(), vue.createElementBlock("view", {
      ref: "ani",
      animation: $data.animationData,
      class: vue.normalizeClass($props.customClass),
      style: vue.normalizeStyle($options.transformStyles),
      onClick: _cache[0] || (_cache[0] = (...args) => $options.onClick && $options.onClick(...args))
    }, [
      vue.renderSlot(_ctx.$slots, "default")
    ], 14, ["animation"])), [
      [vue.vShow, $data.isShow]
    ]);
  }
  const __easycom_0$4 = /* @__PURE__ */ _export_sfc(_sfc_main$M, [["render", _sfc_render$L], ["__file", "D:/Uniapp/htmlTest/赛创项目/uni_modules/uni-transition/components/uni-transition/uni-transition.vue"]]);
  const _sfc_main$L = {
    name: "uniPopup",
    components: {},
    emits: ["change", "maskClick"],
    props: {
      // 开启动画
      animation: {
        type: Boolean,
        default: true
      },
      // 弹出层类型，可选值，top: 顶部弹出层；bottom：底部弹出层；center：全屏弹出层
      // message: 消息提示 ; dialog : 对话框
      type: {
        type: String,
        default: "center"
      },
      // maskClick
      isMaskClick: {
        type: Boolean,
        default: null
      },
      // TODO 2 个版本后废弃属性 ，使用 isMaskClick
      maskClick: {
        type: Boolean,
        default: null
      },
      backgroundColor: {
        type: String,
        default: "none"
      },
      safeArea: {
        type: Boolean,
        default: true
      },
      maskBackgroundColor: {
        type: String,
        default: "rgba(0, 0, 0, 0.4)"
      },
      borderRadius: {
        type: String
      }
    },
    watch: {
      /**
       * 监听type类型
       */
      type: {
        handler: function(type) {
          if (!this.config[type])
            return;
          this[this.config[type]](true);
        },
        immediate: true
      },
      isDesktop: {
        handler: function(newVal) {
          if (!this.config[newVal])
            return;
          this[this.config[this.type]](true);
        },
        immediate: true
      },
      /**
       * 监听遮罩是否可点击
       * @param {Object} val
       */
      maskClick: {
        handler: function(val) {
          this.mkclick = val;
        },
        immediate: true
      },
      isMaskClick: {
        handler: function(val) {
          this.mkclick = val;
        },
        immediate: true
      },
      // H5 下禁止底部滚动
      showPopup(show) {
      }
    },
    data() {
      return {
        duration: 300,
        ani: [],
        showPopup: false,
        showTrans: false,
        popupWidth: 0,
        popupHeight: 0,
        config: {
          top: "top",
          bottom: "bottom",
          center: "center",
          left: "left",
          right: "right",
          message: "top",
          dialog: "center",
          share: "bottom"
        },
        maskClass: {
          position: "fixed",
          bottom: 0,
          top: 0,
          left: 0,
          right: 0,
          backgroundColor: "rgba(0, 0, 0, 0.4)"
        },
        transClass: {
          backgroundColor: "transparent",
          borderRadius: this.borderRadius || "0",
          position: "fixed",
          left: 0,
          right: 0
        },
        maskShow: true,
        mkclick: true,
        popupstyle: "top"
      };
    },
    computed: {
      getStyles() {
        let res = { backgroundColor: this.bg };
        if (this.borderRadius || "0") {
          res = Object.assign(res, { borderRadius: this.borderRadius });
        }
        return res;
      },
      isDesktop() {
        return this.popupWidth >= 500 && this.popupHeight >= 500;
      },
      bg() {
        if (this.backgroundColor === "" || this.backgroundColor === "none") {
          return "transparent";
        }
        return this.backgroundColor;
      }
    },
    mounted() {
      const fixSize = () => {
        const {
          windowWidth,
          windowHeight,
          windowTop,
          safeArea,
          screenHeight,
          safeAreaInsets
        } = uni.getSystemInfoSync();
        this.popupWidth = windowWidth;
        this.popupHeight = windowHeight + (windowTop || 0);
        if (safeArea && this.safeArea) {
          this.safeAreaInsets = safeAreaInsets.bottom;
        } else {
          this.safeAreaInsets = 0;
        }
      };
      fixSize();
    },
    // TODO vue3
    unmounted() {
      this.setH5Visible();
    },
    activated() {
      this.setH5Visible(!this.showPopup);
    },
    deactivated() {
      this.setH5Visible(true);
    },
    created() {
      if (this.isMaskClick === null && this.maskClick === null) {
        this.mkclick = true;
      } else {
        this.mkclick = this.isMaskClick !== null ? this.isMaskClick : this.maskClick;
      }
      if (this.animation) {
        this.duration = 300;
      } else {
        this.duration = 0;
      }
      this.messageChild = null;
      this.clearPropagation = false;
      this.maskClass.backgroundColor = this.maskBackgroundColor;
    },
    methods: {
      setH5Visible(visible = true) {
      },
      /**
       * 公用方法，不显示遮罩层
       */
      closeMask() {
        this.maskShow = false;
      },
      /**
       * 公用方法，遮罩层禁止点击
       */
      disableMask() {
        this.mkclick = false;
      },
      // TODO nvue 取消冒泡
      clear(e) {
        e.stopPropagation();
        this.clearPropagation = true;
      },
      open(direction) {
        if (this.showPopup) {
          return;
        }
        let innerType = ["top", "center", "bottom", "left", "right", "message", "dialog", "share"];
        if (!(direction && innerType.indexOf(direction) !== -1)) {
          direction = this.type;
        }
        if (!this.config[direction]) {
          formatAppLog("error", "at uni_modules/uni-popup/components/uni-popup/uni-popup.vue:298", "缺少类型：", direction);
          return;
        }
        this[this.config[direction]]();
        this.$emit("change", {
          show: true,
          type: direction
        });
      },
      close(type) {
        this.showTrans = false;
        this.$emit("change", {
          show: false,
          type: this.type
        });
        clearTimeout(this.timer);
        this.timer = setTimeout(() => {
          this.showPopup = false;
        }, 300);
      },
      // TODO 处理冒泡事件，头条的冒泡事件有问题 ，先这样兼容
      touchstart() {
        this.clearPropagation = false;
      },
      onTap() {
        if (this.clearPropagation) {
          this.clearPropagation = false;
          return;
        }
        this.$emit("maskClick");
        if (!this.mkclick)
          return;
        this.close();
      },
      /**
       * 顶部弹出样式处理
       */
      top(type) {
        this.popupstyle = this.isDesktop ? "fixforpc-top" : "top";
        this.ani = ["slide-top"];
        this.transClass = {
          position: "fixed",
          left: 0,
          right: 0,
          backgroundColor: this.bg,
          borderRadius: this.borderRadius || "0"
        };
        if (type)
          return;
        this.showPopup = true;
        this.showTrans = true;
        this.$nextTick(() => {
          if (this.messageChild && this.type === "message") {
            this.messageChild.timerClose();
          }
        });
      },
      /**
       * 底部弹出样式处理
       */
      bottom(type) {
        this.popupstyle = "bottom";
        this.ani = ["slide-bottom"];
        this.transClass = {
          position: "fixed",
          left: 0,
          right: 0,
          bottom: 0,
          paddingBottom: this.safeAreaInsets + "px",
          backgroundColor: this.bg,
          borderRadius: this.borderRadius || "0"
        };
        if (type)
          return;
        this.showPopup = true;
        this.showTrans = true;
      },
      /**
       * 中间弹出样式处理
       */
      center(type) {
        this.popupstyle = "center";
        this.ani = ["zoom-out", "fade"];
        this.transClass = {
          position: "fixed",
          display: "flex",
          flexDirection: "column",
          bottom: 0,
          left: 0,
          right: 0,
          top: 0,
          justifyContent: "center",
          alignItems: "center",
          borderRadius: this.borderRadius || "0"
        };
        if (type)
          return;
        this.showPopup = true;
        this.showTrans = true;
      },
      left(type) {
        this.popupstyle = "left";
        this.ani = ["slide-left"];
        this.transClass = {
          position: "fixed",
          left: 0,
          bottom: 0,
          top: 0,
          backgroundColor: this.bg,
          borderRadius: this.borderRadius || "0",
          display: "flex",
          flexDirection: "column"
        };
        if (type)
          return;
        this.showPopup = true;
        this.showTrans = true;
      },
      right(type) {
        this.popupstyle = "right";
        this.ani = ["slide-right"];
        this.transClass = {
          position: "fixed",
          bottom: 0,
          right: 0,
          top: 0,
          backgroundColor: this.bg,
          borderRadius: this.borderRadius || "0",
          display: "flex",
          flexDirection: "column"
        };
        if (type)
          return;
        this.showPopup = true;
        this.showTrans = true;
      }
    }
  };
  function _sfc_render$K(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_transition = resolveEasycom(vue.resolveDynamicComponent("uni-transition"), __easycom_0$4);
    return $data.showPopup ? (vue.openBlock(), vue.createElementBlock(
      "view",
      {
        key: 0,
        class: vue.normalizeClass(["uni-popup", [$data.popupstyle, $options.isDesktop ? "fixforpc-z-index" : ""]])
      },
      [
        vue.createElementVNode(
          "view",
          {
            onTouchstart: _cache[1] || (_cache[1] = (...args) => $options.touchstart && $options.touchstart(...args))
          },
          [
            $data.maskShow ? (vue.openBlock(), vue.createBlock(_component_uni_transition, {
              key: "1",
              name: "mask",
              "mode-class": "fade",
              styles: $data.maskClass,
              duration: $data.duration,
              show: $data.showTrans,
              onClick: $options.onTap
            }, null, 8, ["styles", "duration", "show", "onClick"])) : vue.createCommentVNode("v-if", true),
            vue.createVNode(_component_uni_transition, {
              key: "2",
              "mode-class": $data.ani,
              name: "content",
              styles: $data.transClass,
              duration: $data.duration,
              show: $data.showTrans,
              onClick: $options.onTap
            }, {
              default: vue.withCtx(() => [
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["uni-popup__wrapper", [$data.popupstyle]]),
                    style: vue.normalizeStyle($options.getStyles),
                    onClick: _cache[0] || (_cache[0] = (...args) => $options.clear && $options.clear(...args))
                  },
                  [
                    vue.renderSlot(_ctx.$slots, "default", {}, void 0, true)
                  ],
                  6
                  /* CLASS, STYLE */
                )
              ]),
              _: 3
              /* FORWARDED */
            }, 8, ["mode-class", "styles", "duration", "show", "onClick"])
          ],
          32
          /* NEED_HYDRATION */
        )
      ],
      2
      /* CLASS */
    )) : vue.createCommentVNode("v-if", true);
  }
  const __easycom_0$3 = /* @__PURE__ */ _export_sfc(_sfc_main$L, [["render", _sfc_render$K], ["__scopeId", "data-v-4dd3c44b"], ["__file", "D:/Uniapp/htmlTest/赛创项目/uni_modules/uni-popup/components/uni-popup/uni-popup.vue"]]);
  const _sfc_main$K = {
    __name: "TeamCard",
    props: {
      team: {
        type: Object,
        required: true
      },
      index: {
        type: Number,
        default: 0
      },
      showMatch: {
        type: Boolean,
        default: false
      }
    },
    emits: ["detail", "apply"],
    setup(__props, { expose: __expose, emit: __emit }) {
      __expose();
      const props = __props;
      const emit = __emit;
      const animationDelay = vue.computed(() => `${props.index * 0.1}s`);
      const showHotIcon = vue.computed(() => {
        return props.team.viewCount && props.team.viewCount > 100;
      });
      const isPulse = vue.computed(() => {
        return props.team.status === "0" || props.team.statusText === "招募中";
      });
      const getStatusClass = vue.computed(() => {
        const status = props.team.status;
        const statusText = props.team.statusText;
        if (status === "0" || statusText === "招募中") {
          return "status-recruiting";
        } else if (status === "1" || statusText === "进行中") {
          return "status-ongoing";
        } else if (status === "2" || statusText === "已完成") {
          return "status-completed";
        } else if (status === "3" || statusText === "已截止") {
          return "status-ended";
        } else {
          return "status-default";
        }
      });
      const positions = vue.computed(() => {
        return props.team.positions || props.team.roles || [];
      });
      const avatars = vue.computed(() => {
        if (props.team.avatars)
          return props.team.avatars;
        if (props.team.teamMemberAvatars) {
          if (typeof props.team.teamMemberAvatars === "string") {
            return props.team.teamMemberAvatars.split(",").filter(
              (avatar) => avatar && !avatar.includes(".pdf")
            );
          }
          if (Array.isArray(props.team.teamMemberAvatars)) {
            return props.team.teamMemberAvatars.filter(
              (avatar) => avatar && !avatar.includes(".pdf")
            );
          }
        }
        return [];
      });
      const hasMembers = vue.computed(() => {
        return getMemberCount() > 0 && avatars.value.length > 0;
      });
      const canJoin = vue.computed(() => {
        return props.team.status === "0" || props.team.statusText === "招募中";
      });
      const hasProgress = vue.computed(() => {
        return typeof props.team.teamProgress === "number";
      });
      const hasMaxMember = vue.computed(() => {
        return props.team.maxMemberCount !== null && props.team.maxMemberCount > 0;
      });
      function isFilled(position) {
        const current = getCurrentCount(position);
        const total = getTotalCount(position);
        return current >= total;
      }
      function getCurrentCount(position) {
        return position.current || position.currentCount || 0;
      }
      function getTotalCount(position) {
        return position.total || position.requiredCount || 0;
      }
      function getMemberCount() {
        return props.team.memberCount || props.team.currentMemberCount || 0;
      }
      function goToDetail() {
        emit("detail", props.team.id);
      }
      function onApplyJoin() {
        goToDetail();
      }
      const __returned__ = { props, emit, animationDelay, showHotIcon, isPulse, getStatusClass, positions, avatars, hasMembers, canJoin, hasProgress, hasMaxMember, isFilled, getCurrentCount, getTotalCount, getMemberCount, goToDetail, onApplyJoin, computed: vue.computed, get icons() {
        return icons;
      }, SvgIcon };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$J(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock(
      vue.Fragment,
      null,
      [
        vue.createCommentVNode(" 组队卡片 "),
        vue.createElementVNode(
          "view",
          {
            class: "team-item card-hover animate__animated animate__fadeInUp",
            style: vue.normalizeStyle({ "animation-delay": $setup.animationDelay }),
            onClick: $setup.goToDetail
          },
          [
            vue.createCommentVNode(" 卡片顶部 "),
            vue.createElementVNode("view", { class: "team-top" }, [
              vue.createElementVNode("view", { class: "flex-between" }, [
                vue.createElementVNode("view", null, [
                  vue.createElementVNode("view", { class: "title-with-icon" }, [
                    vue.createElementVNode(
                      "text",
                      { class: "team-title" },
                      vue.toDisplayString($props.team.title || $props.team.name),
                      1
                      /* TEXT */
                    ),
                    $setup.showHotIcon ? (vue.openBlock(), vue.createBlock($setup["SvgIcon"], {
                      key: 0,
                      name: "remen",
                      size: "20",
                      class: "hot-icon"
                    })) : vue.createCommentVNode("v-if", true),
                    vue.createElementVNode("view", { class: "view-count" }, [
                      vue.createElementVNode(
                        "text",
                        { class: "view-text" },
                        vue.toDisplayString($props.team.viewCount),
                        1
                        /* TEXT */
                      )
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "tag-row" }, [
                    vue.createElementVNode(
                      "text",
                      { class: "tag orange-tag" },
                      vue.toDisplayString($props.team.competitionName),
                      1
                      /* TEXT */
                    )
                  ])
                ]),
                vue.createElementVNode("view", null, [
                  vue.createElementVNode(
                    "text",
                    {
                      class: vue.normalizeClass(["status-tag", [{ "pulse": $setup.isPulse }, $setup.getStatusClass]])
                    },
                    vue.toDisplayString($props.team.statusText),
                    3
                    /* TEXT, CLASS */
                  ),
                  vue.createElementVNode(
                    "view",
                    { class: "date-info" },
                    "截止: " + vue.toDisplayString($props.team.deadline || $props.team.recruitmentDeadlineFormatted),
                    1
                    /* TEXT */
                  )
                ])
              ])
            ]),
            vue.createCommentVNode(" 匹配度信息 "),
            $props.showMatch && $props.team.matchScore ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "match-info"
            }, [
              vue.createElementVNode("view", { class: "match-score" }, [
                vue.createElementVNode("view", { class: "score-bar" }, [
                  vue.createElementVNode(
                    "view",
                    {
                      class: "score-fill",
                      style: vue.normalizeStyle({ width: `${$props.team.matchScore}%` })
                    },
                    null,
                    4
                    /* STYLE */
                  )
                ]),
                vue.createElementVNode(
                  "text",
                  { class: "score-text" },
                  "匹配度 " + vue.toDisplayString($props.team.matchScore) + "%",
                  1
                  /* TEXT */
                )
              ]),
              $props.team.recommendedRole ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "recommend-role"
              }, [
                vue.createElementVNode("text", { class: "role-label" }, "推荐角色: "),
                vue.createElementVNode(
                  "text",
                  { class: "role-text" },
                  vue.toDisplayString($props.team.recommendedRole),
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true),
              $props.team.matchReason || $props.team.recommendReason ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "match-reason"
              }, [
                vue.createElementVNode("text", { class: "reason-label" }, "匹配理由: "),
                vue.createElementVNode(
                  "text",
                  { class: "reason-text" },
                  vue.toDisplayString($props.team.recommendReason),
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true)
            ])) : vue.createCommentVNode("v-if", true),
            vue.createCommentVNode(" 职位标签 "),
            $setup.positions.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 1,
              class: "role-tags"
            }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.positions, (position, pIndex) => {
                  return vue.openBlock(), vue.createElementBlock("view", {
                    key: pIndex,
                    class: "role-tag"
                  }, [
                    vue.createElementVNode(
                      "text",
                      { class: "role-name" },
                      vue.toDisplayString(position.name),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode(
                      "text",
                      {
                        class: vue.normalizeClass(["role-count", {
                          "success": $setup.isFilled(position),
                          "warning": !$setup.isFilled(position)
                        }])
                      },
                      vue.toDisplayString($setup.getCurrentCount(position)) + "/" + vue.toDisplayString($setup.getTotalCount(position)),
                      3
                      /* TEXT, CLASS */
                    )
                  ]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ])) : vue.createCommentVNode("v-if", true),
            vue.createCommentVNode(" 描述文本 "),
            vue.createElementVNode(
              "view",
              { class: "team-desc" },
              vue.toDisplayString($props.team.description),
              1
              /* TEXT */
            ),
            vue.createCommentVNode(" 成员信息和操作 "),
            vue.createElementVNode("view", { class: "team-bottom" }, [
              vue.createElementVNode("view", { class: "flex-center" }, [
                vue.createCommentVNode(" 当有成员时显示头像 "),
                $setup.hasMembers ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "team-avatars"
                }, [
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($setup.avatars.slice(0, 3), (avatar, aIndex) => {
                      return vue.openBlock(), vue.createElementBlock("image", {
                        key: aIndex,
                        src: avatar,
                        class: "team-avatar"
                      }, null, 8, ["src"]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  ))
                ])) : (vue.openBlock(), vue.createElementBlock(
                  vue.Fragment,
                  { key: 1 },
                  [
                    vue.createCommentVNode(" 无成员时显示的空状态设计 "),
                    vue.createElementVNode("view", { class: "empty-team-state" }, [
                      vue.createElementVNode("view", { class: "empty-avatar" }, [
                        vue.createVNode($setup["SvgIcon"], {
                          name: "Baominrenshu",
                          size: "20",
                          class: "avatar-icon"
                        })
                      ]),
                      vue.createElementVNode("text", { class: "empty-text" }, "暂无成员")
                    ])
                  ],
                  2112
                  /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
                )),
                vue.createCommentVNode(" 成员计数 "),
                $setup.hasMembers ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 2,
                  class: "member-count-wrapper"
                }, [
                  vue.createElementVNode(
                    "text",
                    { class: "member-count" },
                    vue.toDisplayString($setup.getMemberCount()) + "人已加入",
                    1
                    /* TEXT */
                  )
                ])) : vue.createCommentVNode("v-if", true)
              ]),
              vue.createCommentVNode(" 按钮区域 "),
              $setup.canJoin ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "join-btn blue-join",
                onClick: vue.withModifiers($setup.onApplyJoin, ["stop"])
              }, " 招募中 ")) : (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "join-btn gray-join"
              }, " 已组满 "))
            ])
          ],
          4
          /* STYLE */
        )
      ],
      2112
      /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
    );
  }
  const TeamCard = /* @__PURE__ */ _export_sfc(_sfc_main$K, [["render", _sfc_render$J], ["__scopeId", "data-v-49d62ae1"], ["__file", "D:/Uniapp/htmlTest/赛创项目/components/team/TeamCard.vue"]]);
  const _sfc_main$J = {
    __name: "TabBar",
    props: {
      activeTab: {
        type: String,
        default: "home",
        validator: (value) => ["home", "competition", "schedule", "team", "profile"].includes(value)
      }
    },
    emits: ["tab-change", "publish"],
    setup(__props, { expose: __expose, emit: __emit }) {
      __expose();
      const props = __props;
      const userRole = vue.ref("");
      async function getUserRole() {
        try {
          const token = uni.getStorageSync("token");
          if (!token) {
            formatAppLog("error", "at components/TabBar.vue:73", "获取用户角色失败: 未登录");
            return;
          }
          const res = await userApi.parseUserRole(token);
          if (res.code === 200 && res.data) {
            userRole.value = res.data;
            formatAppLog("log", "at components/TabBar.vue:81", "当前用户角色:", userRole.value);
          }
        } catch (error) {
          formatAppLog("error", "at components/TabBar.vue:84", "获取用户角色失败:", error);
        }
      }
      vue.onMounted(() => {
        const token = uni.getStorageSync("token");
        if (token) {
          getUserRole();
        }
      });
      const isDarkMode = vue.computed(() => {
        return false;
      });
      const emit = __emit;
      function switchTab(tab) {
        if (tab !== props.activeTab) {
          const tabRoutes = {
            "home": "/pages/index/index",
            "competition": "/pages/competition/index",
            "schedule": "/pages/schedule/index",
            "team": "/pages/team/list",
            "profile": "/pages/profile/index"
          };
          uni.switchTab({
            url: tabRoutes[tab],
            fail: (err) => {
              formatAppLog("error", "at components/TabBar.vue:118", "切换Tab失败:", err);
              emit("tab-change", tab);
            }
          });
        }
      }
      function showPublishOptions() {
        const token = uni.getStorageSync("token");
        if (!token) {
          uni.showModal({
            title: "提示",
            content: "请先登录后再操作",
            confirmText: "去登录",
            success: function(res) {
              if (res.confirm) {
                uni.navigateTo({
                  url: "/pages/login/login"
                });
              }
            }
          });
          return;
        }
        formatAppLog("log", "at components/TabBar.vue:146", "当前token:", token);
        if (!userRole.value) {
          formatAppLog("log", "at components/TabBar.vue:150", "开始获取用户角色...");
          userApi.parseUserRole(token).then((res) => {
            formatAppLog("log", "at components/TabBar.vue:152", "获取角色成功, 完整响应:", res);
            if (res.code === 200 && res.data) {
              userRole.value = res.data;
              formatAppLog("log", "at components/TabBar.vue:155", "设置当前用户角色:", userRole.value);
              showPublishMenu();
            } else {
              formatAppLog("warn", "at components/TabBar.vue:158", "获取角色返回异常:", res);
              showPublishMenu();
            }
          }).catch((err) => {
            formatAppLog("error", "at components/TabBar.vue:162", "获取用户角色失败:", err);
            formatAppLog("error", "at components/TabBar.vue:163", "错误详情:", JSON.stringify(err));
            showPublishMenu();
          });
        } else {
          formatAppLog("log", "at components/TabBar.vue:168", "使用缓存角色信息:", userRole.value);
          showPublishMenu();
        }
      }
      function showPublishMenu() {
        const menuOptions = [];
        if (userRole.value === "admin") {
          menuOptions.push({
            text: "创建竞赛",
            action: () => {
              uni.navigateTo({
                url: "/pages/competition/create"
              });
            }
          });
        }
        menuOptions.push(
          {
            text: "创建队伍",
            action: () => {
              uni.navigateTo({
                url: "/pages/team/create"
              });
            }
          },
          {
            text: "发布任务",
            action: () => {
              uni.navigateTo({
                url: "/pages/task-square/create"
              });
            }
          }
        );
        const itemList = menuOptions.map((option) => option.text);
        uni.showActionSheet({
          itemList,
          success: function(res) {
            const tapIndex = res.tapIndex;
            if (tapIndex >= 0 && tapIndex < menuOptions.length) {
              menuOptions[tapIndex].action();
            }
          }
        });
      }
      const tabbarData = [
        {
          pagePath: "/pages/index/index",
          text: "首页",
          iconPath: "/static/svg/home-inactive.svg",
          selectedIconPath: "/static/svg/home-active.svg",
          tab: "home"
        },
        {
          pagePath: "/pages/competition/index",
          text: "竞赛",
          iconPath: "/static/svg/competition-inactive.svg",
          selectedIconPath: "/static/svg/competition-active.svg",
          tab: "competition"
        },
        {
          pagePath: "",
          // 中间按钮特殊处理
          text: "",
          iconPath: "",
          selectedIconPath: "",
          tab: "create"
        },
        {
          pagePath: "/pages/schedule/index",
          text: "日程",
          iconPath: "/static/svg/schedule-inactive.svg",
          selectedIconPath: "/static/svg/schedule-active.svg",
          tab: "schedule"
        },
        {
          pagePath: "/pages/team/list",
          text: "队伍",
          iconPath: "/static/svg/team-inactive.svg",
          selectedIconPath: "/static/svg/team-active.svg",
          tab: "team"
        },
        {
          pagePath: "/pages/profile/index",
          text: "我的",
          iconPath: "/static/svg/profile-inactive.svg",
          selectedIconPath: "/static/svg/profile-active.svg",
          tab: "profile"
        }
      ];
      const __returned__ = { props, userRole, getUserRole, isDarkMode, emit, switchTab, showPublishOptions, showPublishMenu, tabbarData, computed: vue.computed, ref: vue.ref, onMounted: vue.onMounted, get userApi() {
        return userApi;
      }, SvgIcon };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$I(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        class: vue.normalizeClass(["tab-bar", { "dark-mode": $setup.isDarkMode }])
      },
      [
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass(["tab-item", { active: $props.activeTab === "home" }]),
            onClick: _cache[0] || (_cache[0] = ($event) => $setup.switchTab("home"))
          },
          [
            vue.createVNode($setup["SvgIcon"], {
              name: $props.activeTab === "home" ? "Shouyexuanzhong" : "Shouye"
            }, null, 8, ["name"]),
            vue.createElementVNode(
              "text",
              {
                class: vue.normalizeClass(["tab-text", { "active-text": $props.activeTab === "home" }])
              },
              "首页",
              2
              /* CLASS */
            ),
            $props.activeTab === "home" ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "active-indicator"
            })) : vue.createCommentVNode("v-if", true)
          ],
          2
          /* CLASS */
        ),
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass(["tab-item", { active: $props.activeTab === "competition" }]),
            onClick: _cache[1] || (_cache[1] = ($event) => $setup.switchTab("competition"))
          },
          [
            vue.createVNode($setup["SvgIcon"], {
              name: $props.activeTab === "competition" ? "jingshaixuanzhong" : "jingshai"
            }, null, 8, ["name"]),
            vue.createElementVNode(
              "text",
              {
                class: vue.normalizeClass(["tab-text", { "active-text": $props.activeTab === "competition" }])
              },
              "竞赛",
              2
              /* CLASS */
            ),
            $props.activeTab === "competition" ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "active-indicator"
            })) : vue.createCommentVNode("v-if", true)
          ],
          2
          /* CLASS */
        ),
        vue.createElementVNode("view", { class: "publish-btn-container" }, [
          vue.createElementVNode("view", {
            class: "publish-btn pulse",
            onClick: $setup.showPublishOptions
          }, [
            vue.createVNode($setup["SvgIcon"], {
              name: $props.activeTab === "publish" ? "chuangjiantubiao" : "chuangjiantubiao"
            }, null, 8, ["name"])
          ])
        ]),
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass(["tab-item", { active: $props.activeTab === "team" }]),
            onClick: _cache[2] || (_cache[2] = ($event) => $setup.switchTab("team"))
          },
          [
            vue.createVNode($setup["SvgIcon"], {
              name: $props.activeTab === "team" ? "duiwutubiaoxuanzhong" : "duiwutubiao"
            }, null, 8, ["name"]),
            vue.createElementVNode(
              "text",
              {
                class: vue.normalizeClass(["tab-text", { "active-text": $props.activeTab === "team" }])
              },
              "队伍",
              2
              /* CLASS */
            ),
            $props.activeTab === "team" ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "active-indicator"
            })) : vue.createCommentVNode("v-if", true)
          ],
          2
          /* CLASS */
        ),
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass(["tab-item", { active: $props.activeTab === "profile" }]),
            onClick: _cache[3] || (_cache[3] = ($event) => $setup.switchTab("profile"))
          },
          [
            vue.createVNode($setup["SvgIcon"], {
              name: $props.activeTab === "profile" ? "wodexuanzhong" : "wode"
            }, null, 8, ["name"]),
            vue.createElementVNode(
              "text",
              {
                class: vue.normalizeClass(["tab-text", { "active-text": $props.activeTab === "profile" }])
              },
              "我的",
              2
              /* CLASS */
            ),
            $props.activeTab === "profile" ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "active-indicator"
            })) : vue.createCommentVNode("v-if", true)
          ],
          2
          /* CLASS */
        )
      ],
      2
      /* CLASS */
    );
  }
  const TabBar = /* @__PURE__ */ _export_sfc(_sfc_main$J, [["render", _sfc_render$I], ["__scopeId", "data-v-89ca1f91"], ["__file", "D:/Uniapp/htmlTest/赛创项目/components/TabBar.vue"]]);
  function getNotificationList(params = {}) {
    return request({
      url: "/notifications",
      method: "GET",
      params: {
        pageNum: params.pageNum || 1,
        pageSize: params.pageSize || 10,
        onlyUnread: params.onlyUnread || false
      }
    });
  }
  function getUnreadCount$1() {
    return request({
      url: "/notifications/unread/count",
      method: "GET"
    });
  }
  function markAsRead$1(notificationId) {
    return request({
      url: `/notifications/${notificationId}/read`,
      method: "PUT"
    });
  }
  function markAllAsRead$1() {
    return request({
      url: "/notifications/read/all",
      method: "PUT"
    });
  }
  function deleteNotification(notificationId) {
    return request({
      url: `/notifications/${notificationId}`,
      method: "DELETE"
    });
  }
  function batchDeleteNotifications(ids) {
    return request({
      url: "/notifications/batch",
      method: "DELETE",
      data: ids
    });
  }
  const notificationsApi = {
    getNotificationList,
    getUnreadCount: getUnreadCount$1,
    markAsRead: markAsRead$1,
    markAllAsRead: markAllAsRead$1,
    deleteNotification,
    batchDeleteNotifications
  };
  const _sfc_main$I = {
    __name: "HeaderBar",
    props: {
      title: {
        type: String,
        default: "页面标题"
      },
      showSearch: {
        type: Boolean,
        default: true
      },
      showFilter: {
        type: Boolean,
        default: true
      },
      showAiRecommend: {
        type: Boolean,
        default: false
      },
      categories: {
        type: Array,
        default: () => []
      },
      defaultCategory: {
        type: Number,
        default: 0
      }
    },
    emits: ["search", "filter", "category-change", "ai-recommend", "back"],
    setup(__props, { expose: __expose, emit: __emit }) {
      const tabBarPages = [
        "pages/index/index",
        "pages/competition/index",
        "pages/team/list",
        "pages/profile/index"
      ];
      const props = __props;
      const currentCategory = vue.ref(props.defaultCategory);
      const unreadCount = vue.ref(0);
      const safeAreaTop = vue.ref(0);
      const isTabBarPage = vue.computed(() => {
        const pages = getCurrentPages();
        if (pages.length === 0)
          return true;
        const currentPage = pages[pages.length - 1];
        const currentRoute = currentPage.route || "";
        return tabBarPages.includes(currentRoute);
      });
      const headerHeight = vue.computed(() => {
        let height = 140;
        if (props.categories && props.categories.length > 0) {
          height += 70;
        }
        height += safeAreaTop.value;
        return height;
      });
      const emit = __emit;
      function onSearch() {
        emit("search");
      }
      function onFilter() {
        uni.navigateTo({
          url: "/pages/Xiaoxi/Xiaoxi"
        });
      }
      function selectCategory(index) {
        if (currentCategory.value === index)
          return;
        currentCategory.value = index;
        emit("category-change", index);
      }
      function goBack() {
        emit("back");
        setTimeout(() => {
          const pages = getCurrentPages();
          const currentPage = pages[pages.length - 1];
          const newPages = getCurrentPages();
          if (newPages.length !== pages.length || newPages[newPages.length - 1] !== currentPage) {
            return;
          }
          if (pages.length > 1) {
            uni.navigateBack({
              delta: 1,
              fail: () => {
                formatAppLog("log", "at components/HeaderBar.vue:162", "返回失败，尝试回到首页");
                uni.switchTab({
                  url: "/pages/index/index"
                });
              }
            });
          } else {
            uni.switchTab({
              url: "/pages/index/index"
            });
          }
        }, 100);
      }
      async function fetchUnreadCount() {
        try {
          const res = await notificationsApi.getUnreadCount();
          if (res.code === 200 && res.data !== void 0) {
            unreadCount.value = res.data;
            const app = getApp();
            if (app && app.globalData) {
              app.globalData.unreadNotificationCount = res.data;
              try {
                if (app.updateMessageBadge) {
                  app.updateMessageBadge();
                }
              } catch (error) {
                formatAppLog("log", "at components/HeaderBar.vue:195", "HeaderBar: 更新TabBar徽标失败", error);
              }
            }
          }
        } catch (error) {
          formatAppLog("error", "at components/HeaderBar.vue:201", "获取未读消息数量失败:", error);
        }
      }
      function getUnreadMessageCount() {
        const app = getApp();
        if (app && app.globalData) {
          unreadCount.value = app.globalData.unreadNotificationCount || 0;
        }
      }
      function onAiRecommend() {
        emit("ai-recommend");
      }
      __expose({
        headerHeight,
        unreadCount,
        fetchUnreadCount,
        // 暴露刷新未读数方法，供父组件调用
        isTabBarPage
        // 暴露tabBar页面状态
      });
      let timer = null;
      vue.onMounted(() => {
        uni.getSystemInfo({
          success: (res) => {
            if (res.safeArea && res.safeArea.top) {
              const screenWidth = res.screenWidth;
              safeAreaTop.value = Math.round(res.safeArea.top * 750 / screenWidth);
              formatAppLog("log", "at components/HeaderBar.vue:237", "安全区高度(rpx):", safeAreaTop.value);
            }
          }
        });
        fetchUnreadCount();
        timer = setInterval(() => {
          fetchUnreadCount();
        }, 3e4);
      });
      vue.onUnmounted(() => {
        if (timer) {
          clearInterval(timer);
          timer = null;
        }
      });
      const __returned__ = { tabBarPages, props, currentCategory, unreadCount, safeAreaTop, isTabBarPage, headerHeight, emit, onSearch, onFilter, selectCategory, goBack, fetchUnreadCount, getUnreadMessageCount, onAiRecommend, get timer() {
        return timer;
      }, set timer(v) {
        timer = v;
      }, ref: vue.ref, computed: vue.computed, onMounted: vue.onMounted, onUnmounted: vue.onUnmounted, get notificationsApi() {
        return notificationsApi;
      }, SvgIcon };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$H(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "sticky-header" }, [
      vue.createElementVNode("view", { class: "header-title" }, [
        !$setup.isTabBarPage ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 0,
          class: "back-btn",
          onClick: $setup.goBack
        }, [
          vue.createVNode($setup["SvgIcon"], {
            name: "back",
            size: "25"
          })
        ])) : vue.createCommentVNode("v-if", true),
        vue.createElementVNode(
          "text",
          { class: "section-title" },
          vue.toDisplayString($props.title),
          1
          /* TEXT */
        ),
        vue.createElementVNode("view", { class: "header-actions" }, [
          $props.showSearch ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 0,
            class: "action-btn",
            onClick: $setup.onSearch
          }, [
            vue.createVNode($setup["SvgIcon"], {
              name: "sousuo",
              size: "25"
            })
          ])) : vue.createCommentVNode("v-if", true),
          $props.showFilter ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 1,
            class: "action-btn message-btn",
            onClick: $setup.onFilter
          }, [
            vue.createVNode($setup["SvgIcon"], {
              name: "xiaoxi",
              size: "34"
            }),
            $setup.unreadCount > 0 ? (vue.openBlock(), vue.createElementBlock(
              "view",
              {
                key: 0,
                class: "badge"
              },
              vue.toDisplayString($setup.unreadCount > 99 ? "99+" : $setup.unreadCount),
              1
              /* TEXT */
            )) : vue.createCommentVNode("v-if", true)
          ])) : vue.createCommentVNode("v-if", true),
          vue.renderSlot(_ctx.$slots, "actions", {}, void 0, true)
        ])
      ]),
      vue.createCommentVNode(" 分类标签 "),
      $props.categories && $props.categories.length > 0 ? (vue.openBlock(), vue.createElementBlock("scroll-view", {
        key: 0,
        "scroll-x": "true",
        class: "category-scroll"
      }, [
        vue.createElementVNode("view", { class: "category-list" }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($props.categories, (category, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                key: index,
                class: vue.normalizeClass(["category-item", $setup.currentCategory === index ? "active-category" : ""]),
                onClick: ($event) => $setup.selectCategory(index)
              }, [
                vue.createElementVNode(
                  "text",
                  null,
                  vue.toDisplayString(category),
                  1
                  /* TEXT */
                )
              ], 10, ["onClick"]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ])) : vue.createCommentVNode("v-if", true),
      vue.renderSlot(_ctx.$slots, "default", {}, void 0, true)
    ]);
  }
  const HeaderBar = /* @__PURE__ */ _export_sfc(_sfc_main$I, [["render", _sfc_render$H], ["__scopeId", "data-v-965d9a70"], ["__file", "D:/Uniapp/htmlTest/赛创项目/components/HeaderBar.vue"]]);
  const getStoredState = () => {
    try {
      const storedState = uni.getStorageSync("userInteractionState");
      return storedState ? JSON.parse(storedState) : null;
    } catch (e) {
      formatAppLog("error", "at store/index.js:10", "读取本地存储失败", e);
      return null;
    }
  };
  const saveStateToStorage = (state2) => {
    try {
      uni.setStorageSync("userInteractionState", JSON.stringify(state2));
    } catch (e) {
      formatAppLog("error", "at store/index.js:20", "存储状态失败", e);
    }
  };
  const initialState = getStoredState() || {
    // 记录用户是否已经点击过AI智能推荐
    hasClickedAiRecommend: false
    // 可以添加更多全局状态...
  };
  const state = vue.reactive(initialState);
  const updateState = (key, value) => {
    if (key in state) {
      state[key] = value;
      saveStateToStorage(state);
    }
  };
  const getState = (key) => {
    return key in state ? state[key] : null;
  };
  const clearState = () => {
    Object.keys(state).forEach((key) => {
      state[key] = initialState[key];
    });
    uni.removeStorageSync("userInteractionState");
  };
  const resetAiRecommendState = () => {
    state.hasClickedAiRecommend = false;
    saveStateToStorage(state);
    formatAppLog("log", "at store/index.js:59", "已重置AI推荐状态，下次将显示分析动画");
  };
  const store = {
    state,
    updateState,
    getState,
    clearState,
    resetAiRecommendState
  };
  const _sfc_main$H = {
    __name: "index",
    setup(__props, { expose: __expose }) {
      __expose();
      const headerBarRef = vue.ref(null);
      const headerPlaceholderHeight = vue.computed(() => {
        if (headerBarRef.value && headerBarRef.value.headerHeight) {
          return headerBarRef.value.headerHeight + "rpx";
        }
        return "120rpx";
      });
      const teamList = vue.ref([]);
      const competitionsList = vue.ref([]);
      const recommendedTeams = vue.ref([]);
      const aiSummary = vue.ref("");
      const showApplyModal = vue.ref(false);
      const applyTeamId = vue.ref(null);
      const applyMessage = vue.ref("希望加入您的团队，请审核");
      const selectedRoleId = vue.ref(null);
      const availableRoles = vue.ref([]);
      const loadingRoles = vue.ref(false);
      const aiAnalyzing = vue.ref(false);
      const aiAnalyzingTexts = [
        "正在分析您的个人资料...",
        "正在匹配与您技能相符的队伍...",
        "正在计算兴趣匹配度...",
        "正在生成个性化推荐..."
      ];
      let aiAnalyzingTimer = null;
      const currentTextIndex = vue.ref(0);
      async function getCompetitionsList() {
        try {
          const res = await competitionsApi.getCompetitionsList({
            isHot: true,
            pageSize: 3
            // 只获取3个热门竞赛
          });
          if (res.code === 200 && res.data && res.data.list) {
            competitionsList.value = res.data.list;
            formatAppLog("log", "at pages/index/index.vue:277", "获取到热门竞赛数据:", competitionsList.value);
          }
        } catch (error) {
          formatAppLog("error", "at pages/index/index.vue:280", "获取竞赛数据失败:", error);
        }
      }
      async function getTeamList() {
        try {
          const res = await teamApi.getTeamList();
          if (res.code === 200 && res.data && res.data.list) {
            teamList.value = res.data.list.slice(0, 10);
            formatAppLog("log", "at pages/index/index.vue:290", "获取到队伍列表数据:", teamList.value);
          }
        } catch (error) {
          formatAppLog("error", "at pages/index/index.vue:294", "获取队伍数据失败:", error);
        }
      }
      async function getRecommendedTeams() {
        try {
          if (recommendedTeams.value && recommendedTeams.value.length > 0) {
            formatAppLog("log", "at pages/index/index.vue:303", "使用缓存的AI推荐队伍数据:", recommendedTeams.value);
            return;
          }
          try {
            const cachedTime = uni.getStorageSync("ai_recommend_cache_time");
            const cachedTeams = uni.getStorageSync("ai_recommended_teams");
            const cachedSummary = uni.getStorageSync("ai_summary");
            if (cachedTime && cachedTeams) {
              const now = Date.now();
              const cacheValidDuration = 3 * 60 * 60 * 1e3;
              const isExpired = now - Number(cachedTime) > cacheValidDuration;
              if (!isExpired) {
                recommendedTeams.value = JSON.parse(cachedTeams);
                aiSummary.value = cachedSummary || "";
                formatAppLog("log", "at pages/index/index.vue:323", "主页加载未过期的AI推荐缓存数据", recommendedTeams.value.length, "个队伍");
                return;
              } else {
                formatAppLog("log", "at pages/index/index.vue:326", "AI推荐缓存已过期，需要重新请求");
              }
            }
          } catch (e) {
            formatAppLog("error", "at pages/index/index.vue:330", "检查AI推荐缓存状态失败:", e);
          }
          const res = await teamApi.getRecommendedTeams();
          if (res.code === 200 && res.data) {
            const teams = res.data.recommendedTeams || [];
            recommendedTeams.value = teams.map((team) => {
              return {
                ...team,
                matchScore: team.matchScore || Math.floor(Math.random() * 30) + 70,
                // 如果没有匹配度，随机生成70-100之间的分数
                matchReason: team.matchReason || team.recommendReason || "根据您的技能和兴趣推荐",
                recommendedRole: team.recommendedRole || ""
              };
            });
            aiSummary.value = res.data.aiSummary || "根据您的专业、技能和兴趣，我们为您推荐了以下最匹配的团队";
            formatAppLog("log", "at pages/index/index.vue:347", "获取到AI推荐队伍数据:", recommendedTeams.value);
            try {
              uni.setStorageSync("ai_recommended_teams", JSON.stringify(recommendedTeams.value));
              uni.setStorageSync("ai_summary", aiSummary.value);
              const currentTime = Date.now();
              uni.setStorageSync("ai_recommend_cache_time", currentTime.toString());
              formatAppLog("log", "at pages/index/index.vue:358", "主页保存AI推荐数据缓存成功，缓存时间:", new Date(currentTime).toLocaleString());
            } catch (e) {
              formatAppLog("error", "at pages/index/index.vue:360", "缓存AI推荐数据失败:", e);
            }
          }
        } catch (error) {
          formatAppLog("error", "at pages/index/index.vue:364", "获取AI推荐队伍失败:", error);
          try {
            const cachedTeams = uni.getStorageSync("ai_recommended_teams");
            const cachedSummary = uni.getStorageSync("ai_summary");
            if (cachedTeams) {
              recommendedTeams.value = JSON.parse(cachedTeams);
              aiSummary.value = cachedSummary || "";
              formatAppLog("log", "at pages/index/index.vue:372", "从缓存加载AI推荐队伍数据:", recommendedTeams.value);
            }
          } catch (e) {
            formatAppLog("error", "at pages/index/index.vue:375", "读取缓存AI推荐数据失败:", e);
          }
        }
      }
      function navigateTo(page) {
        if (page === "findPartner") {
          uni.switchTab({
            url: "/pages/team/list"
          });
        } else if (page === "task-square") {
          uni.navigateTo({
            url: "/pages/task-square/index"
          });
        } else if (page === "project") {
          uni.navigateTo({
            url: "/pages/project/project-showcase"
          });
        } else if (page === "schedule") {
          uni.navigateTo({
            url: "/pages/schedule/index"
          });
        } else {
          uni.showToast({
            title: `导航到${page}页面`,
            icon: "none"
          });
        }
      }
      function navigateToAiRecommend() {
        uni.navigateTo({
          url: "/pages/team/recommended"
        });
      }
      function viewAll(type) {
        if (type === "competition") {
          uni.navigateTo({
            url: "/pages/competition/index"
          });
        } else if (type === "recommend") {
          uni.navigateTo({
            url: "/pages/team/recommended"
            // 假设有个推荐队伍页面
          });
        } else if (type === "schedule") {
          uni.navigateTo({
            url: "/pages/schedule/index"
            // 假设有个推荐队伍页面
          });
        } else {
          uni.navigateTo({
            url: "/pages/team/list"
          });
        }
      }
      function viewDetail(type, id) {
        if (type === "competition") {
          uni.navigateTo({
            url: `/pages/competition/detail?id=${id}`
          });
        } else {
          uni.navigateTo({
            url: `/pages/team/detail?id=${id}`
          });
        }
      }
      async function joinTeam(id) {
        try {
          loadingRoles.value = true;
          applyTeamId.value = id;
          const checkRes = await teamApi.checkTeamStatus(id);
          if (checkRes.code === 200 && checkRes.data) {
            if (checkRes.data.isApplied) {
              uni.showToast({
                title: "您已经申请过该队伍",
                icon: "none"
              });
              return;
            }
            if (checkRes.data.isMember) {
              uni.showToast({
                title: "您已经是该队伍成员",
                icon: "none"
              });
              return;
            }
          }
          const teamDetail = await teamApi.getTeamDetail(id);
          if (teamDetail.code !== 200 || !teamDetail.data) {
            uni.showToast({
              title: "获取队伍信息失败",
              icon: "none"
            });
            return;
          }
          availableRoles.value = teamDetail.data.roles || [];
          if (availableRoles.value.length === 0) {
            uni.showToast({
              title: "该队伍暂无可申请的角色",
              icon: "none"
            });
            return;
          }
          if (availableRoles.value[0]) {
            selectedRoleId.value = availableRoles.value[0].id;
          }
          showApplyModal.value = true;
        } catch (error) {
          uni.showToast({
            title: "操作失败，请稍后重试",
            icon: "none"
          });
          formatAppLog("error", "at pages/index/index.vue:506", "获取队伍角色失败:", error);
        } finally {
          loadingRoles.value = false;
        }
      }
      async function submitApplication() {
        if (!selectedRoleId.value) {
          uni.showToast({
            title: "请选择申请角色",
            icon: "none"
          });
          return;
        }
        if (!applyMessage.value.trim()) {
          uni.showToast({
            title: "请输入申请留言",
            icon: "none"
          });
          return;
        }
        try {
          uni.showLoading({
            title: "提交中..."
          });
          const selectedRole = availableRoles.value.find((role) => role.id === selectedRoleId.value);
          if (selectedRole && selectedRole.count <= selectedRole.filled) {
            uni.hideLoading();
            uni.showToast({
              title: "该角色已满员",
              icon: "none"
            });
            return;
          }
          const applyData = {
            teamId: Number(applyTeamId.value),
            // 确保是数字类型
            roleId: Number(selectedRoleId.value),
            // 确保是数字类型
            message: applyMessage.value.trim()
          };
          formatAppLog("log", "at pages/index/index.vue:554", "申请加入队伍:", applyData);
          const applyRes = await teamApi.applyTeam(applyData);
          uni.hideLoading();
          if (applyRes.code === 200) {
            uni.showToast({
              title: "申请已发送",
              icon: "success"
            });
            resetApplyForm();
            showApplyModal.value = false;
          } else {
            uni.showToast({
              title: applyRes.message || "申请失败",
              icon: "none"
            });
          }
        } catch (error) {
          uni.hideLoading();
          formatAppLog("error", "at pages/index/index.vue:577", "申请加入队伍失败:", error);
          uni.showToast({
            title: error.message || "申请提交失败，请稍后重试",
            icon: "none"
          });
        }
      }
      function resetApplyForm() {
        showApplyModal.value = false;
        applyTeamId.value = null;
        selectedRoleId.value = null;
        applyMessage.value = "希望加入您的团队，请审核";
        availableRoles.value = [];
      }
      function goToSearch() {
        uni.navigateTo({
          url: "/pages/search/index"
        });
      }
      function getStatusClass(status) {
        switch (status) {
          case "0":
            return "status-not-started";
          case "1":
            return "status-recruiting";
          case "2":
            return "status-ongoing";
          case "3":
            return "status-ended";
          default:
            return "";
        }
      }
      vue.watch(showApplyModal, (newVal) => {
        const popup = uni.createSelectorQuery().in(vue.getCurrentInstance()).select(".uni-popup");
        if (popup) {
          setTimeout(() => {
            popup.node((res) => {
              if (res && res.node) {
                if (newVal) {
                  res.node.open && res.node.open();
                } else {
                  res.node.close && res.node.close();
                }
              }
            }).exec();
          }, 0);
        }
      });
      function showAiRecommendPopup() {
        const token = uni.getStorageSync("token");
        if (!token) {
          formatAppLog("log", "at pages/index/index.vue:642", "用户未登录，无法使用AI推荐功能");
          uni.showModal({
            title: "需要登录",
            content: "使用AI推荐功能需要先登录账号",
            confirmText: "去登录",
            success: (res) => {
              if (res.confirm) {
                uni.navigateTo({
                  url: "/pages/login/login"
                });
              }
            }
          });
          return;
        }
        const hasClickedAiRecommend = store.getState("hasClickedAiRecommend");
        if (hasClickedAiRecommend) {
          formatAppLog("log", "at pages/index/index.vue:663", "用户已点击过AI推荐，直接跳转到推荐页面");
          navigateToAiRecommend();
          return;
        }
        formatAppLog("log", "at pages/index/index.vue:668", "用户首次点击AI推荐，显示分析动画");
        aiAnalyzing.value = true;
        currentTextIndex.value = 0;
        uni.showLoading({
          title: aiAnalyzingTexts[currentTextIndex.value],
          mask: true
        });
        if (aiAnalyzingTimer) {
          clearInterval(aiAnalyzingTimer);
          aiAnalyzingTimer = null;
        }
        aiAnalyzingTimer = setInterval(() => {
          currentTextIndex.value = (currentTextIndex.value + 1) % aiAnalyzingTexts.length;
          uni.showLoading({
            title: aiAnalyzingTexts[currentTextIndex.value],
            mask: true
          });
          if (currentTextIndex.value === aiAnalyzingTexts.length - 1) {
            setTimeout(() => {
              clearInterval(aiAnalyzingTimer);
              aiAnalyzingTimer = null;
              uni.hideLoading();
              store.updateState("hasClickedAiRecommend", true);
              uni.showToast({
                title: "分析完成",
                icon: "success",
                duration: 1e3
              });
              setTimeout(() => {
                navigateToAiRecommend();
              }, 1e3);
            }, 1500);
          }
        }, 1500);
      }
      function closeAiRecommendPopup() {
        formatAppLog("log", "at pages/index/index.vue:726", "关闭AI推荐分析");
        if (aiAnalyzingTimer) {
          clearInterval(aiAnalyzingTimer);
          aiAnalyzingTimer = null;
        }
        uni.hideLoading();
        aiAnalyzing.value = false;
        currentTextIndex.value = 0;
      }
      function viewRecommendedTeam(id) {
        viewDetail("team", id);
      }
      function resetAiRecommendForTesting() {
        formatAppLog("log", "at pages/index/index.vue:750", "重置AI推荐状态（开发测试用）");
        store.resetAiRecommendState();
        aiAnalyzing.value = false;
        currentTextIndex.value = 0;
        if (aiAnalyzingTimer) {
          clearInterval(aiAnalyzingTimer);
          aiAnalyzingTimer = null;
        }
        uni.showToast({
          title: "已重置AI推荐状态",
          icon: "success",
          duration: 1500
        });
      }
      vue.onMounted(() => {
        const statusBarHeight = uni.getSystemInfoSync().statusBarHeight;
        formatAppLog("log", "at pages/index/index.vue:775", "状态栏高度:", statusBarHeight);
        const hasClickedAiRecommend = store.getState("hasClickedAiRecommend");
        formatAppLog("log", "at pages/index/index.vue:779", "用户是否已点击过AI推荐:", hasClickedAiRecommend ? "是" : "否");
        if (!hasClickedAiRecommend) {
          aiAnalyzing.value = false;
          currentTextIndex.value = 0;
          if (aiAnalyzingTimer) {
            clearInterval(aiAnalyzingTimer);
            aiAnalyzingTimer = null;
          }
        }
        Promise.all([
          getTeamList(),
          getCompetitionsList(),
          getRecommendedTeams()
          // 提前预加载AI推荐数据
        ]).then(() => {
          formatAppLog("log", "at pages/index/index.vue:797", "所有数据加载完成");
        }).catch((err) => {
          formatAppLog("error", "at pages/index/index.vue:799", "数据加载出错:", err);
        });
      });
      const __returned__ = { headerBarRef, headerPlaceholderHeight, teamList, competitionsList, recommendedTeams, aiSummary, showApplyModal, applyTeamId, applyMessage, selectedRoleId, availableRoles, loadingRoles, aiAnalyzing, aiAnalyzingTexts, get aiAnalyzingTimer() {
        return aiAnalyzingTimer;
      }, set aiAnalyzingTimer(v) {
        aiAnalyzingTimer = v;
      }, currentTextIndex, getCompetitionsList, getTeamList, getRecommendedTeams, navigateTo, navigateToAiRecommend, viewAll, viewDetail, joinTeam, submitApplication, resetApplyForm, goToSearch, getStatusClass, showAiRecommendPopup, closeAiRecommendPopup, viewRecommendedTeam, resetAiRecommendForTesting, ref: vue.ref, onMounted: vue.onMounted, watch: vue.watch, getCurrentInstance: vue.getCurrentInstance, computed: vue.computed, nextTick: vue.nextTick, get teamApi() {
        return teamApi;
      }, get competitionsApi() {
        return competitionsApi;
      }, TeamCard, TabBar, HeaderBar, get api() {
        return api;
      }, get store() {
        return store;
      }, get icons() {
        return icons;
      }, SvgIcon };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$G(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_0$3);
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createVNode(
        $setup["HeaderBar"],
        {
          ref: "headerBarRef",
          title: "校园任务与组队平台",
          "show-ai-recommend": true,
          onSearch: $setup.goToSearch,
          onAiRecommend: $setup.navigateToAiRecommend
        },
        null,
        512
        /* NEED_PATCH */
      ),
      vue.createCommentVNode(" 页面内容 "),
      vue.createElementVNode("scroll-view", {
        "scroll-y": "",
        class: "content-scroll"
      }, [
        vue.createCommentVNode(" 轮播图 "),
        vue.createElementVNode("view", { class: "swiper-container" }, [
          vue.createElementVNode("swiper", {
            class: "swiper animate__animated animate__fadeIn",
            circular: "",
            autoplay: "",
            interval: "3000",
            duration: "500",
            "indicator-dots": "",
            "indicator-active-color": "#247ae4",
            "indicator-color": "rgba(0, 0, 0, 0.2)"
          }, [
            vue.createElementVNode("swiper-item", null, [
              vue.createElementVNode("view", { class: "swiper-item" }, [
                vue.createElementVNode("image", {
                  src: _imports_0$a,
                  mode: "aspectFill"
                }),
                vue.createElementVNode("view", { class: "swiper-overlay" }, [
                  vue.createElementVNode("text", { class: "swiper-title" }, "中国大学生计算机设计大赛(第18届)"),
                  vue.createElementVNode("view", { class: "swiper-date" }, [
                    vue.createElementVNode("image", {
                      src: $setup.icons.baoming,
                      class: "date-icon"
                    }, null, 8, ["src"]),
                    vue.createElementVNode("text", { class: "date-text" }, "报名截止：5月15日")
                  ])
                ])
              ])
            ]),
            vue.createElementVNode("swiper-item", null, [
              vue.createElementVNode("view", { class: "swiper-item" }, [
                vue.createElementVNode("image", {
                  src: "https://images.unsplash.com/photo-1523240795612-9a054b0db644?w=800",
                  mode: "aspectFill"
                }),
                vue.createElementVNode("view", { class: "swiper-overlay" }, [
                  vue.createElementVNode("text", { class: "swiper-title" }, "挑战杯创业计划大赛"),
                  vue.createElementVNode("view", { class: "swiper-date" }, [
                    vue.createElementVNode("image", {
                      src: $setup.icons.baoming,
                      class: "date-icon"
                    }, null, 8, ["src"]),
                    vue.createElementVNode("text", { class: "date-text" }, "报名截止：6月10日")
                  ])
                ])
              ])
            ]),
            vue.createElementVNode("swiper-item", null, [
              vue.createElementVNode("view", { class: "swiper-item" }, [
                vue.createElementVNode("image", {
                  src: "https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=800",
                  mode: "aspectFill"
                }),
                vue.createElementVNode("view", { class: "swiper-overlay" }, [
                  vue.createElementVNode("text", { class: "swiper-title" }, "创青春创业大赛"),
                  vue.createElementVNode("view", { class: "swiper-date" }, [
                    vue.createElementVNode("image", {
                      src: $setup.icons.baoming,
                      class: "date-icon"
                    }, null, 8, ["src"]),
                    vue.createElementVNode("text", { class: "date-text" }, "报名截止：7月5日")
                  ])
                ])
              ])
            ])
          ])
        ]),
        vue.createCommentVNode(" 功能图标入口 "),
        vue.createElementVNode("view", { class: "menu-container" }, [
          vue.createElementVNode("view", { class: "menu-grid" }, [
            vue.createElementVNode("view", {
              class: "menu-item animate__animated animate__fadeInUp",
              style: { "animation-delay": "0.1s" },
              onClick: _cache[0] || (_cache[0] = ($event) => $setup.navigateTo("task-square"))
            }, [
              vue.createElementVNode("view", { class: "menu-icon blue" }, [
                vue.createVNode($setup["SvgIcon"], {
                  name: "weituo",
                  size: "40"
                })
              ]),
              vue.createElementVNode("text", { class: "menu-text" }, "校园委托")
            ]),
            vue.createElementVNode("view", {
              class: "menu-item animate__animated animate__fadeInUp",
              style: { "animation-delay": "0.2s" },
              onClick: _cache[1] || (_cache[1] = ($event) => $setup.navigateTo("findPartner"))
            }, [
              vue.createElementVNode("view", { class: "menu-icon green" }, [
                vue.createVNode($setup["SvgIcon"], {
                  name: "xunzhaoduiyou",
                  size: "40"
                })
              ]),
              vue.createElementVNode("text", { class: "menu-text" }, "寻找队友")
            ]),
            vue.createElementVNode("view", {
              class: "menu-item animate__animated animate__fadeInUp",
              style: { "animation-delay": "0.3s" },
              onClick: _cache[2] || (_cache[2] = ($event) => $setup.navigateTo("project"))
            }, [
              vue.createElementVNode("view", { class: "menu-icon purple" }, [
                vue.createVNode($setup["SvgIcon"], {
                  name: "xiangmuzhanshi",
                  size: "30"
                })
              ]),
              vue.createElementVNode("text", { class: "menu-text" }, "项目展示")
            ]),
            vue.createElementVNode("view", {
              class: "menu-item animate__animated animate__fadeInUp",
              style: { "animation-delay": "0.4s" },
              onClick: _cache[3] || (_cache[3] = ($event) => $setup.navigateTo("schedule"))
            }, [
              vue.createElementVNode("view", { class: "menu-icon orange" }, [
                vue.createVNode($setup["SvgIcon"], {
                  name: "rchenganpan",
                  size: "30"
                })
              ]),
              vue.createElementVNode("text", { class: "menu-text" }, "日程安排")
            ])
          ])
        ]),
        vue.createCommentVNode(" 热门竞赛 "),
        vue.createElementVNode("view", { class: "section" }, [
          vue.createElementVNode("view", { class: "section-header" }, [
            vue.createElementVNode("view", { class: "title-with-icon" }, [
              vue.createElementVNode("text", { class: "section-title animate__animated animate__fadeInLeft" }, "热门竞赛"),
              vue.createVNode($setup["SvgIcon"], {
                name: "remen",
                class: "title-hot-icon"
              })
            ]),
            vue.createElementVNode("text", {
              class: "view-all animate__animated animate__fadeInRight",
              onClick: _cache[4] || (_cache[4] = ($event) => $setup.viewAll("competition"))
            }, "查看全部")
          ]),
          vue.createElementVNode("view", { class: "competition-list" }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.competitionsList, (competition) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  class: "competition-item card-hover animate__animated animate__fadeInUp",
                  style: { "animation-delay": "0.1s" },
                  onClick: ($event) => $setup.viewDetail("competition", competition.id),
                  key: competition.id
                }, [
                  vue.createElementVNode("view", { class: "competition-flex" }, [
                    vue.createElementVNode("view", { class: "competition-image-container" }, [
                      vue.createElementVNode("image", {
                        class: "competition-image",
                        src: competition.coverImageUrl || "https://images.unsplash.com/photo-1523240795612-9a054b0db644?w=800",
                        mode: "aspectFill"
                      }, null, 8, ["src"])
                    ]),
                    vue.createElementVNode("view", { class: "competition-content" }, [
                      vue.createElementVNode("view", { class: "flex-between" }, [
                        vue.createElementVNode(
                          "text",
                          { class: "competition-title" },
                          vue.toDisplayString(competition.title),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode("view", { class: "status-wrapper" }, [
                          vue.createElementVNode(
                            "text",
                            {
                              class: vue.normalizeClass(["status-tag pulse", $setup.getStatusClass(competition.status)])
                            },
                            vue.toDisplayString(competition.statusText),
                            3
                            /* TEXT, CLASS */
                          )
                        ])
                      ]),
                      vue.createElementVNode("view", { class: "tag-row" }, [
                        competition.categoryNames && competition.categoryNames.length > 0 ? (vue.openBlock(), vue.createElementBlock(
                          "text",
                          {
                            key: 0,
                            class: "tag green-tag"
                          },
                          vue.toDisplayString(competition.categoryNames[0]),
                          1
                          /* TEXT */
                        )) : vue.createCommentVNode("v-if", true),
                        vue.createElementVNode(
                          "text",
                          { class: "tag gray-tag" },
                          vue.toDisplayString(competition.level),
                          1
                          /* TEXT */
                        )
                      ]),
                      vue.createElementVNode("view", { class: "competition-info" }, [
                        vue.createElementVNode("view", { class: "info-item" }, [
                          vue.createVNode($setup["SvgIcon"], {
                            name: "baoming",
                            class: "info-icon"
                          }),
                          vue.createElementVNode(
                            "text",
                            { class: "info-text" },
                            "报名截止: " + vue.toDisplayString(competition.registrationDeadlineFormatted),
                            1
                            /* TEXT */
                          )
                        ]),
                        vue.createElementVNode("view", { class: "info-item" }, [
                          vue.createVNode($setup["SvgIcon"], {
                            name: "Baominrenshu",
                            class: "info-icon"
                          }),
                          vue.createElementVNode(
                            "text",
                            { class: "info-text" },
                            vue.toDisplayString(competition.teamSize) + "-" + vue.toDisplayString(competition.teamMax) + "人/队",
                            1
                            /* TEXT */
                          )
                        ])
                      ])
                    ])
                  ])
                ], 8, ["onClick"]);
              }),
              128
              /* KEYED_FRAGMENT */
            ))
          ])
        ]),
        vue.createCommentVNode(" 推荐队伍 "),
        vue.createElementVNode("view", { class: "section" }, [
          vue.createElementVNode("view", { class: "section-header" }, [
            vue.createElementVNode("view", { class: "title-with-icon" }, [
              vue.createElementVNode("text", { class: "section-title animate__animated animate__fadeInLeft" }, "热门队伍"),
              vue.createVNode($setup["SvgIcon"], {
                name: "remen",
                class: "title-hot-icon"
              })
            ]),
            vue.createElementVNode(
              "view",
              {
                class: "ai-recommend-btn",
                onClick: $setup.showAiRecommendPopup,
                onLongpress: $setup.resetAiRecommendForTesting
              },
              [
                vue.createVNode($setup["SvgIcon"], {
                  name: "zhinnegtuijzudui",
                  class: "ai-icon"
                }),
                vue.createElementVNode("text", { class: "ai-text" }, "AI智能推荐")
              ],
              32
              /* NEED_HYDRATION */
            )
          ]),
          vue.createElementVNode("view", { class: "team-list" }, [
            vue.createCommentVNode(" 使用团队卡片组件 "),
            $setup.teamList.length > 0 ? (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              { key: 0 },
              vue.renderList($setup.teamList, (team, index) => {
                return vue.openBlock(), vue.createBlock($setup["TeamCard"], {
                  key: team.id,
                  team,
                  index,
                  onDetail: _cache[5] || (_cache[5] = (id) => $setup.viewDetail("team", id)),
                  onApply: $setup.joinTeam
                }, null, 8, ["team", "index"]);
              }),
              128
              /* KEYED_FRAGMENT */
            )) : (vue.openBlock(), vue.createElementBlock("view", {
              key: 1,
              class: "empty-state"
            }, [
              vue.createElementVNode("text", { class: "empty-text" }, "加载中...")
            ]))
          ])
        ])
      ]),
      vue.createCommentVNode(" 底部TabBar - 由自定义组件处理 "),
      vue.createVNode($setup["TabBar"], { activeTab: "home" }),
      vue.createCommentVNode(" 申请加入弹窗 "),
      vue.createVNode(_component_uni_popup, {
        ref: "applyPopup",
        type: "center",
        show: $setup.showApplyModal,
        onChange: _cache[9] || (_cache[9] = (e) => {
          if (!e.show)
            $setup.resetApplyForm();
        })
      }, {
        default: vue.withCtx(() => [
          vue.createElementVNode("view", { class: "apply-popup" }, [
            vue.createElementVNode("view", { class: "popup-header" }, [
              vue.createElementVNode("text", { class: "popup-title" }, "申请加入团队"),
              vue.createElementVNode("text", {
                class: "close-icon",
                onClick: _cache[6] || (_cache[6] = ($event) => $setup.showApplyModal = false)
              }, "×")
            ]),
            vue.createElementVNode("view", { class: "popup-content" }, [
              vue.createElementVNode("view", { class: "form-item" }, [
                vue.createElementVNode("text", { class: "form-label" }, "申请角色"),
                vue.createElementVNode("view", { class: "role-select" }, [
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($setup.availableRoles, (role) => {
                      return vue.openBlock(), vue.createElementBlock("view", {
                        key: role.id,
                        class: vue.normalizeClass(["role-option", $setup.selectedRoleId === role.id ? "role-selected" : ""]),
                        onClick: ($event) => $setup.selectedRoleId = role.id
                      }, [
                        vue.createElementVNode(
                          "text",
                          { class: "role-name" },
                          vue.toDisplayString(role.name),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode(
                          "text",
                          { class: "role-count" },
                          vue.toDisplayString(role.filled) + "/" + vue.toDisplayString(role.count) + "人",
                          1
                          /* TEXT */
                        )
                      ], 10, ["onClick"]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  ))
                ])
              ]),
              vue.createElementVNode("view", { class: "form-item" }, [
                vue.createElementVNode("text", { class: "form-label" }, [
                  vue.createTextVNode("申请留言 "),
                  vue.createElementVNode("text", { class: "required" }, "*")
                ]),
                vue.withDirectives(vue.createElementVNode(
                  "textarea",
                  {
                    class: "message-input",
                    "onUpdate:modelValue": _cache[7] || (_cache[7] = ($event) => $setup.applyMessage = $event),
                    placeholder: "请输入申请留言",
                    maxlength: "100"
                  },
                  null,
                  512
                  /* NEED_PATCH */
                ), [
                  [vue.vModelText, $setup.applyMessage]
                ]),
                vue.createElementVNode(
                  "text",
                  { class: "char-count" },
                  vue.toDisplayString($setup.applyMessage.length) + "/100",
                  1
                  /* TEXT */
                )
              ])
            ]),
            vue.createElementVNode("view", { class: "popup-footer" }, [
              vue.createElementVNode("button", {
                class: "cancel-btn",
                onClick: _cache[8] || (_cache[8] = ($event) => $setup.showApplyModal = false)
              }, "取消"),
              vue.createElementVNode("button", {
                class: "submit-btn",
                onClick: $setup.submitApplication,
                disabled: !$setup.applyMessage
              }, "提交申请", 8, ["disabled"])
            ])
          ])
        ]),
        _: 1
        /* STABLE */
      }, 8, ["show"])
    ]);
  }
  const PagesIndexIndex = /* @__PURE__ */ _export_sfc(_sfc_main$H, [["render", _sfc_render$G], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/index/index.vue"]]);
  const _sfc_main$G = {
    __name: "project-showcase",
    setup(__props, { expose: __expose }) {
      __expose();
      const categories = ["全部项目", "创新创业", "科技竞赛", "研究项目", "设计作品"];
      const currentCategory = vue.ref(0);
      const projectsData = [
        {
          id: 1,
          title: "智能校园导航系统",
          description: "基于AR技术的校园导航系统，提供实时路线规划和校园信息查询功能，帮助新生和访客快速熟悉校园环境。",
          coverImage: "/static/image/Lianxi/sucai/sc1.png",
          statusText: "进行中",
          statusClass: "ongoing",
          type: "创新创业项目",
          startDate: "2025-04-15",
          teamSize: 5,
          progress: "原型开发阶段",
          category: "创新创业",
          tags: [
            { text: "技术创新", type: "blue" },
            { text: "AR应用", type: "purple" }
          ],
          description_full: "基于AR技术的校园导航系统，提供实时路线规划和校园信息查询功能，帮助新生和访客快速熟悉校园环境。该项目结合了AR增强现实技术与校园地图数据，可以为用户提供沉浸式的导航体验。\n\n系统主要功能包括：实时导航、校园地标识别、信息查询、AR实景引导等。项目已获得学校创新创业基金支持，计划在2025年第三季度完成MVP版本，并在下学期进行校内测试。",
          achievements: "1. 完成了基础地图数据的收集和整理\n2. 开发了AR导航的核心算法\n3. 设计了用户友好的界面原型\n4. 获得了校级创新项目立项",
          teamMembers: [
            { name: "张三", role: "项目负责人", avatar: "https://iknow-pic.cdn.bcebos.com/71cf3bc79f3df8dc4684a310df11728b461028f1" },
            { name: "李四", role: "AR开发工程师", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "王五", role: "UI设计师", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "赵六", role: "后端开发", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "钱七", role: "产品经理", avatar: "/static/image/avatar-placeholder.jpg" }
          ]
        },
        {
          id: 2,
          title: "校园二手交易平台",
          description: "面向在校学生的二手物品交易平台，支持物品发布、搜索、交易和评价，促进校园资源循环利用。",
          coverImage: "/static/image/Lianxi/sucai/sc2.png",
          statusText: "已完成",
          statusClass: "completed",
          type: "创业项目",
          startDate: "2025-02-20",
          teamSize: 4,
          progress: "已上线运营",
          category: "创新创业",
          tags: [
            { text: "创业项目", type: "green" },
            { text: "微信小程序", type: "yellow" }
          ],
          description_full: "面向在校学生的二手物品交易平台，支持物品发布、搜索、交易和评价，促进校园资源循环利用。平台包括微信小程序和网页版，实现了校内闲置物品的高效流通。\n\n该项目在2025年初获得了校园创业大赛一等奖，目前已在3所高校试运行，月活跃用户超过5000人，累计完成交易1.2万笔，交易总额超过30万元。",
          achievements: "1. 获得校园创业大赛一等奖\n2. 三个月内完成产品从0到1的开发\n3. 平台月活跃用户超过5000人\n4. 获得天使轮投资20万元",
          teamMembers: [
            { name: "赵明", role: "项目负责人", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "钱亮", role: "前端开发", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "孙芳", role: "产品设计", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "李强", role: "市场运营", avatar: "/static/image/avatar-placeholder.jpg" }
          ]
        },
        {
          id: 3,
          title: "智慧教室管理系统",
          description: "结合物联网技术的智能教室管理系统，实现教室设备远程控制、使用情况监控和智能预约功能。",
          coverImage: "/static/image/Lianxi/sucai/sc3.png",
          statusText: "进行中",
          statusClass: "ongoing",
          type: "智能硬件",
          startDate: "2025-03-01",
          teamSize: 6,
          progress: "系统测试阶段",
          category: "研究项目",
          tags: [
            { text: "物联网", type: "blue" },
            { text: "智能硬件", type: "red" }
          ],
          description_full: "结合物联网技术的智能教室管理系统，实现教室设备远程控制、使用情况监控和智能预约功能。该系统使用了最新的5G物联网技术和边缘计算架构，可以实现教室环境的智能化管理。\n\n系统包括硬件控制模块、数据采集分析模块和用户交互界面，实现了教室照明、空调、多媒体设备的远程控制和自动化调节，并提供了教室使用数据的可视化分析功能。",
          achievements: "1. 完成了系统架构设计和原型开发\n2. 在5个教室进行了试点安装\n3. 开发了移动端和Web端控制界面\n4. 获得了学校信息化建设专项资金支持",
          teamMembers: [
            { name: "周华", role: "项目负责人", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "吴杰", role: "硬件工程师", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "郑阳", role: "软件开发", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "王梅", role: "界面设计", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "刘星", role: "系统架构师", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "陈亮", role: "测试工程师", avatar: "/static/image/avatar-placeholder.jpg" }
          ]
        },
        {
          id: 4,
          title: "校园文化数字展示平台",
          description: "结合VR技术的校园文化数字展示平台，让用户能够沉浸式体验校园历史、文化景点和重要活动。",
          coverImage: "/static/image/Lianxi/sucai/sc4.png",
          statusText: "进行中",
          statusClass: "ongoing",
          type: "数字文创",
          startDate: "2025-01-10",
          teamSize: 5,
          progress: "功能开发阶段",
          category: "设计作品",
          tags: [
            { text: "VR技术", type: "purple" },
            { text: "文化创意", type: "green" }
          ],
          description_full: "结合VR技术的校园文化数字展示平台，让用户能够沉浸式体验校园历史、文化景点和重要活动。该项目采用了最新的Unity引擎和WebXR技术，可以在网页端和VR设备上运行。\n\n平台内容包括校史馆数字复刻、校园全景漫游、文化活动数字化展示等模块，为校友、新生和访客提供了全新的校园文化体验方式。",
          achievements: "1. 完成了校史馆数字化建模\n2. 开发了VR交互系统\n3. 获得了校园文化建设专项资金\n4. 与校史馆达成合作意向",
          teamMembers: [
            { name: "林小燕", role: "项目负责人", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "张文轩", role: "3D建模师", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "王丽丽", role: "Unity开发", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "李明明", role: "UI设计师", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "赵天成", role: "内容策划", avatar: "/static/image/avatar-placeholder.jpg" }
          ]
        },
        {
          id: 5,
          title: "智能化学实验助手",
          description: "基于计算机视觉的智能化学实验助手，通过摄像头实时识别实验操作，提供步骤提示和安全警告。",
          coverImage: "/static/image/Lianxi/sucai/sc5.png",
          statusText: "已完成",
          statusClass: "completed",
          type: "科研项目",
          startDate: "2024-11-05",
          teamSize: 4,
          progress: "已投入使用",
          category: "科技竞赛",
          tags: [
            { text: "人工智能", type: "blue" },
            { text: "教育科技", type: "green" }
          ],
          description_full: "基于计算机视觉的智能化学实验助手，通过摄像头实时识别实验操作，提供步骤提示和安全警告。该系统采用最新的深度学习算法，能够识别超过50种常见化学实验操作和100种试剂。\n\n系统包括实验识别模块、实验指导模块和安全监控模块，可以为学生提供实时的实验指导，同时监测危险操作并发出警告，大幅提高了实验的安全性和教学效果。",
          achievements: "1. 获得全国大学生人工智能创新大赛特等奖\n2. 实现了对50+种化学实验操作的精准识别\n3. 在学校3个化学实验室完成部署\n4. 申请专利2项，软件著作权1项",
          teamMembers: [
            { name: "刘博", role: "项目负责人", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "张丽丽", role: "算法工程师", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "王明", role: "软件开发", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "李华", role: "化学顾问", avatar: "/static/image/avatar-placeholder.jpg" }
          ]
        },
        {
          id: 6,
          title: "校园碳排放监测系统",
          description: "基于物联网的校园碳排放监测系统，通过传感器网络实时收集和分析校园各区域的能源消耗和碳排放数据。",
          coverImage: "/static/image/Lianxi/sucai/sc6.png",
          statusText: "进行中",
          statusClass: "ongoing",
          type: "可持续发展",
          startDate: "2025-02-28",
          teamSize: 7,
          progress: "数据分析阶段",
          category: "研究项目",
          tags: [
            { text: "环保科技", type: "green" },
            { text: "大数据", type: "blue" }
          ],
          description_full: '基于物联网的校园碳排放监测系统，通过传感器网络实时收集和分析校园各区域的能源消耗和碳排放数据。系统采用了低功耗广域网技术(LoRaWAN)和边缘计算架构，建立了覆盖全校区的监测网络。\n\n项目目标是构建校园碳排放数据地图，通过数据分析发现节能减排的潜力点，为学校实现"双碳"目标提供数据支持和技术方案。',
          achievements: "1. 完成了全校20个重点区域的传感器部署\n2. 建立了碳排放数据分析模型\n3. 开发了实时监测平台和可视化界面\n4. 获得了省级绿色校园建设专项资金",
          teamMembers: [
            { name: "李江", role: "项目负责人", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "张雨", role: "硬件工程师", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "王磊", role: "数据分析师", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "刘芳", role: "软件开发", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "赵明", role: "环境工程顾问", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "钱亮", role: "系统架构师", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "孙华", role: "前端开发", avatar: "/static/image/avatar-placeholder.jpg" }
          ]
        },
        {
          id: 7,
          title: "校园智能健康助手",
          description: "结合可穿戴设备的校园智能健康助手，为学生提供运动追踪、健康监测和个性化健康建议。",
          coverImage: "/static/image/Lianxi/sucai/sc7.png",
          statusText: "进行中",
          statusClass: "ongoing",
          type: "健康科技",
          startDate: "2025-04-01",
          teamSize: 5,
          progress: "用户测试阶段",
          category: "创新创业",
          tags: [
            { text: "健康医疗", type: "red" },
            { text: "移动应用", type: "blue" }
          ],
          description_full: "结合可穿戴设备的校园智能健康助手，为学生提供运动追踪、健康监测和个性化健康建议。项目包括移动应用和云平台两部分，支持主流智能手环和手表的数据接入。\n\n系统结合了运动科学和营养学知识，针对大学生群体特点，提供科学的运动计划和饮食建议，同时通过社交功能激励学生养成健康的生活习惯。",
          achievements: "1. 完成了移动应用开发和云平台搭建\n2. 对接了5种主流可穿戴设备的数据\n3. 招募了200名学生进行封闭测试\n4. 获得了校医院的专业支持和合作",
          teamMembers: [
            { name: "陈健", role: "项目负责人", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "李明", role: "移动开发", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "王芳", role: "产品经理", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "张强", role: "后端开发", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "刘伟", role: "健康顾问", avatar: "/static/image/avatar-placeholder.jpg" }
          ]
        },
        {
          id: 8,
          title: "智能垃圾分类系统",
          description: "基于计算机视觉和机器学习的智能垃圾分类系统，能自动识别垃圾类型并引导用户进行正确分类。",
          coverImage: "/static/image/Lianxi/sucai/sc8.png",
          statusText: "已完成",
          statusClass: "completed",
          type: "环保科技",
          startDate: "2024-09-15",
          teamSize: 4,
          progress: "已投入使用",
          category: "科技竞赛",
          tags: [
            { text: "人工智能", type: "blue" },
            { text: "环保项目", type: "green" }
          ],
          description_full: "基于计算机视觉和机器学习的智能垃圾分类系统，能自动识别垃圾类型并引导用户进行正确分类。系统采用了轻量级深度学习模型，可在普通智能手机上运行，识别准确率达95%以上。\n\n项目开发了移动应用和智能垃圾桶两种应用形式，已在校园内部署了20个智能垃圾分类点，显著提高了校园垃圾分类的准确率和参与度。",
          achievements: "1. 获得全国大学生环保创新大赛一等奖\n2. 垃圾识别准确率超过95%\n3. 校园内部署20个智能垃圾分类点\n4. 申请专利1项，软件著作权2项",
          teamMembers: [
            { name: "李环", role: "项目负责人", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "王晓", role: "算法工程师", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "张鑫", role: "硬件开发", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "刘芳", role: "软件开发", avatar: "/static/image/avatar-placeholder.jpg" }
          ]
        },
        {
          id: 9,
          title: "校园文创IP设计",
          description: "基于校园文化元素的创意设计项目，包括吉祥物、插画、表情包等系列文创产品设计。",
          coverImage: "/static/image/Lianxi/sucai/sc9.png",
          statusText: "已完成",
          statusClass: "completed",
          type: "文化创意",
          startDate: "2025-01-20",
          teamSize: 3,
          progress: "成果展示阶段",
          category: "设计作品",
          tags: [
            { text: "文创设计", type: "purple" },
            { text: "品牌IP", type: "yellow" }
          ],
          description_full: '基于校园文化元素的创意设计项目，包括吉祥物、插画、表情包等系列文创产品设计。项目以学校的历史、建筑、文化符号为创作灵感，设计了一系列具有校园特色的文创IP。\n\n成果包括校园吉祥物"知园宝"及其延伸表情包、校园建筑插画集、纪念品设计等，已在校内文创店上架销售，并在校庆期间推出限定系列。',
          achievements: "1. 设计了校园吉祥物及40款表情包\n2. 完成12幅校园建筑插画创作\n3. 开发了20款文创产品并投入生产\n4. 校庆期间销售额突破5万元",
          teamMembers: [
            { name: "王艺", role: "项目负责人/设计师", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "李梦", role: "插画师", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "张晓", role: "产品设计", avatar: "/static/image/avatar-placeholder.jpg" }
          ]
        },
        {
          id: 10,
          title: "智能课程推荐系统",
          description: "基于大数据和深度学习的个性化课程推荐系统，根据学生的学习历史、兴趣偏好和发展规划推荐适合的课程。",
          coverImage: "/static/image/Lianxi/sucai/sc10.png",
          statusText: "进行中",
          statusClass: "ongoing",
          type: "教育科技",
          startDate: "2025-03-10",
          teamSize: 5,
          progress: "算法优化阶段",
          category: "研究项目",
          tags: [
            { text: "机器学习", type: "blue" },
            { text: "教育科技", type: "green" }
          ],
          description_full: "基于大数据和深度学习的个性化课程推荐系统，根据学生的学习历史、兴趣偏好和发展规划推荐适合的课程。系统采用了最新的深度学习和协同过滤算法，整合了学校5年的选课数据和课程评价数据。\n\n项目目标是解决学生选课难、选课盲目等问题，提供个性化的课程推荐和学习路径规划，帮助学生更科学地规划学业。",
          achievements: "1. 完成了课程数据库的构建和清洗\n2. 开发了基础推荐算法和用户界面\n3. 在部分学院进行了试点测试\n4. 收集了超过1万条用户反馈数据",
          teamMembers: [
            { name: "张智", role: "项目负责人", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "李数", role: "算法工程师", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "王研", role: "数据分析师", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "刘程", role: "全栈开发", avatar: "/static/image/avatar-placeholder.jpg" },
            { name: "赵美", role: "产品经理", avatar: "/static/image/avatar-placeholder.jpg" }
          ]
        }
      ];
      const filteredProjects = vue.computed(() => {
        if (currentCategory.value === 0) {
          return projectsData;
        } else {
          const categoryName = categories[currentCategory.value];
          return projectsData.filter((project) => project.category === categoryName);
        }
      });
      function selectCategory(index) {
        currentCategory.value = index;
      }
      function onSearch() {
        uni.showToast({
          title: "搜索功能",
          icon: "none"
        });
      }
      function viewProjectDetail(id) {
        uni.navigateTo({
          url: `/pages/project/detail?id=${id}`
        });
      }
      function createProject() {
        uni.navigateTo({
          url: "/pages/project/create"
        });
      }
      const __returned__ = { categories, currentCategory, projectsData, filteredProjects, selectCategory, onSearch, viewProjectDetail, createProject, ref: vue.ref, computed: vue.computed, HeaderBar, TabBar, SvgIcon };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$F(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createVNode($setup["HeaderBar"], {
        title: "项目展示",
        "show-search": true,
        "show-filter": true,
        onSearch: $setup.onSearch
      }),
      vue.createCommentVNode(" 主要内容区域 "),
      vue.createElementVNode("scroll-view", {
        "scroll-y": "",
        class: "content-scroll"
      }, [
        vue.createCommentVNode(" 分类筛选 "),
        vue.createElementVNode("view", { class: "filter-categories" }, [
          vue.createElementVNode("scroll-view", {
            "scroll-x": "",
            class: "category-scroll",
            "show-scrollbar": "false"
          }, [
            vue.createElementVNode("view", { class: "category-list" }, [
              (vue.openBlock(), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.categories, (category, index) => {
                  return vue.createElementVNode("view", {
                    key: index,
                    class: vue.normalizeClass(["category-item", { active: $setup.currentCategory === index }]),
                    onClick: ($event) => $setup.selectCategory(index)
                  }, vue.toDisplayString(category), 11, ["onClick"]);
                }),
                64
                /* STABLE_FRAGMENT */
              ))
            ])
          ])
        ]),
        vue.createCommentVNode(" 项目列表 "),
        vue.createElementVNode("view", { class: "project-list" }, [
          vue.createCommentVNode(" 使用循环显示项目卡片 "),
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.filteredProjects, (project) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                key: project.id,
                class: "project-card",
                onClick: ($event) => $setup.viewProjectDetail(project.id)
              }, [
                vue.createElementVNode("view", { class: "project-image-container" }, [
                  vue.createElementVNode("image", {
                    src: project.coverImage,
                    mode: "aspectFill",
                    class: "project-image"
                  }, null, 8, ["src"]),
                  vue.createElementVNode(
                    "view",
                    {
                      class: vue.normalizeClass(["status-badge", `status-${project.statusClass}`])
                    },
                    vue.toDisplayString(project.statusText),
                    3
                    /* TEXT, CLASS */
                  )
                ]),
                vue.createElementVNode("view", { class: "project-content" }, [
                  vue.createElementVNode(
                    "text",
                    { class: "project-title" },
                    vue.toDisplayString(project.title),
                    1
                    /* TEXT */
                  ),
                  vue.createElementVNode(
                    "text",
                    { class: "project-description" },
                    vue.toDisplayString(project.description),
                    1
                    /* TEXT */
                  ),
                  vue.createElementVNode("view", { class: "project-info" }, [
                    vue.createElementVNode("view", { class: "info-item" }, [
                      vue.createVNode($setup["SvgIcon"], {
                        name: "renshu",
                        size: "28",
                        color: "#6b7280"
                      }),
                      vue.createElementVNode(
                        "text",
                        { class: "info-text" },
                        vue.toDisplayString(project.teamSize) + "人团队",
                        1
                        /* TEXT */
                      )
                    ]),
                    vue.createElementVNode("view", { class: "info-item" }, [
                      vue.createVNode($setup["SvgIcon"], {
                        name: "shijian",
                        size: "28",
                        color: "#6b7280"
                      }),
                      vue.createElementVNode(
                        "text",
                        { class: "info-text" },
                        vue.toDisplayString(project.startDate),
                        1
                        /* TEXT */
                      )
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "project-tags" }, [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList(project.tags, (tag, index) => {
                        return vue.openBlock(), vue.createElementBlock(
                          "view",
                          {
                            key: index,
                            class: vue.normalizeClass(["tag", `tag-${tag.type}`])
                          },
                          vue.toDisplayString(tag.text),
                          3
                          /* TEXT, CLASS */
                        );
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    ))
                  ])
                ])
              ], 8, ["onClick"]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ]),
      vue.createCommentVNode(" 底部导航栏 "),
      vue.createVNode($setup["TabBar"], { name: "project" }),
      vue.createCommentVNode(" 悬浮创建按钮 "),
      vue.createElementVNode("view", {
        class: "create-btn",
        onClick: $setup.createProject
      }, [
        vue.createVNode($setup["SvgIcon"], {
          name: "chuangjiantubiao",
          size: "40",
          color: "#ffffff"
        })
      ])
    ]);
  }
  const PagesProjectProjectShowcase = /* @__PURE__ */ _export_sfc(_sfc_main$G, [["render", _sfc_render$F], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/project/project-showcase.vue"]]);
  const _sfc_main$F = {
    __name: "detail",
    setup(__props, { expose: __expose }) {
      __expose();
      const project = vue.ref({});
      const loading = vue.ref(true);
      const projectId = vue.ref(null);
      function getProjectDetail(id) {
        const projectsData = [
          {
            id: 1,
            title: "智能校园导航系统",
            description: "基于AR技术的校园导航系统，提供实时路线规划和校园信息查询功能，帮助新生和访客快速熟悉校园环境。",
            coverImage: "/static/image/Lianxi/sucai/sc1.png",
            statusText: "进行中",
            statusClass: "ongoing",
            type: "创新创业项目",
            startDate: "2025-04-15",
            teamSize: 5,
            progress: "原型开发阶段",
            category: "创新创业",
            tags: [
              { text: "技术创新", type: "blue" },
              { text: "AR应用", type: "purple" }
            ],
            description_full: "基于AR技术的校园导航系统，提供实时路线规划和校园信息查询功能，帮助新生和访客快速熟悉校园环境。该项目结合了AR增强现实技术与校园地图数据，可以为用户提供沉浸式的导航体验。\n\n系统主要功能包括：实时导航、校园地标识别、信息查询、AR实景引导等。项目已获得学校创新创业基金支持，计划在2025年第三季度完成MVP版本，并在下学期进行校内测试。",
            achievements: "1. 完成了基础地图数据的收集和整理\n2. 开发了AR导航的核心算法\n3. 设计了用户友好的界面原型\n4. 获得了校级创新项目立项",
            teamMembers: [
              { name: "张三", role: "项目负责人", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/f3cdb7f93475495b8eff87a7657acad4.png" },
              { name: "李四", role: "AR开发工程师", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/avatar/5e7a3bd200434a709908ab72675607ca.png" },
              { name: "赵六", role: "后端开发", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/63dd5c18e6bc4e2ab9fc7a4355da0837.png" },
              { name: "钱七", role: "产品经理", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/2e30989de7514893a2f0a8cf9df14b70.png" }
            ]
          },
          {
            id: 2,
            title: "校园二手交易平台",
            description: "面向在校学生的二手物品交易平台，支持物品发布、搜索、交易和评价，促进校园资源循环利用。",
            coverImage: "/static/image/Lianxi/sucai/sc2.png",
            statusText: "已完成",
            statusClass: "completed",
            type: "创业项目",
            startDate: "2025-02-20",
            teamSize: 4,
            progress: "已上线运营",
            category: "创新创业",
            tags: [
              { text: "创业项目", type: "green" },
              { text: "微信小程序", type: "yellow" }
            ],
            description_full: "面向在校学生的二手物品交易平台，支持物品发布、搜索、交易和评价，促进校园资源循环利用。平台包括微信小程序和网页版，实现了校内闲置物品的高效流通。\n\n该项目在2025年初获得了校园创业大赛一等奖，目前已在3所高校试运行，月活跃用户超过5000人，累计完成交易1.2万笔，交易总额超过30万元。",
            achievements: "1. 获得校园创业大赛一等奖\n2. 三个月内完成产品从0到1的开发\n3. 平台月活跃用户超过5000人\n4. 获得天使轮投资20万元",
            teamMembers: [
              { name: "赵明", role: "项目负责人", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/0f2e6dd7500744f9adab3c0370c4b7ff.jpg" },
              { name: "钱亮", role: "前端开发", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/4fc4474eb7e944d4a037abf33653d2bb.png" },
              { name: "孙芳", role: "产品设计", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/b0bb4cf070944d25b38c5163aab6e0d7.png" },
              { name: "李强", role: "市场运营", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/2c0c6cd9d4c44711864f8dd5dac9bd03.png" }
            ]
          },
          {
            id: 3,
            title: "智慧教室管理系统",
            description: "结合物联网技术的智能教室管理系统，实现教室设备远程控制、使用情况监控和智能预约功能。",
            coverImage: "/static/image/Lianxi/sucai/sc3.png",
            statusText: "进行中",
            statusClass: "ongoing",
            type: "智能硬件",
            startDate: "2025-03-01",
            teamSize: 6,
            progress: "系统测试阶段",
            category: "研究项目",
            tags: [
              { text: "物联网", type: "blue" },
              { text: "智能硬件", type: "red" }
            ],
            description_full: "结合物联网技术的智能教室管理系统，实现教室设备远程控制、使用情况监控和智能预约功能。该系统使用了最新的5G物联网技术和边缘计算架构，可以实现教室环境的智能化管理。\n\n系统包括硬件控制模块、数据采集分析模块和用户交互界面，实现了教室照明、空调、多媒体设备的远程控制和自动化调节，并提供了教室使用数据的可视化分析功能。",
            achievements: "1. 完成了系统架构设计和原型开发\n2. 在5个教室进行了试点安装\n3. 开发了移动端和Web端控制界面\n4. 获得了学校信息化建设专项资金支持",
            teamMembers: [
              { name: "周华", role: "项目负责人", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/783a43969651464986b06537792a3474.png" },
              { name: "吴杰", role: "硬件工程师", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/5eab6092472f48559c5f97d0c5f056f2.png" },
              { name: "郑阳", role: "软件开发", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/6d94aa83cfc8475d8bb0aa3d8dba9928.png" },
              { name: "王梅", role: "界面设计", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/9b41dba52a4440aab8520f6ecf2b5ba7.png" },
              { name: "刘星", role: "系统架构师", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/313cf10c0f0e4949b29d0c6981a9b72b.png" },
              { name: "陈亮", role: "测试工程师", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/9ca105ebe429473faebca9c81b8e6f78.png" }
            ]
          },
          {
            id: 4,
            title: "校园文化数字展示平台",
            description: "结合VR技术的校园文化数字展示平台，让用户能够沉浸式体验校园历史、文化景点和重要活动。",
            coverImage: "/static/image/Lianxi/sucai/sc4.png",
            statusText: "进行中",
            statusClass: "ongoing",
            type: "数字文创",
            startDate: "2025-01-10",
            teamSize: 5,
            progress: "功能开发阶段",
            category: "设计作品",
            tags: [
              { text: "VR技术", type: "purple" },
              { text: "文化创意", type: "green" }
            ],
            description_full: "结合VR技术的校园文化数字展示平台，让用户能够沉浸式体验校园历史、文化景点和重要活动。该项目采用了最新的Unity引擎和WebXR技术，可以在网页端和VR设备上运行。\n\n平台内容包括校史馆数字复刻、校园全景漫游、文化活动数字化展示等模块，为校友、新生和访客提供了全新的校园文化体验方式。",
            achievements: "1. 完成了校史馆数字化建模\n2. 开发了VR交互系统\n3. 获得了校园文化建设专项资金\n4. 与校史馆达成合作意向",
            teamMembers: [
              { name: "林小燕", role: "项目负责人", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/8d03efc18b60458f81d70790db65dfb2.jpg" },
              { name: "张文轩", role: "3D建模师", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/0a8bb3eb0b144eb1bf027e44dcffd85c.png" },
              { name: "王丽丽", role: "Unity开发", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/e71bf50a98ec42079b9746bbd982e405.png" },
              { name: "李明明", role: "UI设计师", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/f105b7539d5a4dd6a4b3c0bbd3124057.jpeg" },
              { name: "赵天成", role: "内容策划", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/056214c9ae354676a40a0b965dd39acc.jpeg" }
            ]
          },
          {
            id: 5,
            title: "智能化学实验助手",
            description: "基于计算机视觉的智能化学实验助手，通过摄像头实时识别实验操作，提供步骤提示和安全警告。",
            coverImage: "/static/image/Lianxi/sucai/sc5.png",
            statusText: "已完成",
            statusClass: "completed",
            type: "科研项目",
            startDate: "2024-11-05",
            teamSize: 4,
            progress: "已投入使用",
            category: "科技竞赛",
            tags: [
              { text: "人工智能", type: "blue" },
              { text: "教育科技", type: "green" }
            ],
            description_full: "基于计算机视觉的智能化学实验助手，通过摄像头实时识别实验操作，提供步骤提示和安全警告。该系统采用最新的深度学习算法，能够识别超过50种常见化学实验操作和100种试剂。\n\n系统包括实验识别模块、实验指导模块和安全监控模块，可以为学生提供实时的实验指导，同时监测危险操作并发出警告，大幅提高了实验的安全性和教学效果。",
            achievements: "1. 获得全国大学生人工智能创新大赛特等奖\n2. 实现了对50+种化学实验操作的精准识别\n3. 在学校3个化学实验室完成部署\n4. 申请专利2项，软件著作权1项",
            teamMembers: [
              { name: "刘博", role: "项目负责人", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/fa539323f8304e5885a7a454ef468849.jpeg" },
              { name: "张丽丽", role: "算法工程师", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/6a89448ba5f04d67b2d753f6bcdddef8.jpeg" },
              { name: "王明", role: "软件开发", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/3900eb55be7c4cb3b17c0b02d07a18bc.png" },
              { name: "李华", role: "化学顾问", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/f3cdb7f93475495b8eff87a7657acad4.png" }
            ]
          },
          {
            id: 6,
            title: "校园碳排放监测系统",
            description: "基于物联网的校园碳排放监测系统，通过传感器网络实时收集和分析校园各区域的能源消耗和碳排放数据。",
            coverImage: "/static/image/Lianxi/sucai/sc6.png",
            statusText: "进行中",
            statusClass: "ongoing",
            type: "可持续发展",
            startDate: "2025-02-28",
            teamSize: 7,
            progress: "数据分析阶段",
            category: "研究项目",
            tags: [
              { text: "环保科技", type: "green" },
              { text: "大数据", type: "blue" }
            ],
            description_full: '基于物联网的校园碳排放监测系统，通过传感器网络实时收集和分析校园各区域的能源消耗和碳排放数据。系统采用了低功耗广域网技术(LoRaWAN)和边缘计算架构，建立了覆盖全校区的监测网络。\n\n项目目标是构建校园碳排放数据地图，通过数据分析发现节能减排的潜力点，为学校实现"双碳"目标提供数据支持和技术方案。',
            achievements: "1. 完成了全校20个重点区域的传感器部署\n2. 建立了碳排放数据分析模型\n3. 开发了实时监测平台和可视化界面\n4. 获得了省级绿色校园建设专项资金",
            teamMembers: [
              { name: "李江", role: "项目负责人", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/d7e2c603cc9b4c0186d2b58b7814f209.png" },
              { name: "张雨", role: "硬件工程师", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/63dd5c18e6bc4e2ab9fc7a4355da0837.png" },
              { name: "王磊", role: "数据分析师", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/2e30989de7514893a2f0a8cf9df14b70.png" },
              { name: "刘芳", role: "软件开发", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/0f2e6dd7500744f9adab3c0370c4b7ff.jpg" },
              { name: "赵明", role: "环境工程顾问", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/4fc4474eb7e944d4a037abf33653d2bb.png" },
              { name: "钱亮", role: "系统架构师", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/b0bb4cf070944d25b38c5163aab6e0d7.png" },
              { name: "孙华", role: "前端开发", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/2c0c6cd9d4c44711864f8dd5dac9bd03.png" }
            ]
          },
          {
            id: 7,
            title: "校园智能健康助手",
            description: "结合可穿戴设备的校园智能健康助手，为学生提供运动追踪、健康监测和个性化健康建议。",
            coverImage: "/static/image/Lianxi/sucai/sc7.png",
            statusText: "进行中",
            statusClass: "ongoing",
            type: "健康科技",
            startDate: "2025-04-01",
            teamSize: 5,
            progress: "用户测试阶段",
            category: "创新创业",
            tags: [
              { text: "健康医疗", type: "red" },
              { text: "移动应用", type: "blue" }
            ],
            description_full: "结合可穿戴设备的校园智能健康助手，为学生提供运动追踪、健康监测和个性化健康建议。项目包括移动应用和云平台两部分，支持主流智能手环和手表的数据接入。\n\n系统结合了运动科学和营养学知识，针对大学生群体特点，提供科学的运动计划和饮食建议，同时通过社交功能激励学生养成健康的生活习惯。",
            achievements: "1. 完成了移动应用开发和云平台搭建\n2. 对接了5种主流可穿戴设备的数据\n3. 招募了200名学生进行封闭测试\n4. 获得了校医院的专业支持和合作",
            teamMembers: [
              { name: "陈健", role: "项目负责人", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/783a43969651464986b06537792a3474.png" },
              { name: "李明", role: "移动开发", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/5eab6092472f48559c5f97d0c5f056f2.png" },
              { name: "王芳", role: "产品经理", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/6d94aa83cfc8475d8bb0aa3d8dba9928.png" },
              { name: "张强", role: "后端开发", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/9b41dba52a4440aab8520f6ecf2b5ba7.png" },
              { name: "刘伟", role: "健康顾问", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/313cf10c0f0e4949b29d0c6981a9b72b.png" }
            ]
          },
          {
            id: 8,
            title: "智能垃圾分类系统",
            description: "基于计算机视觉和机器学习的智能垃圾分类系统，能自动识别垃圾类型并引导用户进行正确分类。",
            coverImage: "/static/image/Lianxi/sucai/sc8.png",
            statusText: "已完成",
            statusClass: "completed",
            type: "环保科技",
            startDate: "2024-09-15",
            teamSize: 4,
            progress: "已投入使用",
            category: "科技竞赛",
            tags: [
              { text: "人工智能", type: "blue" },
              { text: "环保项目", type: "green" }
            ],
            description_full: "基于计算机视觉和机器学习的智能垃圾分类系统，能自动识别垃圾类型并引导用户进行正确分类。系统采用了轻量级深度学习模型，可在普通智能手机上运行，识别准确率达95%以上。\n\n项目开发了移动应用和智能垃圾桶两种应用形式，已在校园内部署了20个智能垃圾分类点，显著提高了校园垃圾分类的准确率和参与度。",
            achievements: "1. 获得全国大学生环保创新大赛一等奖\n2. 垃圾识别准确率超过95%\n3. 校园内部署20个智能垃圾分类点\n4. 申请专利1项，软件著作权2项",
            teamMembers: [
              { name: "李环", role: "项目负责人", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/9ca105ebe429473faebca9c81b8e6f78.png" },
              { name: "王晓", role: "算法工程师", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/8d03efc18b60458f81d70790db65dfb2.jpg" },
              { name: "张鑫", role: "硬件开发", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/0a8bb3eb0b144eb1bf027e44dcffd85c.png" },
              { name: "刘芳", role: "软件开发", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/e71bf50a98ec42079b9746bbd982e405.png" }
            ]
          },
          {
            id: 9,
            title: "校园文创IP设计",
            description: "基于校园文化元素的创意设计项目，包括吉祥物、插画、表情包等系列文创产品设计。",
            coverImage: "/static/image/Lianxi/sucai/sc9.png",
            statusText: "已完成",
            statusClass: "completed",
            type: "文化创意",
            startDate: "2025-01-20",
            teamSize: 3,
            progress: "成果展示阶段",
            category: "设计作品",
            tags: [
              { text: "文创设计", type: "purple" },
              { text: "品牌IP", type: "yellow" }
            ],
            description_full: '基于校园文化元素的创意设计项目，包括吉祥物、插画、表情包等系列文创产品设计。项目以学校的历史、建筑、文化符号为创作灵感，设计了一系列具有校园特色的文创IP。\n\n成果包括校园吉祥物"知园宝"及其延伸表情包、校园建筑插画集、纪念品设计等，已在校内文创店上架销售，并在校庆期间推出限定系列。',
            achievements: "1. 设计了校园吉祥物及40款表情包\n2. 完成12幅校园建筑插画创作\n3. 开发了20款文创产品并投入生产\n4. 校庆期间销售额突破5万元",
            teamMembers: [
              { name: "王艺", role: "项目负责人/设计师", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/f105b7539d5a4dd6a4b3c0bbd3124057.jpeg" },
              { name: "李梦", role: "插画师", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/056214c9ae354676a40a0b965dd39acc.jpeg" },
              { name: "张晓", role: "产品设计", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/fa539323f8304e5885a7a454ef468849.jpeg" }
            ]
          },
          {
            id: 10,
            title: "智能课程推荐系统",
            description: "基于大数据和深度学习的个性化课程推荐系统，根据学生的学习历史、兴趣偏好和发展规划推荐适合的课程。",
            coverImage: "/static/image/Lianxi/sucai/sc10.png",
            statusText: "进行中",
            statusClass: "ongoing",
            type: "教育科技",
            startDate: "2025-03-10",
            teamSize: 5,
            progress: "算法优化阶段",
            category: "研究项目",
            tags: [
              { text: "机器学习", type: "blue" },
              { text: "教育科技", type: "green" }
            ],
            description_full: "基于大数据和深度学习的个性化课程推荐系统，根据学生的学习历史、兴趣偏好和发展规划推荐适合的课程。系统采用了最新的深度学习和协同过滤算法，整合了学校5年的选课数据和课程评价数据。\n\n项目目标是解决学生选课难、选课盲目等问题，提供个性化的课程推荐和学习路径规划，帮助学生更科学地规划学业。",
            achievements: "1. 完成了课程数据库的构建和清洗\n2. 开发了基础推荐算法和用户界面\n3. 在部分学院进行了试点测试\n4. 收集了超过1万条用户反馈数据",
            teamMembers: [
              { name: "张智", role: "项目负责人", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/6a89448ba5f04d67b2d753f6bcdddef8.jpeg" },
              { name: "李数", role: "算法工程师", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/3900eb55be7c4cb3b17c0b02d07a18bc.png" },
              { name: "王研", role: "数据分析师", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/f3cdb7f93475495b8eff87a7657acad4.png" },
              { name: "刘程", role: "全栈开发", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/d7e2c603cc9b4c0186d2b58b7814f209.png" },
              { name: "赵美", role: "产品经理", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/63dd5c18e6bc4e2ab9fc7a4355da0837.png" }
            ]
          }
        ];
        const found = projectsData.find((item) => item.id === Number(id));
        if (found) {
          project.value = found;
          loading.value = false;
        } else {
          uni.showToast({
            title: "项目不存在",
            icon: "none"
          });
        }
      }
      vue.onMounted(() => {
        var _a;
        const pages = getCurrentPages();
        const currentPage = pages[pages.length - 1];
        const options = (_a = currentPage.$page) == null ? void 0 : _a.options;
        if (options && options.id) {
          projectId.value = options.id;
          getProjectDetail(options.id);
        } else {
          uni.showToast({
            title: "项目ID不存在",
            icon: "none"
          });
        }
      });
      function goBack() {
        uni.navigateBack({
          delta: 1
        });
      }
      function shareProject() {
        uni.showToast({
          title: "分享功能暂未开放",
          icon: "none"
        });
      }
      function joinProject() {
        uni.showToast({
          title: "已发送申请",
          icon: "success"
        });
      }
      const __returned__ = { project, loading, projectId, getProjectDetail, goBack, shareProject, joinProject, ref: vue.ref, onMounted: vue.onMounted, HeaderBar, SvgIcon };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$E(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createVNode($setup["HeaderBar"], {
        title: "项目详情",
        "show-search": false
      }),
      vue.createCommentVNode(" 主要内容区域 "),
      vue.createElementVNode("scroll-view", {
        "scroll-y": "",
        class: "content-scroll"
      }, [
        vue.createCommentVNode(" 项目封面图 "),
        vue.createElementVNode("view", { class: "project-cover" }, [
          vue.createElementVNode("image", {
            src: $setup.project.coverImage,
            mode: "aspectFill",
            class: "cover-image"
          }, null, 8, ["src"]),
          vue.createElementVNode(
            "view",
            {
              class: vue.normalizeClass(["status-badge", `status-${$setup.project.statusClass}`])
            },
            vue.toDisplayString($setup.project.statusText),
            3
            /* TEXT, CLASS */
          )
        ]),
        vue.createCommentVNode(" 项目基本信息 "),
        vue.createElementVNode("view", { class: "project-info-card" }, [
          vue.createElementVNode(
            "text",
            { class: "project-title" },
            vue.toDisplayString($setup.project.title),
            1
            /* TEXT */
          ),
          vue.createCommentVNode(" 项目标签 "),
          vue.createElementVNode("view", { class: "project-tags" }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.project.tags, (tag, index) => {
                return vue.openBlock(), vue.createElementBlock(
                  "view",
                  {
                    key: index,
                    class: vue.normalizeClass(["tag", `tag-${tag.type}`])
                  },
                  vue.toDisplayString(tag.text),
                  3
                  /* TEXT, CLASS */
                );
              }),
              128
              /* KEYED_FRAGMENT */
            ))
          ]),
          vue.createCommentVNode(" 基本信息 "),
          vue.createElementVNode("view", { class: "info-grid" }, [
            vue.createElementVNode("view", { class: "info-item" }, [
              vue.createElementVNode("text", { class: "info-label" }, "项目类型"),
              vue.createElementVNode(
                "text",
                { class: "info-value" },
                vue.toDisplayString($setup.project.type),
                1
                /* TEXT */
              )
            ]),
            vue.createElementVNode("view", { class: "info-item" }, [
              vue.createElementVNode("text", { class: "info-label" }, "开始日期"),
              vue.createElementVNode(
                "text",
                { class: "info-value" },
                vue.toDisplayString($setup.project.startDate),
                1
                /* TEXT */
              )
            ]),
            vue.createElementVNode("view", { class: "info-item" }, [
              vue.createElementVNode("text", { class: "info-label" }, "团队规模"),
              vue.createElementVNode(
                "text",
                { class: "info-value" },
                vue.toDisplayString($setup.project.teamSize) + "人",
                1
                /* TEXT */
              )
            ]),
            vue.createElementVNode("view", { class: "info-item" }, [
              vue.createElementVNode("text", { class: "info-label" }, "进度"),
              vue.createElementVNode(
                "text",
                { class: "info-value" },
                vue.toDisplayString($setup.project.progress),
                1
                /* TEXT */
              )
            ])
          ])
        ]),
        vue.createCommentVNode(" 项目描述 "),
        vue.createElementVNode("view", { class: "section-card" }, [
          vue.createElementVNode("view", { class: "section-title" }, "项目简介"),
          vue.createElementVNode(
            "text",
            { class: "section-content" },
            vue.toDisplayString($setup.project.description),
            1
            /* TEXT */
          )
        ]),
        vue.createCommentVNode(" 项目成果 "),
        vue.createElementVNode("view", { class: "section-card" }, [
          vue.createElementVNode("view", { class: "section-title" }, "项目成果"),
          vue.createElementVNode(
            "text",
            { class: "section-content" },
            vue.toDisplayString($setup.project.achievements),
            1
            /* TEXT */
          ),
          vue.createCommentVNode(" 成果展示图 "),
          vue.createElementVNode("view", { class: "image-gallery" }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.project.images, (img, index) => {
                return vue.openBlock(), vue.createElementBlock("image", {
                  key: index,
                  src: img,
                  mode: "aspectFill",
                  class: "gallery-image",
                  onClick: ($event) => _ctx.previewImage(index)
                }, null, 8, ["src", "onClick"]);
              }),
              128
              /* KEYED_FRAGMENT */
            ))
          ])
        ]),
        vue.createCommentVNode(" 团队成员 "),
        vue.createElementVNode("view", { class: "section-card" }, [
          vue.createElementVNode("view", { class: "section-title" }, "团队成员"),
          vue.createElementVNode("view", { class: "team-members" }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.project.teamMembers, (member, index) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  key: index,
                  class: "member-item"
                }, [
                  vue.createElementVNode("image", {
                    src: member.avatar,
                    class: "member-avatar"
                  }, null, 8, ["src"]),
                  vue.createElementVNode("view", { class: "member-info" }, [
                    vue.createElementVNode(
                      "text",
                      { class: "member-name" },
                      vue.toDisplayString(member.name),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode(
                      "text",
                      { class: "member-role" },
                      vue.toDisplayString(member.role),
                      1
                      /* TEXT */
                    )
                  ])
                ]);
              }),
              128
              /* KEYED_FRAGMENT */
            ))
          ])
        ])
      ]),
      vue.createCommentVNode(" 底部操作栏 "),
      vue.createElementVNode("view", { class: "bottom-actions" }, [
        vue.createElementVNode("view", {
          class: "share-btn",
          onClick: $setup.shareProject
        }, [
          vue.createVNode($setup["SvgIcon"], {
            name: "fenxiang",
            size: "32",
            color: "#666"
          }),
          vue.createElementVNode("text", null, "分享项目")
        ]),
        vue.createElementVNode("button", {
          class: "primary-btn",
          onClick: _cache[0] || (_cache[0] = (...args) => _ctx.contactTeam && _ctx.contactTeam(...args))
        }, "联系团队")
      ])
    ]);
  }
  const PagesProjectDetail = /* @__PURE__ */ _export_sfc(_sfc_main$F, [["render", _sfc_render$E], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/project/detail.vue"]]);
  const isObject = (val) => val !== null && typeof val === "object";
  const defaultDelimiters = ["{", "}"];
  class BaseFormatter {
    constructor() {
      this._caches = /* @__PURE__ */ Object.create(null);
    }
    interpolate(message, values, delimiters = defaultDelimiters) {
      if (!values) {
        return [message];
      }
      let tokens = this._caches[message];
      if (!tokens) {
        tokens = parse(message, delimiters);
        this._caches[message] = tokens;
      }
      return compile(tokens, values);
    }
  }
  const RE_TOKEN_LIST_VALUE = /^(?:\d)+/;
  const RE_TOKEN_NAMED_VALUE = /^(?:\w)+/;
  function parse(format, [startDelimiter, endDelimiter]) {
    const tokens = [];
    let position = 0;
    let text = "";
    while (position < format.length) {
      let char = format[position++];
      if (char === startDelimiter) {
        if (text) {
          tokens.push({ type: "text", value: text });
        }
        text = "";
        let sub = "";
        char = format[position++];
        while (char !== void 0 && char !== endDelimiter) {
          sub += char;
          char = format[position++];
        }
        const isClosed = char === endDelimiter;
        const type = RE_TOKEN_LIST_VALUE.test(sub) ? "list" : isClosed && RE_TOKEN_NAMED_VALUE.test(sub) ? "named" : "unknown";
        tokens.push({ value: sub, type });
      } else {
        text += char;
      }
    }
    text && tokens.push({ type: "text", value: text });
    return tokens;
  }
  function compile(tokens, values) {
    const compiled = [];
    let index = 0;
    const mode = Array.isArray(values) ? "list" : isObject(values) ? "named" : "unknown";
    if (mode === "unknown") {
      return compiled;
    }
    while (index < tokens.length) {
      const token = tokens[index];
      switch (token.type) {
        case "text":
          compiled.push(token.value);
          break;
        case "list":
          compiled.push(values[parseInt(token.value, 10)]);
          break;
        case "named":
          if (mode === "named") {
            compiled.push(values[token.value]);
          } else {
            {
              console.warn(`Type of token '${token.type}' and format of value '${mode}' don't match!`);
            }
          }
          break;
        case "unknown":
          {
            console.warn(`Detect 'unknown' type of token!`);
          }
          break;
      }
      index++;
    }
    return compiled;
  }
  const LOCALE_ZH_HANS = "zh-Hans";
  const LOCALE_ZH_HANT = "zh-Hant";
  const LOCALE_EN = "en";
  const LOCALE_FR = "fr";
  const LOCALE_ES = "es";
  const hasOwnProperty = Object.prototype.hasOwnProperty;
  const hasOwn = (val, key) => hasOwnProperty.call(val, key);
  const defaultFormatter = new BaseFormatter();
  function include(str, parts) {
    return !!parts.find((part) => str.indexOf(part) !== -1);
  }
  function startsWith(str, parts) {
    return parts.find((part) => str.indexOf(part) === 0);
  }
  function normalizeLocale(locale, messages2) {
    if (!locale) {
      return;
    }
    locale = locale.trim().replace(/_/g, "-");
    if (messages2 && messages2[locale]) {
      return locale;
    }
    locale = locale.toLowerCase();
    if (locale === "chinese") {
      return LOCALE_ZH_HANS;
    }
    if (locale.indexOf("zh") === 0) {
      if (locale.indexOf("-hans") > -1) {
        return LOCALE_ZH_HANS;
      }
      if (locale.indexOf("-hant") > -1) {
        return LOCALE_ZH_HANT;
      }
      if (include(locale, ["-tw", "-hk", "-mo", "-cht"])) {
        return LOCALE_ZH_HANT;
      }
      return LOCALE_ZH_HANS;
    }
    let locales = [LOCALE_EN, LOCALE_FR, LOCALE_ES];
    if (messages2 && Object.keys(messages2).length > 0) {
      locales = Object.keys(messages2);
    }
    const lang = startsWith(locale, locales);
    if (lang) {
      return lang;
    }
  }
  class I18n {
    constructor({ locale, fallbackLocale, messages: messages2, watcher, formater: formater2 }) {
      this.locale = LOCALE_EN;
      this.fallbackLocale = LOCALE_EN;
      this.message = {};
      this.messages = {};
      this.watchers = [];
      if (fallbackLocale) {
        this.fallbackLocale = fallbackLocale;
      }
      this.formater = formater2 || defaultFormatter;
      this.messages = messages2 || {};
      this.setLocale(locale || LOCALE_EN);
      if (watcher) {
        this.watchLocale(watcher);
      }
    }
    setLocale(locale) {
      const oldLocale = this.locale;
      this.locale = normalizeLocale(locale, this.messages) || this.fallbackLocale;
      if (!this.messages[this.locale]) {
        this.messages[this.locale] = {};
      }
      this.message = this.messages[this.locale];
      if (oldLocale !== this.locale) {
        this.watchers.forEach((watcher) => {
          watcher(this.locale, oldLocale);
        });
      }
    }
    getLocale() {
      return this.locale;
    }
    watchLocale(fn) {
      const index = this.watchers.push(fn) - 1;
      return () => {
        this.watchers.splice(index, 1);
      };
    }
    add(locale, message, override = true) {
      const curMessages = this.messages[locale];
      if (curMessages) {
        if (override) {
          Object.assign(curMessages, message);
        } else {
          Object.keys(message).forEach((key) => {
            if (!hasOwn(curMessages, key)) {
              curMessages[key] = message[key];
            }
          });
        }
      } else {
        this.messages[locale] = message;
      }
    }
    f(message, values, delimiters) {
      return this.formater.interpolate(message, values, delimiters).join("");
    }
    t(key, locale, values) {
      let message = this.message;
      if (typeof locale === "string") {
        locale = normalizeLocale(locale, this.messages);
        locale && (message = this.messages[locale]);
      } else {
        values = locale;
      }
      if (!hasOwn(message, key)) {
        console.warn(`Cannot translate the value of keypath ${key}. Use the value of keypath as default.`);
        return key;
      }
      return this.formater.interpolate(message[key], values).join("");
    }
  }
  function watchAppLocale(appVm, i18n) {
    if (appVm.$watchLocale) {
      appVm.$watchLocale((newLocale) => {
        i18n.setLocale(newLocale);
      });
    } else {
      appVm.$watch(() => appVm.$locale, (newLocale) => {
        i18n.setLocale(newLocale);
      });
    }
  }
  function getDefaultLocale() {
    if (typeof uni !== "undefined" && uni.getLocale) {
      return uni.getLocale();
    }
    if (typeof global !== "undefined" && global.getLocale) {
      return global.getLocale();
    }
    return LOCALE_EN;
  }
  function initVueI18n(locale, messages2 = {}, fallbackLocale, watcher) {
    if (typeof locale !== "string") {
      const options = [
        messages2,
        locale
      ];
      locale = options[0];
      messages2 = options[1];
    }
    if (typeof locale !== "string") {
      locale = getDefaultLocale();
    }
    if (typeof fallbackLocale !== "string") {
      fallbackLocale = typeof __uniConfig !== "undefined" && __uniConfig.fallbackLocale || LOCALE_EN;
    }
    const i18n = new I18n({
      locale,
      fallbackLocale,
      messages: messages2,
      watcher
    });
    let t2 = (key, values) => {
      if (typeof getApp !== "function") {
        t2 = function(key2, values2) {
          return i18n.t(key2, values2);
        };
      } else {
        let isWatchedAppLocale = false;
        t2 = function(key2, values2) {
          const appVm = getApp().$vm;
          if (appVm) {
            appVm.$locale;
            if (!isWatchedAppLocale) {
              isWatchedAppLocale = true;
              watchAppLocale(appVm, i18n);
            }
          }
          return i18n.t(key2, values2);
        };
      }
      return t2(key, values);
    };
    return {
      i18n,
      f(message, values, delimiters) {
        return i18n.f(message, values, delimiters);
      },
      t(key, values) {
        return t2(key, values);
      },
      add(locale2, message, override = true) {
        return i18n.add(locale2, message, override);
      },
      watch(fn) {
        return i18n.watchLocale(fn);
      },
      getLocale() {
        return i18n.getLocale();
      },
      setLocale(newLocale) {
        return i18n.setLocale(newLocale);
      }
    };
  }
  const en$2 = {
    "uni-load-more.contentdown": "Pull up to show more",
    "uni-load-more.contentrefresh": "loading...",
    "uni-load-more.contentnomore": "No more data"
  };
  const zhHans$2 = {
    "uni-load-more.contentdown": "上拉显示更多",
    "uni-load-more.contentrefresh": "正在加载...",
    "uni-load-more.contentnomore": "没有更多数据了"
  };
  const zhHant$2 = {
    "uni-load-more.contentdown": "上拉顯示更多",
    "uni-load-more.contentrefresh": "正在加載...",
    "uni-load-more.contentnomore": "沒有更多數據了"
  };
  const messages$1 = {
    en: en$2,
    "zh-Hans": zhHans$2,
    "zh-Hant": zhHant$2
  };
  let platform;
  setTimeout(() => {
    platform = uni.getSystemInfoSync().platform;
  }, 16);
  const {
    t: t$3
  } = initVueI18n(messages$1);
  const _sfc_main$E = {
    name: "UniLoadMore",
    emits: ["clickLoadMore"],
    props: {
      status: {
        // 上拉的状态：more-loading前；loading-loading中；noMore-没有更多了
        type: String,
        default: "more"
      },
      showIcon: {
        type: Boolean,
        default: true
      },
      iconType: {
        type: String,
        default: "auto"
      },
      iconSize: {
        type: Number,
        default: 24
      },
      color: {
        type: String,
        default: "#777777"
      },
      contentText: {
        type: Object,
        default() {
          return {
            contentdown: "",
            contentrefresh: "",
            contentnomore: ""
          };
        }
      },
      showText: {
        type: Boolean,
        default: true
      }
    },
    data() {
      return {
        webviewHide: false,
        platform,
        imgBase64: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzlBMzU3OTlEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzlBMzU3OUFEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDOUEzNTc5N0Q5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDOUEzNTc5OEQ5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt+ALSwAAA6CSURBVHja1FsLkFZVHb98LM+F5bHL8khA1iSeiyQBCRM+YGqKUnnJTDLGI0BGZlKDIU2MMglUiDApEZvSsZnQtBRJtKwQNKQMFYeRDR10WOLd8ljYXdh+v8v5fR3Od+797t1dnOnO/Ofce77z+J//+b/P+ZqtXbs2sJ9MJhNUV1cHJ06cCJo3bx7EPc2aNcvpy7pWrVoF+/fvDyoqKoI2bdoE9fX1F7TjN8a+EXBn/fkfvw942Tf+wYMHg9mzZwfjxo0LDhw4EPa1x2MbFw/fOGfPng1qa2tzcCkILsLDydq2bRsunpOTMM7TD/W/tZDZhPdeKD+yGxHhdu3aBV27dg3OnDlzMVANMheLAO3btw8KCwuDmpoaX5OxbgUIMEq7K8IcPnw4KCsrC/r37x8cP378/4cAXAB3vqSkJMuiDhTkw+XcuXNhOWbMmKBly5YhUT8xArhyFvP0BfwRsAuwxJZJsm/nzp2DTp06he/OU+cZ64K6o0ePBkOHDg2GDx8e6gEbJ5Q/NHNuAJQ1hgBeHUDlR7nVTkY8rQAvAi4z34vR/mPs1FoRsaCgIJThI0eOBC1atEiFGGV+5MiRoS45efJkqFjJFXV1dQuA012m2WcwTw98fy6CqBdsaiIO4CScrGPHjvk4odhavPquRtFWXEC25VgkREKOCh/qDSq+vn37htzD/mZTOmOc5U7zKzBPEedygWshcDyWvs30igAbU+6oyMgJBCFhwQE0fccxN60Ay9iebbjoDh06hMowjQxT4fXq1SskArmHZpkArvixp/kWzHdMeArExSJEaiXIjjRjRJ4DaAGWpibLzXN3Fm1vA5teBgh3j1Rv3bp1YgKwPdmf2p9zcyNYYgPKMfY0T5f5nNYdw158nJ8QawW4CLKwiOBSEgO/hok2eBydR+3dYH+PLxA5J8Vv0KBBwenTp0P2JWAx6+yFEBfs8lMY+y0SWMBNI9E4ThKi58VKTg3FQZS1RQF1cz27eC0QHMu+3E0SkUowjhVt5VdaWhp07949ZHv2Qd1EjDXM2cla1M0nl3GxAs3J9yREzyTdFVKVFOaE9qRA8GM0WebRuo9JGZKA7Mv2SeS/Z8+eoQ9BArMfFrLGo6jvxbhHbJZnKX2Rzz1O7QhJJ9Cs2ZMaWIyq/zhdeqPNfIoHd58clIQD+JSXl4dKlyIAuBdVXZwFVWKspSSoxE++h8x4k3uCnEhE4I5KwRiFWGOU0QWKiCYLbdoRMRKAu2kQ9vkfLU6dOhX06NEjlH+yMRZSinnuyWnYosVcji8CEA/6Cg2JF+IIUBqnGKUTCNwtwBN4f89RiK1R96DEgO2o0NDmtEdvVFdVVYV+P3UAPUEs6GFwV3PHmXkD4vh74iDFJysVI/MlaQhwKeBNTLYX5VuA8T4/gZxA4MRGFxDB6R7OmYPfyykGRJbyie+XnGYnQIC/coH9+vULiYrxrkL9ZA9+0ykaHIfEpM7ge8TiJ2CsHYwyMfafAF1yCGBHYIbCVDjDjKt7BeB51D+LgQa6OkG7IDYEEtvQ7lnXLKLtLdLuJBpE4gPUXcW2+PkZwOex+4cGDhwYDBkyRL7/HFcEwUGPo/8uWRUpYnfxGHco8HkewLHLyYmAawAPuIFZxhOpDfJQ8gbUv41yORAptMWBNr6oqMhWird5+u+iHmBb2nhjDV7HWBNQTgK8y11l5NetWzc5ULscAtSj7nbNI0skhWeUZCc0W4nyH/jO4Vz0u1IeYhbk4AiwM6tjxIWByHsoZ9qcIBPJd/y+DwPfBESOmCa/QF3WiZHucLlEDpNxcNhmheEOPgdQNx6/VZFQzFZ5TN08AHXQt2Ii3EdyFuUsPtTcGPhW5iMiCNELvz+Gdn9huG4HUJaW/w3g0wxV0XaG7arG2WeKiUWYM4Y7GO5ezshTARbbWGw/DvXkpp/ivVvE0JVoMxN4rpGzJMhE5Pl+xlATsDIqikP9F9D2z3h9nOksEUFhK+qO4rcPkoalMQ/HqJLIyb3F3JdjrCcw1yZ8joyJLR5gCo54etlag7qIoeNh1N1BRYj3DTFJ0elotxPlVzkGuYAmL0VSJVGAJA41c4Z6A3BzTLfn0HYwYKEI6CUAMzZEWvLsIcQOo1AmmyyM72nHJCfYsogflGV6jEk9vyQZXSuq6w4c16NsGcGZbwOPr+H1RkOk2LEzjNepxQkihHSCQ4ynAYNRx2zMKV92CQMWqj8J0BRE8EShxRFN6YrfCRhC0x3r/Zm4IbQCcmJoV0kMamllccR6FjHqUC5F2R/wS2dcymOlfAKOS4KmzQb5cpNC2MC7JhVn5wjXoJ44rYhLh8n0eXOCorJxa7POjbSlCGVczr34/RsAmrcvo9s+wGp3tzVhntxiXiJ4nvEYb4FJkf0O8HocAePmLvCxnL0AORraVekJk6TYjDabRVXfRE2lCN1h6ZQRN1+InUbsCpKwoBZHh0dODN9JBCUffItXxEavTQkUtnfTVAplCWL3JISz29h4NjotnuSsQKJCk8dF+kJR6RARjrqFVmfPnj3ZbK8cIJ0msd6jgHPGtfVTQ8VLmlvh4mct9sobRmPic0DyDQQnx/NlfYUgyz59+oScsH379pAwXABD32nTpoUHIToESeI5mnbE/UqDdyLcafEBf2MCqgC7NwxIbMREJQ0g4D4sfJwnD+AmRrII05cfMWJE+L1169bQr+fip06dGp4oJ83lmYd5wj/EmMa4TaHivo4EeCguYZBnkB5g2aWA69OIEnUHOaGysjIYMGBAMGnSpODYsWPZwCpFmm4lNq+4gSLQA7jcX8DwtjEyRC8wjabnXEx9kfWnTJkSJkAo90xpJVV+FmcVNeYAF5zWngS4C4O91MBxmAv8blLEpbjI5sz9MTdAhcgkCT1RO8mZkAjfiYpTEvStAS53Uw1vAiUGgZ3GpuQEYvoiBqlIan7kSDHnTwJQFNiPu0+5VxCVYhcZIjNrdXUDdp+Eq5AZ3Gkg8QAyVZRZIk4Tl4QAbF9cXJxNYZMAtAokgs4BrNxEpCtteXg7DDTMDKYNSuQdKsnJBek7HxewvxaosWxLYXtw+cJp18217wql4aKCfBNoEu0O5VU+PhctJ0YeXD4C6JQpyrlpSLTojpGGGN5YwNziChdIZLk4lvLcFJ9jMX3QdiImY9bmGQU+TRUL5CHITTRlgF8D9ouD1MfmLoEPl5xokIumZ2cfgMpHt47IW9N64Hsh7wQYYjyIugWuF5fCqYncXRd5vPMWyizzvhi/32+nvG0dZc9vR6fZOu0md5e+uC408FvKSIOZwXlGvxPv95izA2Vtvg1xKFWARI+vMX66HUhpQQb643uW1bSjuTWyw2SBvDrBvjFic1eGGlz5esq3ko9uSIlBRqPuFcCv8F4WIcN12nVaBd0SaYwI6PDDImR11JkqgHcPmQssjxIn6bUshygDFJUTxPMpHk+jfjPgupgdnYV2R/g7xSjtpah8RJBewhwf0gGK6XI92u4wXFEU40afJ4DN4h5LcAd+40HI3JgJecuT0c062W0i2hQJUTcxan3/CMW1PF2K6bbA+Daz4xRs1D3Br1Cm0OihKCqizW78/nXAF/G5TXrEcVzaNMH6CyMswqsAHqDyDLEyou8lwOXnKF8DjI6KjV3KzMBiXkDH8ij/H214J5A596ekrZ3F0zXlWeL7+P5eUrNo3/QwC15uxthuzidy7DzKRwEDaAViiDgKbTbz7CJnzo0bN7pIfIiid8SuPwn25o3QCmpnyjlZkyxPP8EomCJzrGb7GJMx7tNsq4MT2xMUYaiErZOluTzKsnz3gwCeCZyVRZJfYplNEokEjwrPtxlxjeYAk+F1F74VAzPxQRNYYdtpOUvWs8J1sGhBJMNsb7igN8plJs1eSmLIhLKE4rvaCX27gOhLpLOsIzJ7qn/i+wZzcvSOZ23/du8TZjwV8zHIXoP4R3ifBxiFz1dcVpa3aPntPE+c6TmIWE9EtcMmAcPdWAhYhAXxcLOQi9L1WhD1Sc8p1d2oL7XGiRKp8F4A2i8K/nfI+y/gsTDJ/YC/8+AD5Uh04KHiGl+cIFPnBDDrPMjwRGkLXyxO4VGbfQWnDH2v0bVWE3C9QOXlepbgjEfIJQI6XDG3z5ahD9cw2pS78ipB85wyScNTvsVzlzzhL8/jRrnmVjfFJK/m3m4nj9vbgQTguT8XZTjsm672R5uJKEaQmBI/c58gyus8ZDagLpEVSJBIyHp4jn++xqPV71OgQgJYEWOtZ/haxRtKmWOBu8xdBLftWltsY84zE6WIEy/eIOWL+BaayMx+KHtL7EAkqdNDLiEXmEMUHniedtJqg9HmZtfvt26vNi0BdG3Ft3g8ZOf7PAu59TxtzivLNIekyi+wD1i8CuUiD9FXAa8C+/xS3JPmZnomyc7H+fb4/Se0bk41Fel621r4cgVxbq91V4jVqwB7HTe2M7jgB+QWHavZkDRPmZcASoZEmBx6i75bGjPcMdL4/VKGFAGWZkGzPG0XAbdL9A81G5LOmUnC9hHKJeO7dcUMjblSl12867ElFTtaGl20xvvLGPdVz/8TVuU7y0x1PG7vtNg24oz9Uo/Z412++VFWI7Fcog9tu9Lm6gvRmIPv9x1xmQAu6RDkXtbOtlGEmpgD5Nvnyc0dcv0EE6cfdi1HmhMf9wDF3k3gtRvEedhxjpgfqPb9PU9iEJHnyOUA7bQUXh6kq/D7l2iTjWv7XOD530BDr8jIrus+srXjt4MzumJMHuTsBa63YKE1+RR5lBjEikCCnWKWiHdzOgKO+nRIBAF88za/IFmJ3eMZov4CYxGBabcpGL8EYx+SeMXJeRwHNsV/h+vdxeuhEpN3ZyNY78Gm2fknJxVGhyjixPiQvVkNzT1elD9Py/aTAL64Hb9vcYmC9zfdXdT/C1LeGbg4rnBaAihDFJH12W5ulfNCNe/xTsP3bp8ikzJs5BF+5PNfAQYAPaseTdsEcaYAAAAASUVORK5CYII="
      };
    },
    computed: {
      iconSnowWidth() {
        return (Math.floor(this.iconSize / 24) || 1) * 2;
      },
      contentdownText() {
        return this.contentText.contentdown || t$3("uni-load-more.contentdown");
      },
      contentrefreshText() {
        return this.contentText.contentrefresh || t$3("uni-load-more.contentrefresh");
      },
      contentnomoreText() {
        return this.contentText.contentnomore || t$3("uni-load-more.contentnomore");
      }
    },
    mounted() {
      var pages = getCurrentPages();
      var page = pages[pages.length - 1];
      var currentWebview = page.$getAppWebview();
      currentWebview.addEventListener("hide", () => {
        this.webviewHide = true;
      });
      currentWebview.addEventListener("show", () => {
        this.webviewHide = false;
      });
    },
    methods: {
      onClick() {
        this.$emit("clickLoadMore", {
          detail: {
            status: this.status
          }
        });
      }
    }
  };
  function _sfc_render$D(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", {
      class: "uni-load-more",
      onClick: _cache[0] || (_cache[0] = (...args) => $options.onClick && $options.onClick(...args))
    }, [
      !$data.webviewHide && ($props.iconType === "circle" || $props.iconType === "auto" && $data.platform === "android") && $props.status === "loading" && $props.showIcon ? (vue.openBlock(), vue.createElementBlock(
        "view",
        {
          key: 0,
          style: vue.normalizeStyle({ width: $props.iconSize + "px", height: $props.iconSize + "px" }),
          class: "uni-load-more__img uni-load-more__img--android-MP"
        },
        [
          vue.createElementVNode(
            "view",
            {
              class: "uni-load-more__img-icon",
              style: vue.normalizeStyle({ borderTopColor: $props.color, borderTopWidth: $props.iconSize / 12 })
            },
            null,
            4
            /* STYLE */
          ),
          vue.createElementVNode(
            "view",
            {
              class: "uni-load-more__img-icon",
              style: vue.normalizeStyle({ borderTopColor: $props.color, borderTopWidth: $props.iconSize / 12 })
            },
            null,
            4
            /* STYLE */
          ),
          vue.createElementVNode(
            "view",
            {
              class: "uni-load-more__img-icon",
              style: vue.normalizeStyle({ borderTopColor: $props.color, borderTopWidth: $props.iconSize / 12 })
            },
            null,
            4
            /* STYLE */
          )
        ],
        4
        /* STYLE */
      )) : !$data.webviewHide && $props.status === "loading" && $props.showIcon ? (vue.openBlock(), vue.createElementBlock(
        "view",
        {
          key: 1,
          style: vue.normalizeStyle({ width: $props.iconSize + "px", height: $props.iconSize + "px" }),
          class: "uni-load-more__img uni-load-more__img--ios-H5"
        },
        [
          vue.createElementVNode("image", {
            src: $data.imgBase64,
            mode: "widthFix"
          }, null, 8, ["src"])
        ],
        4
        /* STYLE */
      )) : vue.createCommentVNode("v-if", true),
      $props.showText ? (vue.openBlock(), vue.createElementBlock(
        "text",
        {
          key: 2,
          class: "uni-load-more__text",
          style: vue.normalizeStyle({ color: $props.color })
        },
        vue.toDisplayString($props.status === "more" ? $options.contentdownText : $props.status === "loading" ? $options.contentrefreshText : $options.contentnomoreText),
        5
        /* TEXT, STYLE */
      )) : vue.createCommentVNode("v-if", true)
    ]);
  }
  const __easycom_0$2 = /* @__PURE__ */ _export_sfc(_sfc_main$E, [["render", _sfc_render$D], ["__scopeId", "data-v-9245e42c"], ["__file", "D:/Uniapp/htmlTest/赛创项目/uni_modules/uni-load-more/components/uni-load-more/uni-load-more.vue"]]);
  const _imports_0$9 = "/static/empty-task.png";
  const defaultAvatar$1 = "https://via.placeholder.com/100";
  const mainCategoryCount = 4;
  const _sfc_main$D = {
    __name: "index",
    setup(__props, { expose: __expose }) {
      __expose();
      const categories = vue.ref([
        { id: 0, name: "全部" }
      ]);
      const statusOptions = [
        { label: "全部", value: "" },
        { label: "招募中", value: "recruiting" },
        { label: "进行中", value: "ongoing" },
        { label: "已完成", value: "completed" },
        { label: "已取消", value: "canceled" }
      ];
      const activeCategoryId = vue.ref(0);
      const activeStatus = vue.ref("");
      const taskList = vue.ref([]);
      const page = vue.ref(1);
      const pageSize2 = vue.ref(10);
      const loading = vue.ref(false);
      const noMore = vue.ref(false);
      const loadingText = vue.ref({
        contentdown: "上拉显示更多",
        contentrefresh: "正在加载...",
        contentnomore: "已经到底啦"
      });
      const isCategoryExpanded = vue.ref(false);
      const refreshing = vue.ref(false);
      const safeAreaTop = vue.ref(0);
      const headerHeight = vue.computed(() => {
        const baseHeight = 340;
        let height = baseHeight + safeAreaTop.value;
        if (isCategoryExpanded.value) {
          const moreCount = getMoreCategories().length;
          const rows = Math.ceil(moreCount / 4);
          height += rows * 80 + 30;
        }
        return height + "rpx";
      });
      vue.onMounted(() => {
        loadingText.value = {
          contentdown: "上拉显示更多",
          contentrefresh: "正在加载...",
          contentnomore: "已经到底啦"
        };
        getSystemInfo();
        getTaskCategories2();
        getTaskList2();
      });
      function getSystemInfo() {
        uni.getSystemInfo({
          success: (res) => {
            if (res.safeArea && res.safeArea.top) {
              const screenWidth = res.screenWidth;
              safeAreaTop.value = Math.round(res.safeArea.top * 750 / screenWidth);
              formatAppLog("log", "at pages/task-square/index.vue:240", "安全区高度(rpx):", safeAreaTop.value);
            }
          }
        });
      }
      async function getTaskCategories2() {
        try {
          const res = await request({
            url: "/taskCategories",
            method: "GET"
          });
          if (res.code === 200 && res.data && Array.isArray(res.data)) {
            const allCategories = [{ id: 0, name: "全部" }, ...res.data];
            categories.value = allCategories;
          } else {
            formatAppLog("error", "at pages/task-square/index.vue:259", "获取任务分类失败:", res);
          }
        } catch (error) {
          formatAppLog("error", "at pages/task-square/index.vue:262", "获取任务分类异常:", error);
          uni.showToast({
            title: "获取分类失败",
            icon: "none"
          });
        }
      }
      async function getTaskList2() {
        loading.value = true;
        try {
          const params = {
            pageNum: page.value,
            pageSize: pageSize2.value
          };
          if (activeCategoryId.value !== 0) {
            params.categoryId = activeCategoryId.value;
          }
          if (activeStatus.value) {
            params.status = activeStatus.value;
          }
          const res = await request({
            url: "/tasks/list",
            method: "GET",
            params
          });
          if (res.code === 200 && res.data) {
            if (page.value === 1) {
              taskList.value = res.data.records || [];
            } else {
              taskList.value = [...taskList.value, ...res.data.records || []];
              if (res.data.records && res.data.records.length > 0) {
                uni.showToast({
                  title: `加载了${res.data.records.length}条新数据`,
                  icon: "none",
                  duration: 1500
                });
              }
            }
            if (res.data.current >= res.data.pages || !res.data.records || res.data.records.length === 0) {
              noMore.value = true;
            } else {
              noMore.value = false;
            }
          } else {
            formatAppLog("error", "at pages/task-square/index.vue:322", "获取任务列表失败:", res);
            uni.showToast({
              title: "获取任务列表失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/task-square/index.vue:329", "获取任务列表异常:", error);
          uni.showToast({
            title: "网络异常，请稍后重试",
            icon: "none"
          });
        } finally {
          loading.value = false;
        }
      }
      function formatDate(dateStr) {
        if (!dateStr)
          return "";
        try {
          const date = new Date(dateStr);
          return `${date.getMonth() + 1}月${date.getDate()}日`;
        } catch (e) {
          return dateStr;
        }
      }
      function selectCategory(categoryId) {
        if (activeCategoryId.value === categoryId) {
          return;
        }
        activeCategoryId.value = categoryId;
        page.value = 1;
        noMore.value = false;
        taskList.value = [];
        getTaskList2();
      }
      function selectStatus(status) {
        if (activeStatus.value === status)
          return;
        activeStatus.value = status;
        page.value = 1;
        noMore.value = false;
        taskList.value = [];
        getTaskList2();
      }
      function loadMore() {
        if (loading.value || refreshing.value || noMore.value)
          return;
        uni.showToast({
          title: "加载更多数据...",
          icon: "none",
          duration: 800
        });
        page.value++;
        getTaskList2();
      }
      function getCategoryClass(category) {
        switch (category) {
          case "问卷调查":
            return "tag-blue";
          case "数据收集":
            return "tag-green";
          case "实验参与":
            return "tag-purple";
          case "校园活动":
            return "tag-orange";
          case "学术研究":
            return "tag-pink";
          case "志愿服务":
            return "tag-green";
          case "竞赛协助":
            return "tag-yellow";
          case "技术支持":
            return "tag-blue";
          default:
            return "tag-blue";
        }
      }
      function getStatusClass(status) {
        switch (status) {
          case "recruiting":
            return "status-recruiting";
          case "ongoing":
            return "status-ongoing";
          case "completed":
            return "status-ended";
          case "canceled":
            return "status-canceled";
          default:
            return "status-recruiting";
        }
      }
      function getRewardClass(type) {
        switch (type) {
          case "现金":
            return "reward-orange";
          case "学分":
            return "reward-blue";
          case "志愿服务":
            return "reward-green";
          case "证书":
            return "reward-yellow";
          case "礼品":
            return "reward-purple";
          default:
            return "reward-gray";
        }
      }
      function viewTaskDetail(id) {
        uni.navigateTo({
          url: `/pages/task-square/detail?id=${id}`
        });
      }
      function createTask2() {
        uni.navigateTo({
          url: "/pages/task-square/create"
        });
      }
      function onSearch() {
        uni.navigateTo({
          url: "/pages/task-square/search"
        });
      }
      function onNotification() {
        uni.navigateTo({
          url: "/pages/notification/index"
        });
      }
      function goBack() {
        const pages = getCurrentPages();
        if (pages.length > 1) {
          uni.navigateBack();
        } else {
          uni.switchTab({
            url: "/pages/index/index"
          });
        }
      }
      function getSelectedCategoryName() {
        const selectedCategory = categories.value.find((item) => item.id === activeCategoryId.value);
        return selectedCategory ? selectedCategory.name : "全部";
      }
      function toggleCategoryExpand() {
        isCategoryExpanded.value = !isCategoryExpanded.value;
      }
      function getMainCategories() {
        return categories.value.slice(0, mainCategoryCount);
      }
      function getMoreCategories() {
        return categories.value.slice(mainCategoryCount);
      }
      function hasMoreCategories() {
        return categories.value.length > mainCategoryCount;
      }
      const __returned__ = { defaultAvatar: defaultAvatar$1, categories, statusOptions, activeCategoryId, activeStatus, taskList, page, pageSize: pageSize2, loading, noMore, loadingText, isCategoryExpanded, refreshing, safeAreaTop, mainCategoryCount, headerHeight, getSystemInfo, getTaskCategories: getTaskCategories2, getTaskList: getTaskList2, formatDate, selectCategory, selectStatus, loadMore, getCategoryClass, getStatusClass, getRewardClass, viewTaskDetail, createTask: createTask2, onSearch, onNotification, goBack, getSelectedCategoryName, toggleCategoryExpand, getMainCategories, getMoreCategories, hasMoreCategories, ref: vue.ref, onMounted: vue.onMounted, reactive: vue.reactive, computed: vue.computed, get request() {
        return request;
      }, SvgIcon };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$C(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_load_more = resolveEasycom(vue.resolveDynamicComponent("uni-load-more"), __easycom_0$2);
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部固定区域 "),
      vue.createElementVNode(
        "view",
        {
          class: "header-fixed",
          style: vue.normalizeStyle({ height: $setup.headerHeight })
        },
        [
          vue.createElementVNode("view", { class: "header-bar" }, [
            vue.createElementVNode("view", {
              class: "back-btn",
              onClick: $setup.goBack
            }, [
              vue.createVNode($setup["SvgIcon"], {
                name: "back",
                size: "25"
              })
            ]),
            vue.createElementVNode("view", { class: "header-title" }, "任务广场"),
            vue.createElementVNode("view", { class: "header-actions" }, [
              vue.createElementVNode("view", {
                class: "action-btn",
                onClick: $setup.onSearch
              }, [
                vue.createVNode($setup["SvgIcon"], {
                  name: "sousuo",
                  size: "20"
                })
              ]),
              vue.createElementVNode("view", {
                class: "action-btn",
                onClick: $setup.onNotification
              }, [
                vue.createVNode($setup["SvgIcon"], {
                  name: "xiaoxi",
                  size: "20"
                })
              ])
            ])
          ]),
          vue.createCommentVNode(" 分类和筛选区域 "),
          vue.createElementVNode("view", { class: "filter-container" }, [
            vue.createCommentVNode(" 分类标签 "),
            vue.createElementVNode("view", { class: "category-section" }, [
              vue.createElementVNode("view", { class: "main-categories" }, [
                vue.createCommentVNode(" 默认显示的主要分类 "),
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.getMainCategories(), (item) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      key: item.id,
                      class: vue.normalizeClass(["category-tag", $setup.activeCategoryId === item.id ? "category-tag-active" : ""]),
                      onClick: ($event) => $setup.selectCategory(item.id)
                    }, vue.toDisplayString(item.name), 11, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                )),
                vue.createCommentVNode(" 更多按钮 "),
                $setup.hasMoreCategories() ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "more-btn",
                  onClick: $setup.toggleCategoryExpand
                }, [
                  vue.createTextVNode(
                    vue.toDisplayString($setup.isCategoryExpanded ? "收起" : "更多") + " ",
                    1
                    /* TEXT */
                  ),
                  vue.createElementVNode(
                    "text",
                    {
                      class: vue.normalizeClass(["iconfont", $setup.isCategoryExpanded ? "icon-arrow-up" : "icon-arrow-down"])
                    },
                    null,
                    2
                    /* CLASS */
                  )
                ])) : vue.createCommentVNode("v-if", true)
              ]),
              vue.createCommentVNode(" 展开的更多分类 "),
              $setup.isCategoryExpanded ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "more-categories-container"
              }, [
                vue.createElementVNode("view", { class: "more-categories" }, [
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($setup.getMoreCategories(), (item) => {
                      return vue.openBlock(), vue.createElementBlock("view", {
                        key: item.id,
                        class: vue.normalizeClass(["category-tag", $setup.activeCategoryId === item.id ? "category-tag-active" : ""]),
                        onClick: ($event) => $setup.selectCategory(item.id)
                      }, vue.toDisplayString(item.name), 11, ["onClick"]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  ))
                ])
              ])) : vue.createCommentVNode("v-if", true)
            ]),
            vue.createCommentVNode(" 状态筛选标签 "),
            vue.createElementVNode("scroll-view", {
              "scroll-x": "",
              class: "status-scroll",
              "show-scrollbar": "false"
            }, [
              vue.createElementVNode("view", { class: "status-container" }, [
                (vue.openBlock(), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.statusOptions, (item, index) => {
                    return vue.createElementVNode("view", {
                      key: index,
                      class: vue.normalizeClass(["status-filter-tag", $setup.activeStatus === item.value ? "status-filter-active" : ""]),
                      onClick: ($event) => $setup.selectStatus(item.value)
                    }, vue.toDisplayString(item.label), 11, ["onClick"]);
                  }),
                  64
                  /* STABLE_FRAGMENT */
                ))
              ])
            ])
          ])
        ],
        4
        /* STYLE */
      ),
      vue.createCommentVNode(" 任务列表 "),
      vue.createElementVNode(
        "scroll-view",
        {
          "scroll-y": "",
          class: "tasks-scroll",
          style: vue.normalizeStyle({ "padding-top": $setup.headerHeight }),
          onScrolltolower: $setup.loadMore
        },
        [
          vue.createElementVNode("view", { class: "tasks-container" }, [
            vue.createCommentVNode(" 顶部刷新提示 "),
            $setup.loading && $setup.page.value === 1 ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "refresh-tip"
            }, [
              vue.createElementVNode("text", { class: "refresh-text" }, "正在加载数据...")
            ])) : vue.createCommentVNode("v-if", true),
            vue.createCommentVNode(" 任务卡片 "),
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.taskList, (task) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  class: "task-card",
                  key: task.id,
                  onClick: ($event) => $setup.viewTaskDetail(task.id)
                }, [
                  vue.createElementVNode("view", { class: "task-header" }, [
                    vue.createElementVNode("view", null, [
                      vue.createElementVNode(
                        "view",
                        { class: "task-title" },
                        vue.toDisplayString(task.title),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("view", { class: "task-tags" }, [
                        vue.createElementVNode(
                          "text",
                          {
                            class: vue.normalizeClass(["task-tag", $setup.getCategoryClass(task.categoryName)])
                          },
                          vue.toDisplayString(task.categoryName),
                          3
                          /* TEXT, CLASS */
                        ),
                        vue.createElementVNode(
                          "text",
                          {
                            class: vue.normalizeClass(["task-status-tag", $setup.getStatusClass(task.status)])
                          },
                          vue.toDisplayString(task.statusText),
                          3
                          /* TEXT, CLASS */
                        ),
                        vue.createElementVNode(
                          "text",
                          { class: "task-deadline" },
                          "截止: " + vue.toDisplayString($setup.formatDate(task.deadline)),
                          1
                          /* TEXT */
                        )
                      ])
                    ]),
                    vue.createElementVNode(
                      "view",
                      {
                        class: vue.normalizeClass(["task-reward", $setup.getRewardClass(task.rewardTypeName)])
                      },
                      [
                        task.rewardTypeName === "现金" ? (vue.openBlock(), vue.createElementBlock(
                          "text",
                          { key: 0 },
                          "¥" + vue.toDisplayString(task.rewardAmount),
                          1
                          /* TEXT */
                        )) : task.rewardTypeName === "学分" ? (vue.openBlock(), vue.createElementBlock(
                          "text",
                          { key: 1 },
                          vue.toDisplayString(task.rewardAmount) + "学分",
                          1
                          /* TEXT */
                        )) : (vue.openBlock(), vue.createElementBlock(
                          "text",
                          { key: 2 },
                          vue.toDisplayString(task.rewardTypeName),
                          1
                          /* TEXT */
                        ))
                      ],
                      2
                      /* CLASS */
                    )
                  ]),
                  vue.createElementVNode(
                    "view",
                    { class: "task-desc" },
                    vue.toDisplayString(task.shortDescription),
                    1
                    /* TEXT */
                  ),
                  task.location ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 0,
                    class: "task-location"
                  }, [
                    vue.createVNode($setup["SvgIcon"], {
                      name: "weizhi",
                      size: "20",
                      class: "location-icon"
                    }),
                    vue.createElementVNode(
                      "text",
                      { class: "location-text" },
                      vue.toDisplayString(task.location),
                      1
                      /* TEXT */
                    )
                  ])) : vue.createCommentVNode("v-if", true),
                  vue.createElementVNode("view", { class: "task-footer" }, [
                    vue.createElementVNode("view", { class: "task-publisher" }, [
                      vue.createElementVNode("image", {
                        class: "publisher-avatar",
                        src: task.creatorAvatarUrl || $setup.defaultAvatar,
                        mode: "aspectFill"
                      }, null, 8, ["src"]),
                      vue.createElementVNode(
                        "text",
                        { class: "publisher-info" },
                        vue.toDisplayString(task.creatorName) + " · " + vue.toDisplayString(task.creatorMajor),
                        1
                        /* TEXT */
                      )
                    ]),
                    vue.createElementVNode("view", { class: "task-stats" }, [
                      vue.createElementVNode("text", { class: "stat-item" }, [
                        vue.createVNode($setup["SvgIcon"], {
                          name: "liulan",
                          size: "20",
                          class: "stat-icon"
                        }),
                        vue.createTextVNode(
                          " " + vue.toDisplayString(task.viewCount),
                          1
                          /* TEXT */
                        )
                      ]),
                      vue.createElementVNode("text", { class: "stat-item" }, [
                        vue.createVNode($setup["SvgIcon"], {
                          name: "Baominrenshu",
                          size: "20",
                          class: "stat-icon"
                        }),
                        vue.createTextVNode(
                          " " + vue.toDisplayString(task.currentParticipants) + "/" + vue.toDisplayString(task.maxParticipants),
                          1
                          /* TEXT */
                        )
                      ])
                    ])
                  ])
                ], 8, ["onClick"]);
              }),
              128
              /* KEYED_FRAGMENT */
            )),
            vue.createCommentVNode(" 空数据状态 "),
            $setup.taskList.length === 0 && !$setup.loading ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 1,
              class: "empty-state"
            }, [
              vue.createElementVNode("image", {
                class: "empty-image",
                src: _imports_0$9,
                mode: "aspectFit"
              }),
              vue.createElementVNode("text", { class: "empty-text" }, "暂无任务数据")
            ])) : vue.createCommentVNode("v-if", true),
            vue.createCommentVNode(" 加载状态 "),
            $setup.loading ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 2,
              class: "loading-more"
            }, [
              vue.createVNode(_component_uni_load_more, {
                status: "loading",
                contentText: $setup.loadingText
              }, null, 8, ["contentText"])
            ])) : vue.createCommentVNode("v-if", true),
            $setup.noMore && !$setup.loading && $setup.taskList.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 3,
              class: "no-more"
            }, [
              vue.createVNode(_component_uni_load_more, {
                status: "noMore",
                contentText: $setup.loadingText
              }, null, 8, ["contentText"])
            ])) : vue.createCommentVNode("v-if", true),
            vue.createCommentVNode(" 底部安全区域 "),
            vue.createElementVNode("view", { class: "safe-area-bottom" })
          ])
        ],
        36
        /* STYLE, NEED_HYDRATION */
      ),
      vue.createCommentVNode(" 悬浮发布按钮 "),
      vue.createElementVNode("view", {
        class: "float-btn",
        onClick: $setup.createTask
      }, [
        vue.createVNode($setup["SvgIcon"], {
          name: "chuangjianrenwu",
          size: "30",
          color: "#ffffff"
        })
      ])
    ]);
  }
  const PagesTaskSquareIndex = /* @__PURE__ */ _export_sfc(_sfc_main$D, [["render", _sfc_render$C], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/task-square/index.vue"]]);
  const fontData = [
    {
      "font_class": "arrow-down",
      "unicode": ""
    },
    {
      "font_class": "arrow-left",
      "unicode": ""
    },
    {
      "font_class": "arrow-right",
      "unicode": ""
    },
    {
      "font_class": "arrow-up",
      "unicode": ""
    },
    {
      "font_class": "auth",
      "unicode": ""
    },
    {
      "font_class": "auth-filled",
      "unicode": ""
    },
    {
      "font_class": "back",
      "unicode": ""
    },
    {
      "font_class": "bars",
      "unicode": ""
    },
    {
      "font_class": "calendar",
      "unicode": ""
    },
    {
      "font_class": "calendar-filled",
      "unicode": ""
    },
    {
      "font_class": "camera",
      "unicode": ""
    },
    {
      "font_class": "camera-filled",
      "unicode": ""
    },
    {
      "font_class": "cart",
      "unicode": ""
    },
    {
      "font_class": "cart-filled",
      "unicode": ""
    },
    {
      "font_class": "chat",
      "unicode": ""
    },
    {
      "font_class": "chat-filled",
      "unicode": ""
    },
    {
      "font_class": "chatboxes",
      "unicode": ""
    },
    {
      "font_class": "chatboxes-filled",
      "unicode": ""
    },
    {
      "font_class": "chatbubble",
      "unicode": ""
    },
    {
      "font_class": "chatbubble-filled",
      "unicode": ""
    },
    {
      "font_class": "checkbox",
      "unicode": ""
    },
    {
      "font_class": "checkbox-filled",
      "unicode": ""
    },
    {
      "font_class": "checkmarkempty",
      "unicode": ""
    },
    {
      "font_class": "circle",
      "unicode": ""
    },
    {
      "font_class": "circle-filled",
      "unicode": ""
    },
    {
      "font_class": "clear",
      "unicode": ""
    },
    {
      "font_class": "close",
      "unicode": ""
    },
    {
      "font_class": "closeempty",
      "unicode": ""
    },
    {
      "font_class": "cloud-download",
      "unicode": ""
    },
    {
      "font_class": "cloud-download-filled",
      "unicode": ""
    },
    {
      "font_class": "cloud-upload",
      "unicode": ""
    },
    {
      "font_class": "cloud-upload-filled",
      "unicode": ""
    },
    {
      "font_class": "color",
      "unicode": ""
    },
    {
      "font_class": "color-filled",
      "unicode": ""
    },
    {
      "font_class": "compose",
      "unicode": ""
    },
    {
      "font_class": "contact",
      "unicode": ""
    },
    {
      "font_class": "contact-filled",
      "unicode": ""
    },
    {
      "font_class": "down",
      "unicode": ""
    },
    {
      "font_class": "bottom",
      "unicode": ""
    },
    {
      "font_class": "download",
      "unicode": ""
    },
    {
      "font_class": "download-filled",
      "unicode": ""
    },
    {
      "font_class": "email",
      "unicode": ""
    },
    {
      "font_class": "email-filled",
      "unicode": ""
    },
    {
      "font_class": "eye",
      "unicode": ""
    },
    {
      "font_class": "eye-filled",
      "unicode": ""
    },
    {
      "font_class": "eye-slash",
      "unicode": ""
    },
    {
      "font_class": "eye-slash-filled",
      "unicode": ""
    },
    {
      "font_class": "fire",
      "unicode": ""
    },
    {
      "font_class": "fire-filled",
      "unicode": ""
    },
    {
      "font_class": "flag",
      "unicode": ""
    },
    {
      "font_class": "flag-filled",
      "unicode": ""
    },
    {
      "font_class": "folder-add",
      "unicode": ""
    },
    {
      "font_class": "folder-add-filled",
      "unicode": ""
    },
    {
      "font_class": "font",
      "unicode": ""
    },
    {
      "font_class": "forward",
      "unicode": ""
    },
    {
      "font_class": "gear",
      "unicode": ""
    },
    {
      "font_class": "gear-filled",
      "unicode": ""
    },
    {
      "font_class": "gift",
      "unicode": ""
    },
    {
      "font_class": "gift-filled",
      "unicode": ""
    },
    {
      "font_class": "hand-down",
      "unicode": ""
    },
    {
      "font_class": "hand-down-filled",
      "unicode": ""
    },
    {
      "font_class": "hand-up",
      "unicode": ""
    },
    {
      "font_class": "hand-up-filled",
      "unicode": ""
    },
    {
      "font_class": "headphones",
      "unicode": ""
    },
    {
      "font_class": "heart",
      "unicode": ""
    },
    {
      "font_class": "heart-filled",
      "unicode": ""
    },
    {
      "font_class": "help",
      "unicode": ""
    },
    {
      "font_class": "help-filled",
      "unicode": ""
    },
    {
      "font_class": "home",
      "unicode": ""
    },
    {
      "font_class": "home-filled",
      "unicode": ""
    },
    {
      "font_class": "image",
      "unicode": ""
    },
    {
      "font_class": "image-filled",
      "unicode": ""
    },
    {
      "font_class": "images",
      "unicode": ""
    },
    {
      "font_class": "images-filled",
      "unicode": ""
    },
    {
      "font_class": "info",
      "unicode": ""
    },
    {
      "font_class": "info-filled",
      "unicode": ""
    },
    {
      "font_class": "left",
      "unicode": ""
    },
    {
      "font_class": "link",
      "unicode": ""
    },
    {
      "font_class": "list",
      "unicode": ""
    },
    {
      "font_class": "location",
      "unicode": ""
    },
    {
      "font_class": "location-filled",
      "unicode": ""
    },
    {
      "font_class": "locked",
      "unicode": ""
    },
    {
      "font_class": "locked-filled",
      "unicode": ""
    },
    {
      "font_class": "loop",
      "unicode": ""
    },
    {
      "font_class": "mail-open",
      "unicode": ""
    },
    {
      "font_class": "mail-open-filled",
      "unicode": ""
    },
    {
      "font_class": "map",
      "unicode": ""
    },
    {
      "font_class": "map-filled",
      "unicode": ""
    },
    {
      "font_class": "map-pin",
      "unicode": ""
    },
    {
      "font_class": "map-pin-ellipse",
      "unicode": ""
    },
    {
      "font_class": "medal",
      "unicode": ""
    },
    {
      "font_class": "medal-filled",
      "unicode": ""
    },
    {
      "font_class": "mic",
      "unicode": ""
    },
    {
      "font_class": "mic-filled",
      "unicode": ""
    },
    {
      "font_class": "micoff",
      "unicode": ""
    },
    {
      "font_class": "micoff-filled",
      "unicode": ""
    },
    {
      "font_class": "minus",
      "unicode": ""
    },
    {
      "font_class": "minus-filled",
      "unicode": ""
    },
    {
      "font_class": "more",
      "unicode": ""
    },
    {
      "font_class": "more-filled",
      "unicode": ""
    },
    {
      "font_class": "navigate",
      "unicode": ""
    },
    {
      "font_class": "navigate-filled",
      "unicode": ""
    },
    {
      "font_class": "notification",
      "unicode": ""
    },
    {
      "font_class": "notification-filled",
      "unicode": ""
    },
    {
      "font_class": "paperclip",
      "unicode": ""
    },
    {
      "font_class": "paperplane",
      "unicode": ""
    },
    {
      "font_class": "paperplane-filled",
      "unicode": ""
    },
    {
      "font_class": "person",
      "unicode": ""
    },
    {
      "font_class": "person-filled",
      "unicode": ""
    },
    {
      "font_class": "personadd",
      "unicode": ""
    },
    {
      "font_class": "personadd-filled",
      "unicode": ""
    },
    {
      "font_class": "personadd-filled-copy",
      "unicode": ""
    },
    {
      "font_class": "phone",
      "unicode": ""
    },
    {
      "font_class": "phone-filled",
      "unicode": ""
    },
    {
      "font_class": "plus",
      "unicode": ""
    },
    {
      "font_class": "plus-filled",
      "unicode": ""
    },
    {
      "font_class": "plusempty",
      "unicode": ""
    },
    {
      "font_class": "pulldown",
      "unicode": ""
    },
    {
      "font_class": "pyq",
      "unicode": ""
    },
    {
      "font_class": "qq",
      "unicode": ""
    },
    {
      "font_class": "redo",
      "unicode": ""
    },
    {
      "font_class": "redo-filled",
      "unicode": ""
    },
    {
      "font_class": "refresh",
      "unicode": ""
    },
    {
      "font_class": "refresh-filled",
      "unicode": ""
    },
    {
      "font_class": "refreshempty",
      "unicode": ""
    },
    {
      "font_class": "reload",
      "unicode": ""
    },
    {
      "font_class": "right",
      "unicode": ""
    },
    {
      "font_class": "scan",
      "unicode": ""
    },
    {
      "font_class": "search",
      "unicode": ""
    },
    {
      "font_class": "settings",
      "unicode": ""
    },
    {
      "font_class": "settings-filled",
      "unicode": ""
    },
    {
      "font_class": "shop",
      "unicode": ""
    },
    {
      "font_class": "shop-filled",
      "unicode": ""
    },
    {
      "font_class": "smallcircle",
      "unicode": ""
    },
    {
      "font_class": "smallcircle-filled",
      "unicode": ""
    },
    {
      "font_class": "sound",
      "unicode": ""
    },
    {
      "font_class": "sound-filled",
      "unicode": ""
    },
    {
      "font_class": "spinner-cycle",
      "unicode": ""
    },
    {
      "font_class": "staff",
      "unicode": ""
    },
    {
      "font_class": "staff-filled",
      "unicode": ""
    },
    {
      "font_class": "star",
      "unicode": ""
    },
    {
      "font_class": "star-filled",
      "unicode": ""
    },
    {
      "font_class": "starhalf",
      "unicode": ""
    },
    {
      "font_class": "trash",
      "unicode": ""
    },
    {
      "font_class": "trash-filled",
      "unicode": ""
    },
    {
      "font_class": "tune",
      "unicode": ""
    },
    {
      "font_class": "tune-filled",
      "unicode": ""
    },
    {
      "font_class": "undo",
      "unicode": ""
    },
    {
      "font_class": "undo-filled",
      "unicode": ""
    },
    {
      "font_class": "up",
      "unicode": ""
    },
    {
      "font_class": "top",
      "unicode": ""
    },
    {
      "font_class": "upload",
      "unicode": ""
    },
    {
      "font_class": "upload-filled",
      "unicode": ""
    },
    {
      "font_class": "videocam",
      "unicode": ""
    },
    {
      "font_class": "videocam-filled",
      "unicode": ""
    },
    {
      "font_class": "vip",
      "unicode": ""
    },
    {
      "font_class": "vip-filled",
      "unicode": ""
    },
    {
      "font_class": "wallet",
      "unicode": ""
    },
    {
      "font_class": "wallet-filled",
      "unicode": ""
    },
    {
      "font_class": "weibo",
      "unicode": ""
    },
    {
      "font_class": "weixin",
      "unicode": ""
    }
  ];
  const getVal = (val) => {
    const reg = /^[0-9]*$/g;
    return typeof val === "number" || reg.test(val) ? val + "px" : val;
  };
  const _sfc_main$C = {
    name: "UniIcons",
    emits: ["click"],
    props: {
      type: {
        type: String,
        default: ""
      },
      color: {
        type: String,
        default: "#333333"
      },
      size: {
        type: [Number, String],
        default: 16
      },
      customPrefix: {
        type: String,
        default: ""
      },
      fontFamily: {
        type: String,
        default: ""
      }
    },
    data() {
      return {
        icons: fontData
      };
    },
    computed: {
      unicode() {
        let code = this.icons.find((v) => v.font_class === this.type);
        if (code) {
          return code.unicode;
        }
        return "";
      },
      iconSize() {
        return getVal(this.size);
      },
      styleObj() {
        if (this.fontFamily !== "") {
          return `color: ${this.color}; font-size: ${this.iconSize}; font-family: ${this.fontFamily};`;
        }
        return `color: ${this.color}; font-size: ${this.iconSize};`;
      }
    },
    methods: {
      _onClick() {
        this.$emit("click");
      }
    }
  };
  function _sfc_render$B(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock(
      "text",
      {
        style: vue.normalizeStyle($options.styleObj),
        class: vue.normalizeClass(["uni-icons", ["uniui-" + $props.type, $props.customPrefix, $props.customPrefix ? $props.type : ""]]),
        onClick: _cache[0] || (_cache[0] = (...args) => $options._onClick && $options._onClick(...args))
      },
      [
        vue.renderSlot(_ctx.$slots, "default", {}, void 0, true)
      ],
      6
      /* CLASS, STYLE */
    );
  }
  const uniIcons = /* @__PURE__ */ _export_sfc(_sfc_main$C, [["render", _sfc_render$B], ["__scopeId", "data-v-d31e1c47"], ["__file", "D:/Uniapp/htmlTest/赛创项目/uni_modules/uni-icons/components/uni-icons/uni-icons.vue"]]);
  const en$1 = {
    "uni-pagination.prevText": "prev",
    "uni-pagination.nextText": "next",
    "uni-pagination.piecePerPage": "piece/page"
  };
  const es = {
    "uni-pagination.prevText": "anterior",
    "uni-pagination.nextText": "prxima",
    "uni-pagination.piecePerPage": "Art��culo/P��gina"
  };
  const fr = {
    "uni-pagination.prevText": "précédente",
    "uni-pagination.nextText": "suivante",
    "uni-pagination.piecePerPage": "Articles/Pages"
  };
  const zhHans$1 = {
    "uni-pagination.prevText": "上一页",
    "uni-pagination.nextText": "下一页",
    "uni-pagination.piecePerPage": "条/页"
  };
  const zhHant$1 = {
    "uni-pagination.prevText": "上一頁",
    "uni-pagination.nextText": "下一頁",
    "uni-pagination.piecePerPage": "條/頁"
  };
  const messages = {
    en: en$1,
    es,
    fr,
    "zh-Hans": zhHans$1,
    "zh-Hant": zhHant$1
  };
  const {
    t: t$2
  } = initVueI18n(messages);
  const _sfc_main$B = {
    name: "UniPagination",
    emits: ["update:modelValue", "input", "change", "pageSizeChange"],
    props: {
      value: {
        type: [Number, String],
        default: 1
      },
      modelValue: {
        type: [Number, String],
        default: 1
      },
      prevText: {
        type: String
      },
      nextText: {
        type: String
      },
      piecePerPageText: {
        type: String
      },
      current: {
        type: [Number, String],
        default: 1
      },
      total: {
        // 数据总量
        type: [Number, String],
        default: 0
      },
      pageSize: {
        // 每页数据量
        type: [Number, String],
        default: 10
      },
      showIcon: {
        // 是否以 icon 形式展示按钮
        type: [Boolean, String],
        default: false
      },
      showPageSize: {
        // 是否以 icon 形式展示按钮
        type: [Boolean, String],
        default: false
      },
      pagerCount: {
        type: Number,
        default: 7
      },
      pageSizeRange: {
        type: Array,
        default: () => [20, 50, 100, 500]
      }
    },
    data() {
      return {
        pageSizeIndex: 0,
        currentIndex: 1,
        paperData: [],
        pickerShow: false
      };
    },
    computed: {
      piecePerPage() {
        return this.piecePerPageText || t$2("uni-pagination.piecePerPage");
      },
      prevPageText() {
        return this.prevText || t$2("uni-pagination.prevText");
      },
      nextPageText() {
        return this.nextText || t$2("uni-pagination.nextText");
      },
      maxPage() {
        let maxPage = 1;
        let total = Number(this.total);
        let pageSize2 = Number(this.pageSize);
        if (total && pageSize2) {
          maxPage = Math.ceil(total / pageSize2);
        }
        return maxPage;
      },
      paper() {
        const num = this.currentIndex;
        const pagerCount = this.pagerCount;
        const total = this.total;
        const pageSize2 = this.pageSize;
        let totalArr = [];
        let showPagerArr = [];
        let pagerNum = Math.ceil(total / pageSize2);
        for (let i = 0; i < pagerNum; i++) {
          totalArr.push(i + 1);
        }
        showPagerArr.push(1);
        const totalNum = totalArr[totalArr.length - (pagerCount + 1) / 2];
        totalArr.forEach((item, index) => {
          if ((pagerCount + 1) / 2 >= num) {
            if (item < pagerCount + 1 && item > 1) {
              showPagerArr.push(item);
            }
          } else if (num + 2 <= totalNum) {
            if (item > num - (pagerCount + 1) / 2 && item < num + (pagerCount + 1) / 2) {
              showPagerArr.push(item);
            }
          } else {
            if ((item > num - (pagerCount + 1) / 2 || pagerNum - pagerCount < item) && item < totalArr[totalArr.length - 1]) {
              showPagerArr.push(item);
            }
          }
        });
        if (pagerNum > pagerCount) {
          if ((pagerCount + 1) / 2 >= num) {
            showPagerArr[showPagerArr.length - 1] = "...";
          } else if (num + 2 <= totalNum) {
            showPagerArr[1] = "...";
            showPagerArr[showPagerArr.length - 1] = "...";
          } else {
            showPagerArr[1] = "...";
          }
          showPagerArr.push(totalArr[totalArr.length - 1]);
        } else {
          if ((pagerCount + 1) / 2 >= num)
            ;
          else if (num + 2 <= totalNum)
            ;
          else {
            showPagerArr.shift();
            showPagerArr.push(totalArr[totalArr.length - 1]);
          }
        }
        return showPagerArr;
      }
    },
    watch: {
      current: {
        immediate: true,
        handler(val, old) {
          if (val < 1) {
            this.currentIndex = 1;
          } else {
            this.currentIndex = val;
          }
        }
      },
      value: {
        immediate: true,
        handler(val) {
          if (Number(this.current) !== 1)
            return;
          if (val < 1) {
            this.currentIndex = 1;
          } else {
            this.currentIndex = val;
          }
        }
      },
      pageSizeIndex(val) {
        this.$emit("pageSizeChange", this.pageSizeRange[val]);
      }
    },
    methods: {
      pickerChange(e) {
        this.pageSizeIndex = e.detail.value;
        this.pickerClick();
      },
      pickerClick() {
      },
      // 选择标签
      selectPage(e, index) {
        if (parseInt(e)) {
          this.currentIndex = e;
          this.change("current");
        } else {
          let pagerNum = Math.ceil(this.total / this.pageSize);
          if (index <= 1) {
            if (this.currentIndex - 5 > 1) {
              this.currentIndex -= 5;
            } else {
              this.currentIndex = 1;
            }
            return;
          }
          if (index >= 6) {
            if (this.currentIndex + 5 > pagerNum) {
              this.currentIndex = pagerNum;
            } else {
              this.currentIndex += 5;
            }
            return;
          }
        }
      },
      clickLeft() {
        if (Number(this.currentIndex) === 1) {
          return;
        }
        this.currentIndex -= 1;
        this.change("prev");
      },
      clickRight() {
        if (Number(this.currentIndex) >= this.maxPage) {
          return;
        }
        this.currentIndex += 1;
        this.change("next");
      },
      change(e) {
        this.$emit("input", this.currentIndex);
        this.$emit("update:modelValue", this.currentIndex);
        this.$emit("change", {
          type: e,
          current: this.currentIndex
        });
      }
    }
  };
  function _sfc_render$A(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), uniIcons);
    return vue.openBlock(), vue.createElementBlock("view", { class: "uni-pagination" }, [
      $props.showPageSize === true || $props.showPageSize === "true" ? (vue.openBlock(), vue.createElementBlock("picker", {
        key: 0,
        class: "select-picker",
        mode: "selector",
        value: $data.pageSizeIndex,
        range: $props.pageSizeRange,
        onChange: _cache[0] || (_cache[0] = (...args) => $options.pickerChange && $options.pickerChange(...args)),
        onCancel: _cache[1] || (_cache[1] = (...args) => $options.pickerClick && $options.pickerClick(...args)),
        onClick: _cache[2] || (_cache[2] = (...args) => $options.pickerClick && $options.pickerClick(...args))
      }, [
        vue.createElementVNode("button", {
          type: "default",
          size: "mini",
          plain: true
        }, [
          vue.createElementVNode(
            "text",
            null,
            vue.toDisplayString($props.pageSizeRange[$data.pageSizeIndex]) + " " + vue.toDisplayString($options.piecePerPage),
            1
            /* TEXT */
          ),
          vue.createVNode(_component_uni_icons, {
            class: "select-picker-icon",
            type: "arrowdown",
            size: "12",
            color: "#999"
          })
        ])
      ], 40, ["value", "range"])) : vue.createCommentVNode("v-if", true),
      vue.createElementVNode(
        "view",
        { class: "uni-pagination__total is-phone-hide" },
        "共 " + vue.toDisplayString($props.total) + " 条",
        1
        /* TEXT */
      ),
      vue.createElementVNode("view", {
        class: vue.normalizeClass(["uni-pagination__btn", $data.currentIndex === 1 ? "uni-pagination--disabled" : "uni-pagination--enabled"]),
        "hover-class": $data.currentIndex === 1 ? "" : "uni-pagination--hover",
        "hover-start-time": 20,
        "hover-stay-time": 70,
        onClick: _cache[3] || (_cache[3] = (...args) => $options.clickLeft && $options.clickLeft(...args))
      }, [
        $props.showIcon === true || $props.showIcon === "true" ? (vue.openBlock(), vue.createBlock(_component_uni_icons, {
          key: 0,
          color: "#666",
          size: "16",
          type: "left"
        })) : (vue.openBlock(), vue.createElementBlock(
          "text",
          {
            key: 1,
            class: "uni-pagination__child-btn"
          },
          vue.toDisplayString($options.prevPageText),
          1
          /* TEXT */
        ))
      ], 10, ["hover-class"]),
      vue.createElementVNode("view", { class: "uni-pagination__num uni-pagination__num-flex-none" }, [
        vue.createElementVNode("view", { class: "uni-pagination__num-current" }, [
          vue.createElementVNode(
            "text",
            { class: "uni-pagination__num-current-text is-pc-hide current-index-text" },
            vue.toDisplayString($data.currentIndex),
            1
            /* TEXT */
          ),
          vue.createElementVNode(
            "text",
            { class: "uni-pagination__num-current-text is-pc-hide" },
            "/" + vue.toDisplayString($options.maxPage || 0),
            1
            /* TEXT */
          ),
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($options.paper, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                key: index,
                class: vue.normalizeClass([{ "page--active": item === $data.currentIndex }, "uni-pagination__num-tag tag--active is-phone-hide"]),
                onClick: ($event) => $options.selectPage(item, index)
              }, [
                vue.createElementVNode(
                  "text",
                  null,
                  vue.toDisplayString(item),
                  1
                  /* TEXT */
                )
              ], 10, ["onClick"]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ]),
      vue.createElementVNode("view", {
        class: vue.normalizeClass(["uni-pagination__btn", $data.currentIndex >= $options.maxPage ? "uni-pagination--disabled" : "uni-pagination--enabled"]),
        "hover-class": $data.currentIndex === $options.maxPage ? "" : "uni-pagination--hover",
        "hover-start-time": 20,
        "hover-stay-time": 70,
        onClick: _cache[4] || (_cache[4] = (...args) => $options.clickRight && $options.clickRight(...args))
      }, [
        $props.showIcon === true || $props.showIcon === "true" ? (vue.openBlock(), vue.createBlock(_component_uni_icons, {
          key: 0,
          color: "#666",
          size: "16",
          type: "right"
        })) : (vue.openBlock(), vue.createElementBlock(
          "text",
          {
            key: 1,
            class: "uni-pagination__child-btn"
          },
          vue.toDisplayString($options.nextPageText),
          1
          /* TEXT */
        ))
      ], 10, ["hover-class"])
    ]);
  }
  const __easycom_0$1 = /* @__PURE__ */ _export_sfc(_sfc_main$B, [["render", _sfc_render$A], ["__scopeId", "data-v-88b7506d"], ["__file", "D:/Uniapp/htmlTest/赛创项目/uni_modules/uni-pagination/components/uni-pagination/uni-pagination.vue"]]);
  const _sfc_main$A = {
    name: "TaskParticipantsPopup",
    props: {
      taskId: {
        type: [Number, String],
        required: true
      }
    },
    data() {
      return {
        participants: [],
        total: 0,
        pageNum: 1,
        pageSize: 10,
        currentStatus: "",
        // 为空时表示全部
        statusOptions: [
          { label: "全部", value: "" },
          { label: "已加入", value: "joined" },
          { label: "进行中", value: "in_progress" },
          { label: "已完成", value: "completed" },
          { label: "已退出", value: "left" },
          { label: "被踢出", value: "kicked_out" }
        ],
        loading: false,
        popupVisible: false
        // 控制弹窗显示的内部状态
      };
    },
    watch: {
      // 监听taskId变化，确保每次taskId更新时都重新加载数据
      taskId: {
        handler(newVal) {
          if (newVal) {
            formatAppLog("log", "at components/team/TaskParticipantsPopup.vue:109", "taskId变化，重新加载数据:", newVal);
            this.$nextTick(() => {
              this.loadParticipants();
            });
          }
        },
        immediate: false
        // 不立即触发，只在变化时触发
      }
    },
    created() {
      uni.$on("openParticipantsPopup", this.openPopup);
      formatAppLog("log", "at components/team/TaskParticipantsPopup.vue:122", "TaskParticipantsPopup组件已创建，等待触发打开事件");
    },
    beforeDestroy() {
      uni.$off("openParticipantsPopup", this.openPopup);
    },
    methods: {
      // 对外暴露的方法，可以直接被父组件调用
      open() {
        formatAppLog("log", "at components/team/TaskParticipantsPopup.vue:131", "父组件直接调用open方法，任务ID:", this.taskId);
        this.openPopup();
      },
      // 内部打开弹窗的实现
      openPopup() {
        formatAppLog("log", "at components/team/TaskParticipantsPopup.vue:136", "开始打开参与者弹窗，任务ID:", this.taskId);
        try {
          uni.showLoading({
            title: "加载中..."
          });
          if (this.$refs.popup) {
            formatAppLog("log", "at components/team/TaskParticipantsPopup.vue:146", "找到popup实例，调用open方法");
            this.loadParticipants();
            this.$refs.popup.open("center");
          } else {
            formatAppLog("error", "at components/team/TaskParticipantsPopup.vue:154", "popup实例不存在，尝试延迟打开");
            setTimeout(() => {
              if (this.$refs.popup) {
                this.loadParticipants();
                this.$refs.popup.open("center");
              } else {
              }
            }, 100);
          }
        } catch (e) {
          formatAppLog("error", "at components/team/TaskParticipantsPopup.vue:166", "打开弹窗出错:", e);
          uni.showToast({
            title: "打开弹窗出错",
            icon: "none"
          });
        } finally {
          setTimeout(() => {
            uni.hideLoading();
          }, 500);
        }
      },
      close() {
        this.$refs.popup.close();
      },
      changeStatus(status) {
        formatAppLog("log", "at components/team/TaskParticipantsPopup.vue:182", "切换参与者状态筛选:", status);
        this.currentStatus = status;
        this.pageNum = 1;
        this.loadParticipants();
      },
      handlePageChange(e) {
        this.pageNum = e.current;
        this.loadParticipants();
      },
      async loadParticipants() {
        if (!this.taskId)
          return;
        this.loading = true;
        try {
          const params = {
            pageNum: this.pageNum,
            pageSize: this.pageSize
          };
          if (this.currentStatus) {
            params.status = this.currentStatus;
          }
          formatAppLog("log", "at components/team/TaskParticipantsPopup.vue:206", "查询参与者，参数:", params);
          const response = await tasksApi.getTaskParticipants(this.taskId, params);
          if (response.code === 200 && response.data) {
            this.participants = response.data.records || [];
            this.total = response.data.total || 0;
            formatAppLog("log", "at components/team/TaskParticipantsPopup.vue:214", "成功获取参与者数据，数量:", this.participants.length);
          } else {
            this.participants = [];
            this.total = 0;
            formatAppLog("log", "at components/team/TaskParticipantsPopup.vue:219", "获取参与者数据失败", response.message);
          }
        } catch (error) {
          formatAppLog("error", "at components/team/TaskParticipantsPopup.vue:222", "获取参与者列表失败", error);
          this.participants = [];
          this.total = 0;
        } finally {
          this.loading = false;
        }
      },
      getStatusText(status) {
        const statusMap = {
          "joined": "已加入",
          "in_progress": "进行中",
          "completed": "已完成",
          "left": "已退出",
          "kicked_out": "被踢出"
        };
        return statusMap[status] || "未知状态";
      },
      getStatusClass(status) {
        const classMap = {
          "joined": "status-joined",
          "in_progress": "status-progress",
          "completed": "status-completed",
          "left": "status-left",
          "kicked_out": "status-kicked-out"
        };
        return classMap[status] || "";
      },
      confirmRemoveParticipant(item) {
        formatAppLog("log", "at components/team/TaskParticipantsPopup.vue:251", "准备删除参与者:", item);
        uni.showModal({
          title: "确认删除",
          content: `确定要移除参与者 ${item.participantName} 吗？`,
          confirmColor: "#f44336",
          success: (res) => {
            if (res.confirm) {
              this.removeParticipant(item.userId);
            }
          }
        });
      },
      async removeParticipant(participantId) {
        try {
          uni.showLoading({ title: "处理中..." });
          const res = await tasksApi.removeTaskParticipant(this.taskId, participantId);
          if (res.code === 200) {
            uni.showToast({
              title: "已成功移除参与者",
              icon: "success"
            });
            this.loadParticipants();
            uni.$emit("refreshTaskList");
          } else {
            uni.showToast({
              title: res.message || "移除参与者失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at components/team/TaskParticipantsPopup.vue:286", "移除参与者错误:", error);
          uni.showToast({
            title: "移除参与者失败，请稍后重试",
            icon: "none"
          });
        } finally {
          uni.hideLoading();
        }
      }
    },
    mounted() {
      this.currentStatus = "";
    }
  };
  function _sfc_render$z(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_pagination = resolveEasycom(vue.resolveDynamicComponent("uni-pagination"), __easycom_0$1);
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_0$3);
    return vue.openBlock(), vue.createElementBlock("view", null, [
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "popup",
          type: "center"
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "popup-content" }, [
              vue.createElementVNode("view", { class: "popup-header" }, [
                vue.createElementVNode("text", { class: "popup-title" }, "任务参与者"),
                vue.createElementVNode("view", {
                  class: "close-icon",
                  onClick: _cache[0] || (_cache[0] = (...args) => $options.close && $options.close(...args))
                }, [
                  vue.createElementVNode("text", {
                    class: "iconfont icon-guanbi",
                    style: { "font-size": "36rpx", "color": "#666" }
                  })
                ])
              ]),
              vue.createElementVNode("view", { class: "status-tabs" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($data.statusOptions, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      key: index,
                      class: vue.normalizeClass(["status-tab", $data.currentStatus === item.value ? "active" : ""]),
                      onClick: ($event) => $options.changeStatus(item.value)
                    }, vue.toDisplayString(item.label), 11, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ]),
              vue.createCommentVNode(" 加载中状态 "),
              $data.loading ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "loading-container"
              }, [
                vue.createElementVNode("view", { class: "loading-spinner" }),
                vue.createElementVNode("text", { class: "loading-text" }, "加载中...")
              ])) : $data.participants.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "participant-list"
              }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($data.participants, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "participant-item",
                      key: index
                    }, [
                      vue.createElementVNode("view", { class: "participant-avatar" }, [
                        vue.createElementVNode("image", {
                          src: item.avatarUrl || "/static/image/default-avatar.png",
                          mode: "aspectFill"
                        }, null, 8, ["src"])
                      ]),
                      vue.createElementVNode("view", { class: "participant-info" }, [
                        vue.createElementVNode(
                          "view",
                          { class: "participant-name" },
                          vue.toDisplayString(item.participantName),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode("view", { class: "participant-details" }, [
                          vue.createElementVNode(
                            "text",
                            null,
                            vue.toDisplayString(item.participantMajor || "暂无专业信息"),
                            1
                            /* TEXT */
                          ),
                          item.participantStudentId ? (vue.openBlock(), vue.createElementBlock(
                            "text",
                            { key: 0 },
                            "学号: " + vue.toDisplayString(item.participantStudentId),
                            1
                            /* TEXT */
                          )) : vue.createCommentVNode("v-if", true)
                        ])
                      ]),
                      vue.createElementVNode(
                        "view",
                        {
                          class: vue.normalizeClass(["participant-status", $options.getStatusClass(item.status)])
                        },
                        vue.toDisplayString($options.getStatusText(item.status)),
                        3
                        /* TEXT, CLASS */
                      ),
                      vue.createCommentVNode(" 删除按钮 - 仅对已加入的参与者显示 "),
                      item.status === "joined" ? (vue.openBlock(), vue.createElementBlock("view", {
                        key: 0,
                        class: "delete-btn",
                        onClick: vue.withModifiers(($event) => $options.confirmRemoveParticipant(item), ["stop"])
                      }, [
                        vue.createElementVNode("text", {
                          class: "iconfont icon-delete",
                          style: { "font-size": "28rpx", "color": "#f44336" }
                        }, "X")
                      ], 8, ["onClick"])) : vue.createCommentVNode("v-if", true)
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])) : (vue.openBlock(), vue.createElementBlock("view", {
                key: 2,
                class: "empty-state"
              }, [
                vue.createElementVNode("text", { class: "empty-icon" }, "!"),
                vue.createElementVNode("text", null, "暂无参与者信息")
              ])),
              vue.createElementVNode("view", { class: "popup-footer" }, [
                $data.total > $data.pageSize ? (vue.openBlock(), vue.createBlock(_component_uni_pagination, {
                  key: 0,
                  total: $data.total,
                  pageSize: $data.pageSize,
                  current: $data.pageNum,
                  onChange: $options.handlePageChange
                }, null, 8, ["total", "pageSize", "current", "onChange"])) : vue.createCommentVNode("v-if", true)
              ])
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const TaskParticipantsPopup = /* @__PURE__ */ _export_sfc(_sfc_main$A, [["render", _sfc_render$z], ["__scopeId", "data-v-d6dd26a5"], ["__file", "D:/Uniapp/htmlTest/赛创项目/components/team/TaskParticipantsPopup.vue"]]);
  const defaultAvatar = "https://via.placeholder.com/100";
  const _sfc_main$z = {
    __name: "detail",
    setup(__props, { expose: __expose }) {
      const taskId = vue.ref(null);
      const isFavorite = vue.ref(false);
      const viewCounted = vue.ref(false);
      const favoriteCount = vue.ref(0);
      const isAlreadyApplied = vue.ref(false);
      const participantsPopup = vue.ref(null);
      const taskDetail = vue.ref({
        id: 0,
        title: "",
        description: "",
        requirements: "",
        contactInfo: "",
        categoryId: 0,
        categoryName: "",
        creatorId: 0,
        creatorName: "",
        creatorAvatarUrl: "",
        creatorMajor: "",
        rewardTypeId: 0,
        rewardTypeName: "",
        rewardAmount: 0,
        createdAt: "",
        deadline: "",
        status: "recruiting",
        maxParticipants: 0,
        currentParticipants: 0,
        viewCount: 0,
        location: ""
      });
      const contactInfo = vue.computed(() => {
        if (!taskDetail.value.contactInfo)
          return null;
        try {
          let contactData;
          if (typeof taskDetail.value.contactInfo === "string") {
            contactData = JSON.parse(taskDetail.value.contactInfo);
          } else {
            contactData = taskDetail.value.contactInfo;
          }
          return contactData;
        } catch (e) {
          formatAppLog("error", "at pages/task-square/detail.vue:190", "解析联系方式失败:", e);
          return null;
        }
      });
      const validContacts = vue.computed(() => {
        if (!contactInfo.value)
          return [];
        return Object.entries(contactInfo.value).filter(([key, value]) => value && value.toString().trim() !== "").map(([key, value]) => ({ key, value }));
      });
      const isApplyDisabled = vue.computed(() => {
        if (isAlreadyApplied.value) {
          return true;
        }
        if (taskDetail.value.status !== "recruiting") {
          return true;
        }
        if (taskDetail.value.currentParticipants >= taskDetail.value.maxParticipants) {
          return true;
        }
        return false;
      });
      function getRewardIcon(type) {
        switch (type) {
          case "现金":
            return "xianjin";
          case "学分":
            return "xuefen";
          case "志愿服务":
            return "zhiyaunshichang";
          case "证书":
            return "zhengshu";
          case "实习机会":
            return "shixijihui";
          case "礼品":
            return "liping";
          default:
            return "xianjin";
        }
      }
      function getRewardIconColor(type) {
        switch (type) {
          case "现金":
            return "#FF6B6B";
          case "学分":
            return "#4A90E2";
          case "志愿服务":
            return "#7ED321";
          case "证书":
            return "#FFC107";
          default:
            return "#4A90E2";
        }
      }
      function getContactIcon(type) {
        switch (type) {
          case "phone":
            return "dianhua";
          case "wechat":
            return "weixintubiao";
          case "qq":
            return "qqtubiao";
          case "email":
            return "youxiang";
          default:
            return "youxiang";
        }
      }
      vue.onMounted(() => {
        getTaskIdAndLoadDetail();
      });
      function getTaskIdAndLoadDetail() {
        try {
          let id = null;
          const pages = getCurrentPages();
          if (pages && pages.length > 0) {
            const currentPage = pages[pages.length - 1];
            if (currentPage.options && currentPage.options.id) {
              id = currentPage.options.id;
            } else if (currentPage.$page && currentPage.$page.fullPath) {
              const fullPath = currentPage.$page.fullPath;
              const queryIndex = fullPath.indexOf("?");
              if (queryIndex > -1) {
                const queryPart = fullPath.substring(queryIndex + 1);
                const queryParams = queryPart.split("&");
                for (let param of queryParams) {
                  const [key, value] = param.split("=");
                  if (key === "id" && value) {
                    id = value;
                    break;
                  }
                }
              }
            } else if (currentPage.__displayReporter && currentPage.__displayReporter.query) {
              id = currentPage.__displayReporter.query.id;
            }
          }
          if (id) {
            taskId.value = id;
            getTaskDetail2(id);
          } else {
            uni.showToast({
              title: "无法获取任务信息",
              icon: "none"
            });
            setTimeout(() => {
              uni.navigateBack();
            }, 1500);
          }
        } catch (error) {
          formatAppLog("error", "at pages/task-square/detail.vue:337", "获取任务ID出错:", error);
          uni.showToast({
            title: "加载任务详情失败",
            icon: "none"
          });
        }
      }
      __expose({
        onLoad(options) {
          if (options && options.id) {
            taskId.value = options.id;
            getTaskDetail2(options.id);
          }
        }
      });
      async function getTaskDetail2(id) {
        if (!id) {
          uni.showToast({
            title: "任务ID无效",
            icon: "none"
          });
          return;
        }
        try {
          uni.showLoading({
            title: "加载中..."
          });
          const res = await request({
            url: `/tasks/${id}`,
            method: "GET"
          });
          if (res.code === 200 && res.data) {
            taskDetail.value = res.data;
            checkIfAlreadyApplied(id);
            if (taskDetail.value.title) {
              uni.setNavigationBarTitle({
                title: "任务详情"
              });
            }
          } else {
            formatAppLog("error", "at pages/task-square/detail.vue:389", "获取任务详情失败:", res);
            uni.showToast({
              title: "获取任务详情失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/task-square/detail.vue:398", "获取任务详情异常:", error);
        } finally {
          uni.hideLoading();
        }
      }
      function formatDeadline(dateStr) {
        if (!dateStr)
          return "";
        try {
          const date = new Date(dateStr);
          const now = /* @__PURE__ */ new Date();
          const days = ["日", "一", "二", "三", "四", "五", "六"];
          const hours = date.getHours().toString().padStart(2, "0");
          const minutes = date.getMinutes().toString().padStart(2, "0");
          const timeStr = `${hours}:${minutes}`;
          if (date.getFullYear() === now.getFullYear()) {
            const month = date.getMonth() + 1;
            const day = date.getDate();
            const weekday = days[date.getDay()];
            return `${month}月${day}日 周${weekday} ${timeStr}`;
          } else {
            return `${date.getFullYear()}/${date.getMonth() + 1}/${date.getDate()} ${timeStr}`;
          }
        } catch (e) {
          return dateStr;
        }
      }
      function formatTimeAgo(dateStr) {
        if (!dateStr)
          return "";
        try {
          const date = new Date(dateStr);
          const now = /* @__PURE__ */ new Date();
          const diff = now.getTime() - date.getTime();
          const minute = 60 * 1e3;
          const hour = 60 * minute;
          const day = 24 * hour;
          const week = 7 * day;
          const month = 30 * day;
          if (diff < minute) {
            return "刚刚";
          } else if (diff < hour) {
            return Math.floor(diff / minute) + "分钟前";
          } else if (diff < day) {
            return Math.floor(diff / hour) + "小时前";
          } else if (diff < week) {
            return Math.floor(diff / day) + "天前";
          } else if (diff < month) {
            return Math.floor(diff / week) + "周前";
          } else {
            return Math.floor(diff / month) + "个月前";
          }
        } catch (e) {
          return dateStr;
        }
      }
      function getStatusText(status) {
        switch (status) {
          case "recruiting":
            return "招募中";
          case "ongoing":
            return "进行中";
          case "completed":
            return "已完成";
          case "ended":
            return "已结束";
          case "canceled":
            return "已取消";
          default:
            return "未知状态";
        }
      }
      function getStatusClass(status) {
        switch (status) {
          case "recruiting":
            return "status-recruiting";
          case "ongoing":
            return "status-ongoing";
          case "completed":
            return "status-completed";
          case "ended":
            return "status-ended";
          case "canceled":
            return "status-canceled";
          default:
            return "";
        }
      }
      function getRewardTypeText(type) {
        switch (type) {
          case "现金":
            return "报酬";
          case "学分":
            return "学分奖励";
          case "志愿服务":
            return "志愿时长";
          case "证书":
            return "证书奖励";
          default:
            return "奖励";
        }
      }
      function getRewardClass(type) {
        switch (type) {
          case "现金":
            return "reward-orange";
          case "学分":
            return "reward-blue";
          case "志愿服务":
            return "reward-green";
          case "证书":
            return "reward-yellow";
          default:
            return "";
        }
      }
      function getContactTypeText(type) {
        switch (type) {
          case "phone":
            return "电话";
          case "wechat":
            return "微信";
          case "qq":
            return "QQ";
          case "email":
            return "邮箱";
          default:
            return type;
        }
      }
      function copyContactInfo(value) {
        uni.setClipboardData({
          data: value,
          success: () => {
            uni.showToast({
              title: "复制成功",
              icon: "success"
            });
          }
        });
      }
      function getApplyButtonText() {
        if (isAlreadyApplied.value) {
          return "已申请";
        }
        if (taskDetail.value.status === "recruiting") {
          if (taskDetail.value.currentParticipants >= taskDetail.value.maxParticipants) {
            return "名额已满";
          }
          return "立即申请";
        } else if (taskDetail.value.status === "ongoing") {
          return "进行中";
        } else if (taskDetail.value.status === "completed") {
          return "已完成";
        } else if (taskDetail.value.status === "ended") {
          return "已结束";
        } else if (taskDetail.value.status === "canceled") {
          return "已取消";
        }
        return "立即申请";
      }
      async function toggleFavorite() {
        if (!taskId.value)
          return;
      }
      async function checkIfAlreadyApplied(taskId2) {
        try {
          const response = await api.taskApplications.checkTaskApplication(taskId2);
          if (response.code === 200 && response.data) {
            isAlreadyApplied.value = response.data.participated || false;
          }
        } catch (error) {
          formatAppLog("error", "at pages/task-square/detail.vue:622", "检查申请状态失败:", error);
          isAlreadyApplied.value = false;
        }
      }
      async function applyTask2() {
        if (isApplyDisabled.value)
          return;
        uni.showModal({
          title: "申请任务",
          content: "确定要申请该任务吗？",
          editable: true,
          placeholderText: "可选择填写申请理由（如有特长、经验等）",
          success: async (res) => {
            if (res.confirm) {
              try {
                uni.showLoading({
                  title: "提交申请中..."
                });
                const response = await api.taskApplications.createTaskApplication({
                  taskId: taskId.value,
                  message: res.content || "我对这个任务很感兴趣，希望能参与。",
                  status: "pending"
                  // 添加状态字段，表示申请待处理
                });
                uni.hideLoading();
                if (response.code === 200) {
                  uni.showToast({
                    title: "申请成功，等待审核",
                    icon: "success"
                  });
                  isAlreadyApplied.value = true;
                  setTimeout(() => {
                    uni.navigateTo({
                      url: "/pages/application/application"
                    });
                  }, 1500);
                } else {
                  uni.showToast({
                    title: response.message || "申请失败",
                    icon: "none"
                  });
                }
              } catch (error) {
                uni.hideLoading();
                formatAppLog("error", "at pages/task-square/detail.vue:676", "申请任务失败:", error);
                uni.showToast({
                  title: "申请失败，请稍后重试",
                  icon: "none"
                });
              }
            }
          }
        });
      }
      async function updateTaskStatus2(status, cancelReason = "") {
        if (!taskId.value)
          return;
        if (status === "canceled" && !cancelReason) {
          uni.showModal({
            title: "取消任务",
            content: "确定要取消该任务吗？",
            editable: true,
            placeholderText: "请填写取消原因",
            success: async (res) => {
              if (res.confirm && res.content) {
                doUpdateTaskStatus(status, res.content);
              } else if (res.confirm) {
                uni.showToast({
                  title: "取消原因不能为空",
                  icon: "none"
                });
              }
            }
          });
          return;
        }
        const statusTextMap = {
          recruiting: "招募中",
          ongoing: "进行中",
          completed: "已完成",
          ended: "已结束",
          canceled: "已取消"
        };
        uni.showModal({
          title: `更改状态为"${statusTextMap[status] || status}"`,
          content: `确定要将任务状态更改为"${statusTextMap[status] || status}"吗？`,
          success: async (res) => {
            if (res.confirm) {
              doUpdateTaskStatus(status, cancelReason);
            }
          }
        });
      }
      async function doUpdateTaskStatus(status, cancelReason = "") {
        try {
          uni.showLoading({
            title: "更新中..."
          });
          const data = { status };
          if (status === "canceled") {
            data.cancelReason = cancelReason;
          }
          const response = await api.tasks.updateTaskStatus(taskId.value, data);
          uni.hideLoading();
          if (response.code === 200) {
            uni.showToast({
              title: "状态更新成功",
              icon: "success"
            });
            getTaskDetail2(taskId.value);
          } else {
            uni.showToast({
              title: response.message || "更新失败",
              icon: "none"
            });
          }
        } catch (error) {
          uni.hideLoading();
          formatAppLog("error", "at pages/task-square/detail.vue:765", "更新任务状态失败:", error);
          uni.showToast({
            title: "网络异常，请稍后重试",
            icon: "none"
          });
        }
      }
      function openParticipantsPopup() {
        if (taskId.value) {
          uni.$emit("openParticipantsPopup");
          vue.nextTick(() => {
            if (participantsPopup.value) {
              participantsPopup.value.open();
            }
          });
        }
      }
      const __returned__ = { defaultAvatar, taskId, isFavorite, viewCounted, favoriteCount, isAlreadyApplied, participantsPopup, taskDetail, contactInfo, validContacts, isApplyDisabled, getRewardIcon, getRewardIconColor, getContactIcon, getTaskIdAndLoadDetail, getTaskDetail: getTaskDetail2, formatDeadline, formatTimeAgo, getStatusText, getStatusClass, getRewardTypeText, getRewardClass, getContactTypeText, copyContactInfo, getApplyButtonText, toggleFavorite, checkIfAlreadyApplied, applyTask: applyTask2, updateTaskStatus: updateTaskStatus2, doUpdateTaskStatus, openParticipantsPopup, ref: vue.ref, computed: vue.computed, onMounted: vue.onMounted, reactive: vue.reactive, nextTick: vue.nextTick, get request() {
        return request;
      }, get api() {
        return api;
      }, HeaderBar, SvgIcon, TaskParticipantsPopup };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$y(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 - 使用HeaderBar组件 "),
      vue.createVNode($setup["HeaderBar"], {
        title: "任务详情",
        "show-search": false,
        "show-filter": true
      }),
      vue.createCommentVNode(" 任务详情内容 "),
      vue.createElementVNode("scroll-view", {
        "scroll-y": "",
        class: "content-scroll"
      }, [
        vue.createCommentVNode(" 顶部基本信息卡片 "),
        vue.createElementVNode("view", { class: "top-info-card" }, [
          vue.createCommentVNode(" 任务标题和状态 "),
          vue.createElementVNode("view", { class: "title-status-row" }, [
            vue.createElementVNode(
              "text",
              { class: "task-title" },
              vue.toDisplayString($setup.taskDetail.title),
              1
              /* TEXT */
            ),
            vue.createElementVNode(
              "text",
              {
                class: vue.normalizeClass(["task-status-tag", $setup.getStatusClass($setup.taskDetail.status)])
              },
              vue.toDisplayString($setup.taskDetail.statusText),
              3
              /* TEXT, CLASS */
            )
          ]),
          vue.createCommentVNode(" 发布者信息 "),
          vue.createElementVNode("view", { class: "publisher-info-row" }, [
            vue.createElementVNode("image", {
              class: "publisher-avatar",
              src: $setup.taskDetail.creatorAvatarUrl || $setup.defaultAvatar,
              mode: "aspectFill"
            }, null, 8, ["src"]),
            vue.createElementVNode("view", { class: "publisher-text" }, [
              vue.createElementVNode(
                "text",
                { class: "publisher-name" },
                vue.toDisplayString($setup.taskDetail.creatorName),
                1
                /* TEXT */
              ),
              vue.createElementVNode(
                "text",
                { class: "publisher-extra" },
                vue.toDisplayString($setup.taskDetail.creatorMajor) + " · " + vue.toDisplayString($setup.formatTimeAgo($setup.taskDetail.createdAt)) + "发布",
                1
                /* TEXT */
              )
            ])
          ])
        ]),
        vue.createCommentVNode(" 任务详情卡片 "),
        vue.createElementVNode("view", { class: "detail-card" }, [
          vue.createElementVNode("view", { class: "card-title" }, "任务详情"),
          vue.createElementVNode("view", { class: "card-content description-content" }, [
            vue.createElementVNode(
              "text",
              { class: "description-text" },
              vue.toDisplayString($setup.taskDetail.description),
              1
              /* TEXT */
            )
          ])
        ]),
        vue.createCommentVNode(" 任务需求卡片 "),
        $setup.taskDetail.requirements ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 0,
          class: "detail-card"
        }, [
          vue.createElementVNode("view", { class: "card-title" }, "任务要求"),
          vue.createElementVNode("view", { class: "card-content description-content" }, [
            vue.createElementVNode(
              "text",
              { class: "description-text" },
              vue.toDisplayString($setup.taskDetail.requirements),
              1
              /* TEXT */
            )
          ])
        ])) : vue.createCommentVNode("v-if", true),
        vue.createCommentVNode(" 任务信息网格 "),
        vue.createElementVNode("view", { class: "info-grid" }, [
          vue.createCommentVNode(" 时间信息 "),
          vue.createElementVNode("view", { class: "info-grid-item" }, [
            vue.createElementVNode("text", { class: "grid-item-label" }, "时间"),
            vue.createElementVNode("view", { class: "grid-item-content" }, [
              vue.createVNode($setup["SvgIcon"], {
                name: "shijian",
                color: "#4A90E2"
              }),
              vue.createElementVNode(
                "text",
                { class: "grid-item-value" },
                vue.toDisplayString($setup.formatDeadline($setup.taskDetail.deadline)),
                1
                /* TEXT */
              )
            ])
          ]),
          vue.createCommentVNode(" 地点信息 "),
          $setup.taskDetail.location ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 0,
            class: "info-grid-item"
          }, [
            vue.createElementVNode("text", { class: "grid-item-label" }, "地点"),
            vue.createElementVNode("view", { class: "grid-item-content" }, [
              vue.createVNode($setup["SvgIcon"], {
                name: "weizhi",
                color: "#4A90E2"
              }),
              vue.createElementVNode(
                "text",
                { class: "grid-item-value" },
                vue.toDisplayString($setup.taskDetail.location),
                1
                /* TEXT */
              )
            ])
          ])) : vue.createCommentVNode("v-if", true),
          vue.createCommentVNode(" 奖励信息 "),
          vue.createElementVNode("view", { class: "info-grid-item" }, [
            vue.createElementVNode(
              "text",
              { class: "grid-item-label" },
              vue.toDisplayString($setup.getRewardTypeText($setup.taskDetail.rewardTypeName)),
              1
              /* TEXT */
            ),
            vue.createElementVNode("view", { class: "grid-item-content" }, [
              vue.createVNode($setup["SvgIcon"], {
                name: $setup.getRewardIcon($setup.taskDetail.rewardTypeName),
                color: $setup.getRewardIconColor($setup.taskDetail.rewardTypeName),
                size: "28"
              }, null, 8, ["name", "color"]),
              vue.createElementVNode(
                "text",
                {
                  class: vue.normalizeClass(["grid-item-value reward-text", $setup.getRewardClass($setup.taskDetail.rewardTypeName)])
                },
                [
                  $setup.taskDetail.rewardTypeName === "现金" ? (vue.openBlock(), vue.createElementBlock(
                    "text",
                    { key: 0 },
                    "¥" + vue.toDisplayString($setup.taskDetail.rewardAmount),
                    1
                    /* TEXT */
                  )) : $setup.taskDetail.rewardTypeName === "学分" ? (vue.openBlock(), vue.createElementBlock(
                    "text",
                    { key: 1 },
                    vue.toDisplayString($setup.taskDetail.rewardAmount) + " 学分",
                    1
                    /* TEXT */
                  )) : (vue.openBlock(), vue.createElementBlock(
                    "text",
                    { key: 2 },
                    vue.toDisplayString($setup.taskDetail.rewardTypeName),
                    1
                    /* TEXT */
                  ))
                ],
                2
                /* CLASS */
              )
            ])
          ]),
          vue.createCommentVNode(" 参与人数 "),
          vue.createElementVNode("view", { class: "info-grid-item" }, [
            vue.createElementVNode("text", { class: "grid-item-label" }, "参与人数"),
            vue.createElementVNode("view", { class: "grid-item-content" }, [
              vue.createVNode($setup["SvgIcon"], {
                name: "renshu",
                color: "#4A90E2"
              }),
              vue.createElementVNode(
                "text",
                { class: "grid-item-value" },
                vue.toDisplayString($setup.taskDetail.currentParticipants) + "/" + vue.toDisplayString($setup.taskDetail.maxParticipants) + " 人",
                1
                /* TEXT */
              ),
              $setup.taskDetail.currentParticipants > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "view-participants",
                onClick: $setup.openParticipantsPopup
              }, [
                vue.createElementVNode("text", null, "查看")
              ])) : vue.createCommentVNode("v-if", true)
            ])
          ])
        ]),
        vue.createCommentVNode(" 联系方式卡片 "),
        $setup.validContacts.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 1,
          class: "detail-card"
        }, [
          vue.createElementVNode("view", { class: "card-title" }, "联系方式"),
          vue.createElementVNode("view", { class: "contact-list" }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.validContacts, (contact) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  class: "contact-item",
                  key: contact.key,
                  onClick: ($event) => $setup.copyContactInfo(contact.value)
                }, [
                  vue.createElementVNode("view", { class: "contact-type-container" }, [
                    vue.createVNode($setup["SvgIcon"], {
                      name: $setup.getContactIcon(contact.key),
                      color: "#4A90E2"
                    }, null, 8, ["name"]),
                    vue.createElementVNode(
                      "text",
                      { class: "contact-type" },
                      vue.toDisplayString($setup.getContactTypeText(contact.key)),
                      1
                      /* TEXT */
                    )
                  ]),
                  vue.createElementVNode("view", { class: "contact-value-container" }, [
                    vue.createElementVNode(
                      "text",
                      { class: "contact-value" },
                      vue.toDisplayString(contact.value),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode("text", { class: "copy-hint" }, "点击复制")
                  ])
                ], 8, ["onClick"]);
              }),
              128
              /* KEYED_FRAGMENT */
            ))
          ])
        ])) : vue.createCommentVNode("v-if", true)
      ]),
      vue.createCommentVNode(" 底部操作栏 "),
      vue.createElementVNode("view", { class: "bottom-actions" }, [
        vue.createElementVNode("view", {
          class: "action-btn favorite",
          onClick: $setup.toggleFavorite
        }, [
          vue.createVNode($setup["SvgIcon"], {
            name: $setup.isFavorite ? "souchang" : "weishouchang",
            size: "36",
            color: $setup.isFavorite ? "#FFC107" : "#666666"
          }, null, 8, ["name", "color"]),
          vue.createElementVNode(
            "text",
            null,
            vue.toDisplayString($setup.isFavorite ? "已收藏" : "收藏"),
            1
            /* TEXT */
          )
        ]),
        vue.createElementVNode("button", {
          class: vue.normalizeClass(["apply-btn", { "disabled-btn": $setup.isApplyDisabled }]),
          disabled: $setup.isApplyDisabled,
          onClick: $setup.applyTask
        }, vue.toDisplayString($setup.getApplyButtonText()), 11, ["disabled"])
      ]),
      vue.createCommentVNode(" 任务参与者弹窗 "),
      vue.createVNode($setup["TaskParticipantsPopup"], {
        ref: "participantsPopup",
        "task-id": $setup.taskId
      }, null, 8, ["task-id"])
    ]);
  }
  const PagesTaskSquareDetail = /* @__PURE__ */ _export_sfc(_sfc_main$z, [["render", _sfc_render$y], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/task-square/detail.vue"]]);
  function obj2strClass(obj) {
    let classess = "";
    for (let key in obj) {
      const val = obj[key];
      if (val) {
        classess += `${key} `;
      }
    }
    return classess;
  }
  function obj2strStyle(obj) {
    let style = "";
    for (let key in obj) {
      const val = obj[key];
      style += `${key}:${val};`;
    }
    return style;
  }
  const _sfc_main$y = {
    name: "uni-easyinput",
    emits: [
      "click",
      "iconClick",
      "update:modelValue",
      "input",
      "focus",
      "blur",
      "confirm",
      "clear",
      "eyes",
      "change",
      "keyboardheightchange"
    ],
    model: {
      prop: "modelValue",
      event: "update:modelValue"
    },
    options: {
      virtualHost: true
    },
    inject: {
      form: {
        from: "uniForm",
        default: null
      },
      formItem: {
        from: "uniFormItem",
        default: null
      }
    },
    props: {
      name: String,
      value: [Number, String],
      modelValue: [Number, String],
      type: {
        type: String,
        default: "text"
      },
      clearable: {
        type: Boolean,
        default: true
      },
      autoHeight: {
        type: Boolean,
        default: false
      },
      placeholder: {
        type: String,
        default: " "
      },
      placeholderStyle: String,
      focus: {
        type: Boolean,
        default: false
      },
      disabled: {
        type: Boolean,
        default: false
      },
      maxlength: {
        type: [Number, String],
        default: 140
      },
      confirmType: {
        type: String,
        default: "done"
      },
      clearSize: {
        type: [Number, String],
        default: 24
      },
      inputBorder: {
        type: Boolean,
        default: true
      },
      prefixIcon: {
        type: String,
        default: ""
      },
      suffixIcon: {
        type: String,
        default: ""
      },
      trim: {
        type: [Boolean, String],
        default: false
      },
      cursorSpacing: {
        type: Number,
        default: 0
      },
      passwordIcon: {
        type: Boolean,
        default: true
      },
      adjustPosition: {
        type: Boolean,
        default: true
      },
      primaryColor: {
        type: String,
        default: "#2979ff"
      },
      styles: {
        type: Object,
        default() {
          return {
            color: "#333",
            backgroundColor: "#fff",
            disableColor: "#F7F6F6",
            borderColor: "#e5e5e5"
          };
        }
      },
      errorMessage: {
        type: [String, Boolean],
        default: ""
      }
    },
    data() {
      return {
        focused: false,
        val: "",
        showMsg: "",
        border: false,
        isFirstBorder: false,
        showClearIcon: false,
        showPassword: false,
        focusShow: false,
        localMsg: "",
        isEnter: false
        // 用于判断当前是否是使用回车操作
      };
    },
    computed: {
      // 输入框内是否有值
      isVal() {
        const val = this.val;
        if (val || val === 0) {
          return true;
        }
        return false;
      },
      msg() {
        return this.localMsg || this.errorMessage;
      },
      // 因为uniapp的input组件的maxlength组件必须要数值，这里转为数值，用户可以传入字符串数值
      inputMaxlength() {
        return Number(this.maxlength);
      },
      // 处理外层样式的style
      boxStyle() {
        return `color:${this.inputBorder && this.msg ? "#e43d33" : this.styles.color};`;
      },
      // input 内容的类和样式处理
      inputContentClass() {
        return obj2strClass({
          "is-input-border": this.inputBorder,
          "is-input-error-border": this.inputBorder && this.msg,
          "is-textarea": this.type === "textarea",
          "is-disabled": this.disabled,
          "is-focused": this.focusShow
        });
      },
      inputContentStyle() {
        const focusColor = this.focusShow ? this.primaryColor : this.styles.borderColor;
        const borderColor = this.inputBorder && this.msg ? "#dd524d" : focusColor;
        return obj2strStyle({
          "border-color": borderColor || "#e5e5e5",
          "background-color": this.disabled ? this.styles.disableColor : this.styles.backgroundColor
        });
      },
      // input右侧样式
      inputStyle() {
        const paddingRight = this.type === "password" || this.clearable || this.prefixIcon ? "" : "10px";
        return obj2strStyle({
          "padding-right": paddingRight,
          "padding-left": this.prefixIcon ? "" : "10px"
        });
      }
    },
    watch: {
      value(newVal) {
        this.val = newVal;
      },
      modelValue(newVal) {
        this.val = newVal;
      },
      focus(newVal) {
        this.$nextTick(() => {
          this.focused = this.focus;
          this.focusShow = this.focus;
        });
      }
    },
    created() {
      this.init();
      if (this.form && this.formItem) {
        this.$watch("formItem.errMsg", (newVal) => {
          this.localMsg = newVal;
        });
      }
    },
    mounted() {
      this.$nextTick(() => {
        this.focused = this.focus;
        this.focusShow = this.focus;
      });
    },
    methods: {
      /**
       * 初始化变量值
       */
      init() {
        if (this.value || this.value === 0) {
          this.val = this.value;
        } else if (this.modelValue || this.modelValue === 0 || this.modelValue === "") {
          this.val = this.modelValue;
        } else {
          this.val = null;
        }
      },
      /**
       * 点击图标时触发
       * @param {Object} type
       */
      onClickIcon(type) {
        this.$emit("iconClick", type);
      },
      /**
       * 显示隐藏内容，密码框时生效
       */
      onEyes() {
        this.showPassword = !this.showPassword;
        this.$emit("eyes", this.showPassword);
      },
      /**
       * 输入时触发
       * @param {Object} event
       */
      onInput(event2) {
        let value = event2.detail.value;
        if (this.trim) {
          if (typeof this.trim === "boolean" && this.trim) {
            value = this.trimStr(value);
          }
          if (typeof this.trim === "string") {
            value = this.trimStr(value, this.trim);
          }
        }
        if (this.errMsg)
          this.errMsg = "";
        this.val = value;
        this.$emit("input", value);
        this.$emit("update:modelValue", value);
      },
      /**
       * 外部调用方法
       * 获取焦点时触发
       * @param {Object} event
       */
      onFocus() {
        this.$nextTick(() => {
          this.focused = true;
        });
        this.$emit("focus", null);
      },
      _Focus(event2) {
        this.focusShow = true;
        this.$emit("focus", event2);
      },
      /**
       * 外部调用方法
       * 失去焦点时触发
       * @param {Object} event
       */
      onBlur() {
        this.focused = false;
        this.$emit("blur", null);
      },
      _Blur(event2) {
        event2.detail.value;
        this.focusShow = false;
        this.$emit("blur", event2);
        if (this.isEnter === false) {
          this.$emit("change", this.val);
        }
        if (this.form && this.formItem) {
          const { validateTrigger } = this.form;
          if (validateTrigger === "blur") {
            this.formItem.onFieldChange();
          }
        }
      },
      /**
       * 按下键盘的发送键
       * @param {Object} e
       */
      onConfirm(e) {
        this.$emit("confirm", this.val);
        this.isEnter = true;
        this.$emit("change", this.val);
        this.$nextTick(() => {
          this.isEnter = false;
        });
      },
      /**
       * 清理内容
       * @param {Object} event
       */
      onClear(event2) {
        this.val = "";
        this.$emit("input", "");
        this.$emit("update:modelValue", "");
        this.$emit("clear");
      },
      /**
       * 键盘高度发生变化的时候触发此事件
       * 兼容性：微信小程序2.7.0+、App 3.1.0+
       * @param {Object} event
       */
      onkeyboardheightchange(event2) {
        this.$emit("keyboardheightchange", event2);
      },
      /**
       * 去除空格
       */
      trimStr(str, pos = "both") {
        if (pos === "both") {
          return str.trim();
        } else if (pos === "left") {
          return str.trimLeft();
        } else if (pos === "right") {
          return str.trimRight();
        } else if (pos === "start") {
          return str.trimStart();
        } else if (pos === "end") {
          return str.trimEnd();
        } else if (pos === "all") {
          return str.replace(/\s+/g, "");
        } else if (pos === "none") {
          return str;
        }
        return str;
      }
    }
  };
  function _sfc_render$x(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), uniIcons);
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        class: vue.normalizeClass(["uni-easyinput", { "uni-easyinput-error": $options.msg }]),
        style: vue.normalizeStyle($options.boxStyle)
      },
      [
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass(["uni-easyinput__content", $options.inputContentClass]),
            style: vue.normalizeStyle($options.inputContentStyle)
          },
          [
            $props.prefixIcon ? (vue.openBlock(), vue.createBlock(_component_uni_icons, {
              key: 0,
              class: "content-clear-icon",
              type: $props.prefixIcon,
              color: "#c0c4cc",
              onClick: _cache[0] || (_cache[0] = ($event) => $options.onClickIcon("prefix")),
              size: "22"
            }, null, 8, ["type"])) : vue.createCommentVNode("v-if", true),
            vue.renderSlot(_ctx.$slots, "left", {}, void 0, true),
            $props.type === "textarea" ? (vue.openBlock(), vue.createElementBlock("textarea", {
              key: 1,
              class: vue.normalizeClass(["uni-easyinput__content-textarea", { "input-padding": $props.inputBorder }]),
              name: $props.name,
              value: $data.val,
              placeholder: $props.placeholder,
              placeholderStyle: $props.placeholderStyle,
              disabled: $props.disabled,
              "placeholder-class": "uni-easyinput__placeholder-class",
              maxlength: $options.inputMaxlength,
              focus: $data.focused,
              autoHeight: $props.autoHeight,
              "cursor-spacing": $props.cursorSpacing,
              "adjust-position": $props.adjustPosition,
              onInput: _cache[1] || (_cache[1] = (...args) => $options.onInput && $options.onInput(...args)),
              onBlur: _cache[2] || (_cache[2] = (...args) => $options._Blur && $options._Blur(...args)),
              onFocus: _cache[3] || (_cache[3] = (...args) => $options._Focus && $options._Focus(...args)),
              onConfirm: _cache[4] || (_cache[4] = (...args) => $options.onConfirm && $options.onConfirm(...args)),
              onKeyboardheightchange: _cache[5] || (_cache[5] = (...args) => $options.onkeyboardheightchange && $options.onkeyboardheightchange(...args))
            }, null, 42, ["name", "value", "placeholder", "placeholderStyle", "disabled", "maxlength", "focus", "autoHeight", "cursor-spacing", "adjust-position"])) : (vue.openBlock(), vue.createElementBlock("input", {
              key: 2,
              type: $props.type === "password" ? "text" : $props.type,
              class: "uni-easyinput__content-input",
              style: vue.normalizeStyle($options.inputStyle),
              name: $props.name,
              value: $data.val,
              password: !$data.showPassword && $props.type === "password",
              placeholder: $props.placeholder,
              placeholderStyle: $props.placeholderStyle,
              "placeholder-class": "uni-easyinput__placeholder-class",
              disabled: $props.disabled,
              maxlength: $options.inputMaxlength,
              focus: $data.focused,
              confirmType: $props.confirmType,
              "cursor-spacing": $props.cursorSpacing,
              "adjust-position": $props.adjustPosition,
              onFocus: _cache[6] || (_cache[6] = (...args) => $options._Focus && $options._Focus(...args)),
              onBlur: _cache[7] || (_cache[7] = (...args) => $options._Blur && $options._Blur(...args)),
              onInput: _cache[8] || (_cache[8] = (...args) => $options.onInput && $options.onInput(...args)),
              onConfirm: _cache[9] || (_cache[9] = (...args) => $options.onConfirm && $options.onConfirm(...args)),
              onKeyboardheightchange: _cache[10] || (_cache[10] = (...args) => $options.onkeyboardheightchange && $options.onkeyboardheightchange(...args))
            }, null, 44, ["type", "name", "value", "password", "placeholder", "placeholderStyle", "disabled", "maxlength", "focus", "confirmType", "cursor-spacing", "adjust-position"])),
            $props.type === "password" && $props.passwordIcon ? (vue.openBlock(), vue.createElementBlock(
              vue.Fragment,
              { key: 3 },
              [
                vue.createCommentVNode(" 开启密码时显示小眼睛 "),
                $options.isVal ? (vue.openBlock(), vue.createBlock(_component_uni_icons, {
                  key: 0,
                  class: vue.normalizeClass(["content-clear-icon", { "is-textarea-icon": $props.type === "textarea" }]),
                  type: $data.showPassword ? "eye-slash-filled" : "eye-filled",
                  size: 22,
                  color: $data.focusShow ? $props.primaryColor : "#c0c4cc",
                  onClick: $options.onEyes
                }, null, 8, ["class", "type", "color", "onClick"])) : vue.createCommentVNode("v-if", true)
              ],
              64
              /* STABLE_FRAGMENT */
            )) : vue.createCommentVNode("v-if", true),
            $props.suffixIcon ? (vue.openBlock(), vue.createElementBlock(
              vue.Fragment,
              { key: 4 },
              [
                $props.suffixIcon ? (vue.openBlock(), vue.createBlock(_component_uni_icons, {
                  key: 0,
                  class: "content-clear-icon",
                  type: $props.suffixIcon,
                  color: "#c0c4cc",
                  onClick: _cache[11] || (_cache[11] = ($event) => $options.onClickIcon("suffix")),
                  size: "22"
                }, null, 8, ["type"])) : vue.createCommentVNode("v-if", true)
              ],
              64
              /* STABLE_FRAGMENT */
            )) : (vue.openBlock(), vue.createElementBlock(
              vue.Fragment,
              { key: 5 },
              [
                $props.clearable && $options.isVal && !$props.disabled && $props.type !== "textarea" ? (vue.openBlock(), vue.createBlock(_component_uni_icons, {
                  key: 0,
                  class: vue.normalizeClass(["content-clear-icon", { "is-textarea-icon": $props.type === "textarea" }]),
                  type: "clear",
                  size: $props.clearSize,
                  color: $options.msg ? "#dd524d" : $data.focusShow ? $props.primaryColor : "#c0c4cc",
                  onClick: $options.onClear
                }, null, 8, ["class", "size", "color", "onClick"])) : vue.createCommentVNode("v-if", true)
              ],
              64
              /* STABLE_FRAGMENT */
            )),
            vue.renderSlot(_ctx.$slots, "right", {}, void 0, true)
          ],
          6
          /* CLASS, STYLE */
        )
      ],
      6
      /* CLASS, STYLE */
    );
  }
  const __easycom_0 = /* @__PURE__ */ _export_sfc(_sfc_main$y, [["render", _sfc_render$x], ["__scopeId", "data-v-09fd5285"], ["__file", "D:/Uniapp/htmlTest/赛创项目/uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.vue"]]);
  const _sfc_main$x = {
    name: "uniFormsItem",
    options: {
      virtualHost: true
    },
    provide() {
      return {
        uniFormItem: this
      };
    },
    inject: {
      form: {
        from: "uniForm",
        default: null
      }
    },
    props: {
      // 表单校验规则
      rules: {
        type: Array,
        default() {
          return null;
        }
      },
      // 表单域的属性名，在使用校验规则时必填
      name: {
        type: [String, Array],
        default: ""
      },
      required: {
        type: Boolean,
        default: false
      },
      label: {
        type: String,
        default: ""
      },
      // label的宽度
      labelWidth: {
        type: [String, Number],
        default: ""
      },
      // label 居中方式，默认 left 取值 left/center/right
      labelAlign: {
        type: String,
        default: ""
      },
      // 强制显示错误信息
      errorMessage: {
        type: [String, Boolean],
        default: ""
      },
      // 1.4.0 弃用，统一使用 form 的校验时机
      // validateTrigger: {
      // 	type: String,
      // 	default: ''
      // },
      // 1.4.0 弃用，统一使用 form 的label 位置
      // labelPosition: {
      // 	type: String,
      // 	default: ''
      // },
      // 1.4.0 以下属性已经废弃，请使用  #label 插槽代替
      leftIcon: String,
      iconColor: {
        type: String,
        default: "#606266"
      }
    },
    data() {
      return {
        errMsg: "",
        userRules: null,
        localLabelAlign: "left",
        localLabelWidth: "70px",
        localLabelPos: "left",
        border: false,
        isFirstBorder: false
      };
    },
    computed: {
      // 处理错误信息
      msg() {
        return this.errorMessage || this.errMsg;
      }
    },
    watch: {
      // 规则发生变化通知子组件更新
      "form.formRules"(val) {
        this.init();
      },
      "form.labelWidth"(val) {
        this.localLabelWidth = this._labelWidthUnit(val);
      },
      "form.labelPosition"(val) {
        this.localLabelPos = this._labelPosition();
      },
      "form.labelAlign"(val) {
      }
    },
    created() {
      this.init(true);
      if (this.name && this.form) {
        this.$watch(
          () => {
            const val = this.form._getDataValue(this.name, this.form.localData);
            return val;
          },
          (value, oldVal) => {
            const isEqual2 = this.form._isEqual(value, oldVal);
            if (!isEqual2) {
              const val = this.itemSetValue(value);
              this.onFieldChange(val, false);
            }
          },
          {
            immediate: false
          }
        );
      }
    },
    unmounted() {
      this.__isUnmounted = true;
      this.unInit();
    },
    methods: {
      /**
       * 外部调用方法
       * 设置规则 ，主要用于小程序自定义检验规则
       * @param {Array} rules 规则源数据
       */
      setRules(rules = null) {
        this.userRules = rules;
        this.init(false);
      },
      // 兼容老版本表单组件
      setValue() {
      },
      /**
       * 外部调用方法
       * 校验数据
       * @param {any} value 需要校验的数据
       * @param {boolean} 是否立即校验
       * @return {Array|null} 校验内容
       */
      async onFieldChange(value, formtrigger = true) {
        const {
          formData,
          localData,
          errShowType,
          validateCheck,
          validateTrigger,
          _isRequiredField,
          _realName
        } = this.form;
        const name2 = _realName(this.name);
        if (!value) {
          value = this.form.formData[name2];
        }
        const ruleLen = this.itemRules.rules && this.itemRules.rules.length;
        if (!this.validator || !ruleLen || ruleLen === 0)
          return;
        const isRequiredField2 = _isRequiredField(this.itemRules.rules || []);
        let result = null;
        if (validateTrigger === "bind" || formtrigger) {
          result = await this.validator.validateUpdate(
            {
              [name2]: value
            },
            formData
          );
          if (!isRequiredField2 && (value === void 0 || value === "")) {
            result = null;
          }
          if (result && result.errorMessage) {
            if (errShowType === "undertext") {
              this.errMsg = !result ? "" : result.errorMessage;
            }
            if (errShowType === "toast") {
              uni.showToast({
                title: result.errorMessage || "校验错误",
                icon: "none"
              });
            }
            if (errShowType === "modal") {
              uni.showModal({
                title: "提示",
                content: result.errorMessage || "校验错误"
              });
            }
          } else {
            this.errMsg = "";
          }
          validateCheck(result ? result : null);
        } else {
          this.errMsg = "";
        }
        return result ? result : null;
      },
      /**
       * 初始组件数据
       */
      init(type = false) {
        const {
          validator,
          formRules,
          childrens,
          formData,
          localData,
          _realName,
          labelWidth,
          _getDataValue,
          _setDataValue
        } = this.form || {};
        this.localLabelAlign = this._justifyContent();
        this.localLabelWidth = this._labelWidthUnit(labelWidth);
        this.localLabelPos = this._labelPosition();
        this.form && type && childrens.push(this);
        if (!validator || !formRules)
          return;
        if (!this.form.isFirstBorder) {
          this.form.isFirstBorder = true;
          this.isFirstBorder = true;
        }
        if (this.group) {
          if (!this.group.isFirstBorder) {
            this.group.isFirstBorder = true;
            this.isFirstBorder = true;
          }
        }
        this.border = this.form.border;
        const name2 = _realName(this.name);
        const itemRule = this.userRules || this.rules;
        if (typeof formRules === "object" && itemRule) {
          formRules[name2] = {
            rules: itemRule
          };
          validator.updateSchema(formRules);
        }
        const itemRules = formRules[name2] || {};
        this.itemRules = itemRules;
        this.validator = validator;
        this.itemSetValue(_getDataValue(this.name, localData));
      },
      unInit() {
        if (this.form) {
          const {
            childrens,
            formData,
            _realName
          } = this.form;
          childrens.forEach((item, index) => {
            if (item === this) {
              this.form.childrens.splice(index, 1);
              delete formData[_realName(item.name)];
            }
          });
        }
      },
      // 设置item 的值
      itemSetValue(value) {
        const name2 = this.form._realName(this.name);
        const rules = this.itemRules.rules || [];
        const val = this.form._getValue(name2, value, rules);
        this.form._setDataValue(name2, this.form.formData, val);
        return val;
      },
      /**
       * 移除该表单项的校验结果
       */
      clearValidate() {
        this.errMsg = "";
      },
      // 是否显示星号
      _isRequired() {
        return this.required;
      },
      // 处理对齐方式
      _justifyContent() {
        if (this.form) {
          const {
            labelAlign
          } = this.form;
          let labelAli = this.labelAlign ? this.labelAlign : labelAlign;
          if (labelAli === "left")
            return "flex-start";
          if (labelAli === "center")
            return "center";
          if (labelAli === "right")
            return "flex-end";
        }
        return "flex-start";
      },
      // 处理 label宽度单位 ,继承父元素的值
      _labelWidthUnit(labelWidth) {
        return this.num2px(this.labelWidth ? this.labelWidth : labelWidth || (this.label ? 70 : "auto"));
      },
      // 处理 label 位置
      _labelPosition() {
        if (this.form)
          return this.form.labelPosition || "left";
        return "left";
      },
      /**
       * 触发时机
       * @param {Object} rule 当前规则内时机
       * @param {Object} itemRlue 当前组件时机
       * @param {Object} parentRule 父组件时机
       */
      isTrigger(rule, itemRlue, parentRule) {
        if (rule === "submit" || !rule) {
          if (rule === void 0) {
            if (itemRlue !== "bind") {
              if (!itemRlue) {
                return parentRule === "" ? "bind" : "submit";
              }
              return "submit";
            }
            return "bind";
          }
          return "submit";
        }
        return "bind";
      },
      num2px(num) {
        if (typeof num === "number") {
          return `${num}px`;
        }
        return num;
      }
    }
  };
  function _sfc_render$w(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        class: vue.normalizeClass(["uni-forms-item", ["is-direction-" + $data.localLabelPos, $data.border ? "uni-forms-item--border" : "", $data.border && $data.isFirstBorder ? "is-first-border" : ""]])
      },
      [
        vue.renderSlot(_ctx.$slots, "label", {}, () => [
          vue.createElementVNode(
            "view",
            {
              class: vue.normalizeClass(["uni-forms-item__label", { "no-label": !$props.label && !$props.required }]),
              style: vue.normalizeStyle({ width: $data.localLabelWidth, justifyContent: $data.localLabelAlign })
            },
            [
              $props.required ? (vue.openBlock(), vue.createElementBlock("text", {
                key: 0,
                class: "is-required"
              }, "*")) : vue.createCommentVNode("v-if", true),
              vue.createElementVNode(
                "text",
                null,
                vue.toDisplayString($props.label),
                1
                /* TEXT */
              )
            ],
            6
            /* CLASS, STYLE */
          )
        ], true),
        vue.createElementVNode("view", { class: "uni-forms-item__content" }, [
          vue.renderSlot(_ctx.$slots, "default", {}, void 0, true),
          vue.createElementVNode(
            "view",
            {
              class: vue.normalizeClass(["uni-forms-item__error", { "msg--active": $options.msg }])
            },
            [
              vue.createElementVNode(
                "text",
                null,
                vue.toDisplayString($options.msg),
                1
                /* TEXT */
              )
            ],
            2
            /* CLASS */
          )
        ])
      ],
      2
      /* CLASS */
    );
  }
  const __easycom_1$1 = /* @__PURE__ */ _export_sfc(_sfc_main$x, [["render", _sfc_render$w], ["__scopeId", "data-v-462874dd"], ["__file", "D:/Uniapp/htmlTest/赛创项目/uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.vue"]]);
  let Calendar$1 = class Calendar {
    constructor({
      selected,
      startDate,
      endDate,
      range
    } = {}) {
      this.date = this.getDateObj(/* @__PURE__ */ new Date());
      this.selected = selected || [];
      this.startDate = startDate;
      this.endDate = endDate;
      this.range = range;
      this.cleanMultipleStatus();
      this.weeks = {};
      this.lastHover = false;
    }
    /**
     * 设置日期
     * @param {Object} date
     */
    setDate(date) {
      const selectDate = this.getDateObj(date);
      this.getWeeks(selectDate.fullDate);
    }
    /**
     * 清理多选状态
     */
    cleanMultipleStatus() {
      this.multipleStatus = {
        before: "",
        after: "",
        data: []
      };
    }
    setStartDate(startDate) {
      this.startDate = startDate;
    }
    setEndDate(endDate) {
      this.endDate = endDate;
    }
    getPreMonthObj(date) {
      date = fixIosDateFormat(date);
      date = new Date(date);
      const oldMonth = date.getMonth();
      date.setMonth(oldMonth - 1);
      const newMonth = date.getMonth();
      if (oldMonth !== 0 && newMonth - oldMonth === 0) {
        date.setMonth(newMonth - 1);
      }
      return this.getDateObj(date);
    }
    getNextMonthObj(date) {
      date = fixIosDateFormat(date);
      date = new Date(date);
      const oldMonth = date.getMonth();
      date.setMonth(oldMonth + 1);
      const newMonth = date.getMonth();
      if (newMonth - oldMonth > 1) {
        date.setMonth(newMonth - 1);
      }
      return this.getDateObj(date);
    }
    /**
     * 获取指定格式Date对象
     */
    getDateObj(date) {
      date = fixIosDateFormat(date);
      date = new Date(date);
      return {
        fullDate: getDate(date),
        year: date.getFullYear(),
        month: addZero(date.getMonth() + 1),
        date: addZero(date.getDate()),
        day: date.getDay()
      };
    }
    /**
     * 获取上一个月日期集合
     */
    getPreMonthDays(amount, dateObj) {
      const result = [];
      for (let i = amount - 1; i >= 0; i--) {
        const month = dateObj.month - 1;
        result.push({
          date: new Date(dateObj.year, month, -i).getDate(),
          month,
          disable: true
        });
      }
      return result;
    }
    /**
     * 获取本月日期集合
     */
    getCurrentMonthDays(amount, dateObj) {
      const result = [];
      const fullDate = this.date.fullDate;
      for (let i = 1; i <= amount; i++) {
        const currentDate = `${dateObj.year}-${dateObj.month}-${addZero(i)}`;
        const isToday = fullDate === currentDate;
        const info = this.selected && this.selected.find((item) => {
          if (this.dateEqual(currentDate, item.date)) {
            return item;
          }
        });
        if (this.startDate) {
          dateCompare(this.startDate, currentDate);
        }
        if (this.endDate) {
          dateCompare(currentDate, this.endDate);
        }
        let multiples = this.multipleStatus.data;
        let multiplesStatus = -1;
        if (this.range && multiples) {
          multiplesStatus = multiples.findIndex((item) => {
            return this.dateEqual(item, currentDate);
          });
        }
        const checked = multiplesStatus !== -1;
        result.push({
          fullDate: currentDate,
          year: dateObj.year,
          date: i,
          multiple: this.range ? checked : false,
          beforeMultiple: this.isLogicBefore(currentDate, this.multipleStatus.before, this.multipleStatus.after),
          afterMultiple: this.isLogicAfter(currentDate, this.multipleStatus.before, this.multipleStatus.after),
          month: dateObj.month,
          disable: this.startDate && !dateCompare(this.startDate, currentDate) || this.endDate && !dateCompare(
            currentDate,
            this.endDate
          ),
          isToday,
          userChecked: false,
          extraInfo: info
        });
      }
      return result;
    }
    /**
     * 获取下一个月日期集合
     */
    _getNextMonthDays(amount, dateObj) {
      const result = [];
      const month = dateObj.month + 1;
      for (let i = 1; i <= amount; i++) {
        result.push({
          date: i,
          month,
          disable: true
        });
      }
      return result;
    }
    /**
     * 获取当前日期详情
     * @param {Object} date
     */
    getInfo(date) {
      if (!date) {
        date = /* @__PURE__ */ new Date();
      }
      return this.calendar.find((item) => item.fullDate === this.getDateObj(date).fullDate);
    }
    /**
     * 比较时间是否相等
     */
    dateEqual(before, after) {
      before = new Date(fixIosDateFormat(before));
      after = new Date(fixIosDateFormat(after));
      return before.valueOf() === after.valueOf();
    }
    /**
     *  比较真实起始日期
     */
    isLogicBefore(currentDate, before, after) {
      let logicBefore = before;
      if (before && after) {
        logicBefore = dateCompare(before, after) ? before : after;
      }
      return this.dateEqual(logicBefore, currentDate);
    }
    isLogicAfter(currentDate, before, after) {
      let logicAfter = after;
      if (before && after) {
        logicAfter = dateCompare(before, after) ? after : before;
      }
      return this.dateEqual(logicAfter, currentDate);
    }
    /**
     * 获取日期范围内所有日期
     * @param {Object} begin
     * @param {Object} end
     */
    geDateAll(begin, end) {
      var arr = [];
      var ab = begin.split("-");
      var ae = end.split("-");
      var db = /* @__PURE__ */ new Date();
      db.setFullYear(ab[0], ab[1] - 1, ab[2]);
      var de = /* @__PURE__ */ new Date();
      de.setFullYear(ae[0], ae[1] - 1, ae[2]);
      var unixDb = db.getTime() - 24 * 60 * 60 * 1e3;
      var unixDe = de.getTime() - 24 * 60 * 60 * 1e3;
      for (var k = unixDb; k <= unixDe; ) {
        k = k + 24 * 60 * 60 * 1e3;
        arr.push(this.getDateObj(new Date(parseInt(k))).fullDate);
      }
      return arr;
    }
    /**
     *  获取多选状态
     */
    setMultiple(fullDate) {
      if (!this.range)
        return;
      let {
        before,
        after
      } = this.multipleStatus;
      if (before && after) {
        if (!this.lastHover) {
          this.lastHover = true;
          return;
        }
        this.multipleStatus.before = fullDate;
        this.multipleStatus.after = "";
        this.multipleStatus.data = [];
        this.multipleStatus.fulldate = "";
        this.lastHover = false;
      } else {
        if (!before) {
          this.multipleStatus.before = fullDate;
          this.multipleStatus.after = void 0;
          this.lastHover = false;
        } else {
          this.multipleStatus.after = fullDate;
          if (dateCompare(this.multipleStatus.before, this.multipleStatus.after)) {
            this.multipleStatus.data = this.geDateAll(this.multipleStatus.before, this.multipleStatus.after);
          } else {
            this.multipleStatus.data = this.geDateAll(this.multipleStatus.after, this.multipleStatus.before);
          }
          this.lastHover = true;
        }
      }
      this.getWeeks(fullDate);
    }
    /**
     *  鼠标 hover 更新多选状态
     */
    setHoverMultiple(fullDate) {
      if (!this.range || this.lastHover)
        return;
      const {
        before
      } = this.multipleStatus;
      if (!before) {
        this.multipleStatus.before = fullDate;
      } else {
        this.multipleStatus.after = fullDate;
        if (dateCompare(this.multipleStatus.before, this.multipleStatus.after)) {
          this.multipleStatus.data = this.geDateAll(this.multipleStatus.before, this.multipleStatus.after);
        } else {
          this.multipleStatus.data = this.geDateAll(this.multipleStatus.after, this.multipleStatus.before);
        }
      }
      this.getWeeks(fullDate);
    }
    /**
     * 更新默认值多选状态
     */
    setDefaultMultiple(before, after) {
      this.multipleStatus.before = before;
      this.multipleStatus.after = after;
      if (before && after) {
        if (dateCompare(before, after)) {
          this.multipleStatus.data = this.geDateAll(before, after);
          this.getWeeks(after);
        } else {
          this.multipleStatus.data = this.geDateAll(after, before);
          this.getWeeks(before);
        }
      }
    }
    /**
     * 获取每周数据
     * @param {Object} dateData
     */
    getWeeks(dateData) {
      const {
        year,
        month
      } = this.getDateObj(dateData);
      const preMonthDayAmount = new Date(year, month - 1, 1).getDay();
      const preMonthDays = this.getPreMonthDays(preMonthDayAmount, this.getDateObj(dateData));
      const currentMonthDayAmount = new Date(year, month, 0).getDate();
      const currentMonthDays = this.getCurrentMonthDays(currentMonthDayAmount, this.getDateObj(dateData));
      const nextMonthDayAmount = 42 - preMonthDayAmount - currentMonthDayAmount;
      const nextMonthDays = this._getNextMonthDays(nextMonthDayAmount, this.getDateObj(dateData));
      const calendarDays = [...preMonthDays, ...currentMonthDays, ...nextMonthDays];
      const weeks = new Array(6);
      for (let i = 0; i < calendarDays.length; i++) {
        const index = Math.floor(i / 7);
        if (!weeks[index]) {
          weeks[index] = new Array(7);
        }
        weeks[index][i % 7] = calendarDays[i];
      }
      this.calendar = calendarDays;
      this.weeks = weeks;
    }
  };
  function getDateTime(date, hideSecond) {
    return `${getDate(date)} ${getTime(date, hideSecond)}`;
  }
  function getDate(date) {
    date = fixIosDateFormat(date);
    date = new Date(date);
    const year = date.getFullYear();
    const month = date.getMonth() + 1;
    const day = date.getDate();
    return `${year}-${addZero(month)}-${addZero(day)}`;
  }
  function getTime(date, hideSecond) {
    date = fixIosDateFormat(date);
    date = new Date(date);
    const hour = date.getHours();
    const minute = date.getMinutes();
    const second = date.getSeconds();
    return hideSecond ? `${addZero(hour)}:${addZero(minute)}` : `${addZero(hour)}:${addZero(minute)}:${addZero(second)}`;
  }
  function addZero(num) {
    if (num < 10) {
      num = `0${num}`;
    }
    return num;
  }
  function getDefaultSecond(hideSecond) {
    return hideSecond ? "00:00" : "00:00:00";
  }
  function dateCompare(startDate, endDate) {
    startDate = new Date(fixIosDateFormat(startDate));
    endDate = new Date(fixIosDateFormat(endDate));
    return startDate <= endDate;
  }
  function checkDate(date) {
    const dateReg = /((19|20)\d{2})(-|\/)\d{1,2}(-|\/)\d{1,2}/g;
    return date.match(dateReg);
  }
  const dateTimeReg = /^\d{4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])( [0-5]?[0-9]:[0-5]?[0-9](:[0-5]?[0-9])?)?$/;
  function fixIosDateFormat(value) {
    if (typeof value === "string" && dateTimeReg.test(value)) {
      value = value.replace(/-/g, "/");
    }
    return value;
  }
  const _sfc_main$w = {
    props: {
      weeks: {
        type: Object,
        default() {
          return {};
        }
      },
      calendar: {
        type: Object,
        default: () => {
          return {};
        }
      },
      selected: {
        type: Array,
        default: () => {
          return [];
        }
      },
      checkHover: {
        type: Boolean,
        default: false
      }
    },
    methods: {
      choiceDate(weeks) {
        this.$emit("change", weeks);
      },
      handleMousemove(weeks) {
        this.$emit("handleMouse", weeks);
      }
    }
  };
  function _sfc_render$v(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        class: vue.normalizeClass(["uni-calendar-item__weeks-box", {
          "uni-calendar-item--disable": $props.weeks.disable,
          "uni-calendar-item--before-checked-x": $props.weeks.beforeMultiple,
          "uni-calendar-item--multiple": $props.weeks.multiple,
          "uni-calendar-item--after-checked-x": $props.weeks.afterMultiple
        }]),
        onClick: _cache[0] || (_cache[0] = ($event) => $options.choiceDate($props.weeks)),
        onMouseenter: _cache[1] || (_cache[1] = ($event) => $options.handleMousemove($props.weeks))
      },
      [
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass(["uni-calendar-item__weeks-box-item", {
              "uni-calendar-item--checked": $props.calendar.fullDate === $props.weeks.fullDate && ($props.calendar.userChecked || !$props.checkHover),
              "uni-calendar-item--checked-range-text": $props.checkHover,
              "uni-calendar-item--before-checked": $props.weeks.beforeMultiple,
              "uni-calendar-item--multiple": $props.weeks.multiple,
              "uni-calendar-item--after-checked": $props.weeks.afterMultiple,
              "uni-calendar-item--disable": $props.weeks.disable
            }])
          },
          [
            $props.selected && $props.weeks.extraInfo ? (vue.openBlock(), vue.createElementBlock("text", {
              key: 0,
              class: "uni-calendar-item__weeks-box-circle"
            })) : vue.createCommentVNode("v-if", true),
            vue.createElementVNode(
              "text",
              { class: "uni-calendar-item__weeks-box-text uni-calendar-item__weeks-box-text-disable uni-calendar-item--checked-text" },
              vue.toDisplayString($props.weeks.date),
              1
              /* TEXT */
            )
          ],
          2
          /* CLASS */
        ),
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass({ "uni-calendar-item--today": $props.weeks.isToday })
          },
          null,
          2
          /* CLASS */
        )
      ],
      34
      /* CLASS, NEED_HYDRATION */
    );
  }
  const calendarItem = /* @__PURE__ */ _export_sfc(_sfc_main$w, [["render", _sfc_render$v], ["__scopeId", "data-v-3c762a01"], ["__file", "D:/Uniapp/htmlTest/赛创项目/uni_modules/uni-datetime-picker/components/uni-datetime-picker/calendar-item.vue"]]);
  const en = {
    "uni-datetime-picker.selectDate": "select date",
    "uni-datetime-picker.selectTime": "select time",
    "uni-datetime-picker.selectDateTime": "select date and time",
    "uni-datetime-picker.startDate": "start date",
    "uni-datetime-picker.endDate": "end date",
    "uni-datetime-picker.startTime": "start time",
    "uni-datetime-picker.endTime": "end time",
    "uni-datetime-picker.ok": "ok",
    "uni-datetime-picker.clear": "clear",
    "uni-datetime-picker.cancel": "cancel",
    "uni-datetime-picker.year": "-",
    "uni-datetime-picker.month": "",
    "uni-calender.MON": "MON",
    "uni-calender.TUE": "TUE",
    "uni-calender.WED": "WED",
    "uni-calender.THU": "THU",
    "uni-calender.FRI": "FRI",
    "uni-calender.SAT": "SAT",
    "uni-calender.SUN": "SUN",
    "uni-calender.confirm": "confirm"
  };
  const zhHans = {
    "uni-datetime-picker.selectDate": "选择日期",
    "uni-datetime-picker.selectTime": "选择时间",
    "uni-datetime-picker.selectDateTime": "选择日期时间",
    "uni-datetime-picker.startDate": "开始日期",
    "uni-datetime-picker.endDate": "结束日期",
    "uni-datetime-picker.startTime": "开始时间",
    "uni-datetime-picker.endTime": "结束时间",
    "uni-datetime-picker.ok": "确定",
    "uni-datetime-picker.clear": "清除",
    "uni-datetime-picker.cancel": "取消",
    "uni-datetime-picker.year": "年",
    "uni-datetime-picker.month": "月",
    "uni-calender.SUN": "日",
    "uni-calender.MON": "一",
    "uni-calender.TUE": "二",
    "uni-calender.WED": "三",
    "uni-calender.THU": "四",
    "uni-calender.FRI": "五",
    "uni-calender.SAT": "六",
    "uni-calender.confirm": "确认"
  };
  const zhHant = {
    "uni-datetime-picker.selectDate": "選擇日期",
    "uni-datetime-picker.selectTime": "選擇時間",
    "uni-datetime-picker.selectDateTime": "選擇日期時間",
    "uni-datetime-picker.startDate": "開始日期",
    "uni-datetime-picker.endDate": "結束日期",
    "uni-datetime-picker.startTime": "開始时间",
    "uni-datetime-picker.endTime": "結束时间",
    "uni-datetime-picker.ok": "確定",
    "uni-datetime-picker.clear": "清除",
    "uni-datetime-picker.cancel": "取消",
    "uni-datetime-picker.year": "年",
    "uni-datetime-picker.month": "月",
    "uni-calender.SUN": "日",
    "uni-calender.MON": "一",
    "uni-calender.TUE": "二",
    "uni-calender.WED": "三",
    "uni-calender.THU": "四",
    "uni-calender.FRI": "五",
    "uni-calender.SAT": "六",
    "uni-calender.confirm": "確認"
  };
  const i18nMessages = {
    en,
    "zh-Hans": zhHans,
    "zh-Hant": zhHant
  };
  const {
    t: t$1
  } = initVueI18n(i18nMessages);
  const _sfc_main$v = {
    name: "UniDatetimePicker",
    data() {
      return {
        indicatorStyle: `height: 50px;`,
        visible: false,
        fixNvueBug: {},
        dateShow: true,
        timeShow: true,
        title: "日期和时间",
        // 输入框当前时间
        time: "",
        // 当前的年月日时分秒
        year: 1920,
        month: 0,
        day: 0,
        hour: 0,
        minute: 0,
        second: 0,
        // 起始时间
        startYear: 1920,
        startMonth: 1,
        startDay: 1,
        startHour: 0,
        startMinute: 0,
        startSecond: 0,
        // 结束时间
        endYear: 2120,
        endMonth: 12,
        endDay: 31,
        endHour: 23,
        endMinute: 59,
        endSecond: 59
      };
    },
    options: {
      virtualHost: true
    },
    props: {
      type: {
        type: String,
        default: "datetime"
      },
      value: {
        type: [String, Number],
        default: ""
      },
      modelValue: {
        type: [String, Number],
        default: ""
      },
      start: {
        type: [Number, String],
        default: ""
      },
      end: {
        type: [Number, String],
        default: ""
      },
      returnType: {
        type: String,
        default: "string"
      },
      disabled: {
        type: [Boolean, String],
        default: false
      },
      border: {
        type: [Boolean, String],
        default: true
      },
      hideSecond: {
        type: [Boolean, String],
        default: false
      }
    },
    watch: {
      modelValue: {
        handler(newVal) {
          if (newVal) {
            this.parseValue(fixIosDateFormat(newVal));
            this.initTime(false);
          } else {
            this.time = "";
            this.parseValue(Date.now());
          }
        },
        immediate: true
      },
      type: {
        handler(newValue) {
          if (newValue === "date") {
            this.dateShow = true;
            this.timeShow = false;
            this.title = "日期";
          } else if (newValue === "time") {
            this.dateShow = false;
            this.timeShow = true;
            this.title = "时间";
          } else {
            this.dateShow = true;
            this.timeShow = true;
            this.title = "日期和时间";
          }
        },
        immediate: true
      },
      start: {
        handler(newVal) {
          this.parseDatetimeRange(fixIosDateFormat(newVal), "start");
        },
        immediate: true
      },
      end: {
        handler(newVal) {
          this.parseDatetimeRange(fixIosDateFormat(newVal), "end");
        },
        immediate: true
      },
      // 月、日、时、分、秒可选范围变化后，检查当前值是否在范围内，不在则当前值重置为可选范围第一项
      months(newVal) {
        this.checkValue("month", this.month, newVal);
      },
      days(newVal) {
        this.checkValue("day", this.day, newVal);
      },
      hours(newVal) {
        this.checkValue("hour", this.hour, newVal);
      },
      minutes(newVal) {
        this.checkValue("minute", this.minute, newVal);
      },
      seconds(newVal) {
        this.checkValue("second", this.second, newVal);
      }
    },
    computed: {
      // 当前年、月、日、时、分、秒选择范围
      years() {
        return this.getCurrentRange("year");
      },
      months() {
        return this.getCurrentRange("month");
      },
      days() {
        return this.getCurrentRange("day");
      },
      hours() {
        return this.getCurrentRange("hour");
      },
      minutes() {
        return this.getCurrentRange("minute");
      },
      seconds() {
        return this.getCurrentRange("second");
      },
      // picker 当前值数组
      ymd() {
        return [this.year - this.minYear, this.month - this.minMonth, this.day - this.minDay];
      },
      hms() {
        return [this.hour - this.minHour, this.minute - this.minMinute, this.second - this.minSecond];
      },
      // 当前 date 是 start
      currentDateIsStart() {
        return this.year === this.startYear && this.month === this.startMonth && this.day === this.startDay;
      },
      // 当前 date 是 end
      currentDateIsEnd() {
        return this.year === this.endYear && this.month === this.endMonth && this.day === this.endDay;
      },
      // 当前年、月、日、时、分、秒的最小值和最大值
      minYear() {
        return this.startYear;
      },
      maxYear() {
        return this.endYear;
      },
      minMonth() {
        if (this.year === this.startYear) {
          return this.startMonth;
        } else {
          return 1;
        }
      },
      maxMonth() {
        if (this.year === this.endYear) {
          return this.endMonth;
        } else {
          return 12;
        }
      },
      minDay() {
        if (this.year === this.startYear && this.month === this.startMonth) {
          return this.startDay;
        } else {
          return 1;
        }
      },
      maxDay() {
        if (this.year === this.endYear && this.month === this.endMonth) {
          return this.endDay;
        } else {
          return this.daysInMonth(this.year, this.month);
        }
      },
      minHour() {
        if (this.type === "datetime") {
          if (this.currentDateIsStart) {
            return this.startHour;
          } else {
            return 0;
          }
        }
        if (this.type === "time") {
          return this.startHour;
        }
      },
      maxHour() {
        if (this.type === "datetime") {
          if (this.currentDateIsEnd) {
            return this.endHour;
          } else {
            return 23;
          }
        }
        if (this.type === "time") {
          return this.endHour;
        }
      },
      minMinute() {
        if (this.type === "datetime") {
          if (this.currentDateIsStart && this.hour === this.startHour) {
            return this.startMinute;
          } else {
            return 0;
          }
        }
        if (this.type === "time") {
          if (this.hour === this.startHour) {
            return this.startMinute;
          } else {
            return 0;
          }
        }
      },
      maxMinute() {
        if (this.type === "datetime") {
          if (this.currentDateIsEnd && this.hour === this.endHour) {
            return this.endMinute;
          } else {
            return 59;
          }
        }
        if (this.type === "time") {
          if (this.hour === this.endHour) {
            return this.endMinute;
          } else {
            return 59;
          }
        }
      },
      minSecond() {
        if (this.type === "datetime") {
          if (this.currentDateIsStart && this.hour === this.startHour && this.minute === this.startMinute) {
            return this.startSecond;
          } else {
            return 0;
          }
        }
        if (this.type === "time") {
          if (this.hour === this.startHour && this.minute === this.startMinute) {
            return this.startSecond;
          } else {
            return 0;
          }
        }
      },
      maxSecond() {
        if (this.type === "datetime") {
          if (this.currentDateIsEnd && this.hour === this.endHour && this.minute === this.endMinute) {
            return this.endSecond;
          } else {
            return 59;
          }
        }
        if (this.type === "time") {
          if (this.hour === this.endHour && this.minute === this.endMinute) {
            return this.endSecond;
          } else {
            return 59;
          }
        }
      },
      /**
       * for i18n
       */
      selectTimeText() {
        return t$1("uni-datetime-picker.selectTime");
      },
      okText() {
        return t$1("uni-datetime-picker.ok");
      },
      clearText() {
        return t$1("uni-datetime-picker.clear");
      },
      cancelText() {
        return t$1("uni-datetime-picker.cancel");
      }
    },
    mounted() {
    },
    methods: {
      /**
       * @param {Object} item
       * 小于 10 在前面加个 0
       */
      lessThanTen(item) {
        return item < 10 ? "0" + item : item;
      },
      /**
       * 解析时分秒字符串，例如：00:00:00
       * @param {String} timeString
       */
      parseTimeType(timeString) {
        if (timeString) {
          let timeArr = timeString.split(":");
          this.hour = Number(timeArr[0]);
          this.minute = Number(timeArr[1]);
          this.second = Number(timeArr[2]);
        }
      },
      /**
       * 解析选择器初始值，类型可以是字符串、时间戳，例如：2000-10-02、'08:30:00'、 1610695109000
       * @param {String | Number} datetime
       */
      initPickerValue(datetime) {
        let defaultValue = null;
        if (datetime) {
          defaultValue = this.compareValueWithStartAndEnd(datetime, this.start, this.end);
        } else {
          defaultValue = Date.now();
          defaultValue = this.compareValueWithStartAndEnd(defaultValue, this.start, this.end);
        }
        this.parseValue(defaultValue);
      },
      /**
       * 初始值规则：
       * - 用户设置初始值 value
       * 	- 设置了起始时间 start、终止时间 end，并 start < value < end，初始值为 value， 否则初始值为 start
       * 	- 只设置了起始时间 start，并 start < value，初始值为 value，否则初始值为 start
       * 	- 只设置了终止时间 end，并 value < end，初始值为 value，否则初始值为 end
       * 	- 无起始终止时间，则初始值为 value
       * - 无初始值 value，则初始值为当前本地时间 Date.now()
       * @param {Object} value
       * @param {Object} dateBase
       */
      compareValueWithStartAndEnd(value, start, end) {
        let winner = null;
        value = this.superTimeStamp(value);
        start = this.superTimeStamp(start);
        end = this.superTimeStamp(end);
        if (start && end) {
          if (value < start) {
            winner = new Date(start);
          } else if (value > end) {
            winner = new Date(end);
          } else {
            winner = new Date(value);
          }
        } else if (start && !end) {
          winner = start <= value ? new Date(value) : new Date(start);
        } else if (!start && end) {
          winner = value <= end ? new Date(value) : new Date(end);
        } else {
          winner = new Date(value);
        }
        return winner;
      },
      /**
       * 转换为可比较的时间戳，接受日期、时分秒、时间戳
       * @param {Object} value
       */
      superTimeStamp(value) {
        let dateBase = "";
        if (this.type === "time" && value && typeof value === "string") {
          const now = /* @__PURE__ */ new Date();
          const year = now.getFullYear();
          const month = now.getMonth() + 1;
          const day = now.getDate();
          dateBase = year + "/" + month + "/" + day + " ";
        }
        if (Number(value)) {
          value = parseInt(value);
          dateBase = 0;
        }
        return this.createTimeStamp(dateBase + value);
      },
      /**
       * 解析默认值 value，字符串、时间戳
       * @param {Object} defaultTime
       */
      parseValue(value) {
        if (!value) {
          return;
        }
        if (this.type === "time" && typeof value === "string") {
          this.parseTimeType(value);
        } else {
          let defaultDate = null;
          defaultDate = new Date(value);
          if (this.type !== "time") {
            this.year = defaultDate.getFullYear();
            this.month = defaultDate.getMonth() + 1;
            this.day = defaultDate.getDate();
          }
          if (this.type !== "date") {
            this.hour = defaultDate.getHours();
            this.minute = defaultDate.getMinutes();
            this.second = defaultDate.getSeconds();
          }
        }
        if (this.hideSecond) {
          this.second = 0;
        }
      },
      /**
       * 解析可选择时间范围 start、end，年月日字符串、时间戳
       * @param {Object} defaultTime
       */
      parseDatetimeRange(point, pointType) {
        if (!point) {
          if (pointType === "start") {
            this.startYear = 1920;
            this.startMonth = 1;
            this.startDay = 1;
            this.startHour = 0;
            this.startMinute = 0;
            this.startSecond = 0;
          }
          if (pointType === "end") {
            this.endYear = 2120;
            this.endMonth = 12;
            this.endDay = 31;
            this.endHour = 23;
            this.endMinute = 59;
            this.endSecond = 59;
          }
          return;
        }
        if (this.type === "time") {
          const pointArr = point.split(":");
          this[pointType + "Hour"] = Number(pointArr[0]);
          this[pointType + "Minute"] = Number(pointArr[1]);
          this[pointType + "Second"] = Number(pointArr[2]);
        } else {
          if (!point) {
            pointType === "start" ? this.startYear = this.year - 60 : this.endYear = this.year + 60;
            return;
          }
          if (Number(point)) {
            point = parseInt(point);
          }
          const hasTime = /[0-9]:[0-9]/;
          if (this.type === "datetime" && pointType === "end" && typeof point === "string" && !hasTime.test(
            point
          )) {
            point = point + " 23:59:59";
          }
          const pointDate = new Date(point);
          this[pointType + "Year"] = pointDate.getFullYear();
          this[pointType + "Month"] = pointDate.getMonth() + 1;
          this[pointType + "Day"] = pointDate.getDate();
          if (this.type === "datetime") {
            this[pointType + "Hour"] = pointDate.getHours();
            this[pointType + "Minute"] = pointDate.getMinutes();
            this[pointType + "Second"] = pointDate.getSeconds();
          }
        }
      },
      // 获取 年、月、日、时、分、秒 当前可选范围
      getCurrentRange(value) {
        const range = [];
        for (let i = this["min" + this.capitalize(value)]; i <= this["max" + this.capitalize(value)]; i++) {
          range.push(i);
        }
        return range;
      },
      // 字符串首字母大写
      capitalize(str) {
        return str.charAt(0).toUpperCase() + str.slice(1);
      },
      // 检查当前值是否在范围内，不在则当前值重置为可选范围第一项
      checkValue(name2, value, values) {
        if (values.indexOf(value) === -1) {
          this[name2] = values[0];
        }
      },
      // 每个月的实际天数
      daysInMonth(year, month) {
        return new Date(year, month, 0).getDate();
      },
      /**
       * 生成时间戳
       * @param {Object} time
       */
      createTimeStamp(time) {
        if (!time)
          return;
        if (typeof time === "number") {
          return time;
        } else {
          time = time.replace(/-/g, "/");
          if (this.type === "date") {
            time = time + " 00:00:00";
          }
          return Date.parse(time);
        }
      },
      /**
       * 生成日期或时间的字符串
       */
      createDomSting() {
        const yymmdd = this.year + "-" + this.lessThanTen(this.month) + "-" + this.lessThanTen(this.day);
        let hhmmss = this.lessThanTen(this.hour) + ":" + this.lessThanTen(this.minute);
        if (!this.hideSecond) {
          hhmmss = hhmmss + ":" + this.lessThanTen(this.second);
        }
        if (this.type === "date") {
          return yymmdd;
        } else if (this.type === "time") {
          return hhmmss;
        } else {
          return yymmdd + " " + hhmmss;
        }
      },
      /**
       * 初始化返回值，并抛出 change 事件
       */
      initTime(emit = true) {
        this.time = this.createDomSting();
        if (!emit)
          return;
        if (this.returnType === "timestamp" && this.type !== "time") {
          this.$emit("change", this.createTimeStamp(this.time));
          this.$emit("input", this.createTimeStamp(this.time));
          this.$emit("update:modelValue", this.createTimeStamp(this.time));
        } else {
          this.$emit("change", this.time);
          this.$emit("input", this.time);
          this.$emit("update:modelValue", this.time);
        }
      },
      /**
       * 用户选择日期或时间更新 data
       * @param {Object} e
       */
      bindDateChange(e) {
        const val = e.detail.value;
        this.year = this.years[val[0]];
        this.month = this.months[val[1]];
        this.day = this.days[val[2]];
      },
      bindTimeChange(e) {
        const val = e.detail.value;
        this.hour = this.hours[val[0]];
        this.minute = this.minutes[val[1]];
        this.second = this.seconds[val[2]];
      },
      /**
       * 初始化弹出层
       */
      initTimePicker() {
        if (this.disabled)
          return;
        const value = fixIosDateFormat(this.time);
        this.initPickerValue(value);
        this.visible = !this.visible;
      },
      /**
       * 触发或关闭弹框
       */
      tiggerTimePicker(e) {
        this.visible = !this.visible;
      },
      /**
       * 用户点击“清空”按钮，清空当前值
       */
      clearTime() {
        this.time = "";
        this.$emit("change", this.time);
        this.$emit("input", this.time);
        this.$emit("update:modelValue", this.time);
        this.tiggerTimePicker();
      },
      /**
       * 用户点击“确定”按钮
       */
      setTime() {
        this.initTime();
        this.tiggerTimePicker();
      }
    }
  };
  function _sfc_render$u(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "uni-datetime-picker" }, [
      vue.createElementVNode("view", {
        onClick: _cache[0] || (_cache[0] = (...args) => $options.initTimePicker && $options.initTimePicker(...args))
      }, [
        vue.renderSlot(_ctx.$slots, "default", {}, () => [
          vue.createElementVNode(
            "view",
            {
              class: vue.normalizeClass(["uni-datetime-picker-timebox-pointer", { "uni-datetime-picker-disabled": $props.disabled, "uni-datetime-picker-timebox": $props.border }])
            },
            [
              vue.createElementVNode(
                "text",
                { class: "uni-datetime-picker-text" },
                vue.toDisplayString($data.time),
                1
                /* TEXT */
              ),
              !$data.time ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "uni-datetime-picker-time"
              }, [
                vue.createElementVNode(
                  "text",
                  { class: "uni-datetime-picker-text" },
                  vue.toDisplayString($options.selectTimeText),
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true)
            ],
            2
            /* CLASS */
          )
        ], true)
      ]),
      $data.visible ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 0,
        id: "mask",
        class: "uni-datetime-picker-mask",
        onClick: _cache[1] || (_cache[1] = (...args) => $options.tiggerTimePicker && $options.tiggerTimePicker(...args))
      })) : vue.createCommentVNode("v-if", true),
      $data.visible ? (vue.openBlock(), vue.createElementBlock(
        "view",
        {
          key: 1,
          class: vue.normalizeClass(["uni-datetime-picker-popup", [$data.dateShow && $data.timeShow ? "" : "fix-nvue-height"]]),
          style: vue.normalizeStyle($data.fixNvueBug)
        },
        [
          vue.createElementVNode("view", { class: "uni-title" }, [
            vue.createElementVNode(
              "text",
              { class: "uni-datetime-picker-text" },
              vue.toDisplayString($options.selectTimeText),
              1
              /* TEXT */
            )
          ]),
          $data.dateShow ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 0,
            class: "uni-datetime-picker__container-box"
          }, [
            vue.createElementVNode("picker-view", {
              class: "uni-datetime-picker-view",
              "indicator-style": $data.indicatorStyle,
              value: $options.ymd,
              onChange: _cache[2] || (_cache[2] = (...args) => $options.bindDateChange && $options.bindDateChange(...args))
            }, [
              vue.createElementVNode("picker-view-column", null, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($options.years, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "uni-datetime-picker-item",
                      key: index
                    }, [
                      vue.createElementVNode(
                        "text",
                        { class: "uni-datetime-picker-item" },
                        vue.toDisplayString($options.lessThanTen(item)),
                        1
                        /* TEXT */
                      )
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ]),
              vue.createElementVNode("picker-view-column", null, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($options.months, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "uni-datetime-picker-item",
                      key: index
                    }, [
                      vue.createElementVNode(
                        "text",
                        { class: "uni-datetime-picker-item" },
                        vue.toDisplayString($options.lessThanTen(item)),
                        1
                        /* TEXT */
                      )
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ]),
              vue.createElementVNode("picker-view-column", null, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($options.days, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "uni-datetime-picker-item",
                      key: index
                    }, [
                      vue.createElementVNode(
                        "text",
                        { class: "uni-datetime-picker-item" },
                        vue.toDisplayString($options.lessThanTen(item)),
                        1
                        /* TEXT */
                      )
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ], 40, ["indicator-style", "value"]),
            vue.createCommentVNode(" 兼容 nvue 不支持伪类 "),
            vue.createElementVNode("text", { class: "uni-datetime-picker-sign sign-left" }, "-"),
            vue.createElementVNode("text", { class: "uni-datetime-picker-sign sign-right" }, "-")
          ])) : vue.createCommentVNode("v-if", true),
          $data.timeShow ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 1,
            class: "uni-datetime-picker__container-box"
          }, [
            vue.createElementVNode("picker-view", {
              class: vue.normalizeClass(["uni-datetime-picker-view", [$props.hideSecond ? "time-hide-second" : ""]]),
              "indicator-style": $data.indicatorStyle,
              value: $options.hms,
              onChange: _cache[3] || (_cache[3] = (...args) => $options.bindTimeChange && $options.bindTimeChange(...args))
            }, [
              vue.createElementVNode("picker-view-column", null, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($options.hours, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "uni-datetime-picker-item",
                      key: index
                    }, [
                      vue.createElementVNode(
                        "text",
                        { class: "uni-datetime-picker-item" },
                        vue.toDisplayString($options.lessThanTen(item)),
                        1
                        /* TEXT */
                      )
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ]),
              vue.createElementVNode("picker-view-column", null, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($options.minutes, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "uni-datetime-picker-item",
                      key: index
                    }, [
                      vue.createElementVNode(
                        "text",
                        { class: "uni-datetime-picker-item" },
                        vue.toDisplayString($options.lessThanTen(item)),
                        1
                        /* TEXT */
                      )
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ]),
              !$props.hideSecond ? (vue.openBlock(), vue.createElementBlock("picker-view-column", { key: 0 }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($options.seconds, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "uni-datetime-picker-item",
                      key: index
                    }, [
                      vue.createElementVNode(
                        "text",
                        { class: "uni-datetime-picker-item" },
                        vue.toDisplayString($options.lessThanTen(item)),
                        1
                        /* TEXT */
                      )
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])) : vue.createCommentVNode("v-if", true)
            ], 42, ["indicator-style", "value"]),
            vue.createCommentVNode(" 兼容 nvue 不支持伪类 "),
            vue.createElementVNode(
              "text",
              {
                class: vue.normalizeClass(["uni-datetime-picker-sign", [$props.hideSecond ? "sign-center" : "sign-left"]])
              },
              ":",
              2
              /* CLASS */
            ),
            !$props.hideSecond ? (vue.openBlock(), vue.createElementBlock("text", {
              key: 0,
              class: "uni-datetime-picker-sign sign-right"
            }, ":")) : vue.createCommentVNode("v-if", true)
          ])) : vue.createCommentVNode("v-if", true),
          vue.createElementVNode("view", { class: "uni-datetime-picker-btn" }, [
            vue.createElementVNode("view", {
              onClick: _cache[4] || (_cache[4] = (...args) => $options.clearTime && $options.clearTime(...args))
            }, [
              vue.createElementVNode(
                "text",
                { class: "uni-datetime-picker-btn-text" },
                vue.toDisplayString($options.clearText),
                1
                /* TEXT */
              )
            ]),
            vue.createElementVNode("view", { class: "uni-datetime-picker-btn-group" }, [
              vue.createElementVNode("view", {
                class: "uni-datetime-picker-cancel",
                onClick: _cache[5] || (_cache[5] = (...args) => $options.tiggerTimePicker && $options.tiggerTimePicker(...args))
              }, [
                vue.createElementVNode(
                  "text",
                  { class: "uni-datetime-picker-btn-text" },
                  vue.toDisplayString($options.cancelText),
                  1
                  /* TEXT */
                )
              ]),
              vue.createElementVNode("view", {
                onClick: _cache[6] || (_cache[6] = (...args) => $options.setTime && $options.setTime(...args))
              }, [
                vue.createElementVNode(
                  "text",
                  { class: "uni-datetime-picker-btn-text" },
                  vue.toDisplayString($options.okText),
                  1
                  /* TEXT */
                )
              ])
            ])
          ])
        ],
        6
        /* CLASS, STYLE */
      )) : vue.createCommentVNode("v-if", true)
    ]);
  }
  const TimePicker = /* @__PURE__ */ _export_sfc(_sfc_main$v, [["render", _sfc_render$u], ["__scopeId", "data-v-1d532b70"], ["__file", "D:/Uniapp/htmlTest/赛创项目/uni_modules/uni-datetime-picker/components/uni-datetime-picker/time-picker.vue"]]);
  const {
    t
  } = initVueI18n(i18nMessages);
  const _sfc_main$u = {
    components: {
      calendarItem,
      timePicker: TimePicker
    },
    options: {
      virtualHost: true
    },
    props: {
      date: {
        type: String,
        default: ""
      },
      defTime: {
        type: [String, Object],
        default: ""
      },
      selectableTimes: {
        type: [Object],
        default() {
          return {};
        }
      },
      selected: {
        type: Array,
        default() {
          return [];
        }
      },
      startDate: {
        type: String,
        default: ""
      },
      endDate: {
        type: String,
        default: ""
      },
      startPlaceholder: {
        type: String,
        default: ""
      },
      endPlaceholder: {
        type: String,
        default: ""
      },
      range: {
        type: Boolean,
        default: false
      },
      hasTime: {
        type: Boolean,
        default: false
      },
      insert: {
        type: Boolean,
        default: true
      },
      showMonth: {
        type: Boolean,
        default: true
      },
      clearDate: {
        type: Boolean,
        default: true
      },
      checkHover: {
        type: Boolean,
        default: true
      },
      hideSecond: {
        type: [Boolean],
        default: false
      },
      pleStatus: {
        type: Object,
        default() {
          return {
            before: "",
            after: "",
            data: [],
            fulldate: ""
          };
        }
      },
      defaultValue: {
        type: [String, Object, Array],
        default: ""
      }
    },
    data() {
      return {
        show: false,
        weeks: [],
        calendar: {},
        nowDate: {},
        aniMaskShow: false,
        firstEnter: true,
        time: "",
        timeRange: {
          startTime: "",
          endTime: ""
        },
        tempSingleDate: "",
        tempRange: {
          before: "",
          after: ""
        }
      };
    },
    watch: {
      date: {
        immediate: true,
        handler(newVal) {
          if (!this.range) {
            this.tempSingleDate = newVal;
            setTimeout(() => {
              this.init(newVal);
            }, 100);
          }
        }
      },
      defTime: {
        immediate: true,
        handler(newVal) {
          if (!this.range) {
            this.time = newVal;
          } else {
            this.timeRange.startTime = newVal.start;
            this.timeRange.endTime = newVal.end;
          }
        }
      },
      startDate(val) {
        if (!this.cale) {
          return;
        }
        this.cale.setStartDate(val);
        this.cale.setDate(this.nowDate.fullDate);
        this.weeks = this.cale.weeks;
      },
      endDate(val) {
        if (!this.cale) {
          return;
        }
        this.cale.setEndDate(val);
        this.cale.setDate(this.nowDate.fullDate);
        this.weeks = this.cale.weeks;
      },
      selected(newVal) {
        if (!this.cale) {
          return;
        }
        this.cale.setSelectInfo(this.nowDate.fullDate, newVal);
        this.weeks = this.cale.weeks;
      },
      pleStatus: {
        immediate: true,
        handler(newVal) {
          const {
            before,
            after,
            fulldate,
            which
          } = newVal;
          this.tempRange.before = before;
          this.tempRange.after = after;
          setTimeout(() => {
            if (fulldate) {
              this.cale.setHoverMultiple(fulldate);
              if (before && after) {
                this.cale.lastHover = true;
                if (this.rangeWithinMonth(after, before))
                  return;
                this.setDate(before);
              } else {
                this.cale.setMultiple(fulldate);
                this.setDate(this.nowDate.fullDate);
                this.calendar.fullDate = "";
                this.cale.lastHover = false;
              }
            } else {
              if (!this.cale) {
                return;
              }
              this.cale.setDefaultMultiple(before, after);
              if (which === "left" && before) {
                this.setDate(before);
                this.weeks = this.cale.weeks;
              } else if (after) {
                this.setDate(after);
                this.weeks = this.cale.weeks;
              }
              this.cale.lastHover = true;
            }
          }, 16);
        }
      }
    },
    computed: {
      timepickerStartTime() {
        const activeDate = this.range ? this.tempRange.before : this.calendar.fullDate;
        return activeDate === this.startDate ? this.selectableTimes.start : "";
      },
      timepickerEndTime() {
        const activeDate = this.range ? this.tempRange.after : this.calendar.fullDate;
        return activeDate === this.endDate ? this.selectableTimes.end : "";
      },
      /**
       * for i18n
       */
      selectDateText() {
        return t("uni-datetime-picker.selectDate");
      },
      startDateText() {
        return this.startPlaceholder || t("uni-datetime-picker.startDate");
      },
      endDateText() {
        return this.endPlaceholder || t("uni-datetime-picker.endDate");
      },
      okText() {
        return t("uni-datetime-picker.ok");
      },
      yearText() {
        return t("uni-datetime-picker.year");
      },
      monthText() {
        return t("uni-datetime-picker.month");
      },
      MONText() {
        return t("uni-calender.MON");
      },
      TUEText() {
        return t("uni-calender.TUE");
      },
      WEDText() {
        return t("uni-calender.WED");
      },
      THUText() {
        return t("uni-calender.THU");
      },
      FRIText() {
        return t("uni-calender.FRI");
      },
      SATText() {
        return t("uni-calender.SAT");
      },
      SUNText() {
        return t("uni-calender.SUN");
      },
      confirmText() {
        return t("uni-calender.confirm");
      }
    },
    created() {
      this.cale = new Calendar$1({
        selected: this.selected,
        startDate: this.startDate,
        endDate: this.endDate,
        range: this.range
      });
      this.init(this.date);
    },
    methods: {
      leaveCale() {
        this.firstEnter = true;
      },
      handleMouse(weeks) {
        if (weeks.disable)
          return;
        if (this.cale.lastHover)
          return;
        let {
          before,
          after
        } = this.cale.multipleStatus;
        if (!before)
          return;
        this.calendar = weeks;
        this.cale.setHoverMultiple(this.calendar.fullDate);
        this.weeks = this.cale.weeks;
        if (this.firstEnter) {
          this.$emit("firstEnterCale", this.cale.multipleStatus);
          this.firstEnter = false;
        }
      },
      rangeWithinMonth(A, B) {
        const [yearA, monthA] = A.split("-");
        const [yearB, monthB] = B.split("-");
        return yearA === yearB && monthA === monthB;
      },
      // 蒙版点击事件
      maskClick() {
        this.close();
        this.$emit("maskClose");
      },
      clearCalender() {
        if (this.range) {
          this.timeRange.startTime = "";
          this.timeRange.endTime = "";
          this.tempRange.before = "";
          this.tempRange.after = "";
          this.cale.multipleStatus.before = "";
          this.cale.multipleStatus.after = "";
          this.cale.multipleStatus.data = [];
          this.cale.lastHover = false;
        } else {
          this.time = "";
          this.tempSingleDate = "";
        }
        this.calendar.fullDate = "";
        this.setDate(/* @__PURE__ */ new Date());
      },
      bindDateChange(e) {
        const value = e.detail.value + "-1";
        this.setDate(value);
      },
      /**
       * 初始化日期显示
       * @param {Object} date
       */
      init(date) {
        if (!this.cale) {
          return;
        }
        this.cale.setDate(date || /* @__PURE__ */ new Date());
        this.weeks = this.cale.weeks;
        this.nowDate = this.cale.getInfo(date);
        this.calendar = {
          ...this.nowDate
        };
        if (!date) {
          this.calendar.fullDate = "";
          if (this.defaultValue && !this.range) {
            const defaultDate = new Date(this.defaultValue);
            const fullDate = getDate(defaultDate);
            const year = defaultDate.getFullYear();
            const month = defaultDate.getMonth() + 1;
            const date2 = defaultDate.getDate();
            const day = defaultDate.getDay();
            this.calendar = {
              fullDate,
              year,
              month,
              date: date2,
              day
            }, this.tempSingleDate = fullDate;
            this.time = getTime(defaultDate, this.hideSecond);
          }
        }
      },
      /**
       * 打开日历弹窗
       */
      open() {
        if (this.clearDate && !this.insert) {
          this.cale.cleanMultipleStatus();
          this.init(this.date);
        }
        this.show = true;
        this.$nextTick(() => {
          setTimeout(() => {
            this.aniMaskShow = true;
          }, 50);
        });
      },
      /**
       * 关闭日历弹窗
       */
      close() {
        this.aniMaskShow = false;
        this.$nextTick(() => {
          setTimeout(() => {
            this.show = false;
            this.$emit("close");
          }, 300);
        });
      },
      /**
       * 确认按钮
       */
      confirm() {
        this.setEmit("confirm");
        this.close();
      },
      /**
       * 变化触发
       */
      change(isSingleChange) {
        if (!this.insert && !isSingleChange)
          return;
        this.setEmit("change");
      },
      /**
       * 选择月份触发
       */
      monthSwitch() {
        let {
          year,
          month
        } = this.nowDate;
        this.$emit("monthSwitch", {
          year,
          month: Number(month)
        });
      },
      /**
       * 派发事件
       * @param {Object} name
       */
      setEmit(name2) {
        if (!this.range) {
          if (!this.calendar.fullDate) {
            this.calendar = this.cale.getInfo(/* @__PURE__ */ new Date());
            this.tempSingleDate = this.calendar.fullDate;
          }
          if (this.hasTime && !this.time) {
            this.time = getTime(/* @__PURE__ */ new Date(), this.hideSecond);
          }
        }
        let {
          year,
          month,
          date,
          fullDate,
          extraInfo
        } = this.calendar;
        this.$emit(name2, {
          range: this.cale.multipleStatus,
          year,
          month,
          date,
          time: this.time,
          timeRange: this.timeRange,
          fulldate: fullDate,
          extraInfo: extraInfo || {}
        });
      },
      /**
       * 选择天触发
       * @param {Object} weeks
       */
      choiceDate(weeks) {
        if (weeks.disable)
          return;
        this.calendar = weeks;
        this.calendar.userChecked = true;
        this.cale.setMultiple(this.calendar.fullDate, true);
        this.weeks = this.cale.weeks;
        this.tempSingleDate = this.calendar.fullDate;
        const beforeDate = new Date(this.cale.multipleStatus.before).getTime();
        const afterDate = new Date(this.cale.multipleStatus.after).getTime();
        if (beforeDate > afterDate && afterDate) {
          this.tempRange.before = this.cale.multipleStatus.after;
          this.tempRange.after = this.cale.multipleStatus.before;
        } else {
          this.tempRange.before = this.cale.multipleStatus.before;
          this.tempRange.after = this.cale.multipleStatus.after;
        }
        this.change(true);
      },
      changeMonth(type) {
        let newDate;
        if (type === "pre") {
          newDate = this.cale.getPreMonthObj(this.nowDate.fullDate).fullDate;
        } else if (type === "next") {
          newDate = this.cale.getNextMonthObj(this.nowDate.fullDate).fullDate;
        }
        this.setDate(newDate);
        this.monthSwitch();
      },
      /**
       * 设置日期
       * @param {Object} date
       */
      setDate(date) {
        this.cale.setDate(date);
        this.weeks = this.cale.weeks;
        this.nowDate = this.cale.getInfo(date);
      }
    }
  };
  function _sfc_render$t(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_calendar_item = vue.resolveComponent("calendar-item");
    const _component_time_picker = vue.resolveComponent("time-picker");
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), uniIcons);
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        class: "uni-calendar",
        onMouseleave: _cache[9] || (_cache[9] = (...args) => $options.leaveCale && $options.leaveCale(...args))
      },
      [
        !$props.insert && $data.show ? (vue.openBlock(), vue.createElementBlock(
          "view",
          {
            key: 0,
            class: vue.normalizeClass(["uni-calendar__mask", { "uni-calendar--mask-show": $data.aniMaskShow }]),
            onClick: _cache[0] || (_cache[0] = (...args) => $options.maskClick && $options.maskClick(...args))
          },
          null,
          2
          /* CLASS */
        )) : vue.createCommentVNode("v-if", true),
        $props.insert || $data.show ? (vue.openBlock(), vue.createElementBlock(
          "view",
          {
            key: 1,
            class: vue.normalizeClass(["uni-calendar__content", { "uni-calendar--fixed": !$props.insert, "uni-calendar--ani-show": $data.aniMaskShow, "uni-calendar__content-mobile": $data.aniMaskShow }])
          },
          [
            vue.createElementVNode(
              "view",
              {
                class: vue.normalizeClass(["uni-calendar__header", { "uni-calendar__header-mobile": !$props.insert }])
              },
              [
                vue.createElementVNode("view", {
                  class: "uni-calendar__header-btn-box",
                  onClick: _cache[1] || (_cache[1] = vue.withModifiers(($event) => $options.changeMonth("pre"), ["stop"]))
                }, [
                  vue.createElementVNode("view", { class: "uni-calendar__header-btn uni-calendar--left" })
                ]),
                vue.createElementVNode("picker", {
                  mode: "date",
                  value: $props.date,
                  fields: "month",
                  onChange: _cache[2] || (_cache[2] = (...args) => $options.bindDateChange && $options.bindDateChange(...args))
                }, [
                  vue.createElementVNode(
                    "text",
                    { class: "uni-calendar__header-text" },
                    vue.toDisplayString(($data.nowDate.year || "") + $options.yearText + ($data.nowDate.month || "") + $options.monthText),
                    1
                    /* TEXT */
                  )
                ], 40, ["value"]),
                vue.createElementVNode("view", {
                  class: "uni-calendar__header-btn-box",
                  onClick: _cache[3] || (_cache[3] = vue.withModifiers(($event) => $options.changeMonth("next"), ["stop"]))
                }, [
                  vue.createElementVNode("view", { class: "uni-calendar__header-btn uni-calendar--right" })
                ]),
                !$props.insert ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "dialog-close",
                  onClick: _cache[4] || (_cache[4] = (...args) => $options.maskClick && $options.maskClick(...args))
                }, [
                  vue.createElementVNode("view", {
                    class: "dialog-close-plus",
                    "data-id": "close"
                  }),
                  vue.createElementVNode("view", {
                    class: "dialog-close-plus dialog-close-rotate",
                    "data-id": "close"
                  })
                ])) : vue.createCommentVNode("v-if", true)
              ],
              2
              /* CLASS */
            ),
            vue.createElementVNode("view", { class: "uni-calendar__box" }, [
              $props.showMonth ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "uni-calendar__box-bg"
              }, [
                vue.createElementVNode(
                  "text",
                  { class: "uni-calendar__box-bg-text" },
                  vue.toDisplayString($data.nowDate.month),
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true),
              vue.createElementVNode("view", {
                class: "uni-calendar__weeks",
                style: { "padding-bottom": "7px" }
              }, [
                vue.createElementVNode("view", { class: "uni-calendar__weeks-day" }, [
                  vue.createElementVNode(
                    "text",
                    { class: "uni-calendar__weeks-day-text" },
                    vue.toDisplayString($options.SUNText),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "uni-calendar__weeks-day" }, [
                  vue.createElementVNode(
                    "text",
                    { class: "uni-calendar__weeks-day-text" },
                    vue.toDisplayString($options.MONText),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "uni-calendar__weeks-day" }, [
                  vue.createElementVNode(
                    "text",
                    { class: "uni-calendar__weeks-day-text" },
                    vue.toDisplayString($options.TUEText),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "uni-calendar__weeks-day" }, [
                  vue.createElementVNode(
                    "text",
                    { class: "uni-calendar__weeks-day-text" },
                    vue.toDisplayString($options.WEDText),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "uni-calendar__weeks-day" }, [
                  vue.createElementVNode(
                    "text",
                    { class: "uni-calendar__weeks-day-text" },
                    vue.toDisplayString($options.THUText),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "uni-calendar__weeks-day" }, [
                  vue.createElementVNode(
                    "text",
                    { class: "uni-calendar__weeks-day-text" },
                    vue.toDisplayString($options.FRIText),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "uni-calendar__weeks-day" }, [
                  vue.createElementVNode(
                    "text",
                    { class: "uni-calendar__weeks-day-text" },
                    vue.toDisplayString($options.SATText),
                    1
                    /* TEXT */
                  )
                ])
              ]),
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($data.weeks, (item, weekIndex) => {
                  return vue.openBlock(), vue.createElementBlock("view", {
                    class: "uni-calendar__weeks",
                    key: weekIndex
                  }, [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList(item, (weeks, weeksIndex) => {
                        return vue.openBlock(), vue.createElementBlock("view", {
                          class: "uni-calendar__weeks-item",
                          key: weeksIndex
                        }, [
                          vue.createVNode(_component_calendar_item, {
                            class: "uni-calendar-item--hook",
                            weeks,
                            calendar: $data.calendar,
                            selected: $props.selected,
                            checkHover: $props.range,
                            onChange: $options.choiceDate,
                            onHandleMouse: $options.handleMouse
                          }, null, 8, ["weeks", "calendar", "selected", "checkHover", "onChange", "onHandleMouse"])
                        ]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    ))
                  ]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ]),
            !$props.insert && !$props.range && $props.hasTime ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "uni-date-changed uni-calendar--fixed-top",
              style: { "padding": "0 80px" }
            }, [
              vue.createElementVNode(
                "view",
                { class: "uni-date-changed--time-date" },
                vue.toDisplayString($data.tempSingleDate ? $data.tempSingleDate : $options.selectDateText),
                1
                /* TEXT */
              ),
              vue.createVNode(_component_time_picker, {
                type: "time",
                start: $options.timepickerStartTime,
                end: $options.timepickerEndTime,
                modelValue: $data.time,
                "onUpdate:modelValue": _cache[5] || (_cache[5] = ($event) => $data.time = $event),
                disabled: !$data.tempSingleDate,
                border: false,
                "hide-second": $props.hideSecond,
                class: "time-picker-style"
              }, null, 8, ["start", "end", "modelValue", "disabled", "hide-second"])
            ])) : vue.createCommentVNode("v-if", true),
            !$props.insert && $props.range && $props.hasTime ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 1,
              class: "uni-date-changed uni-calendar--fixed-top"
            }, [
              vue.createElementVNode("view", { class: "uni-date-changed--time-start" }, [
                vue.createElementVNode(
                  "view",
                  { class: "uni-date-changed--time-date" },
                  vue.toDisplayString($data.tempRange.before ? $data.tempRange.before : $options.startDateText),
                  1
                  /* TEXT */
                ),
                vue.createVNode(_component_time_picker, {
                  type: "time",
                  start: $options.timepickerStartTime,
                  modelValue: $data.timeRange.startTime,
                  "onUpdate:modelValue": _cache[6] || (_cache[6] = ($event) => $data.timeRange.startTime = $event),
                  border: false,
                  "hide-second": $props.hideSecond,
                  disabled: !$data.tempRange.before,
                  class: "time-picker-style"
                }, null, 8, ["start", "modelValue", "hide-second", "disabled"])
              ]),
              vue.createElementVNode("view", { style: { "line-height": "50px" } }, [
                vue.createVNode(_component_uni_icons, {
                  type: "arrowthinright",
                  color: "#999"
                })
              ]),
              vue.createElementVNode("view", { class: "uni-date-changed--time-end" }, [
                vue.createElementVNode(
                  "view",
                  { class: "uni-date-changed--time-date" },
                  vue.toDisplayString($data.tempRange.after ? $data.tempRange.after : $options.endDateText),
                  1
                  /* TEXT */
                ),
                vue.createVNode(_component_time_picker, {
                  type: "time",
                  end: $options.timepickerEndTime,
                  modelValue: $data.timeRange.endTime,
                  "onUpdate:modelValue": _cache[7] || (_cache[7] = ($event) => $data.timeRange.endTime = $event),
                  border: false,
                  "hide-second": $props.hideSecond,
                  disabled: !$data.tempRange.after,
                  class: "time-picker-style"
                }, null, 8, ["end", "modelValue", "hide-second", "disabled"])
              ])
            ])) : vue.createCommentVNode("v-if", true),
            !$props.insert ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 2,
              class: "uni-date-changed uni-date-btn--ok"
            }, [
              vue.createElementVNode(
                "view",
                {
                  class: "uni-datetime-picker--btn",
                  onClick: _cache[8] || (_cache[8] = (...args) => $options.confirm && $options.confirm(...args))
                },
                vue.toDisplayString($options.confirmText),
                1
                /* TEXT */
              )
            ])) : vue.createCommentVNode("v-if", true)
          ],
          2
          /* CLASS */
        )) : vue.createCommentVNode("v-if", true)
      ],
      32
      /* NEED_HYDRATION */
    );
  }
  const Calendar = /* @__PURE__ */ _export_sfc(_sfc_main$u, [["render", _sfc_render$t], ["__scopeId", "data-v-1d379219"], ["__file", "D:/Uniapp/htmlTest/赛创项目/uni_modules/uni-datetime-picker/components/uni-datetime-picker/calendar.vue"]]);
  const _sfc_main$t = {
    name: "UniDatetimePicker",
    options: {
      virtualHost: true
    },
    components: {
      Calendar,
      TimePicker
    },
    data() {
      return {
        isRange: false,
        hasTime: false,
        displayValue: "",
        inputDate: "",
        calendarDate: "",
        pickerTime: "",
        calendarRange: {
          startDate: "",
          startTime: "",
          endDate: "",
          endTime: ""
        },
        displayRangeValue: {
          startDate: "",
          endDate: ""
        },
        tempRange: {
          startDate: "",
          startTime: "",
          endDate: "",
          endTime: ""
        },
        // 左右日历同步数据
        startMultipleStatus: {
          before: "",
          after: "",
          data: [],
          fulldate: ""
        },
        endMultipleStatus: {
          before: "",
          after: "",
          data: [],
          fulldate: ""
        },
        pickerVisible: false,
        pickerPositionStyle: null,
        isEmitValue: false,
        isPhone: false,
        isFirstShow: true,
        i18nT: () => {
        }
      };
    },
    props: {
      type: {
        type: String,
        default: "datetime"
      },
      value: {
        type: [String, Number, Array, Date],
        default: ""
      },
      modelValue: {
        type: [String, Number, Array, Date],
        default: ""
      },
      start: {
        type: [Number, String],
        default: ""
      },
      end: {
        type: [Number, String],
        default: ""
      },
      returnType: {
        type: String,
        default: "string"
      },
      placeholder: {
        type: String,
        default: ""
      },
      startPlaceholder: {
        type: String,
        default: ""
      },
      endPlaceholder: {
        type: String,
        default: ""
      },
      rangeSeparator: {
        type: String,
        default: "-"
      },
      border: {
        type: [Boolean],
        default: true
      },
      disabled: {
        type: [Boolean],
        default: false
      },
      clearIcon: {
        type: [Boolean],
        default: true
      },
      hideSecond: {
        type: [Boolean],
        default: false
      },
      defaultValue: {
        type: [String, Object, Array],
        default: ""
      }
    },
    watch: {
      type: {
        immediate: true,
        handler(newVal) {
          this.hasTime = newVal.indexOf("time") !== -1;
          this.isRange = newVal.indexOf("range") !== -1;
        }
      },
      modelValue: {
        immediate: true,
        handler(newVal) {
          if (this.isEmitValue) {
            this.isEmitValue = false;
            return;
          }
          this.initPicker(newVal);
        }
      },
      start: {
        immediate: true,
        handler(newVal) {
          if (!newVal)
            return;
          this.calendarRange.startDate = getDate(newVal);
          if (this.hasTime) {
            this.calendarRange.startTime = getTime(newVal);
          }
        }
      },
      end: {
        immediate: true,
        handler(newVal) {
          if (!newVal)
            return;
          this.calendarRange.endDate = getDate(newVal);
          if (this.hasTime) {
            this.calendarRange.endTime = getTime(newVal, this.hideSecond);
          }
        }
      }
    },
    computed: {
      timepickerStartTime() {
        const activeDate = this.isRange ? this.tempRange.startDate : this.inputDate;
        return activeDate === this.calendarRange.startDate ? this.calendarRange.startTime : "";
      },
      timepickerEndTime() {
        const activeDate = this.isRange ? this.tempRange.endDate : this.inputDate;
        return activeDate === this.calendarRange.endDate ? this.calendarRange.endTime : "";
      },
      mobileCalendarTime() {
        const timeRange = {
          start: this.tempRange.startTime,
          end: this.tempRange.endTime
        };
        return this.isRange ? timeRange : this.pickerTime;
      },
      mobSelectableTime() {
        return {
          start: this.calendarRange.startTime,
          end: this.calendarRange.endTime
        };
      },
      datePopupWidth() {
        return this.isRange ? 653 : 301;
      },
      /**
       * for i18n
       */
      singlePlaceholderText() {
        return this.placeholder || (this.type === "date" ? this.selectDateText : this.selectDateTimeText);
      },
      startPlaceholderText() {
        return this.startPlaceholder || this.startDateText;
      },
      endPlaceholderText() {
        return this.endPlaceholder || this.endDateText;
      },
      selectDateText() {
        return this.i18nT("uni-datetime-picker.selectDate");
      },
      selectDateTimeText() {
        return this.i18nT("uni-datetime-picker.selectDateTime");
      },
      selectTimeText() {
        return this.i18nT("uni-datetime-picker.selectTime");
      },
      startDateText() {
        return this.startPlaceholder || this.i18nT("uni-datetime-picker.startDate");
      },
      startTimeText() {
        return this.i18nT("uni-datetime-picker.startTime");
      },
      endDateText() {
        return this.endPlaceholder || this.i18nT("uni-datetime-picker.endDate");
      },
      endTimeText() {
        return this.i18nT("uni-datetime-picker.endTime");
      },
      okText() {
        return this.i18nT("uni-datetime-picker.ok");
      },
      clearText() {
        return this.i18nT("uni-datetime-picker.clear");
      },
      showClearIcon() {
        return this.clearIcon && !this.disabled && (this.displayValue || this.displayRangeValue.startDate && this.displayRangeValue.endDate);
      }
    },
    created() {
      this.initI18nT();
      this.platform();
    },
    methods: {
      initI18nT() {
        const vueI18n = initVueI18n(i18nMessages);
        this.i18nT = vueI18n.t;
      },
      initPicker(newVal) {
        if (!newVal && !this.defaultValue || Array.isArray(newVal) && !newVal.length) {
          this.$nextTick(() => {
            this.clear(false);
          });
          return;
        }
        if (!Array.isArray(newVal) && !this.isRange) {
          if (newVal) {
            this.displayValue = this.inputDate = this.calendarDate = getDate(newVal);
            if (this.hasTime) {
              this.pickerTime = getTime(newVal, this.hideSecond);
              this.displayValue = `${this.displayValue} ${this.pickerTime}`;
            }
          } else if (this.defaultValue) {
            this.inputDate = this.calendarDate = getDate(this.defaultValue);
            if (this.hasTime) {
              this.pickerTime = getTime(this.defaultValue, this.hideSecond);
            }
          }
        } else {
          const [before, after] = newVal;
          if (!before && !after)
            return;
          const beforeDate = getDate(before);
          const beforeTime = getTime(before, this.hideSecond);
          const afterDate = getDate(after);
          const afterTime = getTime(after, this.hideSecond);
          const startDate = beforeDate;
          const endDate = afterDate;
          this.displayRangeValue.startDate = this.tempRange.startDate = startDate;
          this.displayRangeValue.endDate = this.tempRange.endDate = endDate;
          if (this.hasTime) {
            this.displayRangeValue.startDate = `${beforeDate} ${beforeTime}`;
            this.displayRangeValue.endDate = `${afterDate} ${afterTime}`;
            this.tempRange.startTime = beforeTime;
            this.tempRange.endTime = afterTime;
          }
          const defaultRange = {
            before: beforeDate,
            after: afterDate
          };
          this.startMultipleStatus = Object.assign({}, this.startMultipleStatus, defaultRange, {
            which: "right"
          });
          this.endMultipleStatus = Object.assign({}, this.endMultipleStatus, defaultRange, {
            which: "left"
          });
        }
      },
      updateLeftCale(e) {
        const left = this.$refs.left;
        left.cale.setHoverMultiple(e.after);
        left.setDate(this.$refs.left.nowDate.fullDate);
      },
      updateRightCale(e) {
        const right = this.$refs.right;
        right.cale.setHoverMultiple(e.after);
        right.setDate(this.$refs.right.nowDate.fullDate);
      },
      platform() {
        if (typeof navigator !== "undefined") {
          this.isPhone = navigator.userAgent.toLowerCase().indexOf("mobile") !== -1;
          return;
        }
        const {
          windowWidth
        } = uni.getSystemInfoSync();
        this.isPhone = windowWidth <= 500;
        this.windowWidth = windowWidth;
      },
      show() {
        this.$emit("show");
        if (this.disabled) {
          return;
        }
        this.platform();
        if (this.isPhone) {
          setTimeout(() => {
            this.$refs.mobile.open();
          }, 0);
          return;
        }
        this.pickerPositionStyle = {
          top: "10px"
        };
        const dateEditor = uni.createSelectorQuery().in(this).select(".uni-date-editor");
        dateEditor.boundingClientRect((rect) => {
          if (this.windowWidth - rect.left < this.datePopupWidth) {
            this.pickerPositionStyle.right = 0;
          }
        }).exec();
        setTimeout(() => {
          this.pickerVisible = !this.pickerVisible;
          if (!this.isPhone && this.isRange && this.isFirstShow) {
            this.isFirstShow = false;
            const {
              startDate,
              endDate
            } = this.calendarRange;
            if (startDate && endDate) {
              if (this.diffDate(startDate, endDate) < 30) {
                this.$refs.right.changeMonth("pre");
              }
            } else {
              if (this.isPhone) {
                this.$refs.right.cale.lastHover = false;
              }
            }
          }
        }, 50);
      },
      close() {
        setTimeout(() => {
          this.pickerVisible = false;
          this.$emit("maskClick", this.value);
          this.$refs.mobile && this.$refs.mobile.close();
        }, 20);
      },
      setEmit(value) {
        if (this.returnType === "timestamp" || this.returnType === "date") {
          if (!Array.isArray(value)) {
            if (!this.hasTime) {
              value = value + " 00:00:00";
            }
            value = this.createTimestamp(value);
            if (this.returnType === "date") {
              value = new Date(value);
            }
          } else {
            if (!this.hasTime) {
              value[0] = value[0] + " 00:00:00";
              value[1] = value[1] + " 00:00:00";
            }
            value[0] = this.createTimestamp(value[0]);
            value[1] = this.createTimestamp(value[1]);
            if (this.returnType === "date") {
              value[0] = new Date(value[0]);
              value[1] = new Date(value[1]);
            }
          }
        }
        this.$emit("update:modelValue", value);
        this.$emit("input", value);
        this.$emit("change", value);
        this.isEmitValue = true;
      },
      createTimestamp(date) {
        date = fixIosDateFormat(date);
        return Date.parse(new Date(date));
      },
      singleChange(e) {
        this.calendarDate = this.inputDate = e.fulldate;
        if (this.hasTime)
          return;
        this.confirmSingleChange();
      },
      confirmSingleChange() {
        if (!checkDate(this.inputDate)) {
          const now = /* @__PURE__ */ new Date();
          this.calendarDate = this.inputDate = getDate(now);
          this.pickerTime = getTime(now, this.hideSecond);
        }
        let startLaterInputDate = false;
        let startDate, startTime;
        if (this.start) {
          let startString = this.start;
          if (typeof this.start === "number") {
            startString = getDateTime(this.start, this.hideSecond);
          }
          [startDate, startTime] = startString.split(" ");
          if (this.start && !dateCompare(startDate, this.inputDate)) {
            startLaterInputDate = true;
            this.inputDate = startDate;
          }
        }
        let endEarlierInputDate = false;
        let endDate, endTime;
        if (this.end) {
          let endString = this.end;
          if (typeof this.end === "number") {
            endString = getDateTime(this.end, this.hideSecond);
          }
          [endDate, endTime] = endString.split(" ");
          if (this.end && !dateCompare(this.inputDate, endDate)) {
            endEarlierInputDate = true;
            this.inputDate = endDate;
          }
        }
        if (this.hasTime) {
          if (startLaterInputDate) {
            this.pickerTime = startTime || getDefaultSecond(this.hideSecond);
          }
          if (endEarlierInputDate) {
            this.pickerTime = endTime || getDefaultSecond(this.hideSecond);
          }
          if (!this.pickerTime) {
            this.pickerTime = getTime(Date.now(), this.hideSecond);
          }
          this.displayValue = `${this.inputDate} ${this.pickerTime}`;
        } else {
          this.displayValue = this.inputDate;
        }
        this.setEmit(this.displayValue);
        this.pickerVisible = false;
      },
      leftChange(e) {
        const {
          before,
          after
        } = e.range;
        this.rangeChange(before, after);
        const obj = {
          before: e.range.before,
          after: e.range.after,
          data: e.range.data,
          fulldate: e.fulldate
        };
        this.startMultipleStatus = Object.assign({}, this.startMultipleStatus, obj);
        this.$emit("calendarClick", e);
      },
      rightChange(e) {
        const {
          before,
          after
        } = e.range;
        this.rangeChange(before, after);
        const obj = {
          before: e.range.before,
          after: e.range.after,
          data: e.range.data,
          fulldate: e.fulldate
        };
        this.endMultipleStatus = Object.assign({}, this.endMultipleStatus, obj);
        this.$emit("calendarClick", e);
      },
      mobileChange(e) {
        if (this.isRange) {
          const {
            before,
            after
          } = e.range;
          if (!before) {
            return;
          }
          this.handleStartAndEnd(before, after, true);
          if (this.hasTime) {
            const {
              startTime,
              endTime
            } = e.timeRange;
            this.tempRange.startTime = startTime;
            this.tempRange.endTime = endTime;
          }
          this.confirmRangeChange();
        } else {
          if (this.hasTime) {
            this.displayValue = e.fulldate + " " + e.time;
          } else {
            this.displayValue = e.fulldate;
          }
          this.setEmit(this.displayValue);
        }
        this.$refs.mobile.close();
      },
      rangeChange(before, after) {
        if (!(before && after))
          return;
        this.handleStartAndEnd(before, after, true);
        if (this.hasTime)
          return;
        this.confirmRangeChange();
      },
      confirmRangeChange() {
        if (!this.tempRange.startDate || !this.tempRange.endDate) {
          this.pickerVisible = false;
          return;
        }
        if (!checkDate(this.tempRange.startDate)) {
          this.tempRange.startDate = getDate(Date.now());
        }
        if (!checkDate(this.tempRange.endDate)) {
          this.tempRange.endDate = getDate(Date.now());
        }
        let start, end;
        let startDateLaterRangeStartDate = false;
        let startDateLaterRangeEndDate = false;
        let startDate, startTime;
        if (this.start) {
          let startString = this.start;
          if (typeof this.start === "number") {
            startString = getDateTime(this.start, this.hideSecond);
          }
          [startDate, startTime] = startString.split(" ");
          if (this.start && !dateCompare(this.start, this.tempRange.startDate)) {
            startDateLaterRangeStartDate = true;
            this.tempRange.startDate = startDate;
          }
          if (this.start && !dateCompare(this.start, this.tempRange.endDate)) {
            startDateLaterRangeEndDate = true;
            this.tempRange.endDate = startDate;
          }
        }
        let endDateEarlierRangeStartDate = false;
        let endDateEarlierRangeEndDate = false;
        let endDate, endTime;
        if (this.end) {
          let endString = this.end;
          if (typeof this.end === "number") {
            endString = getDateTime(this.end, this.hideSecond);
          }
          [endDate, endTime] = endString.split(" ");
          if (this.end && !dateCompare(this.tempRange.startDate, this.end)) {
            endDateEarlierRangeStartDate = true;
            this.tempRange.startDate = endDate;
          }
          if (this.end && !dateCompare(this.tempRange.endDate, this.end)) {
            endDateEarlierRangeEndDate = true;
            this.tempRange.endDate = endDate;
          }
        }
        if (!this.hasTime) {
          start = this.displayRangeValue.startDate = this.tempRange.startDate;
          end = this.displayRangeValue.endDate = this.tempRange.endDate;
        } else {
          if (startDateLaterRangeStartDate) {
            this.tempRange.startTime = startTime || getDefaultSecond(this.hideSecond);
          } else if (endDateEarlierRangeStartDate) {
            this.tempRange.startTime = endTime || getDefaultSecond(this.hideSecond);
          }
          if (!this.tempRange.startTime) {
            this.tempRange.startTime = getTime(Date.now(), this.hideSecond);
          }
          if (startDateLaterRangeEndDate) {
            this.tempRange.endTime = startTime || getDefaultSecond(this.hideSecond);
          } else if (endDateEarlierRangeEndDate) {
            this.tempRange.endTime = endTime || getDefaultSecond(this.hideSecond);
          }
          if (!this.tempRange.endTime) {
            this.tempRange.endTime = getTime(Date.now(), this.hideSecond);
          }
          start = this.displayRangeValue.startDate = `${this.tempRange.startDate} ${this.tempRange.startTime}`;
          end = this.displayRangeValue.endDate = `${this.tempRange.endDate} ${this.tempRange.endTime}`;
        }
        if (!dateCompare(start, end)) {
          [start, end] = [end, start];
        }
        this.displayRangeValue.startDate = start;
        this.displayRangeValue.endDate = end;
        const displayRange = [start, end];
        this.setEmit(displayRange);
        this.pickerVisible = false;
      },
      handleStartAndEnd(before, after, temp = false) {
        if (!before)
          return;
        if (!after)
          after = before;
        const type = temp ? "tempRange" : "range";
        const isStartEarlierEnd = dateCompare(before, after);
        this[type].startDate = isStartEarlierEnd ? before : after;
        this[type].endDate = isStartEarlierEnd ? after : before;
      },
      /**
       * 比较时间大小
       */
      dateCompare(startDate, endDate) {
        startDate = new Date(startDate.replace("-", "/").replace("-", "/"));
        endDate = new Date(endDate.replace("-", "/").replace("-", "/"));
        return startDate <= endDate;
      },
      /**
       * 比较时间差
       */
      diffDate(startDate, endDate) {
        startDate = new Date(startDate.replace("-", "/").replace("-", "/"));
        endDate = new Date(endDate.replace("-", "/").replace("-", "/"));
        const diff = (endDate - startDate) / (24 * 60 * 60 * 1e3);
        return Math.abs(diff);
      },
      clear(needEmit = true) {
        if (!this.isRange) {
          this.displayValue = "";
          this.inputDate = "";
          this.pickerTime = "";
          if (this.isPhone) {
            this.$refs.mobile && this.$refs.mobile.clearCalender();
          } else {
            this.$refs.pcSingle && this.$refs.pcSingle.clearCalender();
          }
          if (needEmit) {
            this.$emit("change", "");
            this.$emit("input", "");
            this.$emit("update:modelValue", "");
          }
        } else {
          this.displayRangeValue.startDate = "";
          this.displayRangeValue.endDate = "";
          this.tempRange.startDate = "";
          this.tempRange.startTime = "";
          this.tempRange.endDate = "";
          this.tempRange.endTime = "";
          if (this.isPhone) {
            this.$refs.mobile && this.$refs.mobile.clearCalender();
          } else {
            this.$refs.left && this.$refs.left.clearCalender();
            this.$refs.right && this.$refs.right.clearCalender();
            this.$refs.right && this.$refs.right.changeMonth("next");
          }
          if (needEmit) {
            this.$emit("change", []);
            this.$emit("input", []);
            this.$emit("update:modelValue", []);
          }
        }
      },
      calendarClick(e) {
        this.$emit("calendarClick", e);
      }
    }
  };
  function _sfc_render$s(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), uniIcons);
    const _component_time_picker = vue.resolveComponent("time-picker");
    const _component_Calendar = vue.resolveComponent("Calendar");
    return vue.openBlock(), vue.createElementBlock("view", { class: "uni-date" }, [
      vue.createElementVNode("view", {
        class: "uni-date-editor",
        onClick: _cache[1] || (_cache[1] = (...args) => $options.show && $options.show(...args))
      }, [
        vue.renderSlot(_ctx.$slots, "default", {}, () => [
          vue.createElementVNode(
            "view",
            {
              class: vue.normalizeClass(["uni-date-editor--x", { "uni-date-editor--x__disabled": $props.disabled, "uni-date-x--border": $props.border }])
            },
            [
              !$data.isRange ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "uni-date-x uni-date-single"
              }, [
                vue.createVNode(_component_uni_icons, {
                  class: "icon-calendar",
                  type: "calendar",
                  color: "#c0c4cc",
                  size: "22"
                }),
                vue.createElementVNode(
                  "view",
                  { class: "uni-date__x-input" },
                  vue.toDisplayString($data.displayValue || $options.singlePlaceholderText),
                  1
                  /* TEXT */
                )
              ])) : (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "uni-date-x uni-date-range"
              }, [
                vue.createVNode(_component_uni_icons, {
                  class: "icon-calendar",
                  type: "calendar",
                  color: "#c0c4cc",
                  size: "22"
                }),
                vue.createElementVNode(
                  "view",
                  { class: "uni-date__x-input text-center" },
                  vue.toDisplayString($data.displayRangeValue.startDate || $options.startPlaceholderText),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode(
                  "view",
                  { class: "range-separator" },
                  vue.toDisplayString($props.rangeSeparator),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode(
                  "view",
                  { class: "uni-date__x-input text-center" },
                  vue.toDisplayString($data.displayRangeValue.endDate || $options.endPlaceholderText),
                  1
                  /* TEXT */
                )
              ])),
              $options.showClearIcon ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 2,
                class: "uni-date__icon-clear",
                onClick: _cache[0] || (_cache[0] = vue.withModifiers((...args) => $options.clear && $options.clear(...args), ["stop"]))
              }, [
                vue.createVNode(_component_uni_icons, {
                  type: "clear",
                  color: "#c0c4cc",
                  size: "22"
                })
              ])) : vue.createCommentVNode("v-if", true)
            ],
            2
            /* CLASS */
          )
        ], true)
      ]),
      vue.withDirectives(vue.createElementVNode(
        "view",
        {
          class: "uni-date-mask--pc",
          onClick: _cache[2] || (_cache[2] = (...args) => $options.close && $options.close(...args))
        },
        null,
        512
        /* NEED_PATCH */
      ), [
        [vue.vShow, $data.pickerVisible]
      ]),
      !$data.isPhone ? vue.withDirectives((vue.openBlock(), vue.createElementBlock(
        "view",
        {
          key: 0,
          ref: "datePicker",
          class: "uni-date-picker__container"
        },
        [
          !$data.isRange ? (vue.openBlock(), vue.createElementBlock(
            "view",
            {
              key: 0,
              class: "uni-date-single--x",
              style: vue.normalizeStyle($data.pickerPositionStyle)
            },
            [
              vue.createElementVNode("view", { class: "uni-popper__arrow" }),
              $data.hasTime ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "uni-date-changed popup-x-header"
              }, [
                vue.withDirectives(vue.createElementVNode("input", {
                  class: "uni-date__input text-center",
                  type: "text",
                  "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => $data.inputDate = $event),
                  placeholder: $options.selectDateText
                }, null, 8, ["placeholder"]), [
                  [vue.vModelText, $data.inputDate]
                ]),
                vue.createVNode(_component_time_picker, {
                  type: "time",
                  modelValue: $data.pickerTime,
                  "onUpdate:modelValue": _cache[5] || (_cache[5] = ($event) => $data.pickerTime = $event),
                  border: false,
                  disabled: !$data.inputDate,
                  start: $options.timepickerStartTime,
                  end: $options.timepickerEndTime,
                  hideSecond: $props.hideSecond,
                  style: { "width": "100%" }
                }, {
                  default: vue.withCtx(() => [
                    vue.withDirectives(vue.createElementVNode("input", {
                      class: "uni-date__input text-center",
                      type: "text",
                      "onUpdate:modelValue": _cache[4] || (_cache[4] = ($event) => $data.pickerTime = $event),
                      placeholder: $options.selectTimeText,
                      disabled: !$data.inputDate
                    }, null, 8, ["placeholder", "disabled"]), [
                      [vue.vModelText, $data.pickerTime]
                    ])
                  ]),
                  _: 1
                  /* STABLE */
                }, 8, ["modelValue", "disabled", "start", "end", "hideSecond"])
              ])) : vue.createCommentVNode("v-if", true),
              vue.createVNode(_component_Calendar, {
                ref: "pcSingle",
                showMonth: false,
                "start-date": $data.calendarRange.startDate,
                "end-date": $data.calendarRange.endDate,
                date: $data.calendarDate,
                onChange: $options.singleChange,
                "default-value": $props.defaultValue,
                style: { "padding": "0 8px" }
              }, null, 8, ["start-date", "end-date", "date", "onChange", "default-value"]),
              $data.hasTime ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "popup-x-footer"
              }, [
                vue.createElementVNode(
                  "text",
                  {
                    class: "confirm-text",
                    onClick: _cache[6] || (_cache[6] = (...args) => $options.confirmSingleChange && $options.confirmSingleChange(...args))
                  },
                  vue.toDisplayString($options.okText),
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true)
            ],
            4
            /* STYLE */
          )) : (vue.openBlock(), vue.createElementBlock(
            "view",
            {
              key: 1,
              class: "uni-date-range--x",
              style: vue.normalizeStyle($data.pickerPositionStyle)
            },
            [
              vue.createElementVNode("view", { class: "uni-popper__arrow" }),
              $data.hasTime ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "popup-x-header uni-date-changed"
              }, [
                vue.createElementVNode("view", { class: "popup-x-header--datetime" }, [
                  vue.withDirectives(vue.createElementVNode("input", {
                    class: "uni-date__input uni-date-range__input",
                    type: "text",
                    "onUpdate:modelValue": _cache[7] || (_cache[7] = ($event) => $data.tempRange.startDate = $event),
                    placeholder: $options.startDateText
                  }, null, 8, ["placeholder"]), [
                    [vue.vModelText, $data.tempRange.startDate]
                  ]),
                  vue.createVNode(_component_time_picker, {
                    type: "time",
                    modelValue: $data.tempRange.startTime,
                    "onUpdate:modelValue": _cache[9] || (_cache[9] = ($event) => $data.tempRange.startTime = $event),
                    start: $options.timepickerStartTime,
                    border: false,
                    disabled: !$data.tempRange.startDate,
                    hideSecond: $props.hideSecond
                  }, {
                    default: vue.withCtx(() => [
                      vue.withDirectives(vue.createElementVNode("input", {
                        class: "uni-date__input uni-date-range__input",
                        type: "text",
                        "onUpdate:modelValue": _cache[8] || (_cache[8] = ($event) => $data.tempRange.startTime = $event),
                        placeholder: $options.startTimeText,
                        disabled: !$data.tempRange.startDate
                      }, null, 8, ["placeholder", "disabled"]), [
                        [vue.vModelText, $data.tempRange.startTime]
                      ])
                    ]),
                    _: 1
                    /* STABLE */
                  }, 8, ["modelValue", "start", "disabled", "hideSecond"])
                ]),
                vue.createVNode(_component_uni_icons, {
                  type: "arrowthinright",
                  color: "#999",
                  style: { "line-height": "40px" }
                }),
                vue.createElementVNode("view", { class: "popup-x-header--datetime" }, [
                  vue.withDirectives(vue.createElementVNode("input", {
                    class: "uni-date__input uni-date-range__input",
                    type: "text",
                    "onUpdate:modelValue": _cache[10] || (_cache[10] = ($event) => $data.tempRange.endDate = $event),
                    placeholder: $options.endDateText
                  }, null, 8, ["placeholder"]), [
                    [vue.vModelText, $data.tempRange.endDate]
                  ]),
                  vue.createVNode(_component_time_picker, {
                    type: "time",
                    modelValue: $data.tempRange.endTime,
                    "onUpdate:modelValue": _cache[12] || (_cache[12] = ($event) => $data.tempRange.endTime = $event),
                    end: $options.timepickerEndTime,
                    border: false,
                    disabled: !$data.tempRange.endDate,
                    hideSecond: $props.hideSecond
                  }, {
                    default: vue.withCtx(() => [
                      vue.withDirectives(vue.createElementVNode("input", {
                        class: "uni-date__input uni-date-range__input",
                        type: "text",
                        "onUpdate:modelValue": _cache[11] || (_cache[11] = ($event) => $data.tempRange.endTime = $event),
                        placeholder: $options.endTimeText,
                        disabled: !$data.tempRange.endDate
                      }, null, 8, ["placeholder", "disabled"]), [
                        [vue.vModelText, $data.tempRange.endTime]
                      ])
                    ]),
                    _: 1
                    /* STABLE */
                  }, 8, ["modelValue", "end", "disabled", "hideSecond"])
                ])
              ])) : vue.createCommentVNode("v-if", true),
              vue.createElementVNode("view", { class: "popup-x-body" }, [
                vue.createVNode(_component_Calendar, {
                  ref: "left",
                  showMonth: false,
                  "start-date": $data.calendarRange.startDate,
                  "end-date": $data.calendarRange.endDate,
                  range: true,
                  pleStatus: $data.endMultipleStatus,
                  onChange: $options.leftChange,
                  onFirstEnterCale: $options.updateRightCale,
                  style: { "padding": "0 8px" }
                }, null, 8, ["start-date", "end-date", "pleStatus", "onChange", "onFirstEnterCale"]),
                vue.createVNode(_component_Calendar, {
                  ref: "right",
                  showMonth: false,
                  "start-date": $data.calendarRange.startDate,
                  "end-date": $data.calendarRange.endDate,
                  range: true,
                  onChange: $options.rightChange,
                  pleStatus: $data.startMultipleStatus,
                  onFirstEnterCale: $options.updateLeftCale,
                  style: { "padding": "0 8px", "border-left": "1px solid #F1F1F1" }
                }, null, 8, ["start-date", "end-date", "onChange", "pleStatus", "onFirstEnterCale"])
              ]),
              $data.hasTime ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "popup-x-footer"
              }, [
                vue.createElementVNode(
                  "text",
                  {
                    onClick: _cache[13] || (_cache[13] = (...args) => $options.clear && $options.clear(...args))
                  },
                  vue.toDisplayString($options.clearText),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode(
                  "text",
                  {
                    class: "confirm-text",
                    onClick: _cache[14] || (_cache[14] = (...args) => $options.confirmRangeChange && $options.confirmRangeChange(...args))
                  },
                  vue.toDisplayString($options.okText),
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true)
            ],
            4
            /* STYLE */
          ))
        ],
        512
        /* NEED_PATCH */
      )), [
        [vue.vShow, $data.pickerVisible]
      ]) : vue.createCommentVNode("v-if", true),
      $data.isPhone ? (vue.openBlock(), vue.createBlock(_component_Calendar, {
        key: 1,
        ref: "mobile",
        clearDate: false,
        date: $data.calendarDate,
        defTime: $options.mobileCalendarTime,
        "start-date": $data.calendarRange.startDate,
        "end-date": $data.calendarRange.endDate,
        selectableTimes: $options.mobSelectableTime,
        startPlaceholder: $props.startPlaceholder,
        endPlaceholder: $props.endPlaceholder,
        "default-value": $props.defaultValue,
        pleStatus: $data.endMultipleStatus,
        showMonth: false,
        range: $data.isRange,
        hasTime: $data.hasTime,
        insert: false,
        hideSecond: $props.hideSecond,
        onConfirm: $options.mobileChange,
        onMaskClose: $options.close,
        onChange: $options.calendarClick
      }, null, 8, ["date", "defTime", "start-date", "end-date", "selectableTimes", "startPlaceholder", "endPlaceholder", "default-value", "pleStatus", "range", "hasTime", "hideSecond", "onConfirm", "onMaskClose", "onChange"])) : vue.createCommentVNode("v-if", true)
    ]);
  }
  const __easycom_1 = /* @__PURE__ */ _export_sfc(_sfc_main$t, [["render", _sfc_render$s], ["__scopeId", "data-v-9802168a"], ["__file", "D:/Uniapp/htmlTest/赛创项目/uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker.vue"]]);
  const _sfc_main$s = {
    name: "UniNumberBox",
    emits: ["change", "input", "update:modelValue", "blur", "focus"],
    props: {
      value: {
        type: [Number, String],
        default: 1
      },
      modelValue: {
        type: [Number, String],
        default: 1
      },
      min: {
        type: Number,
        default: 0
      },
      max: {
        type: Number,
        default: 100
      },
      step: {
        type: Number,
        default: 1
      },
      background: {
        type: String,
        default: "#f5f5f5"
      },
      color: {
        type: String,
        default: "#333"
      },
      disabled: {
        type: Boolean,
        default: false
      },
      width: {
        type: Number,
        default: 40
      }
    },
    data() {
      return {
        inputValue: 0
      };
    },
    watch: {
      value(val) {
        this.inputValue = +val;
      },
      modelValue(val) {
        this.inputValue = +val;
      }
    },
    computed: {
      widthWithPx() {
        return this.width + "px";
      }
    },
    created() {
      if (this.value === 1) {
        this.inputValue = +this.modelValue;
      }
      if (this.modelValue === 1) {
        this.inputValue = +this.value;
      }
    },
    methods: {
      _calcValue(type) {
        if (this.disabled) {
          return;
        }
        const scale = this._getDecimalScale();
        let value = this.inputValue * scale;
        let step = this.step * scale;
        if (type === "minus") {
          value -= step;
          if (value < this.min * scale) {
            return;
          }
          if (value > this.max * scale) {
            value = this.max * scale;
          }
        }
        if (type === "plus") {
          value += step;
          if (value > this.max * scale) {
            return;
          }
          if (value < this.min * scale) {
            value = this.min * scale;
          }
        }
        this.inputValue = (value / scale).toFixed(String(scale).length - 1);
        this.$emit("input", +this.inputValue);
        this.$emit("update:modelValue", +this.inputValue);
        this.$emit("change", +this.inputValue);
      },
      _getDecimalScale() {
        let scale = 1;
        if (~~this.step !== this.step) {
          scale = Math.pow(10, String(this.step).split(".")[1].length);
        }
        return scale;
      },
      _onBlur(event2) {
        this.$emit("blur", event2);
        let value = event2.detail.value;
        if (isNaN(value)) {
          this.inputValue = this.value;
          return;
        }
        value = +value;
        if (value > this.max) {
          value = this.max;
        } else if (value < this.min) {
          value = this.min;
        }
        const scale = this._getDecimalScale();
        this.inputValue = value.toFixed(String(scale).length - 1);
        this.$emit("input", +this.inputValue);
        this.$emit("update:modelValue", +this.inputValue);
        this.$emit("change", +this.inputValue);
      },
      _onFocus(event2) {
        this.$emit("focus", event2);
      }
    }
  };
  function _sfc_render$r(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "uni-numbox" }, [
      vue.createElementVNode(
        "view",
        {
          onClick: _cache[0] || (_cache[0] = ($event) => $options._calcValue("minus")),
          class: "uni-numbox__minus uni-numbox-btns",
          style: vue.normalizeStyle({ background: $props.background })
        },
        [
          vue.createElementVNode(
            "text",
            {
              class: vue.normalizeClass(["uni-numbox--text", { "uni-numbox--disabled": $data.inputValue <= $props.min || $props.disabled }]),
              style: vue.normalizeStyle({ color: $props.color })
            },
            "-",
            6
            /* CLASS, STYLE */
          )
        ],
        4
        /* STYLE */
      ),
      vue.withDirectives(vue.createElementVNode("input", {
        disabled: $props.disabled,
        onFocus: _cache[1] || (_cache[1] = (...args) => $options._onFocus && $options._onFocus(...args)),
        onBlur: _cache[2] || (_cache[2] = (...args) => $options._onBlur && $options._onBlur(...args)),
        class: "uni-numbox__value",
        type: $props.step < 1 ? "digit" : "number",
        "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => $data.inputValue = $event),
        style: vue.normalizeStyle({ background: $props.background, color: $props.color, width: $options.widthWithPx })
      }, null, 44, ["disabled", "type"]), [
        [vue.vModelDynamic, $data.inputValue]
      ]),
      vue.createElementVNode(
        "view",
        {
          onClick: _cache[4] || (_cache[4] = ($event) => $options._calcValue("plus")),
          class: "uni-numbox__plus uni-numbox-btns",
          style: vue.normalizeStyle({ background: $props.background })
        },
        [
          vue.createElementVNode(
            "text",
            {
              class: vue.normalizeClass(["uni-numbox--text", { "uni-numbox--disabled": $data.inputValue >= $props.max || $props.disabled }]),
              style: vue.normalizeStyle({ color: $props.color })
            },
            "+",
            6
            /* CLASS, STYLE */
          )
        ],
        4
        /* STYLE */
      )
    ]);
  }
  const __easycom_3 = /* @__PURE__ */ _export_sfc(_sfc_main$s, [["render", _sfc_render$r], ["__scopeId", "data-v-7ae2ee72"], ["__file", "D:/Uniapp/htmlTest/赛创项目/uni_modules/uni-number-box/components/uni-number-box/uni-number-box.vue"]]);
  var pattern = {
    email: /^\S+?@\S+?\.\S+?$/,
    idcard: /^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,
    url: new RegExp(
      "^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$",
      "i"
    )
  };
  const FORMAT_MAPPING = {
    "int": "integer",
    "bool": "boolean",
    "double": "number",
    "long": "number",
    "password": "string"
    // "fileurls": 'array'
  };
  function formatMessage(args, resources = "") {
    var defaultMessage = ["label"];
    defaultMessage.forEach((item) => {
      if (args[item] === void 0) {
        args[item] = "";
      }
    });
    let str = resources;
    for (let key in args) {
      let reg = new RegExp("{" + key + "}");
      str = str.replace(reg, args[key]);
    }
    return str;
  }
  function isEmptyValue(value, type) {
    if (value === void 0 || value === null) {
      return true;
    }
    if (typeof value === "string" && !value) {
      return true;
    }
    if (Array.isArray(value) && !value.length) {
      return true;
    }
    if (type === "object" && !Object.keys(value).length) {
      return true;
    }
    return false;
  }
  const types = {
    integer(value) {
      return types.number(value) && parseInt(value, 10) === value;
    },
    string(value) {
      return typeof value === "string";
    },
    number(value) {
      if (isNaN(value)) {
        return false;
      }
      return typeof value === "number";
    },
    "boolean": function(value) {
      return typeof value === "boolean";
    },
    "float": function(value) {
      return types.number(value) && !types.integer(value);
    },
    array(value) {
      return Array.isArray(value);
    },
    object(value) {
      return typeof value === "object" && !types.array(value);
    },
    date(value) {
      return value instanceof Date;
    },
    timestamp(value) {
      if (!this.integer(value) || Math.abs(value).toString().length > 16) {
        return false;
      }
      return true;
    },
    file(value) {
      return typeof value.url === "string";
    },
    email(value) {
      return typeof value === "string" && !!value.match(pattern.email) && value.length < 255;
    },
    url(value) {
      return typeof value === "string" && !!value.match(pattern.url);
    },
    pattern(reg, value) {
      try {
        return new RegExp(reg).test(value);
      } catch (e) {
        return false;
      }
    },
    method(value) {
      return typeof value === "function";
    },
    idcard(value) {
      return typeof value === "string" && !!value.match(pattern.idcard);
    },
    "url-https"(value) {
      return this.url(value) && value.startsWith("https://");
    },
    "url-scheme"(value) {
      return value.startsWith("://");
    },
    "url-web"(value) {
      return false;
    }
  };
  class RuleValidator {
    constructor(message) {
      this._message = message;
    }
    async validateRule(fieldKey, fieldValue, value, data, allData) {
      var result = null;
      let rules = fieldValue.rules;
      let hasRequired = rules.findIndex((item) => {
        return item.required;
      });
      if (hasRequired < 0) {
        if (value === null || value === void 0) {
          return result;
        }
        if (typeof value === "string" && !value.length) {
          return result;
        }
      }
      var message = this._message;
      if (rules === void 0) {
        return message["default"];
      }
      for (var i = 0; i < rules.length; i++) {
        let rule = rules[i];
        let vt = this._getValidateType(rule);
        Object.assign(rule, {
          label: fieldValue.label || `["${fieldKey}"]`
        });
        if (RuleValidatorHelper[vt]) {
          result = RuleValidatorHelper[vt](rule, value, message);
          if (result != null) {
            break;
          }
        }
        if (rule.validateExpr) {
          let now = Date.now();
          let resultExpr = rule.validateExpr(value, allData, now);
          if (resultExpr === false) {
            result = this._getMessage(rule, rule.errorMessage || this._message["default"]);
            break;
          }
        }
        if (rule.validateFunction) {
          result = await this.validateFunction(rule, value, data, allData, vt);
          if (result !== null) {
            break;
          }
        }
      }
      if (result !== null) {
        result = message.TAG + result;
      }
      return result;
    }
    async validateFunction(rule, value, data, allData, vt) {
      let result = null;
      try {
        let callbackMessage = null;
        const res = await rule.validateFunction(rule, value, allData || data, (message) => {
          callbackMessage = message;
        });
        if (callbackMessage || typeof res === "string" && res || res === false) {
          result = this._getMessage(rule, callbackMessage || res, vt);
        }
      } catch (e) {
        result = this._getMessage(rule, e.message, vt);
      }
      return result;
    }
    _getMessage(rule, message, vt) {
      return formatMessage(rule, message || rule.errorMessage || this._message[vt] || message["default"]);
    }
    _getValidateType(rule) {
      var result = "";
      if (rule.required) {
        result = "required";
      } else if (rule.format) {
        result = "format";
      } else if (rule.arrayType) {
        result = "arrayTypeFormat";
      } else if (rule.range) {
        result = "range";
      } else if (rule.maximum !== void 0 || rule.minimum !== void 0) {
        result = "rangeNumber";
      } else if (rule.maxLength !== void 0 || rule.minLength !== void 0) {
        result = "rangeLength";
      } else if (rule.pattern) {
        result = "pattern";
      } else if (rule.validateFunction) {
        result = "validateFunction";
      }
      return result;
    }
  }
  const RuleValidatorHelper = {
    required(rule, value, message) {
      if (rule.required && isEmptyValue(value, rule.format || typeof value)) {
        return formatMessage(rule, rule.errorMessage || message.required);
      }
      return null;
    },
    range(rule, value, message) {
      const {
        range,
        errorMessage
      } = rule;
      let list = new Array(range.length);
      for (let i = 0; i < range.length; i++) {
        const item = range[i];
        if (types.object(item) && item.value !== void 0) {
          list[i] = item.value;
        } else {
          list[i] = item;
        }
      }
      let result = false;
      if (Array.isArray(value)) {
        result = new Set(value.concat(list)).size === list.length;
      } else {
        if (list.indexOf(value) > -1) {
          result = true;
        }
      }
      if (!result) {
        return formatMessage(rule, errorMessage || message["enum"]);
      }
      return null;
    },
    rangeNumber(rule, value, message) {
      if (!types.number(value)) {
        return formatMessage(rule, rule.errorMessage || message.pattern.mismatch);
      }
      let {
        minimum,
        maximum,
        exclusiveMinimum,
        exclusiveMaximum
      } = rule;
      let min = exclusiveMinimum ? value <= minimum : value < minimum;
      let max = exclusiveMaximum ? value >= maximum : value > maximum;
      if (minimum !== void 0 && min) {
        return formatMessage(rule, rule.errorMessage || message["number"][exclusiveMinimum ? "exclusiveMinimum" : "minimum"]);
      } else if (maximum !== void 0 && max) {
        return formatMessage(rule, rule.errorMessage || message["number"][exclusiveMaximum ? "exclusiveMaximum" : "maximum"]);
      } else if (minimum !== void 0 && maximum !== void 0 && (min || max)) {
        return formatMessage(rule, rule.errorMessage || message["number"].range);
      }
      return null;
    },
    rangeLength(rule, value, message) {
      if (!types.string(value) && !types.array(value)) {
        return formatMessage(rule, rule.errorMessage || message.pattern.mismatch);
      }
      let min = rule.minLength;
      let max = rule.maxLength;
      let val = value.length;
      if (min !== void 0 && val < min) {
        return formatMessage(rule, rule.errorMessage || message["length"].minLength);
      } else if (max !== void 0 && val > max) {
        return formatMessage(rule, rule.errorMessage || message["length"].maxLength);
      } else if (min !== void 0 && max !== void 0 && (val < min || val > max)) {
        return formatMessage(rule, rule.errorMessage || message["length"].range);
      }
      return null;
    },
    pattern(rule, value, message) {
      if (!types["pattern"](rule.pattern, value)) {
        return formatMessage(rule, rule.errorMessage || message.pattern.mismatch);
      }
      return null;
    },
    format(rule, value, message) {
      var customTypes = Object.keys(types);
      var format = FORMAT_MAPPING[rule.format] ? FORMAT_MAPPING[rule.format] : rule.format || rule.arrayType;
      if (customTypes.indexOf(format) > -1) {
        if (!types[format](value)) {
          return formatMessage(rule, rule.errorMessage || message.typeError);
        }
      }
      return null;
    },
    arrayTypeFormat(rule, value, message) {
      if (!Array.isArray(value)) {
        return formatMessage(rule, rule.errorMessage || message.typeError);
      }
      for (let i = 0; i < value.length; i++) {
        const element = value[i];
        let formatResult = this.format(rule, element, message);
        if (formatResult !== null) {
          return formatResult;
        }
      }
      return null;
    }
  };
  class SchemaValidator extends RuleValidator {
    constructor(schema, options) {
      super(SchemaValidator.message);
      this._schema = schema;
      this._options = options || null;
    }
    updateSchema(schema) {
      this._schema = schema;
    }
    async validate(data, allData) {
      let result = this._checkFieldInSchema(data);
      if (!result) {
        result = await this.invokeValidate(data, false, allData);
      }
      return result.length ? result[0] : null;
    }
    async validateAll(data, allData) {
      let result = this._checkFieldInSchema(data);
      if (!result) {
        result = await this.invokeValidate(data, true, allData);
      }
      return result;
    }
    async validateUpdate(data, allData) {
      let result = this._checkFieldInSchema(data);
      if (!result) {
        result = await this.invokeValidateUpdate(data, false, allData);
      }
      return result.length ? result[0] : null;
    }
    async invokeValidate(data, all, allData) {
      let result = [];
      let schema = this._schema;
      for (let key in schema) {
        let value = schema[key];
        let errorMessage = await this.validateRule(key, value, data[key], data, allData);
        if (errorMessage != null) {
          result.push({
            key,
            errorMessage
          });
          if (!all)
            break;
        }
      }
      return result;
    }
    async invokeValidateUpdate(data, all, allData) {
      let result = [];
      for (let key in data) {
        let errorMessage = await this.validateRule(key, this._schema[key], data[key], data, allData);
        if (errorMessage != null) {
          result.push({
            key,
            errorMessage
          });
          if (!all)
            break;
        }
      }
      return result;
    }
    _checkFieldInSchema(data) {
      var keys = Object.keys(data);
      var keys2 = Object.keys(this._schema);
      if (new Set(keys.concat(keys2)).size === keys2.length) {
        return "";
      }
      var noExistFields = keys.filter((key) => {
        return keys2.indexOf(key) < 0;
      });
      var errorMessage = formatMessage({
        field: JSON.stringify(noExistFields)
      }, SchemaValidator.message.TAG + SchemaValidator.message["defaultInvalid"]);
      return [{
        key: "invalid",
        errorMessage
      }];
    }
  }
  function Message() {
    return {
      TAG: "",
      default: "验证错误",
      defaultInvalid: "提交的字段{field}在数据库中并不存在",
      validateFunction: "验证无效",
      required: "{label}必填",
      "enum": "{label}超出范围",
      timestamp: "{label}格式无效",
      whitespace: "{label}不能为空",
      typeError: "{label}类型无效",
      date: {
        format: "{label}日期{value}格式无效",
        parse: "{label}日期无法解析,{value}无效",
        invalid: "{label}日期{value}无效"
      },
      length: {
        minLength: "{label}长度不能少于{minLength}",
        maxLength: "{label}长度不能超过{maxLength}",
        range: "{label}必须介于{minLength}和{maxLength}之间"
      },
      number: {
        minimum: "{label}不能小于{minimum}",
        maximum: "{label}不能大于{maximum}",
        exclusiveMinimum: "{label}不能小于等于{minimum}",
        exclusiveMaximum: "{label}不能大于等于{maximum}",
        range: "{label}必须介于{minimum}and{maximum}之间"
      },
      pattern: {
        mismatch: "{label}格式不匹配"
      }
    };
  }
  SchemaValidator.message = new Message();
  const deepCopy = (val) => {
    return JSON.parse(JSON.stringify(val));
  };
  const typeFilter = (format) => {
    return format === "int" || format === "double" || format === "number" || format === "timestamp";
  };
  const getValue = (key, value, rules) => {
    const isRuleNumType = rules.find((val) => val.format && typeFilter(val.format));
    const isRuleBoolType = rules.find((val) => val.format && val.format === "boolean" || val.format === "bool");
    if (!!isRuleNumType) {
      if (!value && value !== 0) {
        value = null;
      } else {
        value = isNumber(Number(value)) ? Number(value) : value;
      }
    }
    if (!!isRuleBoolType) {
      value = isBoolean(value) ? value : false;
    }
    return value;
  };
  const setDataValue = (field, formdata, value) => {
    formdata[field] = value;
    return value || "";
  };
  const getDataValue = (field, data) => {
    return objGet(data, field);
  };
  const realName = (name2, data = {}) => {
    const base_name = _basePath(name2);
    if (typeof base_name === "object" && Array.isArray(base_name) && base_name.length > 1) {
      const realname = base_name.reduce((a, b) => a += `#${b}`, "_formdata_");
      return realname;
    }
    return base_name[0] || name2;
  };
  const isRealName = (name2) => {
    const reg = /^_formdata_#*/;
    return reg.test(name2);
  };
  const rawData = (object = {}, name2) => {
    let newData = JSON.parse(JSON.stringify(object));
    let formData = {};
    for (let i in newData) {
      let path = name2arr(i);
      objSet(formData, path, newData[i]);
    }
    return formData;
  };
  const name2arr = (name2) => {
    let field = name2.replace("_formdata_#", "");
    field = field.split("#").map((v) => isNumber(v) ? Number(v) : v);
    return field;
  };
  const objSet = (object, path, value) => {
    if (typeof object !== "object")
      return object;
    _basePath(path).reduce((o, k, i, _) => {
      if (i === _.length - 1) {
        o[k] = value;
        return null;
      } else if (k in o) {
        return o[k];
      } else {
        o[k] = /^[0-9]{1,}$/.test(_[i + 1]) ? [] : {};
        return o[k];
      }
    }, object);
    return object;
  };
  function _basePath(path) {
    if (Array.isArray(path))
      return path;
    return path.replace(/\[/g, ".").replace(/\]/g, "").split(".");
  }
  const objGet = (object, path, defaultVal = "undefined") => {
    let newPath = _basePath(path);
    let val = newPath.reduce((o, k) => {
      return (o || {})[k];
    }, object);
    return !val || val !== void 0 ? val : defaultVal;
  };
  const isNumber = (num) => {
    return !isNaN(Number(num));
  };
  const isBoolean = (bool) => {
    return typeof bool === "boolean";
  };
  const isRequiredField = (rules) => {
    let isNoField = false;
    for (let i = 0; i < rules.length; i++) {
      const ruleData = rules[i];
      if (ruleData.required) {
        isNoField = true;
        break;
      }
    }
    return isNoField;
  };
  const isEqual = (a, b) => {
    if (a === b) {
      return a !== 0 || 1 / a === 1 / b;
    }
    if (a == null || b == null) {
      return a === b;
    }
    var classNameA = toString.call(a), classNameB = toString.call(b);
    if (classNameA !== classNameB) {
      return false;
    }
    switch (classNameA) {
      case "[object RegExp]":
      case "[object String]":
        return "" + a === "" + b;
      case "[object Number]":
        if (+a !== +a) {
          return +b !== +b;
        }
        return +a === 0 ? 1 / +a === 1 / b : +a === +b;
      case "[object Date]":
      case "[object Boolean]":
        return +a === +b;
    }
    if (classNameA == "[object Object]") {
      var propsA = Object.getOwnPropertyNames(a), propsB = Object.getOwnPropertyNames(b);
      if (propsA.length != propsB.length) {
        return false;
      }
      for (var i = 0; i < propsA.length; i++) {
        var propName = propsA[i];
        if (a[propName] !== b[propName]) {
          return false;
        }
      }
      return true;
    }
    if (classNameA == "[object Array]") {
      if (a.toString() == b.toString()) {
        return true;
      }
      return false;
    }
  };
  const _sfc_main$r = {
    name: "uniForms",
    emits: ["validate", "submit"],
    options: {
      virtualHost: true
    },
    props: {
      // 即将弃用
      value: {
        type: Object,
        default() {
          return null;
        }
      },
      // vue3 替换 value 属性
      modelValue: {
        type: Object,
        default() {
          return null;
        }
      },
      // 1.4.0 开始将不支持 v-model ，且废弃 value 和 modelValue
      model: {
        type: Object,
        default() {
          return null;
        }
      },
      // 表单校验规则
      rules: {
        type: Object,
        default() {
          return {};
        }
      },
      //校验错误信息提示方式 默认 undertext 取值 [undertext|toast|modal]
      errShowType: {
        type: String,
        default: "undertext"
      },
      // 校验触发器方式 默认 bind 取值 [bind|submit]
      validateTrigger: {
        type: String,
        default: "submit"
      },
      // label 位置，默认 left 取值  top/left
      labelPosition: {
        type: String,
        default: "left"
      },
      // label 宽度
      labelWidth: {
        type: [String, Number],
        default: ""
      },
      // label 居中方式，默认 left 取值 left/center/right
      labelAlign: {
        type: String,
        default: "left"
      },
      border: {
        type: Boolean,
        default: false
      }
    },
    provide() {
      return {
        uniForm: this
      };
    },
    data() {
      return {
        // 表单本地值的记录，不应该与传如的值进行关联
        formData: {},
        formRules: {}
      };
    },
    computed: {
      // 计算数据源变化的
      localData() {
        const localVal = this.model || this.modelValue || this.value;
        if (localVal) {
          return deepCopy(localVal);
        }
        return {};
      }
    },
    watch: {
      // 监听数据变化 ,暂时不使用，需要单独赋值
      // localData: {},
      // 监听规则变化
      rules: {
        handler: function(val, oldVal) {
          this.setRules(val);
        },
        deep: true,
        immediate: true
      }
    },
    created() {
      let getbinddata = getApp().$vm.$.appContext.config.globalProperties.binddata;
      if (!getbinddata) {
        getApp().$vm.$.appContext.config.globalProperties.binddata = function(name2, value, formName) {
          if (formName) {
            this.$refs[formName].setValue(name2, value);
          } else {
            let formVm;
            for (let i in this.$refs) {
              const vm = this.$refs[i];
              if (vm && vm.$options && vm.$options.name === "uniForms") {
                formVm = vm;
                break;
              }
            }
            if (!formVm)
              return formatAppLog("error", "at uni_modules/uni-forms/components/uni-forms/uni-forms.vue:182", "当前 uni-froms 组件缺少 ref 属性");
            formVm.setValue(name2, value);
          }
        };
      }
      this.childrens = [];
      this.inputChildrens = [];
      this.setRules(this.rules);
    },
    methods: {
      /**
       * 外部调用方法
       * 设置规则 ，主要用于小程序自定义检验规则
       * @param {Array} rules 规则源数据
       */
      setRules(rules) {
        this.formRules = Object.assign({}, this.formRules, rules);
        this.validator = new SchemaValidator(rules);
      },
      /**
       * 外部调用方法
       * 设置数据，用于设置表单数据，公开给用户使用 ， 不支持在动态表单中使用
       * @param {Object} key
       * @param {Object} value
       */
      setValue(key, value) {
        let example = this.childrens.find((child) => child.name === key);
        if (!example)
          return null;
        this.formData[key] = getValue(key, value, this.formRules[key] && this.formRules[key].rules || []);
        return example.onFieldChange(this.formData[key]);
      },
      /**
       * 外部调用方法
       * 手动提交校验表单
       * 对整个表单进行校验的方法，参数为一个回调函数。
       * @param {Array} keepitem 保留不参与校验的字段
       * @param {type} callback 方法回调
       */
      validate(keepitem, callback) {
        return this.checkAll(this.formData, keepitem, callback);
      },
      /**
       * 外部调用方法
       * 部分表单校验
       * @param {Array|String} props 需要校验的字段
       * @param {Function} 回调函数
       */
      validateField(props = [], callback) {
        props = [].concat(props);
        let invalidFields = {};
        this.childrens.forEach((item) => {
          const name2 = realName(item.name);
          if (props.indexOf(name2) !== -1) {
            invalidFields = Object.assign({}, invalidFields, {
              [name2]: this.formData[name2]
            });
          }
        });
        return this.checkAll(invalidFields, [], callback);
      },
      /**
       * 外部调用方法
       * 移除表单项的校验结果。传入待移除的表单项的 prop 属性或者 prop 组成的数组，如不传则移除整个表单的校验结果
       * @param {Array|String} props 需要移除校验的字段 ，不填为所有
       */
      clearValidate(props = []) {
        props = [].concat(props);
        this.childrens.forEach((item) => {
          if (props.length === 0) {
            item.errMsg = "";
          } else {
            const name2 = realName(item.name);
            if (props.indexOf(name2) !== -1) {
              item.errMsg = "";
            }
          }
        });
      },
      /**
       * 外部调用方法 ，即将废弃
       * 手动提交校验表单
       * 对整个表单进行校验的方法，参数为一个回调函数。
       * @param {Array} keepitem 保留不参与校验的字段
       * @param {type} callback 方法回调
       */
      submit(keepitem, callback, type) {
        for (let i in this.dataValue) {
          const itemData = this.childrens.find((v) => v.name === i);
          if (itemData) {
            if (this.formData[i] === void 0) {
              this.formData[i] = this._getValue(i, this.dataValue[i]);
            }
          }
        }
        if (!type) {
          formatAppLog("warn", "at uni_modules/uni-forms/components/uni-forms/uni-forms.vue:289", "submit 方法即将废弃，请使用validate方法代替！");
        }
        return this.checkAll(this.formData, keepitem, callback, "submit");
      },
      // 校验所有
      async checkAll(invalidFields, keepitem, callback, type) {
        if (!this.validator)
          return;
        let childrens = [];
        for (let i in invalidFields) {
          const item = this.childrens.find((v) => realName(v.name) === i);
          if (item) {
            childrens.push(item);
          }
        }
        if (!callback && typeof keepitem === "function") {
          callback = keepitem;
        }
        let promise;
        if (!callback && typeof callback !== "function" && Promise) {
          promise = new Promise((resolve, reject) => {
            callback = function(valid, invalidFields2) {
              !valid ? resolve(invalidFields2) : reject(valid);
            };
          });
        }
        let results = [];
        let tempFormData = JSON.parse(JSON.stringify(invalidFields));
        for (let i in childrens) {
          const child = childrens[i];
          let name2 = realName(child.name);
          const result = await child.onFieldChange(tempFormData[name2]);
          if (result) {
            results.push(result);
            if (this.errShowType === "toast" || this.errShowType === "modal")
              break;
          }
        }
        if (Array.isArray(results)) {
          if (results.length === 0)
            results = null;
        }
        if (Array.isArray(keepitem)) {
          keepitem.forEach((v) => {
            let vName = realName(v);
            let value = getDataValue(v, this.localData);
            if (value !== void 0) {
              tempFormData[vName] = value;
            }
          });
        }
        if (type === "submit") {
          this.$emit("submit", {
            detail: {
              value: tempFormData,
              errors: results
            }
          });
        } else {
          this.$emit("validate", results);
        }
        let resetFormData = {};
        resetFormData = rawData(tempFormData, this.name);
        callback && typeof callback === "function" && callback(results, resetFormData);
        if (promise && callback) {
          return promise;
        } else {
          return null;
        }
      },
      /**
       * 返回validate事件
       * @param {Object} result
       */
      validateCheck(result) {
        this.$emit("validate", result);
      },
      _getValue: getValue,
      _isRequiredField: isRequiredField,
      _setDataValue: setDataValue,
      _getDataValue: getDataValue,
      _realName: realName,
      _isRealName: isRealName,
      _isEqual: isEqual
    }
  };
  function _sfc_render$q(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "uni-forms" }, [
      vue.createElementVNode("form", null, [
        vue.renderSlot(_ctx.$slots, "default", {}, void 0, true)
      ])
    ]);
  }
  const __easycom_4 = /* @__PURE__ */ _export_sfc(_sfc_main$r, [["render", _sfc_render$q], ["__scopeId", "data-v-9a1e3c32"], ["__file", "D:/Uniapp/htmlTest/赛创项目/uni_modules/uni-forms/components/uni-forms/uni-forms.vue"]]);
  const _sfc_main$q = {
    __name: "create",
    setup(__props, { expose: __expose }) {
      __expose();
      const formData = vue.reactive({
        title: "",
        description: "",
        categoryId: "",
        requirements: "",
        rewardTypeId: 1,
        rewardAmount: "",
        deadline: "",
        maxParticipants: 1,
        location: "",
        contactInfo: {
          qq: "",
          wechat: "",
          email: ""
        }
      });
      const categories = vue.ref([]);
      const rewardTypes = vue.ref([]);
      const steps = [
        { title: "基本信息", validate: ["title", "categoryId", "description", "requirements"] },
        { title: "任务设置", validate: ["deadline", "location", "maxParticipants", "rewardTypeId", "rewardAmount"] },
        { title: "联系方式", validate: [] },
        { title: "确认提交", validate: [] }
      ];
      const currentStep = vue.ref(0);
      vue.onMounted(async () => {
        try {
          const categoriesRes = await getTaskCategories();
          if (categoriesRes.code === 200) {
            categories.value = categoriesRes.data;
          } else {
            categories.value = [
              { id: 1, name: "问卷调查", iconUrl: "/icons/survey.png" },
              { id: 2, name: "数据收集", iconUrl: "/icons/data.png" },
              { id: 3, name: "实验参与", iconUrl: "/icons/experiment.png" },
              { id: 4, name: "校园活动", iconUrl: "/icons/activity.png" },
              { id: 5, name: "学术研究", iconUrl: "/icons/research.png" },
              { id: 6, name: "志愿服务", iconUrl: "/icons/volunteer.png" },
              { id: 7, name: "实习兼职", iconUrl: "/icons/internship.png" },
              { id: 8, name: "竞赛协助", iconUrl: "/icons/competition.png" },
              { id: 9, name: "技术支持", iconUrl: "/icons/tech.png" },
              { id: 10, name: "其他", iconUrl: "/icons/other.png" }
            ];
          }
          const rewardTypesRes = await getRewardTypes();
          if (rewardTypesRes.code === 200) {
            rewardTypes.value = rewardTypesRes.data;
          } else {
            rewardTypes.value = [
              { id: 1, name: "现金", unit: "元" },
              { id: 2, name: "学分", unit: "分" },
              { id: 3, name: "志愿服务", unit: "小时" },
              { id: 4, name: "实习机会", unit: "天" },
              { id: 5, name: "礼品", unit: "件" },
              { id: 6, name: "证书", unit: "张" }
            ];
          }
        } catch (error) {
          formatAppLog("error", "at pages/task-square/create.vue:321", "获取数据失败", error);
          categories.value = [
            { id: 1, name: "问卷调查", iconUrl: "/icons/survey.png" },
            { id: 2, name: "数据收集", iconUrl: "/icons/data.png" },
            { id: 3, name: "实验参与", iconUrl: "/icons/experiment.png" },
            { id: 4, name: "校园活动", iconUrl: "/icons/activity.png" },
            { id: 5, name: "学术研究", iconUrl: "/icons/research.png" },
            { id: 6, name: "志愿服务", iconUrl: "/icons/volunteer.png" },
            { id: 7, name: "实习兼职", iconUrl: "/icons/internship.png" },
            { id: 8, name: "竞赛协助", iconUrl: "/icons/competition.png" },
            { id: 9, name: "技术支持", iconUrl: "/icons/tech.png" },
            { id: 10, name: "其他", iconUrl: "/icons/other.png" }
          ];
          rewardTypes.value = [
            { id: 1, name: "现金", unit: "元" },
            { id: 2, name: "学分", unit: "分" },
            { id: 3, name: "志愿服务", unit: "小时" },
            { id: 4, name: "实习机会", unit: "天" },
            { id: 5, name: "礼品", unit: "件" },
            { id: 6, name: "证书", unit: "张" }
          ];
          uni.showToast({
            title: "获取数据失败，使用默认配置",
            icon: "none"
          });
        }
      });
      const rules = {
        title: {
          rules: [
            { required: true, errorMessage: "请输入任务标题" }
          ]
        },
        categoryId: {
          rules: [
            { required: true, errorMessage: "请选择任务类别" }
          ]
        },
        description: {
          rules: [
            { required: true, errorMessage: "请输入任务描述" },
            { minLength: 20, errorMessage: "任务描述至少20个字符" }
          ]
        },
        requirements: {
          rules: [
            { required: true, errorMessage: "请输入任务需求" }
          ]
        },
        deadline: {
          rules: [
            { required: true, errorMessage: "请选择截止日期" }
          ]
        },
        location: {
          rules: [
            { required: true, errorMessage: "请输入任务地点" }
          ]
        },
        rewardAmount: {
          rules: [
            { required: true, errorMessage: "请输入报酬金额" }
          ]
        },
        maxParticipants: {
          rules: [
            { required: true, errorMessage: "请输入最大参与人数" }
          ]
        }
      };
      const taskForm = vue.ref(null);
      const minDate = vue.computed(() => {
        const today = /* @__PURE__ */ new Date();
        return today.toISOString().split("T")[0];
      });
      const maxDate = vue.computed(() => {
        const today = /* @__PURE__ */ new Date();
        const maxDate2 = new Date(today.setFullYear(today.getFullYear() + 1));
        return maxDate2.toISOString().split("T")[0];
      });
      function selectCategory(categoryId) {
        formData.categoryId = categoryId;
      }
      function selectRewardType(typeId) {
        formData.rewardTypeId = typeId;
      }
      function onDateChange(e) {
        formData.deadline = e;
      }
      function getCategoryName(categoryId) {
        const category = categories.value.find((item) => item.id === categoryId);
        return category ? category.name : "";
      }
      function getRewardTypeName(rewardTypeId) {
        const rewardType = rewardTypes.value.find((item) => item.id === rewardTypeId);
        return rewardType ? rewardType.name : "";
      }
      function getRewardUnit(rewardTypeId) {
        const rewardType = rewardTypes.value.find((item) => item.id === rewardTypeId);
        return rewardType ? rewardType.unit : "";
      }
      function formatDate(dateStr) {
        if (!dateStr)
          return "";
        try {
          const date = new Date(dateStr);
          return `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, "0")}-${date.getDate().toString().padStart(2, "0")} ${date.getHours().toString().padStart(2, "0")}:${date.getMinutes().toString().padStart(2, "0")}`;
        } catch (e) {
          return dateStr;
        }
      }
      async function nextStep() {
        const currentValidateFields = steps[currentStep.value].validate;
        if (currentValidateFields.length > 0) {
          try {
            await taskForm.value.validateField(currentValidateFields);
            currentStep.value++;
          } catch (error) {
            uni.showToast({
              title: "请完成必填项",
              icon: "none"
            });
          }
        } else {
          currentStep.value++;
        }
      }
      function prevStep() {
        if (currentStep.value > 0) {
          currentStep.value--;
        }
      }
      function goToStep(step) {
        if (step < currentStep.value) {
          currentStep.value = step;
        }
      }
      function previewTask() {
        taskForm.value.validate().then((res) => {
          uni.showToast({
            title: "预览功能开发中",
            icon: "none"
          });
        }).catch((err) => {
          formatAppLog("log", "at pages/task-square/create.vue:502", "表单错误：", err);
        });
      }
      async function submitForm() {
        try {
          await taskForm.value.validate();
          formatAppLog("log", "at pages/task-square/create.vue:511", "表单数据：", formData);
          uni.showLoading({
            title: "提交中..."
          });
          const submitData = {
            title: formData.title,
            description: formData.description,
            categoryId: formData.categoryId,
            requirements: formData.requirements,
            rewardTypeId: formData.rewardTypeId,
            rewardAmount: Number(formData.rewardAmount),
            deadline: formatDateTime(formData.deadline),
            maxParticipants: Number(formData.maxParticipants),
            location: formData.location,
            contactInfo: formData.contactInfo
          };
          formatAppLog("log", "at pages/task-square/create.vue:532", "提交数据：", JSON.stringify(submitData, null, 2));
          const response = await createTask(submitData);
          uni.hideLoading();
          if (response.code === 200) {
            uni.showModal({
              title: "发布成功",
              content: "任务已成功发布",
              showCancel: false,
              success: (res) => {
                if (res.confirm) {
                  uni.navigateBack();
                }
              }
            });
          } else {
            let errorMessage = response.message || "发布失败";
            if (response.message && response.message.includes("LocalDateTime")) {
              errorMessage = "日期格式错误，请重新选择截止日期";
            }
            uni.showModal({
              title: "提交失败",
              content: errorMessage,
              showCancel: false
            });
          }
        } catch (err) {
          uni.hideLoading();
          formatAppLog("log", "at pages/task-square/create.vue:568", "表单错误：", err);
          uni.showToast({
            title: "表单验证失败，请检查输入",
            icon: "none"
          });
        }
      }
      function formatDateTime(dateTimeStr) {
        if (!dateTimeStr)
          return "";
        if (dateTimeStr.length <= 10) {
          return `${dateTimeStr}T23:59:59`;
        }
        const date = new Date(dateTimeStr);
        return date.toISOString().replace(".000Z", "");
      }
      function goBack() {
        uni.showModal({
          title: "提示",
          content: "是否放弃编辑？",
          success: (res) => {
            if (res.confirm) {
              uni.navigateBack();
            }
          }
        });
      }
      const __returned__ = { formData, categories, rewardTypes, steps, currentStep, rules, taskForm, minDate, maxDate, selectCategory, selectRewardType, onDateChange, getCategoryName, getRewardTypeName, getRewardUnit, formatDate, nextStep, prevStep, goToStep, previewTask, submitForm, formatDateTime, goBack, ref: vue.ref, reactive: vue.reactive, computed: vue.computed, onMounted: vue.onMounted, get getTaskCategories() {
        return getTaskCategories;
      }, get getRewardTypes() {
        return getRewardTypes;
      }, get createTask() {
        return createTask;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$p(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_easyinput = resolveEasycom(vue.resolveDynamicComponent("uni-easyinput"), __easycom_0);
    const _component_uni_forms_item = resolveEasycom(vue.resolveDynamicComponent("uni-forms-item"), __easycom_1$1);
    const _component_uni_datetime_picker = resolveEasycom(vue.resolveDynamicComponent("uni-datetime-picker"), __easycom_1);
    const _component_uni_number_box = resolveEasycom(vue.resolveDynamicComponent("uni-number-box"), __easycom_3);
    const _component_uni_forms = resolveEasycom(vue.resolveDynamicComponent("uni-forms"), __easycom_4);
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createElementVNode("view", { class: "header" }, [
        vue.createElementVNode("view", { class: "navbar" }, [
          vue.createElementVNode("view", {
            class: "back-btn",
            onClick: $setup.goBack
          }, [
            vue.createElementVNode("text", { class: "iconfont icon-back" })
          ]),
          vue.createElementVNode("view", { class: "title" }, "发布任务"),
          vue.createElementVNode("view", { class: "right-btns" }, [
            vue.createElementVNode("view", {
              class: "preview-btn",
              onClick: $setup.previewTask
            }, "预览")
          ])
        ]),
        vue.createCommentVNode(" 步骤指示器 "),
        vue.createElementVNode("view", { class: "steps-indicator" }, [
          (vue.openBlock(), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.steps, (step, index) => {
              return vue.createElementVNode("view", {
                key: index,
                class: vue.normalizeClass(["step-item", $setup.currentStep >= index ? "step-active" : ""]),
                onClick: ($event) => $setup.goToStep(index)
              }, [
                vue.createElementVNode(
                  "view",
                  { class: "step-circle" },
                  vue.toDisplayString(index + 1),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode(
                  "text",
                  { class: "step-text" },
                  vue.toDisplayString(step.title),
                  1
                  /* TEXT */
                )
              ], 10, ["onClick"]);
            }),
            64
            /* STABLE_FRAGMENT */
          ))
        ])
      ]),
      vue.createCommentVNode(" 表单内容 "),
      vue.createElementVNode("scroll-view", {
        "scroll-y": "",
        class: "form-scroll"
      }, [
        vue.createVNode(_component_uni_forms, {
          ref: "taskForm",
          modelValue: $setup.formData,
          rules: $setup.rules,
          "label-position": "top",
          "label-width": "80px"
        }, {
          default: vue.withCtx(() => [
            vue.createCommentVNode(" 步骤1：基本信息 "),
            vue.withDirectives(vue.createElementVNode(
              "view",
              { class: "form-section" },
              [
                vue.createElementVNode("view", { class: "section-title" }, "基本信息"),
                vue.createCommentVNode(" 任务标题 "),
                vue.createVNode(_component_uni_forms_item, {
                  name: "title",
                  label: "任务标题"
                }, {
                  default: vue.withCtx(() => [
                    vue.createVNode(_component_uni_easyinput, {
                      modelValue: $setup.formData.title,
                      "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.formData.title = $event),
                      placeholder: "请输入任务标题（15字以内）",
                      maxlength: "15"
                    }, null, 8, ["modelValue"])
                  ]),
                  _: 1
                  /* STABLE */
                }),
                vue.createCommentVNode(" 任务类别 "),
                vue.createVNode(_component_uni_forms_item, {
                  name: "categoryId",
                  label: "任务类别"
                }, {
                  default: vue.withCtx(() => [
                    vue.createElementVNode("view", { class: "category-tags" }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList($setup.categories, (item) => {
                          return vue.openBlock(), vue.createElementBlock("view", {
                            key: item.id,
                            class: vue.normalizeClass(["category-tag", $setup.formData.categoryId === item.id ? "category-tag-active" : ""]),
                            onClick: ($event) => $setup.selectCategory(item.id)
                          }, vue.toDisplayString(item.name), 11, ["onClick"]);
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ])
                  ]),
                  _: 1
                  /* STABLE */
                }),
                vue.createCommentVNode(" 任务描述 "),
                vue.createVNode(_component_uni_forms_item, {
                  name: "description",
                  label: "任务描述"
                }, {
                  default: vue.withCtx(() => [
                    vue.createVNode(_component_uni_easyinput, {
                      modelValue: $setup.formData.description,
                      "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.formData.description = $event),
                      type: "textarea",
                      placeholder: "请详细描述任务内容、要求等信息",
                      maxlength: "500",
                      autoHeight: true,
                      inputBorder: true
                    }, null, 8, ["modelValue"]),
                    vue.createElementVNode(
                      "text",
                      { class: "text-count" },
                      vue.toDisplayString($setup.formData.description.length) + "/500",
                      1
                      /* TEXT */
                    )
                  ]),
                  _: 1
                  /* STABLE */
                }),
                vue.createCommentVNode(" 任务需求 "),
                vue.createVNode(_component_uni_forms_item, {
                  name: "requirements",
                  label: "任务需求"
                }, {
                  default: vue.withCtx(() => [
                    vue.createVNode(_component_uni_easyinput, {
                      modelValue: $setup.formData.requirements,
                      "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => $setup.formData.requirements = $event),
                      type: "textarea",
                      placeholder: "请详细描述任务需要的能力、条件等",
                      maxlength: "300",
                      autoHeight: true,
                      inputBorder: true
                    }, null, 8, ["modelValue"]),
                    vue.createElementVNode(
                      "text",
                      { class: "text-count" },
                      vue.toDisplayString($setup.formData.requirements.length) + "/300",
                      1
                      /* TEXT */
                    )
                  ]),
                  _: 1
                  /* STABLE */
                })
              ],
              512
              /* NEED_PATCH */
            ), [
              [vue.vShow, $setup.currentStep === 0]
            ]),
            vue.createCommentVNode(" 步骤2：任务设置 "),
            vue.withDirectives(vue.createElementVNode(
              "view",
              { class: "form-section" },
              [
                vue.createElementVNode("view", { class: "section-title" }, "任务设置"),
                vue.createCommentVNode(" 截止日期 "),
                vue.createVNode(_component_uni_forms_item, {
                  name: "deadline",
                  label: "截止日期"
                }, {
                  default: vue.withCtx(() => [
                    vue.createVNode(_component_uni_datetime_picker, {
                      modelValue: $setup.formData.deadline,
                      "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => $setup.formData.deadline = $event),
                      type: "datetime",
                      start: $setup.minDate,
                      end: $setup.maxDate,
                      format: "yyyy-MM-dd HH:mm",
                      onChange: $setup.onDateChange
                    }, null, 8, ["modelValue", "start", "end"])
                  ]),
                  _: 1
                  /* STABLE */
                }),
                vue.createCommentVNode(" 任务地点 "),
                vue.createVNode(_component_uni_forms_item, {
                  name: "location",
                  label: "任务地点"
                }, {
                  default: vue.withCtx(() => [
                    vue.createVNode(_component_uni_easyinput, {
                      modelValue: $setup.formData.location,
                      "onUpdate:modelValue": _cache[4] || (_cache[4] = ($event) => $setup.formData.location = $event),
                      placeholder: "请输入任务地点"
                    }, null, 8, ["modelValue"])
                  ]),
                  _: 1
                  /* STABLE */
                }),
                vue.createCommentVNode(" 最大参与人数 "),
                vue.createVNode(_component_uni_forms_item, {
                  name: "maxParticipants",
                  label: "参与人数",
                  class: "nowrap-label"
                }, {
                  default: vue.withCtx(() => [
                    vue.createVNode(_component_uni_number_box, {
                      modelValue: $setup.formData.maxParticipants,
                      "onUpdate:modelValue": _cache[5] || (_cache[5] = ($event) => $setup.formData.maxParticipants = $event),
                      min: 1,
                      max: 100
                    }, null, 8, ["modelValue"])
                  ]),
                  _: 1
                  /* STABLE */
                }),
                vue.createCommentVNode(" 任务报酬 "),
                vue.createVNode(_component_uni_forms_item, {
                  name: "rewardTypeId",
                  label: "报酬类型"
                }, {
                  default: vue.withCtx(() => [
                    vue.createElementVNode("view", { class: "reward-types" }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList($setup.rewardTypes, (item) => {
                          return vue.openBlock(), vue.createElementBlock("view", {
                            key: item.id,
                            class: vue.normalizeClass(["reward-type-tag", $setup.formData.rewardTypeId === item.id ? "reward-type-active" : ""]),
                            onClick: ($event) => $setup.selectRewardType(item.id)
                          }, vue.toDisplayString(item.name), 11, ["onClick"]);
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ])
                  ]),
                  _: 1
                  /* STABLE */
                }),
                vue.createCommentVNode(" 报酬金额 "),
                vue.createVNode(_component_uni_forms_item, {
                  name: "rewardAmount",
                  label: "报酬金额"
                }, {
                  default: vue.withCtx(() => {
                    var _a;
                    return [
                      vue.createElementVNode("view", { class: "money-input-container" }, [
                        vue.withDirectives(vue.createElementVNode(
                          "input",
                          {
                            type: "number",
                            "onUpdate:modelValue": _cache[6] || (_cache[6] = ($event) => $setup.formData.rewardAmount = $event),
                            placeholder: "请输入数量",
                            maxlength: "10",
                            class: "money-field"
                          },
                          null,
                          512
                          /* NEED_PATCH */
                        ), [
                          [vue.vModelText, $setup.formData.rewardAmount]
                        ]),
                        vue.createElementVNode(
                          "text",
                          { class: "money-unit" },
                          vue.toDisplayString(((_a = $setup.rewardTypes.find((item) => item.id === $setup.formData.rewardTypeId)) == null ? void 0 : _a.unit) || "元"),
                          1
                          /* TEXT */
                        )
                      ])
                    ];
                  }),
                  _: 1
                  /* STABLE */
                })
              ],
              512
              /* NEED_PATCH */
            ), [
              [vue.vShow, $setup.currentStep === 1]
            ]),
            vue.createCommentVNode(" 步骤3：联系方式 "),
            vue.withDirectives(vue.createElementVNode(
              "view",
              { class: "form-section" },
              [
                vue.createElementVNode("view", { class: "section-title" }, "联系方式"),
                vue.createVNode(_component_uni_forms_item, {
                  name: "contactInfo.qq",
                  label: "联系QQ"
                }, {
                  default: vue.withCtx(() => [
                    vue.createVNode(_component_uni_easyinput, {
                      modelValue: $setup.formData.contactInfo.qq,
                      "onUpdate:modelValue": _cache[7] || (_cache[7] = ($event) => $setup.formData.contactInfo.qq = $event),
                      placeholder: "请输入联系QQ(选填)"
                    }, null, 8, ["modelValue"])
                  ]),
                  _: 1
                  /* STABLE */
                }),
                vue.createVNode(_component_uni_forms_item, {
                  name: "contactInfo.wechat",
                  label: "联系微信"
                }, {
                  default: vue.withCtx(() => [
                    vue.createVNode(_component_uni_easyinput, {
                      modelValue: $setup.formData.contactInfo.wechat,
                      "onUpdate:modelValue": _cache[8] || (_cache[8] = ($event) => $setup.formData.contactInfo.wechat = $event),
                      placeholder: "请输入微信号(选填)"
                    }, null, 8, ["modelValue"])
                  ]),
                  _: 1
                  /* STABLE */
                }),
                vue.createVNode(_component_uni_forms_item, {
                  name: "contactInfo.email",
                  label: "联系邮箱"
                }, {
                  default: vue.withCtx(() => [
                    vue.createVNode(_component_uni_easyinput, {
                      modelValue: $setup.formData.contactInfo.email,
                      "onUpdate:modelValue": _cache[9] || (_cache[9] = ($event) => $setup.formData.contactInfo.email = $event),
                      placeholder: "请输入电子邮箱(选填)"
                    }, null, 8, ["modelValue"])
                  ]),
                  _: 1
                  /* STABLE */
                })
              ],
              512
              /* NEED_PATCH */
            ), [
              [vue.vShow, $setup.currentStep === 2]
            ]),
            vue.createCommentVNode(" 步骤4：确认提交 "),
            vue.withDirectives(vue.createElementVNode(
              "view",
              { class: "form-section review-section" },
              [
                vue.createElementVNode("view", { class: "section-title" }, "确认信息"),
                vue.createElementVNode("view", { class: "review-item" }, [
                  vue.createElementVNode("text", { class: "review-label" }, "任务标题："),
                  vue.createElementVNode(
                    "text",
                    { class: "review-value" },
                    vue.toDisplayString($setup.formData.title),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "review-item" }, [
                  vue.createElementVNode("text", { class: "review-label" }, "任务类别："),
                  vue.createElementVNode(
                    "text",
                    { class: "review-value" },
                    vue.toDisplayString($setup.getCategoryName($setup.formData.categoryId)),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "review-item" }, [
                  vue.createElementVNode("text", { class: "review-label" }, "截止日期："),
                  vue.createElementVNode(
                    "text",
                    { class: "review-value" },
                    vue.toDisplayString($setup.formatDate($setup.formData.deadline)),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "review-item" }, [
                  vue.createElementVNode("text", { class: "review-label" }, "任务地点："),
                  vue.createElementVNode(
                    "text",
                    { class: "review-value" },
                    vue.toDisplayString($setup.formData.location),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "review-item" }, [
                  vue.createElementVNode("text", { class: "review-label" }, "最大参与人数："),
                  vue.createElementVNode(
                    "text",
                    { class: "review-value" },
                    vue.toDisplayString($setup.formData.maxParticipants) + " 人",
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "review-item" }, [
                  vue.createElementVNode("text", { class: "review-label" }, "报酬类型："),
                  vue.createElementVNode(
                    "text",
                    { class: "review-value" },
                    vue.toDisplayString($setup.getRewardTypeName($setup.formData.rewardTypeId)),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "review-item" }, [
                  vue.createElementVNode("text", { class: "review-label" }, "报酬金额："),
                  vue.createElementVNode(
                    "text",
                    { class: "review-value" },
                    vue.toDisplayString($setup.formData.rewardAmount) + " " + vue.toDisplayString($setup.getRewardUnit($setup.formData.rewardTypeId)),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "review-info" }, [
                  vue.createElementVNode("text", null, '请确认以上信息无误，点击"提交"按钮发布任务')
                ])
              ],
              512
              /* NEED_PATCH */
            ), [
              [vue.vShow, $setup.currentStep === 3]
            ])
          ]),
          _: 1
          /* STABLE */
        }, 8, ["modelValue"])
      ]),
      vue.createCommentVNode(" 底部导航按钮 "),
      vue.createElementVNode("view", { class: "step-actions" }, [
        $setup.currentStep > 0 ? (vue.openBlock(), vue.createElementBlock("button", {
          key: 0,
          class: "prev-btn",
          onClick: $setup.prevStep
        }, "上一步")) : vue.createCommentVNode("v-if", true),
        $setup.currentStep < $setup.steps.length - 1 ? (vue.openBlock(), vue.createElementBlock("button", {
          key: 1,
          class: "next-btn",
          onClick: $setup.nextStep
        }, "下一步")) : vue.createCommentVNode("v-if", true),
        $setup.currentStep === $setup.steps.length - 1 ? (vue.openBlock(), vue.createElementBlock("button", {
          key: 2,
          class: "submit-btn",
          onClick: $setup.submitForm
        }, "提交")) : vue.createCommentVNode("v-if", true)
      ])
    ]);
  }
  const PagesTaskSquareCreate = /* @__PURE__ */ _export_sfc(_sfc_main$q, [["render", _sfc_render$p], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/task-square/create.vue"]]);
  const _sfc_main$p = {
    components: {
      SvgIcon
    },
    data() {
      return {
        defaultAvatar: "/static/images/default-avatar.png",
        teamId: null,
        teamInfo: {},
        teamMembers: [],
        showPhone: false,
        isLoading: true,
        userInfo: null,
        hasApplied: false,
        // 是否已申请加入
        isTeamMember: false,
        // 是否是团队成员
        isTeamLeader: false,
        // 是否是团队队长
        applyLoading: false
        // 申请按钮加载状态
      };
    },
    computed: {
      hasAvailableRoles() {
        if (!this.teamInfo.roles)
          return false;
        return this.teamInfo.roles.some((role) => role.currentCount < role.requiredCount);
      }
    },
    // 页面生命周期函数
    onLoad(option) {
      formatAppLog("log", "at pages/team/detail.vue:198", "队伍详情页面参数:", option);
      if (option && option.id) {
        this.teamId = option.id;
        this.getUserInfo();
        this.getTeamDetail();
      } else {
        uni.showToast({
          title: "队伍ID不能为空",
          icon: "none"
        });
        setTimeout(() => {
          uni.navigateBack();
        }, 1500);
      }
    },
    onShow() {
      this.getUserInfo();
      if (this.teamId) {
        this.checkTeamStatus();
      }
    },
    methods: {
      // 获取当前用户信息
      getUserInfo() {
        const userInfo = uni.getStorageSync("userInfo");
        if (userInfo) {
          this.userInfo = typeof userInfo === "string" ? JSON.parse(userInfo) : userInfo;
        }
      },
      // 检查用户与团队的关系状态
      async checkTeamStatus() {
        if (!this.userInfo || !this.userInfo.userId)
          return;
        try {
          const res = await teamApi.checkTeamStatus(this.teamId);
          if (res.code === 200) {
            this.hasApplied = res.data === true;
          }
        } catch (error) {
          formatAppLog("error", "at pages/team/detail.vue:241", "检查团队状态失败", error);
        }
      },
      getStatusClass(status) {
        switch (status) {
          case "0":
            return "status-recruiting";
          case "1":
            return "status-filled";
          case "2":
            return "status-disbanded";
          default:
            return "status-recruiting";
        }
      },
      getStatusIcon(status) {
        switch (status) {
          case "0":
            return "icon-check-circle";
          case "1":
            return "icon-hourglass";
          case "2":
            return "icon-times-circle";
          default:
            return "icon-check-circle";
        }
      },
      hidePhone(phone) {
        if (!phone)
          return "";
        return phone.replace(/(\d{3})\d{4}(\d{4})/, "$1****$2");
      },
      togglePhone() {
        this.showPhone = !this.showPhone;
      },
      copyText(text) {
        uni.setClipboardData({
          data: text,
          success: () => {
            uni.showToast({
              title: "复制成功",
              icon: "success"
            });
          }
        });
      },
      goBack() {
        uni.navigateBack();
      },
      goToCompetition(competitionId) {
        if (!competitionId)
          return;
        uni.navigateTo({
          url: `/pages/competition/detail?id=${competitionId}`
        });
      },
      async applyRole(roleId) {
        if (this.hasApplied) {
          uni.showToast({
            title: "您已申请或已加入该团队",
            icon: "none"
          });
          return;
        }
        uni.showModal({
          title: "申请加入理由",
          content: "",
          editable: true,
          placeholderText: "我希望加入团队参与...",
          success: async (res) => {
            if (res.confirm) {
              const message = res.content || "希望能加入团队，与大家一起学习成长。";
              this.applyLoading = true;
              try {
                const applyData = {
                  teamId: this.teamId,
                  roleId,
                  message
                };
                const result = await teamApi.applyTeam(applyData);
                if (result.code === 200) {
                  uni.showToast({
                    title: "申请已提交",
                    icon: "success"
                  });
                  this.hasApplied = true;
                  setTimeout(() => {
                    uni.showModal({
                      title: "申请已提交",
                      content: "您可以在申请管理中查看申请状态",
                      confirmText: "查看申请",
                      cancelText: "稍后再看",
                      success: (res2) => {
                        if (res2.confirm) {
                          uni.navigateTo({
                            url: "/pages/team/applications"
                          });
                        }
                      }
                    });
                  }, 1500);
                } else {
                  uni.showToast({
                    title: result.message || "申请提交失败",
                    icon: "none"
                  });
                }
              } catch (error) {
                formatAppLog("error", "at pages/team/detail.vue:355", "申请失败", error);
                uni.showToast({
                  title: "网络异常，请稍后重试",
                  icon: "none"
                });
              } finally {
                this.applyLoading = false;
              }
            }
          }
        });
      },
      showApplyOptions() {
        if (!this.userInfo || !this.userInfo.userId) {
          uni.showModal({
            title: "提示",
            content: "请先登录后再申请加入团队",
            confirmText: "去登录",
            success: (res) => {
              if (res.confirm) {
                uni.navigateTo({
                  url: "/pages/login/login"
                });
              }
            }
          });
          return;
        }
        if (this.hasApplied) {
          uni.showToast({
            title: "您已申请或已加入该团队",
            icon: "none"
          });
          return;
        }
        if (this.teamInfo.roles && this.teamInfo.roles.length > 0) {
          const availableRoles = this.teamInfo.roles.filter((role) => role.currentCount < role.requiredCount);
          if (availableRoles.length > 1) {
            const itemList = availableRoles.map((role) => `${role.name}（${role.currentCount}/${role.requiredCount}）`);
            uni.showActionSheet({
              itemList,
              success: (res) => {
                this.applyRole(availableRoles[res.tapIndex].id);
              }
            });
          } else if (availableRoles.length === 1) {
            this.applyRole(availableRoles[0].id);
          } else {
            uni.showToast({
              title: "当前没有可申请的角色",
              icon: "none"
            });
          }
        } else {
          uni.showToast({
            title: "当前没有可申请的角色",
            icon: "none"
          });
        }
      },
      editTeam() {
        uni.navigateTo({
          url: `/pages/team/edit?id=${this.teamId}`
        });
      },
      async disbandTeam() {
        uni.showModal({
          title: "解散队伍",
          content: "确定要解散该队伍吗？此操作不可撤销",
          confirmColor: "#f56c6c",
          success: async (res) => {
            if (res.confirm) {
              try {
                const result = await teamApi.disbandTeam(this.teamId);
                if (result.code === 200) {
                  uni.showToast({
                    title: "队伍已解散",
                    icon: "success"
                  });
                  setTimeout(() => {
                    uni.navigateBack();
                  }, 1500);
                } else {
                  uni.showToast({
                    title: result.message || "解散队伍失败",
                    icon: "none"
                  });
                }
              } catch (error) {
                formatAppLog("error", "at pages/team/detail.vue:454", "解散队伍失败", error);
                uni.showToast({
                  title: "网络异常，请稍后重试",
                  icon: "none"
                });
              }
            }
          }
        });
      },
      async leaveTeam() {
        uni.showModal({
          title: "退出队伍",
          content: "确定要退出该队伍吗？",
          confirmColor: "#f56c6c",
          success: async (res) => {
            if (res.confirm) {
              try {
                const result = await teamApi.leaveTeam(this.teamId);
                if (result.code === 200) {
                  uni.showToast({
                    title: "已退出队伍",
                    icon: "success"
                  });
                  setTimeout(() => {
                    uni.navigateBack();
                  }, 1500);
                } else {
                  uni.showToast({
                    title: result.message || "退出失败",
                    icon: "none"
                  });
                }
              } catch (error) {
                formatAppLog("error", "at pages/team/detail.vue:489", "退出队伍失败", error);
                uni.showToast({
                  title: "网络异常，请稍后重试",
                  icon: "none"
                });
              }
            }
          }
        });
      },
      // 获取队伍成员数据
      async getTeamMembers() {
        try {
          const res = await teamApi.getTeamMembers(this.teamId);
          if (res && res.code === 200 && res.data) {
            this.teamMembers = res.data;
            if (this.userInfo && this.userInfo.userId) {
              const currentUserId = this.userInfo.userId;
              const isMember = this.teamMembers.some((member) => member.userId === currentUserId);
              const isLeader = isMember && this.teamMembers.some((member) => member.userId === currentUserId && member.isLeader);
              this.isTeamMember = isMember;
              this.isTeamLeader = isLeader;
            }
            formatAppLog("log", "at pages/team/detail.vue:517", "获取到队伍成员:", this.teamMembers);
          } else {
            formatAppLog("log", "at pages/team/detail.vue:519", "获取队伍成员失败:", res == null ? void 0 : res.message);
          }
        } catch (error) {
          formatAppLog("error", "at pages/team/detail.vue:522", "获取队伍成员出错", error);
        }
      },
      // 获取队伍详情数据
      async getTeamDetail() {
        this.isLoading = true;
        try {
          const res = await teamApi.getTeamDetail(this.teamId);
          if (res && res.code === 200 && res.data) {
            this.teamInfo = res.data;
            formatAppLog("log", "at pages/team/detail.vue:533", "获取到队伍详情:", this.teamInfo);
            if (this.userInfo && this.userInfo.userId && this.teamInfo.leaderId === this.userInfo.userId) {
              this.isTeamLeader = true;
              this.isTeamMember = true;
            }
            this.getTeamMembers();
            this.checkTeamStatus();
          } else {
            uni.showToast({
              title: (res == null ? void 0 : res.message) || "获取队伍详情失败",
              icon: "none"
            });
            formatAppLog("log", "at pages/team/detail.vue:551", "获取队伍详情失败:", res);
          }
        } catch (error) {
          formatAppLog("error", "at pages/team/detail.vue:554", "获取队伍详情出错", error);
          uni.showToast({
            title: "网络异常，请稍后重试",
            icon: "none"
          });
        } finally {
          this.isLoading = false;
        }
      }
    }
  };
  function _sfc_render$o(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_SvgIcon = vue.resolveComponent("SvgIcon");
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createElementVNode("view", { class: "top-bar" }, [
        vue.createElementVNode("view", { class: "flex-between px-4 py-3" }, [
          vue.createElementVNode("view", {
            class: "back-btn",
            onClick: _cache[0] || (_cache[0] = (...args) => $options.goBack && $options.goBack(...args))
          }, [
            vue.createVNode(_component_SvgIcon, {
              name: "back",
              size: "24"
            })
          ]),
          vue.createElementVNode(
            "text",
            { class: "page-title" },
            vue.toDisplayString($data.teamInfo.name || "队伍详情"),
            1
            /* TEXT */
          ),
          vue.createElementVNode("view", { class: "header-actions" }, [
            vue.createVNode(_component_SvgIcon, {
              name: "souchang",
              size: 30
            }),
            vue.createVNode(_component_SvgIcon, {
              name: "fenxiang",
              size: "30"
            })
          ])
        ])
      ]),
      vue.createCommentVNode(" 队伍基本信息 "),
      vue.createElementVNode("view", { class: "info-card" }, [
        vue.createElementVNode("view", { class: "flex-between mb-3" }, [
          vue.createElementVNode("view", {
            class: "competition-link",
            onClick: _cache[1] || (_cache[1] = ($event) => $options.goToCompetition($data.teamInfo.competitionId))
          }, [
            vue.createVNode(_component_SvgIcon, {
              name: "guanlian",
              size: "17",
              class: "mr-1 blue-text"
            }),
            vue.createElementVNode(
              "view",
              { class: "blue-text" },
              "关联竞赛：" + vue.toDisplayString($data.teamInfo.competitionName),
              1
              /* TEXT */
            )
          ])
        ]),
        vue.createElementVNode("view", { class: "leader-info" }, [
          vue.createElementVNode("image", {
            class: "leader-avatar",
            src: $data.teamInfo.leaderAvatarUrl || $data.defaultAvatar
          }, null, 8, ["src"]),
          vue.createElementVNode("view", { class: "leader-detail" }, [
            vue.createElementVNode(
              "text",
              { class: "leader-name" },
              "队长：" + vue.toDisplayString($data.teamInfo.leaderName),
              1
              /* TEXT */
            ),
            vue.createElementVNode(
              "text",
              { class: "leader-major" },
              vue.toDisplayString($data.teamInfo.leaderMajor || "未设置专业"),
              1
              /* TEXT */
            )
          ]),
          vue.createElementVNode(
            "view",
            {
              class: vue.normalizeClass(["status-tag", $options.getStatusClass($data.teamInfo.status)])
            },
            [
              vue.createCommentVNode(' 		  <text class="iconfont" :class="getStatusIcon(teamInfo.status)"></text> '),
              vue.createElementVNode(
                "text",
                null,
                vue.toDisplayString($data.teamInfo.statusText),
                1
                /* TEXT */
              )
            ],
            2
            /* CLASS */
          )
        ]),
        $data.teamInfo.direction ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 0,
          class: "research-direction"
        }, [
          vue.createElementVNode("text", { class: "section-title" }, "队伍方向"),
          vue.createElementVNode(
            "text",
            { class: "desc-text" },
            vue.toDisplayString($data.teamInfo.direction),
            1
            /* TEXT */
          )
        ])) : vue.createCommentVNode("v-if", true),
        vue.createElementVNode("view", { class: "team-desc-section" }, [
          vue.createElementVNode("text", { class: "section-title" }, "队伍描述"),
          vue.createElementVNode(
            "text",
            { class: "desc-text" },
            vue.toDisplayString($data.teamInfo.description),
            1
            /* TEXT */
          )
        ]),
        vue.createElementVNode("view", { class: "team-meta" }, [
          vue.createElementVNode(
            "text",
            { class: "meta-item" },
            "组队截止：" + vue.toDisplayString($data.teamInfo.recruitmentDeadlineFormatted),
            1
            /* TEXT */
          ),
          vue.createElementVNode("view", { class: "view-count" }, [
            vue.createVNode(_component_SvgIcon, {
              name: "liulan",
              size: "20"
            }),
            vue.createElementVNode(
              "text",
              null,
              "浏览次数：" + vue.toDisplayString($data.teamInfo.viewCount),
              1
              /* TEXT */
            )
          ])
        ])
      ]),
      vue.createCommentVNode(" 招募角色 "),
      vue.createElementVNode("view", { class: "section-card" }, [
        vue.createElementVNode("text", { class: "section-header" }, "招募角色"),
        vue.createElementVNode("view", { class: "role-list" }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($data.teamInfo.roles, (role) => {
              return vue.openBlock(), vue.createElementBlock(
                "view",
                {
                  class: vue.normalizeClass(["role-card", { "role-filled": role.currentCount >= role.requiredCount }]),
                  key: role.id
                },
                [
                  vue.createElementVNode("view", { class: "flex-between mb-2" }, [
                    vue.createElementVNode("view", null, [
                      vue.createElementVNode(
                        "text",
                        { class: "role-title" },
                        vue.toDisplayString(role.name),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode(
                        "text",
                        { class: "role-count" },
                        "需求：" + vue.toDisplayString(role.requiredCount) + "人 / 已招募：" + vue.toDisplayString(role.currentCount) + "人",
                        1
                        /* TEXT */
                      )
                    ]),
                    vue.createElementVNode(
                      "view",
                      {
                        class: vue.normalizeClass(["role-status-tag", role.currentCount >= role.requiredCount ? "filled-tag" : "recruiting-tag"])
                      },
                      vue.toDisplayString(role.currentCount >= role.requiredCount ? "已满员" : "招募中"),
                      3
                      /* TEXT, CLASS */
                    )
                  ]),
                  vue.createElementVNode(
                    "text",
                    { class: "role-desc" },
                    vue.toDisplayString(role.description),
                    1
                    /* TEXT */
                  ),
                  vue.createElementVNode("view", { class: "skill-section" }, [
                    vue.createElementVNode("text", { class: "skill-header" }, "技能要求:"),
                    vue.createElementVNode("view", { class: "skill-tags" }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList(role.skillRequirements, (skill, index) => {
                          return vue.openBlock(), vue.createElementBlock(
                            "text",
                            {
                              class: "skill-tag",
                              key: index
                            },
                            vue.toDisplayString(skill),
                            1
                            /* TEXT */
                          );
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ])
                  ]),
                  vue.createElementVNode("button", {
                    class: vue.normalizeClass(["apply-btn", role.currentCount >= role.requiredCount ? "disabled-btn" : "active-btn"]),
                    disabled: role.currentCount >= role.requiredCount,
                    onClick: ($event) => $options.applyRole(role.id)
                  }, [
                    role.currentCount < role.requiredCount ? (vue.openBlock(), vue.createBlock(_component_SvgIcon, {
                      key: 0,
                      name: "chuangjianduiwu",
                      size: "30"
                    })) : vue.createCommentVNode("v-if", true),
                    vue.createTextVNode(" 申请加入 ")
                  ], 10, ["disabled", "onClick"])
                ],
                2
                /* CLASS */
              );
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ]),
      vue.createCommentVNode(" 队伍成员 "),
      $data.teamMembers.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 0,
        class: "info-card"
      }, [
        vue.createElementVNode(
          "text",
          { class: "section-header" },
          "队伍成员 (" + vue.toDisplayString($data.teamMembers.length) + ")",
          1
          /* TEXT */
        ),
        vue.createElementVNode("view", { class: "member-grid" }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($data.teamMembers, (member, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: "member-item",
                key: index
              }, [
                vue.createElementVNode("image", {
                  class: vue.normalizeClass(["member-avatar", { "leader-border2": member.isLeader }]),
                  src: member.userAvatarUrl || $data.defaultAvatar
                }, null, 10, ["src"]),
                vue.createElementVNode("text", { class: "member-name" }, [
                  vue.createTextVNode(
                    vue.toDisplayString(member.userName) + " ",
                    1
                    /* TEXT */
                  ),
                  member.roleName ? (vue.openBlock(), vue.createElementBlock(
                    "view",
                    {
                      key: 0,
                      class: "member-role"
                    },
                    "(" + vue.toDisplayString(member.roleName) + ")",
                    1
                    /* TEXT */
                  )) : vue.createCommentVNode("v-if", true),
                  member.isLeader ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 1,
                    class: "leader-label"
                  }, "(队长)")) : vue.createCommentVNode("v-if", true)
                ]),
                member.userMajor ? (vue.openBlock(), vue.createElementBlock(
                  "text",
                  {
                    key: 0,
                    class: "member-major"
                  },
                  vue.toDisplayString(member.userMajor),
                  1
                  /* TEXT */
                )) : vue.createCommentVNode("v-if", true)
              ]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ])) : vue.createCommentVNode("v-if", true),
      vue.createCommentVNode(" 指导老师 "),
      $data.teamInfo.teachers && $data.teamInfo.teachers.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 1,
        class: "info-card"
      }, [
        vue.createElementVNode("text", { class: "section-header" }, "指导老师"),
        vue.createElementVNode("view", { class: "member-grid" }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($data.teamInfo.teachers, (teacher, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: "member-item",
                key: index
              }, [
                vue.createElementVNode("image", {
                  class: "member-avatar",
                  src: teacher.avatarUrl || $data.defaultAvatar
                }, null, 8, ["src"]),
                vue.createElementVNode(
                  "text",
                  { class: "member-name" },
                  vue.toDisplayString(teacher.name),
                  1
                  /* TEXT */
                ),
                teacher.major ? (vue.openBlock(), vue.createElementBlock(
                  "text",
                  {
                    key: 0,
                    class: "teacher-major"
                  },
                  vue.toDisplayString(teacher.major),
                  1
                  /* TEXT */
                )) : vue.createCommentVNode("v-if", true)
              ]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ])) : vue.createCommentVNode("v-if", true),
      vue.createCommentVNode(" 联系方式 "),
      $data.teamInfo.contactInfo ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 2,
        class: "info-card"
      }, [
        vue.createElementVNode("text", { class: "section-header" }, "联系方式"),
        vue.createElementVNode("view", { class: "contact-list" }, [
          $data.teamInfo.contactInfo.wechat ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 0,
            class: "contact-item"
          }, [
            vue.createVNode(_component_SvgIcon, {
              name: "weixintubiao",
              size: "20",
              class: "contact-icon wechat-color"
            }),
            vue.createElementVNode(
              "text",
              { class: "contact-text" },
              "微信：" + vue.toDisplayString($data.teamInfo.contactInfo.wechat),
              1
              /* TEXT */
            ),
            vue.createElementVNode("text", {
              class: "copy-btn",
              onClick: _cache[2] || (_cache[2] = ($event) => $options.copyText($data.teamInfo.contactInfo.wechat))
            }, "复制")
          ])) : vue.createCommentVNode("v-if", true),
          $data.teamInfo.contactInfo.phone ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 1,
            class: "contact-item"
          }, [
            vue.createVNode(_component_SvgIcon, {
              name: "youxiang",
              size: "20",
              class: "contact-icon phone-color"
            }),
            vue.createElementVNode(
              "text",
              { class: "contact-text" },
              "电话：" + vue.toDisplayString($data.showPhone ? $data.teamInfo.contactInfo.phone : $options.hidePhone($data.teamInfo.contactInfo.phone)),
              1
              /* TEXT */
            ),
            vue.createElementVNode(
              "text",
              {
                class: "copy-btn",
                onClick: _cache[3] || (_cache[3] = (...args) => $options.togglePhone && $options.togglePhone(...args))
              },
              vue.toDisplayString($data.showPhone ? "隐藏" : "查看"),
              1
              /* TEXT */
            )
          ])) : vue.createCommentVNode("v-if", true),
          $data.teamInfo.contactInfo.qq ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 2,
            class: "contact-item"
          }, [
            vue.createVNode(_component_SvgIcon, {
              name: "qqtubiao",
              size: "20",
              class: "contact-icon qq-color"
            }),
            vue.createElementVNode(
              "text",
              { class: "contact-text" },
              "QQ群：" + vue.toDisplayString($data.teamInfo.contactInfo.qq),
              1
              /* TEXT */
            ),
            vue.createElementVNode("text", {
              class: "copy-btn",
              onClick: _cache[4] || (_cache[4] = ($event) => $options.copyText($data.teamInfo.contactInfo.qq))
            }, "复制")
          ])) : vue.createCommentVNode("v-if", true)
        ])
      ])) : vue.createCommentVNode("v-if", true)
    ]);
  }
  const PagesTeamDetail = /* @__PURE__ */ _export_sfc(_sfc_main$p, [["render", _sfc_render$o], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/team/detail.vue"]]);
  const _sfc_main$o = {
    __name: "list",
    setup(__props, { expose: __expose }) {
      __expose();
      const categories = vue.ref(["全部队伍", "学科竞赛", "创新创业", "体育竞赛", "文艺比赛"]);
      const currentCategory = vue.ref(0);
      const headerBarRef = vue.ref(null);
      const headerPlaceholderHeight = vue.computed(() => {
        if (headerBarRef.value && headerBarRef.value.headerHeight) {
          return headerBarRef.value.headerHeight + "rpx";
        }
        return categories.value && categories.value.length > 0 ? "200rpx" : "120rpx";
      });
      const teamData = vue.reactive({
        pageNum: 1,
        pageSize: 10,
        total: 0,
        pages: 0,
        list: [],
        hasPrevious: false,
        hasNext: false
      });
      const loading = vue.ref(false);
      const refreshing = vue.ref(false);
      const loadingMore = vue.ref(false);
      const noMoreData = vue.ref(false);
      const queryParams = vue.reactive({
        pageNum: 1,
        pageSize: 10,
        keyword: "",
        orderByViewCount: false
      });
      async function getTeamList(refresh = false) {
        if (refresh) {
          queryParams.pageNum = 1;
          refreshing.value = true;
        } else {
          loading.value = true;
        }
        try {
          const params = {};
          Object.keys(queryParams).forEach((key) => {
            if (queryParams[key] !== null && queryParams[key] !== void 0 && queryParams[key] !== "") {
              params[key] = queryParams[key];
            }
          });
          formatAppLog("log", "at pages/team/list.vue:136", "请求参数:", params);
          const res = await teamApi.getTeamList(params);
          formatAppLog("log", "at pages/team/list.vue:138", "响应结果:", res);
          if (res.code === 200 && res.data) {
            if (refresh) {
              teamData.list = res.data.list || [];
            } else {
              teamData.list = [...teamData.list, ...res.data.list || []];
            }
            teamData.pageNum = res.data.pageNum;
            teamData.pageSize = res.data.pageSize;
            teamData.total = res.data.total;
            teamData.pages = res.data.pages;
            teamData.hasPrevious = res.data.hasPrevious;
            teamData.hasNext = res.data.hasNext;
            noMoreData.value = !res.data.hasNext;
          } else {
            uni.showToast({
              title: (res == null ? void 0 : res.message) || "获取团队列表失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/team/list.vue:163", "获取团队列表出错", error);
          if (error.statusCode === 401 || error.statusCode === 403) {
            uni.showModal({
              title: "登录已过期",
              content: "请重新登录后查看",
              confirmText: "去登录",
              success: function(res) {
                if (res.confirm) {
                  uni.removeStorageSync("token");
                  uni.navigateTo({
                    url: "/pages/login/login"
                  });
                }
              }
            });
          } else {
            uni.showToast({
              title: "网络异常，请稍后重试",
              icon: "none"
            });
          }
        } finally {
          loading.value = false;
          refreshing.value = false;
          loadingMore.value = false;
        }
      }
      function onPullDownRefresh() {
        getTeamList(true).then(() => {
          uni.stopPullDownRefresh();
        });
      }
      function loadMore() {
        if (loadingMore.value || noMoreData.value)
          return;
        if (!teamData.hasNext) {
          noMoreData.value = true;
          return;
        }
        loadingMore.value = true;
        queryParams.pageNum += 1;
        getTeamList();
      }
      function selectCategory(index) {
        if (currentCategory.value === index)
          return;
        currentCategory.value = index;
        if (index === 0) {
          delete queryParams.categoryId;
        } else {
          queryParams.categoryId = index;
        }
        getTeamList(true);
      }
      vue.onMounted(() => {
        formatAppLog("log", "at pages/team/list.vue:237", "组队列表页面加载");
        const token = uni.getStorageSync("token");
        if (!token) {
          uni.showModal({
            title: "提示",
            content: "请先登录后查看团队列表",
            confirmText: "去登录",
            success: function(res) {
              if (res.confirm) {
                uni.navigateTo({
                  url: "/pages/login/login"
                });
              }
            }
          });
          return;
        }
        getTeamList();
      });
      function goToTeamDetail(teamId) {
        uni.navigateTo({
          url: `/pages/team/detail?id=${teamId}`
        });
      }
      function applyToJoin(teamId) {
        const token = uni.getStorageSync("token");
        if (!token) {
          uni.showModal({
            title: "提示",
            content: "请先登录后再申请加入团队",
            confirmText: "去登录",
            success: function(res) {
              if (res.confirm) {
                uni.navigateTo({
                  url: "/pages/login/login"
                });
              }
            }
          });
          return;
        }
        teamApi.checkTeamStatus(teamId).then((res) => {
          if (res.code === 200) {
            if (res.data === true) {
              uni.showToast({
                title: "您已申请或已加入该团队",
                icon: "none"
              });
            } else {
              uni.navigateTo({
                url: `/pages/team/detail?id=${teamId}`
              });
            }
          }
        }).catch((err) => {
          formatAppLog("error", "at pages/team/list.vue:304", "检查团队状态失败", err);
          uni.navigateTo({
            url: `/pages/team/detail?id=${teamId}`
          });
        });
      }
      function createTeam() {
        uni.navigateTo({
          url: "/pages/team/create"
        });
      }
      function handleTabChange(tab) {
        if (tab === "home") {
          uni.switchTab({
            url: "/pages/index/index"
          });
        } else if (tab === "competition") {
          uni.switchTab({
            url: "/pages/competition/index"
          });
        } else if (tab === "profile") {
          uni.switchTab({
            url: "/pages/profile/index"
          });
        }
      }
      function showPublishOptions() {
        uni.showActionSheet({
          itemList: ["创建新团队", "招募队友", "发布项目展示"],
          success: function(res) {
            if (res.tapIndex === 0) {
              createTeam();
            } else {
              uni.showToast({
                title: `选择了: ${res.tapIndex}`,
                icon: "none"
              });
            }
          }
        });
      }
      function goToSearch() {
        uni.navigateTo({
          url: "/pages/search/index"
        });
      }
      function showFilterOptions() {
        uni.showActionSheet({
          itemList: ["最新发布", "热门团队", "即将截止"],
          success: function(res) {
            uni.showToast({
              title: `选择了筛选: ${res.tapIndex}`,
              icon: "none"
            });
          }
        });
      }
      const __returned__ = { categories, currentCategory, headerBarRef, headerPlaceholderHeight, teamData, loading, refreshing, loadingMore, noMoreData, queryParams, getTeamList, onPullDownRefresh, loadMore, selectCategory, goToTeamDetail, applyToJoin, createTeam, handleTabChange, showPublishOptions, goToSearch, showFilterOptions, ref: vue.ref, reactive: vue.reactive, onMounted: vue.onMounted, computed: vue.computed, TeamCard, TabBar, HeaderBar, get teamApi() {
        return teamApi;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$n(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createVNode($setup["HeaderBar"], {
        ref: "headerBarRef",
        title: "组队广场",
        categories: $setup.categories,
        "default-category": $setup.currentCategory,
        "show-filter": "true",
        onSearch: $setup.goToSearch,
        onFilter: $setup.showFilterOptions,
        onCategoryChange: $setup.selectCategory
      }, null, 8, ["categories", "default-category"]),
      vue.createCommentVNode(" 导航栏占位 "),
      vue.createElementVNode(
        "view",
        {
          class: "header-placeholder",
          style: vue.normalizeStyle({ height: $setup.headerPlaceholderHeight })
        },
        null,
        4
        /* STYLE */
      ),
      vue.createCommentVNode(" 组队列表 "),
      vue.createElementVNode(
        "scroll-view",
        {
          "scroll-y": "true",
          class: "team-list",
          onScrolltolower: $setup.loadMore
        },
        [
          vue.createCommentVNode(" 使用团队卡片组件 "),
          $setup.teamData.list && $setup.teamData.list.length > 0 ? (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            { key: 0 },
            vue.renderList($setup.teamData.list, (team, index) => {
              return vue.openBlock(), vue.createBlock($setup["TeamCard"], {
                key: team.id,
                team,
                index,
                onDetail: $setup.goToTeamDetail,
                onApply: $setup.applyToJoin
              }, null, 8, ["team", "index"]);
            }),
            128
            /* KEYED_FRAGMENT */
          )) : $setup.loading ? (vue.openBlock(), vue.createElementBlock(
            vue.Fragment,
            { key: 1 },
            [
              vue.createCommentVNode(" 加载中状态 "),
              vue.createElementVNode("view", { class: "loading-state" }, [
                vue.createElementVNode("view", { class: "loading-spinner" }),
                vue.createElementVNode("text", { class: "loading-text" }, "加载中...")
              ])
            ],
            2112
            /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
          )) : (vue.openBlock(), vue.createElementBlock(
            vue.Fragment,
            { key: 2 },
            [
              vue.createCommentVNode(" 空状态提示 "),
              vue.createElementVNode("view", { class: "empty-state" }, [
                vue.createElementVNode("text", { class: "empty-text" }, "暂无团队数据")
              ])
            ],
            2112
            /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
          )),
          vue.createCommentVNode(" 加载更多提示 "),
          $setup.teamData.list && $setup.teamData.list.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 3,
            class: "load-more"
          }, [
            $setup.loadingMore ? (vue.openBlock(), vue.createElementBlock("text", { key: 0 }, "正在加载更多...")) : $setup.teamData.hasNext ? (vue.openBlock(), vue.createElementBlock("text", {
              key: 1,
              onClick: $setup.loadMore
            }, "点击加载更多")) : (vue.openBlock(), vue.createElementBlock("text", { key: 2 }, "— 没有更多数据了 —"))
          ])) : vue.createCommentVNode("v-if", true)
        ],
        32
        /* NEED_HYDRATION */
      ),
      vue.createCommentVNode(" 底部导航栏 "),
      vue.createVNode($setup["TabBar"], {
        "active-tab": "team",
        onTabChange: $setup.handleTabChange,
        onPublish: $setup.showPublishOptions
      })
    ]);
  }
  const PagesTeamList = /* @__PURE__ */ _export_sfc(_sfc_main$o, [["render", _sfc_render$n], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/team/list.vue"]]);
  const _sfc_main$n = {
    __name: "create",
    setup(__props, { expose: __expose }) {
      __expose();
      const competitionPopup = vue.ref(null);
      const teacherPopup = vue.ref(null);
      const skillPopup = vue.ref(null);
      const baseUrl = config.baseUrl;
      const form = vue.reactive({
        competitionId: "",
        teamName: "",
        researchDirection: "",
        description: "",
        recruitDeadline: "",
        email: "",
        wechat: "",
        qq: "",
        teachers: [],
        roles: []
      });
      const competitionList = vue.ref([]);
      const filteredCompetitionList = vue.ref([]);
      const competitionCategories = vue.ref([]);
      const selectedCategoryId = vue.ref(0);
      const teacherList = vue.ref([]);
      const filteredTeacherList = vue.ref([]);
      const teacherMajors = vue.ref([]);
      const selectedMajorId = vue.ref(0);
      const currentTeacherIndex = vue.ref(null);
      const skillTags = vue.ref({});
      const skillCategories = vue.ref([]);
      const selectedSkillCategory = vue.ref("全部");
      const currentRoleIndex = vue.ref(null);
      const skillSearchKey = vue.ref("");
      const filteredSkillTags = vue.ref([]);
      const skillInputs = vue.reactive({});
      const teacherSearchKey = vue.ref("");
      const selectedCompetitionName = vue.computed(() => {
        const competition = competitionList.value.find((item) => item.id === form.competitionId);
        return competition ? competition.title : "";
      });
      async function getCompetitionsBasicInfo() {
        try {
          uni.showLoading({
            title: "加载中..."
          });
          const selectedId = form.competitionId;
          let tempCompetition = null;
          if (selectedId) {
            tempCompetition = competitionList.value.find((item) => item.id === selectedId);
          }
          const res = await competitionsApi.getCompetitionsBasicInfo();
          if (res && res.code === 200 && res.data) {
            const apiHasSelectedCompetition = res.data.some((item) => item.id === selectedId);
            if (selectedId && !apiHasSelectedCompetition && tempCompetition) {
              competitionList.value = [...res.data, tempCompetition];
            } else {
              competitionList.value = res.data;
            }
            filteredCompetitionList.value = [...competitionList.value];
            const categories = /* @__PURE__ */ new Map();
            categories.set(0, { id: 0, name: "全部分类" });
            res.data.forEach((item) => {
              if (!categories.has(item.categoryId)) {
                categories.set(item.categoryId, {
                  id: item.categoryId,
                  name: item.categoryName
                });
              }
            });
            competitionCategories.value = Array.from(categories.values());
            formatAppLog("log", "at pages/team/create.vue:575", "API请求结果:", res.data);
            formatAppLog("log", "at pages/team/create.vue:576", "处理后的竞赛列表:", competitionList.value);
            formatAppLog("log", "at pages/team/create.vue:577", "当前选中竞赛ID:", selectedId);
          } else {
            showToast("获取竞赛列表失败");
          }
        } catch (error) {
          formatAppLog("error", "at pages/team/create.vue:582", "获取竞赛列表失败:", error);
          showToast("获取竞赛列表失败");
        } finally {
          uni.hideLoading();
        }
      }
      async function getTeachersList() {
        try {
          uni.showLoading({
            title: "加载中..."
          });
          const res = await uni.request({
            url: `${baseUrl}/api/teachers/list`,
            method: "GET"
          });
          if (res && res.statusCode === 200 && res.data && res.data.code === 200) {
            teacherList.value = res.data.data;
            filteredTeacherList.value = [...res.data.data];
            const majors = /* @__PURE__ */ new Map();
            majors.set(0, { id: 0, name: "全部专业" });
            res.data.data.forEach((item) => {
              if (item.major && !majors.has(item.major)) {
                majors.set(item.major, {
                  id: item.major,
                  name: item.major
                });
              }
            });
            teacherMajors.value = Array.from(majors.values());
          } else {
            showToast("获取教师列表失败");
          }
        } catch (error) {
          formatAppLog("error", "at pages/team/create.vue:624", "获取教师列表失败:", error);
          showToast("获取教师列表失败");
        } finally {
          uni.hideLoading();
        }
      }
      function filterCompetitionsByCategory(categoryId) {
        selectedCategoryId.value = categoryId;
        if (categoryId === 0) {
          filteredCompetitionList.value = [...competitionList.value];
        } else {
          filteredCompetitionList.value = competitionList.value.filter((item) => item.categoryId === categoryId);
        }
      }
      function filterTeachersByMajor(majorId) {
        selectedMajorId.value = majorId;
        teacherSearchKey.value = "";
        if (majorId === 0) {
          filteredTeacherList.value = [...teacherList.value];
        } else {
          filteredTeacherList.value = teacherList.value.filter((item) => item.major === majorId);
        }
      }
      function goBack() {
        uni.navigateBack();
      }
      function showCompetitionModal() {
        competitionPopup.value.open();
      }
      function closeCompetitionModal() {
        competitionPopup.value.close();
      }
      function selectCompetition(competition) {
        form.competitionId = competition.id;
      }
      function confirmCompetitionSelection() {
        closeCompetitionModal();
      }
      function showTeacherModal(index) {
        teacherPopup.value.open();
        currentTeacherIndex.value = index;
      }
      function closeTeacherModal() {
        teacherPopup.value.close();
        teacherSearchKey.value = "";
        filterTeachersByMajor(selectedMajorId.value);
      }
      function selectTeacher(teacher) {
        if (isTeacherAlreadySelected(teacher.id)) {
          uni.showToast({
            title: "该教师已被选择",
            icon: "none"
          });
          return;
        }
        form.teachers[currentTeacherIndex.value].id = teacher.id;
        form.teachers[currentTeacherIndex.value].name = teacher.name;
      }
      function confirmTeacherSelection() {
        closeTeacherModal();
      }
      function formatDate(timestamp) {
        if (!timestamp)
          return "";
        const date = new Date(timestamp);
        return `${date.getFullYear()}-${padZero(date.getMonth() + 1)}-${padZero(date.getDate())} ${padZero(date.getHours())}:${padZero(date.getMinutes())}`;
      }
      function padZero(num) {
        return num < 10 ? `0${num}` : num;
      }
      function addTeacher() {
        form.teachers.push({ id: "", name: "", role: "" });
      }
      function removeTeacher(index) {
        form.teachers.splice(index, 1);
      }
      function addRole() {
        form.roles.push({
          name: "",
          count: 1,
          description: "",
          skills: []
        });
      }
      function removeRole(index) {
        form.roles.splice(index, 1);
      }
      function addSkill(roleIndex) {
        const skill = skillInputs[roleIndex];
        if (skill && skill.trim()) {
          if (!form.roles[roleIndex].skills) {
            form.roles[roleIndex].skills = [];
          }
          form.roles[roleIndex].skills.push(skill.trim());
          skillInputs[roleIndex] = "";
        }
      }
      function removeSkill(roleIndex, skillIndex) {
        form.roles[roleIndex].skills.splice(skillIndex, 1);
      }
      function validateForm() {
        if (!form.competitionId) {
          showToast("请选择关联竞赛");
          return false;
        }
        if (!form.teamName) {
          showToast("请输入团队名称");
          return false;
        }
        if (!form.researchDirection) {
          showToast("请输入研究方向");
          return false;
        }
        if (!form.description) {
          showToast("请输入团队描述");
          return false;
        }
        if (!form.recruitDeadline) {
          showToast("请选择招募截止日期");
          return false;
        }
        if (!form.email) {
          showToast("请输入电子邮箱");
          return false;
        }
        for (let i = 0; i < form.teachers.length; i++) {
          const teacher = form.teachers[i];
          if (!teacher.id) {
            showToast(`请完善指导老师${i + 1}的信息`);
            return false;
          }
        }
        if (form.roles.length === 0) {
          showToast("请至少添加一个招募角色");
          return false;
        }
        return true;
      }
      function showToast(title) {
        uni.showToast({
          title,
          icon: "none"
        });
      }
      async function submitTeam() {
        if (!validateForm())
          return;
        uni.showLoading({
          title: "提交中..."
        });
        try {
          const apiData = {
            competitionId: form.competitionId,
            name: form.teamName,
            description: form.description,
            direction: form.researchDirection,
            recruitmentDeadline: new Date(form.recruitDeadline).toISOString(),
            // 联系方式
            contactInfo: {
              phone: form.phone || "",
              email: form.email || "",
              wechat: form.wechat || "",
              qq: form.qq || ""
            },
            // 指导老师
            teacherIds: form.teachers.map((teacher) => teacher.id),
            teacherRoles: form.teachers.map((teacher) => teacher.role),
            // 角色要求
            roles: form.roles.map((role) => ({
              name: role.name,
              requiredCount: parseInt(role.count) || 1,
              description: role.description,
              skillRequirements: role.skills || []
            }))
          };
          formatAppLog("log", "at pages/team/create.vue:870", "提交数据:", apiData);
          const res = await teamApi.createTeam(apiData);
          formatAppLog("log", "at pages/team/create.vue:874", res);
          uni.hideLoading();
          if (res.code === 200) {
            uni.showToast({
              title: "创建成功",
              icon: "success"
            });
            setTimeout(() => {
              uni.navigateBack();
            }, 1500);
          } else {
            showToast(res.message || "创建失败");
          }
        } catch (error) {
          formatAppLog("error", "at pages/team/create.vue:890", "创建团队失败:", error);
          uni.hideLoading();
          showToast("创建失败，请稍后重试");
        }
      }
      vue.onMounted(async () => {
        const pages = getCurrentPages();
        const page = pages[pages.length - 1];
        if (page.$page && page.$page.options) {
          const { competitionId, competitionName } = page.$page.options;
          if (competitionId) {
            formatAppLog("log", "at pages/team/create.vue:906", "从URL获取到竞赛ID:", competitionId);
            formatAppLog("log", "at pages/team/create.vue:907", "从URL获取到竞赛名称:", competitionName);
            form.competitionId = competitionId;
            if (competitionName) {
              const decodedName = decodeURIComponent(competitionName);
              formatAppLog("log", "at pages/team/create.vue:916", "解码后的竞赛名称:", decodedName);
              const tempCompetition = {
                id: competitionId,
                title: decodedName,
                categoryId: 0,
                categoryName: "未分类"
              };
              competitionList.value.push(tempCompetition);
              filteredCompetitionList.value = [...competitionList.value];
              formatAppLog("log", "at pages/team/create.vue:929", "已添加临时竞赛对象:", tempCompetition);
              formatAppLog("log", "at pages/team/create.vue:930", "当前竞赛列表:", competitionList.value);
            }
          }
        }
        await getCompetitionsBasicInfo();
        await getTeachersList();
        await getSkillTags();
        await vue.nextTick();
        formatAppLog("log", "at pages/team/create.vue:942", "竞赛选择组件:", competitionPopup.value);
      });
      function getCategoryClass(categoryId) {
        switch (categoryId) {
          case 1:
            return "category-programming";
          case 2:
            return "category-math";
          case 3:
            return "category-electronics";
          case 4:
            return "category-robotics";
          case 5:
            return "category-innovation";
          default:
            return "";
        }
      }
      function isTeacherAlreadySelected(teacherId) {
        if (currentTeacherIndex.value !== null && form.teachers[currentTeacherIndex.value].id === teacherId) {
          return false;
        }
        return form.teachers.some((teacher) => teacher.id === teacherId && teacher.id !== "");
      }
      function searchTeachers() {
        if (!teacherSearchKey.value.trim()) {
          filterTeachersByMajor(selectedMajorId.value);
          return;
        }
        const keyword = teacherSearchKey.value.toLowerCase().trim();
        let baseList = selectedMajorId.value === 0 ? teacherList.value : teacherList.value.filter((item) => item.major === selectedMajorId.value);
        filteredTeacherList.value = baseList.filter(
          (item) => item.name.toLowerCase().includes(keyword)
        );
      }
      function clearTeacherSearch() {
        teacherSearchKey.value = "";
        filterTeachersByMajor(selectedMajorId.value);
      }
      function showSkillModal(roleIndex) {
        skillPopup.value.open();
        currentRoleIndex.value = roleIndex;
      }
      function closeSkillModal() {
        skillPopup.value.close();
        skillSearchKey.value = "";
        filterSkillsByCategory(selectedSkillCategory.value);
      }
      async function getSkillTags() {
        try {
          uni.showLoading({
            title: "加载中..."
          });
          const res = await uni.request({
            url: `${baseUrl}/api/skill-tags/group-by-category`,
            method: "GET"
          });
          if (res && res.statusCode === 200 && res.data && res.data.code === 200) {
            skillTags.value = res.data.data;
            const categories = ["全部", ...Object.keys(res.data.data)];
            skillCategories.value = categories;
            const allTags = [];
            Object.entries(res.data.data).forEach(([category, tags]) => {
              tags.forEach((tag) => {
                allTags.push({
                  ...tag,
                  category
                });
              });
            });
            filteredSkillTags.value = allTags;
            formatAppLog("log", "at pages/team/create.vue:1047", "所有技能标签:", allTags);
            formatAppLog("log", "at pages/team/create.vue:1048", "分类:", categories);
          } else {
            showToast("获取技能标签失败");
          }
        } catch (error) {
          formatAppLog("error", "at pages/team/create.vue:1053", "获取技能标签失败:", error);
          showToast("获取技能标签失败");
        } finally {
          uni.hideLoading();
        }
      }
      function filterSkillsByCategory(category) {
        selectedSkillCategory.value = category;
        skillSearchKey.value = "";
        formatAppLog("log", "at pages/team/create.vue:1065", "筛选分类:", category);
        formatAppLog("log", "at pages/team/create.vue:1066", "所有技能标签数据:", skillTags.value);
        if (category === "全部") {
          const allTags = [];
          Object.entries(skillTags.value).forEach(([cat, tags]) => {
            tags.forEach((tag) => {
              allTags.push({
                ...tag,
                category: cat
              });
            });
          });
          filteredSkillTags.value = allTags;
        } else {
          const categoryTags = skillTags.value[category] || [];
          filteredSkillTags.value = categoryTags.map((tag) => ({
            ...tag,
            category
          }));
        }
        formatAppLog("log", "at pages/team/create.vue:1089", "筛选后的技能标签:", filteredSkillTags.value);
      }
      function confirmSkillSelection() {
        closeSkillModal();
      }
      function isSkillSelected(tagName) {
        const role = form.roles[currentRoleIndex.value];
        return role.skills.includes(tagName);
      }
      function isSkillAlreadySelected(tagName) {
        const role = form.roles[currentRoleIndex.value];
        if (role.skills.includes(tagName)) {
          return false;
        }
        for (let i = 0; i < form.roles.length; i++) {
          if (i !== currentRoleIndex.value && form.roles[i].skills.includes(tagName)) {
            return true;
          }
        }
        return false;
      }
      function toggleSkillSelection(skill) {
        const role = form.roles[currentRoleIndex.value];
        if (isSkillSelected(skill.tagName)) {
          role.skills = role.skills.filter((item) => item !== skill.tagName);
        } else {
          role.skills.push(skill.tagName);
        }
      }
      function searchSkills() {
        formatAppLog("log", "at pages/team/create.vue:1133", "搜索技能:", skillSearchKey.value);
        if (!skillSearchKey.value.trim()) {
          filterSkillsByCategory(selectedSkillCategory.value);
          return;
        }
        const keyword = skillSearchKey.value.toLowerCase().trim();
        let baseList = [];
        if (selectedSkillCategory.value === "全部") {
          Object.entries(skillTags.value).forEach(([category, tags]) => {
            tags.forEach((tag) => {
              baseList.push({
                ...tag,
                category
              });
            });
          });
        } else {
          const categoryTags = skillTags.value[selectedSkillCategory.value] || [];
          baseList = categoryTags.map((tag) => ({
            ...tag,
            category: selectedSkillCategory.value
          }));
        }
        filteredSkillTags.value = baseList.filter(
          (item) => item.tagName.toLowerCase().includes(keyword) || item.description && item.description.toLowerCase().includes(keyword)
        );
        formatAppLog("log", "at pages/team/create.vue:1171", "搜索结果:", filteredSkillTags.value);
      }
      function clearSkillSearch() {
        skillSearchKey.value = "";
        filterSkillsByCategory(selectedSkillCategory.value);
      }
      function getSelectedSkillsCount() {
        if (currentRoleIndex.value === null)
          return 0;
        const role = form.roles[currentRoleIndex.value];
        return role.skills ? role.skills.length : 0;
      }
      const __returned__ = { competitionPopup, teacherPopup, skillPopup, baseUrl, form, competitionList, filteredCompetitionList, competitionCategories, selectedCategoryId, teacherList, filteredTeacherList, teacherMajors, selectedMajorId, currentTeacherIndex, skillTags, skillCategories, selectedSkillCategory, currentRoleIndex, skillSearchKey, filteredSkillTags, skillInputs, teacherSearchKey, selectedCompetitionName, getCompetitionsBasicInfo, getTeachersList, filterCompetitionsByCategory, filterTeachersByMajor, goBack, showCompetitionModal, closeCompetitionModal, selectCompetition, confirmCompetitionSelection, showTeacherModal, closeTeacherModal, selectTeacher, confirmTeacherSelection, formatDate, padZero, addTeacher, removeTeacher, addRole, removeRole, addSkill, removeSkill, validateForm, showToast, submitTeam, getCategoryClass, isTeacherAlreadySelected, searchTeachers, clearTeacherSearch, showSkillModal, closeSkillModal, getSkillTags, filterSkillsByCategory, confirmSkillSelection, isSkillSelected, isSkillAlreadySelected, toggleSkillSelection, searchSkills, clearSkillSearch, getSelectedSkillsCount, ref: vue.ref, reactive: vue.reactive, computed: vue.computed, onMounted: vue.onMounted, nextTick: vue.nextTick, get teamApi() {
        return teamApi;
      }, get competitionsApi() {
        return competitionsApi;
      }, get dev() {
        return config;
      }, SvgIcon };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$m(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_0$3);
    const _component_uni_datetime_picker = resolveEasycom(vue.resolveDynamicComponent("uni-datetime-picker"), __easycom_1);
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createElementVNode("view", { class: "sticky-header" }, [
        vue.createElementVNode("view", { class: "nav-bar" }, [
          vue.createElementVNode("view", {
            class: "back-btn",
            onClick: $setup.goBack
          }, [
            vue.createVNode($setup["SvgIcon"], {
              name: "back",
              size: "24"
            })
          ]),
          vue.createElementVNode("text", { class: "page-title" }, "创建团队"),
          vue.createElementVNode("view", { class: "help-btn" }, [
            vue.createVNode($setup["SvgIcon"], {
              name: "fenxiang",
              size: "24"
            })
          ])
        ])
      ]),
      vue.createCommentVNode(" 表单内容 "),
      vue.createElementVNode("scroll-view", {
        "scroll-y": "",
        class: "form-content"
      }, [
        vue.createCommentVNode(" 基本信息部分 "),
        vue.createElementVNode("view", { class: "form-section" }, [
          vue.createElementVNode("view", { class: "section-header" }, [
            vue.createVNode($setup["SvgIcon"], {
              name: "jibenxinxi",
              class: "section-icon",
              size: "22"
            }),
            vue.createElementVNode("text", { class: "section-title" }, "基本信息")
          ]),
          vue.createCommentVNode(" 竞赛选择 "),
          vue.createElementVNode("view", { class: "form-item" }, [
            vue.createElementVNode("text", { class: "form-label" }, [
              vue.createTextVNode("关联竞赛"),
              vue.createElementVNode("text", { class: "required" }, "*")
            ]),
            vue.createElementVNode("view", {
              class: "select-box",
              onClick: $setup.showCompetitionModal
            }, [
              $setup.form.competitionId ? (vue.openBlock(), vue.createElementBlock(
                "text",
                {
                  key: 0,
                  class: "select-text"
                },
                vue.toDisplayString($setup.selectedCompetitionName),
                1
                /* TEXT */
              )) : (vue.openBlock(), vue.createElementBlock("text", {
                key: 1,
                class: "placeholder-text"
              }, "请选择竞赛")),
              vue.createVNode($setup["SvgIcon"], {
                name: "xialaxuanze",
                size: "24"
              })
            ])
          ]),
          vue.createCommentVNode(" 竞赛选择弹窗 "),
          vue.createVNode(
            _component_uni_popup,
            {
              ref: "competitionPopup",
              type: "bottom"
            },
            {
              default: vue.withCtx(() => [
                vue.createElementVNode("view", { class: "popup-container" }, [
                  vue.createElementVNode("view", { class: "popup-header" }, [
                    vue.createElementVNode("text", { class: "popup-title" }, "选择竞赛"),
                    vue.createElementVNode("text", {
                      class: "popup-close",
                      onClick: $setup.closeCompetitionModal
                    }, "关闭")
                  ]),
                  vue.createCommentVNode(" 分类选择 "),
                  vue.createElementVNode("scroll-view", {
                    "scroll-x": "true",
                    class: "category-scroll"
                  }, [
                    vue.createElementVNode("view", { class: "category-list" }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList($setup.competitionCategories, (category) => {
                          return vue.openBlock(), vue.createElementBlock("view", {
                            key: category.id,
                            class: vue.normalizeClass(["category-tag", { "active-category": $setup.selectedCategoryId === category.id }]),
                            onClick: ($event) => $setup.filterCompetitionsByCategory(category.id)
                          }, [
                            vue.createElementVNode(
                              "text",
                              null,
                              vue.toDisplayString(category.name),
                              1
                              /* TEXT */
                            )
                          ], 10, ["onClick"]);
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ])
                  ]),
                  vue.createCommentVNode(" 竞赛列表 "),
                  vue.createElementVNode("scroll-view", {
                    "scroll-y": "true",
                    class: "competitions-list"
                  }, [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList($setup.filteredCompetitionList, (competition) => {
                        return vue.openBlock(), vue.createElementBlock("view", {
                          key: competition.id,
                          class: vue.normalizeClass(["competition-item", { "active-competition": $setup.form.competitionId === competition.id }]),
                          onClick: ($event) => $setup.selectCompetition(competition)
                        }, [
                          vue.createElementVNode("view", { class: "competition-info" }, [
                            vue.createElementVNode(
                              "text",
                              { class: "competition-title" },
                              vue.toDisplayString(competition.title),
                              1
                              /* TEXT */
                            ),
                            vue.createElementVNode(
                              "text",
                              {
                                class: vue.normalizeClass(["competition-category", $setup.getCategoryClass(competition.categoryId)])
                              },
                              vue.toDisplayString(competition.categoryName),
                              3
                              /* TEXT, CLASS */
                            )
                          ]),
                          competition.isHot === 1 ? (vue.openBlock(), vue.createElementBlock("text", {
                            key: 0,
                            class: "hot-tag"
                          }, "热门")) : vue.createCommentVNode("v-if", true),
                          $setup.form.competitionId === competition.id ? (vue.openBlock(), vue.createElementBlock("text", {
                            key: 1,
                            class: "iconfont icon-check"
                          })) : vue.createCommentVNode("v-if", true)
                        ], 10, ["onClick"]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    )),
                    $setup.filteredCompetitionList.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 0,
                      class: "empty-tip"
                    }, [
                      vue.createElementVNode("text", null, "该分类下暂无竞赛")
                    ])) : vue.createCommentVNode("v-if", true)
                  ]),
                  vue.createElementVNode("view", { class: "popup-footer" }, [
                    vue.createElementVNode("button", {
                      class: "confirm-btn",
                      onClick: $setup.confirmCompetitionSelection
                    }, "确定")
                  ])
                ])
              ]),
              _: 1
              /* STABLE */
            },
            512
            /* NEED_PATCH */
          ),
          vue.createCommentVNode(" 团队名称 "),
          vue.createElementVNode("view", { class: "form-item" }, [
            vue.createElementVNode("text", { class: "form-label" }, [
              vue.createTextVNode("团队名称"),
              vue.createElementVNode("text", { class: "required" }, "*")
            ]),
            vue.withDirectives(vue.createElementVNode(
              "input",
              {
                type: "text",
                "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.form.teamName = $event),
                placeholder: "请输入团队名称",
                class: "form-input"
              },
              null,
              512
              /* NEED_PATCH */
            ), [
              [vue.vModelText, $setup.form.teamName]
            ])
          ]),
          vue.createCommentVNode(" 研究方向 "),
          vue.createElementVNode("view", { class: "form-item" }, [
            vue.createElementVNode("text", { class: "form-label" }, [
              vue.createTextVNode("研究方向"),
              vue.createElementVNode("text", { class: "required" }, "*")
            ]),
            vue.withDirectives(vue.createElementVNode(
              "input",
              {
                type: "text",
                "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.form.researchDirection = $event),
                placeholder: "请输入研究方向",
                class: "form-input"
              },
              null,
              512
              /* NEED_PATCH */
            ), [
              [vue.vModelText, $setup.form.researchDirection]
            ])
          ]),
          vue.createCommentVNode(" 团队描述 "),
          vue.createElementVNode("view", { class: "form-item" }, [
            vue.createElementVNode("text", { class: "form-label" }, [
              vue.createTextVNode("团队描述"),
              vue.createElementVNode("text", { class: "required" }, "*")
            ]),
            vue.withDirectives(vue.createElementVNode(
              "textarea",
              {
                "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => $setup.form.description = $event),
                placeholder: "请简要描述团队情况和目标",
                class: "form-textarea"
              },
              null,
              512
              /* NEED_PATCH */
            ), [
              [vue.vModelText, $setup.form.description]
            ])
          ])
        ]),
        vue.createCommentVNode(" 招募信息部分 "),
        vue.createElementVNode("view", { class: "form-section" }, [
          vue.createElementVNode("view", { class: "section-header" }, [
            vue.createVNode($setup["SvgIcon"], {
              name: "zhaomuxingxi",
              class: "section-icon",
              size: "30"
            }),
            vue.createElementVNode("text", { class: "section-title" }, "招募信息")
          ]),
          vue.createCommentVNode(" 招募截止日期 "),
          vue.createElementVNode("view", { class: "form-item" }, [
            vue.createElementVNode("text", { class: "form-label" }, [
              vue.createTextVNode("招募截止日期"),
              vue.createElementVNode("text", { class: "required" }, "*")
            ]),
            vue.createElementVNode("view", { class: "date-picker-box" }, [
              vue.createVNode(_component_uni_datetime_picker, {
                type: "datetime",
                modelValue: $setup.form.recruitDeadline,
                "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => $setup.form.recruitDeadline = $event),
                "clear-icon": false,
                "return-type": "timestamp"
              }, {
                default: vue.withCtx(() => [
                  vue.createElementVNode("view", { class: "picker-view" }, [
                    $setup.form.recruitDeadline ? (vue.openBlock(), vue.createElementBlock(
                      "text",
                      {
                        key: 0,
                        class: "select-text"
                      },
                      vue.toDisplayString($setup.formatDate($setup.form.recruitDeadline)),
                      1
                      /* TEXT */
                    )) : (vue.openBlock(), vue.createElementBlock("text", {
                      key: 1,
                      class: "placeholder-text"
                    }, "请选择截止日期")),
                    vue.createVNode($setup["SvgIcon"], {
                      name: "rqi",
                      class: "picker-icon",
                      size: "24"
                    })
                  ])
                ]),
                _: 1
                /* STABLE */
              }, 8, ["modelValue"])
            ])
          ])
        ]),
        vue.createCommentVNode(" 联系方式部分 "),
        vue.createElementVNode("view", { class: "form-section" }, [
          vue.createElementVNode("view", { class: "section-header" }, [
            vue.createVNode($setup["SvgIcon"], {
              name: "lianxifangshi",
              class: "section-icon",
              size: "22"
            }),
            vue.createElementVNode("text", { class: "section-title" }, "联系方式")
          ]),
          vue.createCommentVNode(" 电子邮箱 "),
          vue.createElementVNode("view", { class: "form-item" }, [
            vue.createElementVNode("text", { class: "form-label" }, [
              vue.createTextVNode("电子邮箱"),
              vue.createElementVNode("text", { class: "required" }, "*")
            ]),
            vue.withDirectives(vue.createElementVNode(
              "input",
              {
                type: "text",
                "onUpdate:modelValue": _cache[4] || (_cache[4] = ($event) => $setup.form.email = $event),
                placeholder: "请输入电子邮箱",
                class: "form-input"
              },
              null,
              512
              /* NEED_PATCH */
            ), [
              [vue.vModelText, $setup.form.email]
            ])
          ]),
          vue.createCommentVNode(" 微信 "),
          vue.createElementVNode("view", { class: "form-item" }, [
            vue.createElementVNode("text", { class: "form-label" }, "微信"),
            vue.withDirectives(vue.createElementVNode(
              "input",
              {
                type: "text",
                "onUpdate:modelValue": _cache[5] || (_cache[5] = ($event) => $setup.form.wechat = $event),
                placeholder: "请输入微信号",
                class: "form-input"
              },
              null,
              512
              /* NEED_PATCH */
            ), [
              [vue.vModelText, $setup.form.wechat]
            ])
          ]),
          vue.createCommentVNode(" QQ "),
          vue.createElementVNode("view", { class: "form-item" }, [
            vue.createElementVNode("text", { class: "form-label" }, "QQ"),
            vue.withDirectives(vue.createElementVNode(
              "input",
              {
                type: "text",
                "onUpdate:modelValue": _cache[6] || (_cache[6] = ($event) => $setup.form.qq = $event),
                placeholder: "请输入QQ号",
                class: "form-input"
              },
              null,
              512
              /* NEED_PATCH */
            ), [
              [vue.vModelText, $setup.form.qq]
            ])
          ])
        ]),
        vue.createCommentVNode(" 指导老师部分 "),
        vue.createElementVNode("view", { class: "form-section" }, [
          vue.createElementVNode("view", { class: "section-header" }, [
            vue.createVNode($setup["SvgIcon"], {
              name: "zhidaolaoshi",
              class: "section-icon",
              size: "30"
            }),
            vue.createElementVNode("text", { class: "section-title" }, "指导老师")
          ]),
          vue.createCommentVNode(" 老师列表 "),
          $setup.form.teachers.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", { key: 0 }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.form.teachers, (teacher, index) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  key: index,
                  class: "teacher-item"
                }, [
                  vue.createElementVNode("view", { class: "item-header" }, [
                    vue.createElementVNode(
                      "text",
                      { class: "item-title" },
                      "指导老师 " + vue.toDisplayString(index + 1),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode("view", {
                      class: "delete-btn",
                      onClick: ($event) => $setup.removeTeacher(index)
                    }, [
                      vue.createVNode($setup["SvgIcon"], {
                        name: "chuangjianrenwu",
                        size: "20"
                      })
                    ], 8, ["onClick"])
                  ]),
                  vue.createCommentVNode(" 选择老师 "),
                  vue.createElementVNode("view", { class: "form-item" }, [
                    vue.createElementVNode("text", { class: "form-label" }, [
                      vue.createTextVNode("选择老师"),
                      vue.createElementVNode("text", { class: "required" }, "*")
                    ]),
                    vue.createElementVNode("view", {
                      class: "select-box",
                      onClick: ($event) => $setup.showTeacherModal(index)
                    }, [
                      teacher.name ? (vue.openBlock(), vue.createElementBlock(
                        "text",
                        {
                          key: 0,
                          class: "select-text"
                        },
                        vue.toDisplayString(teacher.name),
                        1
                        /* TEXT */
                      )) : (vue.openBlock(), vue.createElementBlock("text", {
                        key: 1,
                        class: "placeholder-text"
                      }, "请选择老师")),
                      vue.createVNode($setup["SvgIcon"], {
                        name: "xiazhankai",
                        class: "select-arrow",
                        size: "24"
                      })
                    ], 8, ["onClick"])
                  ]),
                  vue.createCommentVNode(" 角色 "),
                  vue.createCommentVNode(' <view class="form-item">\n              <text class="form-label">角色<text class="required">*</text></text>\n              <input \n                type="text" \n                v-model="teacher.role" \n                placeholder="如：主指导老师" \n                class="form-input" \n              />\n            </view> ')
                ]);
              }),
              128
              /* KEYED_FRAGMENT */
            ))
          ])) : vue.createCommentVNode("v-if", true),
          vue.createCommentVNode(" 添加老师按钮 "),
          vue.createElementVNode("view", {
            class: "add-item-btn",
            onClick: $setup.addTeacher
          }, [
            vue.createVNode($setup["SvgIcon"], {
              name: "chuangjianrenwu",
              size: "24"
            }),
            vue.createElementVNode("text", null, "添加指导老师")
          ])
        ]),
        vue.createCommentVNode(" 教师选择弹窗 "),
        vue.createVNode(
          _component_uni_popup,
          {
            ref: "teacherPopup",
            type: "bottom"
          },
          {
            default: vue.withCtx(() => [
              vue.createElementVNode("view", { class: "popup-container" }, [
                vue.createElementVNode("view", { class: "popup-header" }, [
                  vue.createElementVNode("text", { class: "popup-title" }, "选择指导老师"),
                  vue.createElementVNode("text", {
                    class: "popup-close",
                    onClick: $setup.closeTeacherModal
                  }, "关闭")
                ]),
                vue.createCommentVNode(" 搜索框 "),
                vue.createElementVNode("view", { class: "search-box" }, [
                  vue.createElementVNode("view", { class: "search-input-wrapper" }, [
                    vue.createVNode($setup["SvgIcon"], {
                      name: "sousuo",
                      size: "24"
                    }),
                    vue.withDirectives(vue.createElementVNode(
                      "input",
                      {
                        type: "text",
                        "onUpdate:modelValue": _cache[7] || (_cache[7] = ($event) => $setup.teacherSearchKey = $event),
                        placeholder: "搜索教师姓名",
                        class: "search-input",
                        onInput: $setup.searchTeachers
                      },
                      null,
                      544
                      /* NEED_HYDRATION, NEED_PATCH */
                    ), [
                      [vue.vModelText, $setup.teacherSearchKey]
                    ]),
                    $setup.teacherSearchKey ? (vue.openBlock(), vue.createBlock($setup["SvgIcon"], {
                      key: 0,
                      name: "mimaIcon",
                      class: "clear-btn",
                      onClick: $setup.clearTeacherSearch,
                      size: "24"
                    })) : vue.createCommentVNode("v-if", true)
                  ])
                ]),
                vue.createCommentVNode(" 专业分类 "),
                vue.createElementVNode("scroll-view", {
                  "scroll-x": "true",
                  class: "category-scroll"
                }, [
                  vue.createElementVNode("view", { class: "category-list" }, [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList($setup.teacherMajors, (major) => {
                        return vue.openBlock(), vue.createElementBlock("view", {
                          key: major.id,
                          class: vue.normalizeClass(["category-tag", { "active-category": $setup.selectedMajorId === major.id }]),
                          onClick: ($event) => $setup.filterTeachersByMajor(major.id)
                        }, [
                          vue.createElementVNode(
                            "text",
                            null,
                            vue.toDisplayString(major.name),
                            1
                            /* TEXT */
                          )
                        ], 10, ["onClick"]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    ))
                  ])
                ]),
                vue.createCommentVNode(" 教师列表 "),
                vue.createElementVNode("scroll-view", {
                  "scroll-y": "true",
                  class: "competitions-list"
                }, [
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($setup.filteredTeacherList, (teacher) => {
                      return vue.openBlock(), vue.createElementBlock("view", {
                        key: teacher.id,
                        class: vue.normalizeClass(["teacher-item-select", {
                          "active-teacher": $setup.currentTeacherIndex !== null && $setup.form.teachers[$setup.currentTeacherIndex].id === teacher.id,
                          "disabled-teacher": $setup.isTeacherAlreadySelected(teacher.id)
                        }]),
                        onClick: ($event) => $setup.selectTeacher(teacher)
                      }, [
                        vue.createElementVNode("view", { class: "teacher-info" }, [
                          vue.createElementVNode("image", {
                            class: "teacher-avatar",
                            src: teacher.avatarUrl,
                            mode: "aspectFill"
                          }, null, 8, ["src"]),
                          vue.createElementVNode("view", { class: "teacher-detail" }, [
                            vue.createElementVNode(
                              "text",
                              { class: "teacher-name" },
                              vue.toDisplayString(teacher.name),
                              1
                              /* TEXT */
                            ),
                            vue.createElementVNode(
                              "text",
                              { class: "teacher-major" },
                              vue.toDisplayString(teacher.major),
                              1
                              /* TEXT */
                            )
                          ])
                        ]),
                        vue.createElementVNode("view", { class: "teacher-status" }, [
                          $setup.isTeacherAlreadySelected(teacher.id) ? (vue.openBlock(), vue.createElementBlock("text", {
                            key: 0,
                            class: "selected-tag"
                          }, "已选择")) : $setup.currentTeacherIndex !== null && $setup.form.teachers[$setup.currentTeacherIndex].id === teacher.id ? (vue.openBlock(), vue.createElementBlock("text", {
                            key: 1,
                            class: "iconfont icon-check"
                          })) : vue.createCommentVNode("v-if", true)
                        ])
                      ], 10, ["onClick"]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  )),
                  $setup.filteredTeacherList.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 0,
                    class: "empty-tip"
                  }, [
                    vue.createElementVNode(
                      "text",
                      null,
                      vue.toDisplayString($setup.teacherSearchKey ? "没有找到相关教师" : "该专业下暂无教师"),
                      1
                      /* TEXT */
                    )
                  ])) : vue.createCommentVNode("v-if", true)
                ]),
                vue.createElementVNode("view", { class: "popup-footer" }, [
                  vue.createElementVNode("button", {
                    class: "confirm-btn",
                    onClick: $setup.confirmTeacherSelection
                  }, "确定")
                ])
              ])
            ]),
            _: 1
            /* STABLE */
          },
          512
          /* NEED_PATCH */
        ),
        vue.createCommentVNode(" 招募角色部分 "),
        vue.createElementVNode("view", { class: "form-section" }, [
          vue.createElementVNode("view", { class: "section-header" }, [
            vue.createVNode($setup["SvgIcon"], {
              name: "zhaomujiaose",
              class: "section-icon",
              size: "24"
            }),
            vue.createElementVNode("text", { class: "section-title" }, "招募角色")
          ]),
          vue.createCommentVNode(" 角色列表 "),
          $setup.form.roles.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", { key: 0 }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.form.roles, (role, index) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  key: index,
                  class: "role-item"
                }, [
                  vue.createElementVNode("view", { class: "item-header" }, [
                    vue.createElementVNode(
                      "text",
                      { class: "item-title" },
                      "角色 " + vue.toDisplayString(index + 1),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode("view", {
                      class: "delete-btn",
                      onClick: ($event) => $setup.removeRole(index)
                    }, [
                      vue.createVNode($setup["SvgIcon"], {
                        name: "chuangjianrenwu",
                        size: "20"
                      })
                    ], 8, ["onClick"])
                  ]),
                  vue.createCommentVNode(" 角色名称 "),
                  vue.createElementVNode("view", { class: "form-item" }, [
                    vue.createElementVNode("text", { class: "form-label" }, [
                      vue.createTextVNode("角色名称"),
                      vue.createElementVNode("text", { class: "required" }, "*")
                    ]),
                    vue.withDirectives(vue.createElementVNode("input", {
                      type: "text",
                      "onUpdate:modelValue": ($event) => role.name = $event,
                      placeholder: "如：算法工程师",
                      class: "form-input"
                    }, null, 8, ["onUpdate:modelValue"]), [
                      [vue.vModelText, role.name]
                    ])
                  ]),
                  vue.createCommentVNode(" 招募人数 "),
                  vue.createElementVNode("view", { class: "form-item" }, [
                    vue.createElementVNode("text", { class: "form-label" }, [
                      vue.createTextVNode("招募人数"),
                      vue.createElementVNode("text", { class: "required" }, "*")
                    ]),
                    vue.withDirectives(vue.createElementVNode("input", {
                      type: "number",
                      "onUpdate:modelValue": ($event) => role.count = $event,
                      placeholder: "请输入招募人数",
                      class: "form-input"
                    }, null, 8, ["onUpdate:modelValue"]), [
                      [vue.vModelText, role.count]
                    ])
                  ]),
                  vue.createCommentVNode(" 角色描述 "),
                  vue.createElementVNode("view", { class: "form-item" }, [
                    vue.createElementVNode("text", { class: "form-label" }, [
                      vue.createTextVNode("角色描述"),
                      vue.createElementVNode("text", { class: "required" }, "*")
                    ]),
                    vue.withDirectives(vue.createElementVNode("textarea", {
                      "onUpdate:modelValue": ($event) => role.description = $event,
                      placeholder: "请描述该角色的职责",
                      class: "form-textarea"
                    }, null, 8, ["onUpdate:modelValue"]), [
                      [vue.vModelText, role.description]
                    ])
                  ]),
                  vue.createCommentVNode(" 技能要求 "),
                  vue.createElementVNode("view", { class: "form-item" }, [
                    vue.createElementVNode("text", { class: "form-label" }, "技能要求"),
                    vue.createCommentVNode(" 已添加的技能标签 "),
                    vue.createElementVNode("view", { class: "skill-tags" }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList(role.skills, (skill, skillIndex) => {
                          return vue.openBlock(), vue.createElementBlock("view", {
                            key: skillIndex,
                            class: "skill-tag"
                          }, [
                            vue.createElementVNode(
                              "text",
                              null,
                              vue.toDisplayString(skill),
                              1
                              /* TEXT */
                            ),
                            vue.createVNode($setup["SvgIcon"], {
                              name: "mimaIcon",
                              size: "20",
                              onClick: vue.withModifiers(($event) => $setup.removeSkill(index, skillIndex), ["stop"])
                            }, null, 8, ["onClick"])
                          ]);
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ]),
                    vue.createCommentVNode(" 添加技能按钮 "),
                    vue.createElementVNode("view", {
                      class: "skill-select-btn",
                      onClick: ($event) => $setup.showSkillModal(index)
                    }, [
                      vue.createVNode($setup["SvgIcon"], {
                        name: "zhuanye",
                        size: "20"
                      }),
                      vue.createElementVNode("text", null, "选择技能标签"),
                      vue.createVNode($setup["SvgIcon"], {
                        name: "xiazhankai",
                        size: "20"
                      })
                    ], 8, ["onClick"])
                  ])
                ]);
              }),
              128
              /* KEYED_FRAGMENT */
            ))
          ])) : vue.createCommentVNode("v-if", true),
          vue.createCommentVNode(" 添加角色按钮 "),
          vue.createElementVNode("view", {
            class: "add-item-btn",
            onClick: $setup.addRole
          }, [
            vue.createVNode($setup["SvgIcon"], {
              name: "chuangjianrenwu",
              size: "24"
            }),
            vue.createElementVNode("text", null, "添加招募角色")
          ])
        ])
      ]),
      vue.createCommentVNode(" 底部提交按钮 "),
      vue.createElementVNode("view", { class: "submit-bar" }, [
        vue.createElementVNode("button", {
          class: "submit-btn",
          onClick: $setup.submitTeam
        }, "创建团队")
      ]),
      vue.createCommentVNode(" 技能标签选择弹窗 "),
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "skillPopup",
          type: "bottom"
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "popup-container" }, [
              vue.createElementVNode("view", { class: "popup-header" }, [
                vue.createElementVNode("text", { class: "popup-title" }, "选择技能标签"),
                vue.createElementVNode("text", {
                  class: "popup-close",
                  onClick: $setup.closeSkillModal
                }, "关闭")
              ]),
              vue.createCommentVNode(" 搜索框 "),
              vue.createElementVNode("view", { class: "search-box" }, [
                vue.createElementVNode("view", { class: "search-input-wrapper" }, [
                  vue.createVNode($setup["SvgIcon"], {
                    name: "sousuo",
                    size: "24"
                  }),
                  vue.withDirectives(vue.createElementVNode(
                    "input",
                    {
                      type: "text",
                      "onUpdate:modelValue": _cache[8] || (_cache[8] = ($event) => $setup.skillSearchKey = $event),
                      placeholder: "搜索技能标签",
                      class: "search-input",
                      onInput: $setup.searchSkills
                    },
                    null,
                    544
                    /* NEED_HYDRATION, NEED_PATCH */
                  ), [
                    [vue.vModelText, $setup.skillSearchKey]
                  ]),
                  $setup.skillSearchKey ? (vue.openBlock(), vue.createBlock($setup["SvgIcon"], {
                    key: 0,
                    name: "mimaIcon",
                    class: "clear-btn",
                    onClick: $setup.clearSkillSearch,
                    size: "24"
                  })) : vue.createCommentVNode("v-if", true)
                ])
              ]),
              vue.createCommentVNode(" 技能分类 "),
              vue.createElementVNode("scroll-view", {
                "scroll-x": "true",
                class: "category-scroll"
              }, [
                vue.createElementVNode("view", { class: "category-list" }, [
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($setup.skillCategories, (category) => {
                      return vue.openBlock(), vue.createElementBlock("view", {
                        key: category,
                        class: vue.normalizeClass(["category-tag", { "active-category": $setup.selectedSkillCategory === category }]),
                        onClick: ($event) => $setup.filterSkillsByCategory(category)
                      }, [
                        vue.createElementVNode(
                          "text",
                          null,
                          vue.toDisplayString(category),
                          1
                          /* TEXT */
                        )
                      ], 10, ["onClick"]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  ))
                ])
              ]),
              vue.createCommentVNode(" 技能列表 "),
              vue.createElementVNode("scroll-view", {
                "scroll-y": "true",
                class: "competitions-list"
              }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.filteredSkillTags, (skill) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      key: skill.id,
                      class: vue.normalizeClass(["skill-item-select", {
                        "active-skill": $setup.isSkillSelected(skill.tagName),
                        "disabled-skill": $setup.isSkillAlreadySelected(skill.tagName)
                      }]),
                      onClick: ($event) => $setup.toggleSkillSelection(skill)
                    }, [
                      vue.createElementVNode("view", { class: "skill-info" }, [
                        vue.createElementVNode(
                          "text",
                          { class: "skill-name" },
                          vue.toDisplayString(skill.tagName),
                          1
                          /* TEXT */
                        ),
                        skill.description ? (vue.openBlock(), vue.createElementBlock(
                          "text",
                          {
                            key: 0,
                            class: "skill-desc"
                          },
                          vue.toDisplayString(skill.description),
                          1
                          /* TEXT */
                        )) : vue.createCommentVNode("v-if", true)
                      ]),
                      vue.createElementVNode("view", { class: "skill-check" }, [
                        vue.createElementVNode(
                          "text",
                          {
                            class: vue.normalizeClass(["selection-indicator", { "selected": $setup.isSkillSelected(skill.tagName) }])
                          },
                          vue.toDisplayString($setup.isSkillSelected(skill.tagName) ? "已选" : "选择"),
                          3
                          /* TEXT, CLASS */
                        )
                      ])
                    ], 10, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                )),
                $setup.filteredSkillTags.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "empty-tip"
                }, [
                  vue.createElementVNode(
                    "text",
                    null,
                    vue.toDisplayString($setup.skillSearchKey ? "没有找到相关技能" : "该分类下暂无技能标签"),
                    1
                    /* TEXT */
                  )
                ])) : vue.createCommentVNode("v-if", true)
              ]),
              vue.createElementVNode("view", { class: "popup-footer" }, [
                vue.createElementVNode("view", { class: "selected-count" }, [
                  vue.createTextVNode(" 已选: "),
                  vue.createElementVNode(
                    "text",
                    { class: "count-highlight" },
                    vue.toDisplayString($setup.getSelectedSkillsCount()),
                    1
                    /* TEXT */
                  ),
                  vue.createTextVNode(" 个技能 ")
                ]),
                vue.createElementVNode("button", {
                  class: "confirm-btn",
                  onClick: $setup.confirmSkillSelection
                }, "确定")
              ])
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesTeamCreate = /* @__PURE__ */ _export_sfc(_sfc_main$n, [["render", _sfc_render$m], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/team/create.vue"]]);
  const _imports_0$8 = "/static/images/empty-data.png";
  const _sfc_main$m = {
    components: {
      HeaderBar,
      TeamCard,
      TabBar,
      SvgIcon
    },
    data() {
      return {
        // 页面状态
        loading: true,
        recommendedTeams: [],
        aiSummary: "",
        // HeaderBar占位高度，初始值设置得更高一些，以避免内容被导航栏遮挡
        headerPlaceholderHeight: "200rpx",
        // 缓存有效时间（3小时，单位：毫秒）
        cacheValidDuration: 3 * 60 * 60 * 1e3
      };
    },
    // 生命周期钩子 - 页面加载
    onLoad() {
      const token = uni.getStorageSync("token");
      if (!token) {
        formatAppLog("log", "at pages/team/recommended.vue:95", "用户未登录，无法访问AI推荐页面");
        uni.showModal({
          title: "需要登录",
          content: "查看AI智能推荐需要先登录账号",
          confirmText: "去登录",
          cancelText: "返回",
          success: (res) => {
            if (res.confirm) {
              uni.navigateTo({
                url: "/pages/login/login"
              });
            } else {
              uni.navigateBack();
            }
          }
        });
        return;
      }
      this.getSystemInfo();
      const cacheLoaded = this.checkCacheAndLoad();
      if (!cacheLoaded) {
        this.getRecommendedTeams();
      }
    },
    // 页面显示时触发
    onShow() {
      setTimeout(() => {
        if (this.$refs.headerBarRef) {
          this.updateHeaderHeight();
        }
      }, 50);
    },
    methods: {
      // 获取系统信息并设置安全区域高度
      getSystemInfo() {
        uni.getSystemInfo({
          success: (res) => {
            if (res.safeArea && res.safeArea.top) {
              const safeAreaTopRpx = Math.round(res.safeArea.top * 750 / res.screenWidth);
              this.headerPlaceholderHeight = 200 + safeAreaTopRpx + "rpx";
            }
          }
        });
      },
      // 处理返回按钮点击事件
      handleBack() {
        formatAppLog("log", "at pages/team/recommended.vue:154", "AI推荐页面：处理返回事件");
        uni.navigateBack({
          delta: 1,
          fail: () => {
            formatAppLog("log", "at pages/team/recommended.vue:159", "返回失败，跳转到首页");
            uni.switchTab({
              url: "/pages/index/index"
            });
          }
        });
      },
      // 更新HeaderBar占位高度
      updateHeaderHeight() {
        if (this.$refs.headerBarRef && this.$refs.headerBarRef.headerHeight) {
          const headerHeight = this.$refs.headerBarRef.headerHeight;
          this.headerPlaceholderHeight = headerHeight + 20 + "rpx";
          formatAppLog("log", "at pages/team/recommended.vue:173", "更新HeaderBar占位高度:", this.headerPlaceholderHeight);
        }
      },
      // 检查缓存数据并立即加载
      checkCacheAndLoad() {
        try {
          const cachedTeams = uni.getStorageSync("ai_recommended_teams");
          const cachedSummary = uni.getStorageSync("ai_summary");
          const cachedTime = uni.getStorageSync("ai_recommend_cache_time");
          const now = Date.now();
          const isExpired = !cachedTime || now - Number(cachedTime) > this.cacheValidDuration;
          if (isExpired) {
            formatAppLog(
              "log",
              "at pages/team/recommended.vue:189",
              "缓存已过期，需要重新获取数据。过期时间:",
              cachedTime ? new Date(Number(cachedTime)).toLocaleString() : "无缓存时间"
            );
            return false;
          }
          if (cachedTeams) {
            try {
              const parsedTeams = JSON.parse(cachedTeams);
              if (Array.isArray(parsedTeams) && parsedTeams.length > 0) {
                this.recommendedTeams = parsedTeams;
                this.aiSummary = cachedSummary || "根据您的专业、技能和兴趣，我们为您推荐了以下最匹配的团队";
                this.loading = false;
                formatAppLog("log", "at pages/team/recommended.vue:203", "组件初始化时使用缓存数据:", parsedTeams.length, "个推荐队伍，缓存时间:", new Date(Number(cachedTime)).toLocaleString());
                return true;
              }
            } catch (e) {
              formatAppLog("error", "at pages/team/recommended.vue:207", "初始化时解析缓存失败:", e);
            }
          } else {
            formatAppLog("log", "at pages/team/recommended.vue:210", "没有可用的缓存数据");
          }
        } catch (e) {
          formatAppLog("error", "at pages/team/recommended.vue:213", "初始检查缓存出错:", e);
        }
        return false;
      },
      // 获取AI智能推荐的队伍
      async getRecommendedTeams(forceRefresh = false) {
        if (!forceRefresh && this.recommendedTeams.length > 0) {
          formatAppLog("log", "at pages/team/recommended.vue:223", "已有推荐数据，不再重复加载");
          this.loading = false;
          return;
        }
        this.loading = true;
        try {
          formatAppLog("log", "at pages/team/recommended.vue:231", "开始获取AI推荐队伍数据，强制刷新:", forceRefresh);
          if (!forceRefresh) {
            let cachedTeams = null;
            let cachedSummary = null;
            let cachedTime = null;
            try {
              cachedTeams = uni.getStorageSync("ai_recommended_teams");
              cachedSummary = uni.getStorageSync("ai_summary");
              cachedTime = uni.getStorageSync("ai_recommend_cache_time");
              const now = Date.now();
              const isExpired = !cachedTime || now - Number(cachedTime) > this.cacheValidDuration;
              formatAppLog("log", "at pages/team/recommended.vue:250", "缓存状态检查:");
              formatAppLog("log", "at pages/team/recommended.vue:251", "- 缓存数据存在:", !!cachedTeams);
              formatAppLog("log", "at pages/team/recommended.vue:252", "- 缓存时间:", cachedTime ? new Date(Number(cachedTime)).toLocaleString() : "无缓存时间");
              formatAppLog("log", "at pages/team/recommended.vue:253", "- 缓存是否过期:", isExpired);
              if (isExpired) {
                formatAppLog("log", "at pages/team/recommended.vue:257", "缓存已过期，需要重新获取数据");
                cachedTeams = null;
              }
            } catch (e) {
              formatAppLog("error", "at pages/team/recommended.vue:261", "读取缓存出错:", e);
            }
            if (cachedTeams) {
              formatAppLog("log", "at pages/team/recommended.vue:266", "使用缓存的AI推荐数据");
              try {
                const parsedTeams = JSON.parse(cachedTeams);
                if (Array.isArray(parsedTeams) && parsedTeams.length > 0) {
                  this.recommendedTeams = parsedTeams;
                  this.aiSummary = cachedSummary || "根据您的专业、技能和兴趣，我们为您推荐了以下最匹配的团队";
                  formatAppLog("log", "at pages/team/recommended.vue:273", "成功加载缓存数据，推荐队伍数量:", this.recommendedTeams.length);
                  this.loading = false;
                  return;
                } else {
                  formatAppLog("log", "at pages/team/recommended.vue:277", "缓存数据格式无效，需要重新获取");
                }
              } catch (e) {
                formatAppLog("error", "at pages/team/recommended.vue:280", "解析缓存数据失败:", e);
              }
            }
          }
          formatAppLog("log", "at pages/team/recommended.vue:287", "请求新的AI推荐数据");
          const res = await teamApi.getRecommendedTeams();
          if (res.code === 200 && res.data) {
            const teams = res.data.recommendedTeams || [];
            this.recommendedTeams = teams.map((team) => {
              return {
                ...team,
                matchScore: team.matchScore || Math.floor(Math.random() * 30) + 70,
                // 如果没有匹配度，随机生成70-100之间的分数
                matchReason: team.matchReason || team.recommendReason || "根据您的技能和兴趣推荐",
                recommendedRole: team.recommendedRole || ""
              };
            });
            this.aiSummary = res.data.aiSummary || "根据您的专业、技能和兴趣，我们为您推荐了以下最匹配的团队";
            formatAppLog("log", "at pages/team/recommended.vue:303", "获取到新的AI推荐队伍数据:", this.recommendedTeams.length, "个队伍");
            try {
              uni.setStorageSync("ai_recommended_teams", JSON.stringify(this.recommendedTeams));
              uni.setStorageSync("ai_summary", this.aiSummary);
              const currentTime = Date.now();
              uni.setStorageSync("ai_recommend_cache_time", currentTime.toString());
              formatAppLog("log", "at pages/team/recommended.vue:315", "AI推荐数据缓存成功，缓存时间:", new Date(currentTime).toLocaleString());
            } catch (e) {
              formatAppLog("error", "at pages/team/recommended.vue:317", "缓存AI推荐数据失败:", e);
            }
          } else {
            formatAppLog("error", "at pages/team/recommended.vue:320", "获取推荐数据失败:", res.message || "未知错误");
            if (!forceRefresh) {
              try {
                const cachedTeams = uni.getStorageSync("ai_recommended_teams");
                if (cachedTeams) {
                  const parsedTeams = JSON.parse(cachedTeams);
                  if (Array.isArray(parsedTeams) && parsedTeams.length > 0) {
                    this.recommendedTeams = parsedTeams;
                    this.aiSummary = uni.getStorageSync("ai_summary") || "根据您的专业、技能和兴趣，我们为您推荐了以下最匹配的团队";
                    formatAppLog("log", "at pages/team/recommended.vue:331", "使用缓存作为备用数据");
                  }
                }
              } catch (e) {
                formatAppLog("error", "at pages/team/recommended.vue:335", "解析缓存失败:", e);
              }
            }
          }
        } catch (error) {
          formatAppLog("error", "at pages/team/recommended.vue:340", "获取AI推荐队伍失败:", error);
          if (!forceRefresh) {
            try {
              const cachedTeams = uni.getStorageSync("ai_recommended_teams");
              if (cachedTeams) {
                const parsedTeams = JSON.parse(cachedTeams);
                if (Array.isArray(parsedTeams) && parsedTeams.length > 0) {
                  this.recommendedTeams = parsedTeams;
                  this.aiSummary = uni.getStorageSync("ai_summary") || "";
                  formatAppLog("log", "at pages/team/recommended.vue:351", "由于请求失败，使用缓存作为备用数据");
                }
              }
            } catch (e) {
              formatAppLog("error", "at pages/team/recommended.vue:355", "加载备用缓存失败:", e);
            }
          }
          if (this.recommendedTeams.length === 0) {
            uni.showToast({
              title: "获取推荐失败，请稍后再试",
              icon: "none",
              duration: 2e3
            });
          }
        } finally {
          this.loading = false;
          formatAppLog("log", "at pages/team/recommended.vue:370", "AI推荐数据加载完成，显示状态更新");
        }
      },
      // 刷新推荐
      refreshRecommendations() {
        try {
          uni.removeStorageSync("ai_recommended_teams");
          uni.removeStorageSync("ai_summary");
          uni.removeStorageSync("ai_recommend_cache_time");
          formatAppLog("log", "at pages/team/recommended.vue:383", "已清除AI推荐缓存，准备获取新数据");
        } catch (e) {
          formatAppLog("error", "at pages/team/recommended.vue:385", "清除缓存失败:", e);
        }
        this.getRecommendedTeams(true).then(() => {
          formatAppLog("log", "at pages/team/recommended.vue:391", "推荐刷新完成");
        }).catch((err) => {
          formatAppLog("error", "at pages/team/recommended.vue:394", "推荐刷新出错:", err);
        }).finally(() => {
          uni.hideLoading();
          uni.showToast({
            title: "推荐已更新",
            icon: "success"
          });
        });
      },
      // 查看团队详情
      viewTeamDetail(id) {
        uni.navigateTo({
          url: `/pages/team/detail?id=${id}`
        });
      },
      // 跳转到个人资料页
      goToProfile() {
        uni.switchTab({
          url: "/pages/profile/index"
        });
      }
    }
  };
  function _sfc_render$l(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_header_bar = vue.resolveComponent("header-bar");
    const _component_SvgIcon = vue.resolveComponent("SvgIcon");
    const _component_team_card = vue.resolveComponent("team-card");
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createVNode(_component_header_bar, {
        ref: "headerBarRef",
        title: "AI智能推荐",
        "show-search": false,
        "show-filter": false,
        "show-ai-recommend": false,
        onBack: $options.handleBack
      }, null, 8, ["onBack"]),
      vue.createCommentVNode(" 页面内容 "),
      vue.createElementVNode(
        "scroll-view",
        {
          "scroll-y": "",
          class: "content-scroll",
          style: vue.normalizeStyle({ paddingTop: $data.headerPlaceholderHeight })
        },
        [
          vue.createCommentVNode(" AI分析摘要 "),
          $data.aiSummary ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 0,
            class: "ai-summary"
          }, [
            vue.createElementVNode("view", { class: "summary-header" }, [
              vue.createElementVNode("text", { class: "summary-title" }, "✨ AI分析结果")
            ]),
            vue.createElementVNode(
              "text",
              { class: "summary-content" },
              vue.toDisplayString($data.aiSummary),
              1
              /* TEXT */
            )
          ])) : vue.createCommentVNode("v-if", true),
          vue.createCommentVNode(" 推荐队伍列表 "),
          vue.createElementVNode("view", { class: "section" }, [
            vue.createElementVNode("view", { class: "section-header" }, [
              vue.createElementVNode("text", { class: "section-title" }, "为您推荐的队伍"),
              vue.createElementVNode("view", {
                class: "refresh-btn",
                onClick: _cache[0] || (_cache[0] = (...args) => $options.refreshRecommendations && $options.refreshRecommendations(...args))
              }, [
                vue.createVNode(_component_SvgIcon, {
                  name: "shuaxin",
                  size: "20"
                })
              ])
            ]),
            $data.loading ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "loading-container"
            }, [
              vue.createElementVNode("view", { class: "loading-circle" }),
              vue.createElementVNode("text", { class: "loading-text" }, "正在加载推荐...")
            ])) : $data.recommendedTeams.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 1,
              class: "team-list"
            }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($data.recommendedTeams, (team, index) => {
                  return vue.openBlock(), vue.createBlock(_component_team_card, {
                    key: team.id,
                    team,
                    index,
                    "show-match": true,
                    onDetail: $options.viewTeamDetail,
                    style: { "font-size": "30rpx" }
                  }, null, 8, ["team", "index", "onDetail"]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ])) : (vue.openBlock(), vue.createElementBlock("view", {
              key: 2,
              class: "empty-state"
            }, [
              vue.createElementVNode("image", {
                class: "empty-icon",
                src: _imports_0$8,
                mode: "aspectFit"
              }),
              vue.createElementVNode("text", { class: "empty-text" }, "暂无推荐，请完善个人资料后再试"),
              vue.createElementVNode("button", {
                class: "primary-btn",
                onClick: _cache[1] || (_cache[1] = (...args) => $options.goToProfile && $options.goToProfile(...args))
              }, "完善资料")
            ]))
          ])
        ],
        4
        /* STYLE */
      )
    ]);
  }
  const PagesTeamRecommended = /* @__PURE__ */ _export_sfc(_sfc_main$m, [["render", _sfc_render$l], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/team/recommended.vue"]]);
  const _sfc_main$l = {
    components: {
      TabBar,
      HeaderBar,
      SvgIcon
    },
    data() {
      return {
        // 分类数据
        categories: ["全部竞赛", "学科竞赛", "创新创业", "科技竞赛", "文体竞赛"],
        currentCategory: 0,
        loading: false,
        hasMore: true,
        currentPage: 1,
        pageSize: 10,
        // 热门竞赛数据
        hotCompetitions: [],
        // 竞赛列表数据
        competitionList: [],
        // 热门竞赛轮播控制
        currentHotIndex: 0,
        // HeaderBar占位高度
        headerPlaceholderHeight: "200rpx",
        // 导入SVG图标
        icons
      };
    },
    onLoad() {
      this.getHotCompetitions();
      this.getCompetitionList();
      this.updateHeaderHeight();
    },
    mounted() {
      setTimeout(() => {
        this.updateHeaderHeight();
      }, 300);
    },
    // 页面相关生命周期函数
    onPullDownRefresh() {
      this.onRefresh();
    },
    onReachBottom() {
      this.loadMore();
    },
    methods: {
      // 更新HeaderBar占位高度
      updateHeaderHeight() {
        const headerBarRef = this.$refs.headerBarRef;
        if (headerBarRef && headerBarRef.headerHeight) {
          this.headerPlaceholderHeight = headerBarRef.headerHeight + "rpx";
        } else {
          this.headerPlaceholderHeight = this.categories.length > 0 ? "200rpx" : "120rpx";
        }
      },
      // 轮播切换事件
      onSwiperChange(e) {
        this.currentHotIndex = e.detail.current;
      },
      // 手动切换到指定轮播
      switchToSlide(index) {
        this.currentHotIndex = index;
      },
      // 获取热门竞赛数据
      async getHotCompetitions() {
        try {
          this.loading = true;
          const res = await api.competitions.getCompetitionsList({
            pageSize: 3,
            isHot: true
          });
          if (res && res.code === 200 && res.data && Array.isArray(res.data.list)) {
            const hotCompetitionsData = res.data.list;
            if (hotCompetitionsData.length > 0) {
              await Promise.all(hotCompetitionsData.map(async (competition) => {
                try {
                  const teamCountRes = await api.competitions.getCompetitionTeamCount(competition.id);
                  if (teamCountRes && teamCountRes.code === 200 && teamCountRes.data) {
                    competition.teamCount = teamCountRes.data.teamCount;
                  }
                } catch (error) {
                  formatAppLog("error", "at pages/competition/index.vue:252", `获取热门竞赛 ${competition.id} 的团队数量失败:`, error);
                  competition.teamCount = 0;
                }
                return competition;
              }));
            }
            this.hotCompetitions = hotCompetitionsData;
          }
        } catch (error) {
          formatAppLog("error", "at pages/competition/index.vue:262", "获取热门竞赛失败:", error);
          uni.showToast({
            title: "获取热门竞赛失败",
            icon: "none"
          });
          this.hotCompetitions = [];
        } finally {
          this.loading = false;
        }
      },
      // 获取竞赛列表数据
      async getCompetitionList(reset = true) {
        try {
          if (reset) {
            this.currentPage = 1;
            this.competitionList = [];
          }
          if (!this.hasMore && !reset)
            return;
          this.loading = true;
          const params = {
            pageNum: this.currentPage,
            pageSize: this.pageSize
          };
          if (this.currentCategory > 0) {
            const categoryMapping = [null, 1, 2, 3, 4];
            params.categoryId = categoryMapping[this.currentCategory];
          }
          const res = await api.competitions.getCompetitionsList(params);
          if (res && res.code === 200 && res.data) {
            let competitionData = Array.isArray(res.data.list) ? res.data.list : [];
            if (competitionData.length > 0) {
              await Promise.all(competitionData.map(async (competition) => {
                try {
                  const teamCountRes = await api.competitions.getCompetitionTeamCount(competition.id);
                  if (teamCountRes && teamCountRes.code === 200 && teamCountRes.data) {
                    competition.teamCount = teamCountRes.data.teamCount;
                  }
                } catch (error) {
                  formatAppLog("error", "at pages/competition/index.vue:313", `获取竞赛 ${competition.id} 的团队数量失败:`, error);
                  competition.teamCount = 0;
                }
                return competition;
              }));
            }
            if (reset) {
              this.competitionList = competitionData;
            } else {
              this.competitionList = [...this.competitionList, ...competitionData];
            }
            this.hasMore = res.data.hasNext || false;
            if (this.competitionList.length === 0) {
              uni.showToast({
                title: "暂无竞赛数据",
                icon: "none"
              });
            }
          }
        } catch (error) {
          formatAppLog("error", "at pages/competition/index.vue:338", "获取竞赛列表失败:", error);
          uni.showToast({
            title: "获取竞赛列表失败",
            icon: "none"
          });
          if (reset) {
            this.competitionList = [];
          }
        } finally {
          this.loading = false;
        }
      },
      // 加载更多数据
      loadMore() {
        if (this.loading || !this.hasMore)
          return;
        this.currentPage++;
        this.getCompetitionList(false);
      },
      // 下拉刷新
      onRefresh() {
        this.getCompetitionList(true);
        this.getHotCompetitions();
        uni.stopPullDownRefresh();
      },
      // 获取分类对应的样式类
      getCategoryClass(category) {
        switch (category) {
          case "程序设计":
            return "tag-blue";
          case "数学建模":
            return "tag-purple";
          case "电子设计":
            return "tag-cyan";
          case "机器人":
            return "tag-teal";
          case "创新创业":
            return "tag-orange";
          case "商业挑战":
            return "tag-amber";
          case "艺术设计":
            return "tag-pink";
          case "体育竞技":
            return "tag-green";
          case "学术科研":
            return "tag-indigo";
          case "其他":
            return "tag-gray";
          default:
            return "tag-gray";
        }
      },
      // 获取状态对应的样式类
      getStatusClass(status) {
        switch (status) {
          case "0":
            return "status-upcoming";
          case "1":
            return "status-active";
          case "2":
            return "status-ongoing";
          case "3":
            return "status-ended";
          default:
            return "";
        }
      },
      // 格式化日期
      formatDate(dateString) {
        if (!dateString)
          return "";
        const date = new Date(dateString);
        const month = date.getMonth() + 1;
        const day = date.getDate();
        return `${month}月${day}日`;
      },
      // 是否为报名前期（未开始）
      isUpcoming(item) {
        return item.status === "0";
      },
      // 选择分类
      selectCategory(index) {
        if (this.currentCategory === index)
          return;
        this.currentCategory = index;
        this.getCompetitionList(true);
      },
      // 查看竞赛详情
      viewDetail(id) {
        uni.navigateTo({
          url: `/pages/competition/detail?id=${id}`
        });
      },
      // 处理标签切换
      handleTabChange(tab) {
        if (tab === "home") {
          uni.switchTab({
            url: "/pages/index/index"
          });
        } else if (tab === "team") {
          uni.switchTab({
            url: "/pages/team/list"
          });
        } else if (tab === "profile") {
          uni.switchTab({
            url: "/pages/profile/index"
          });
        }
      },
      goToNotification() {
        uni.navigateTo({
          url: "/pages/Xiaoxi/Xiaoxi"
        });
      },
      // 跳转到搜索页面
      goToSearch() {
        uni.navigateTo({
          url: "/pages/search/index"
        });
      },
      // 显示发布选项
      showPublishOptions() {
        uni.showActionSheet({
          itemList: ["发布竞赛信息", "招募队友", "发布项目展示"],
          success: function(res) {
            uni.showToast({
              title: `选择了: ${res.tapIndex}`,
              icon: "none"
            });
          }
        });
      },
      // 获取操作按钮文本
      getActionText(status) {
        switch (status) {
          case "0":
            return "提醒我";
          case "1":
          case "2":
            return "查看详情";
          case "3":
            return "查看结果";
          default:
            return "查看详情";
        }
      }
    }
  };
  function _sfc_render$k(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_header_bar = vue.resolveComponent("header-bar");
    const _component_SvgIcon = vue.resolveComponent("SvgIcon");
    const _component_tab_bar = vue.resolveComponent("tab-bar");
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        class: "container",
        ref: "instance"
      },
      [
        vue.createCommentVNode(" 顶部导航栏 "),
        vue.createVNode(_component_header_bar, {
          ref: "headerBarRef",
          title: "竞赛广场",
          categories: $data.categories,
          "default-category": $data.currentCategory,
          "show-filter": "true",
          onSearch: $options.goToSearch,
          onFilter: $options.goToNotification,
          onCategoryChange: $options.selectCategory
        }, null, 8, ["categories", "default-category", "onSearch", "onFilter", "onCategoryChange"]),
        vue.createCommentVNode(" 导航栏占位 "),
        vue.createElementVNode(
          "view",
          {
            class: "header-placeholder",
            style: vue.normalizeStyle({ height: $data.headerPlaceholderHeight })
          },
          null,
          4
          /* STYLE */
        ),
        vue.createCommentVNode(" 竞赛内容区域 "),
        vue.createElementVNode(
          "scroll-view",
          {
            "scroll-y": "true",
            class: "competition-content",
            onScrolltolower: _cache[2] || (_cache[2] = (...args) => $options.loadMore && $options.loadMore(...args))
          },
          [
            vue.createCommentVNode(" 热门竞赛 "),
            $data.hotCompetitions && $data.hotCompetitions.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "section"
            }, [
              vue.createElementVNode("view", { class: "section-header" }, [
                vue.createElementVNode("text", { class: "section-title" }, "热门竞赛")
              ]),
              vue.createElementVNode("swiper", {
                class: "hot-swiper",
                indicator: false,
                autoplay: true,
                interval: 3e3,
                duration: 500,
                circular: true,
                current: $data.currentHotIndex,
                onChange: _cache[0] || (_cache[0] = (...args) => $options.onSwiperChange && $options.onSwiperChange(...args))
              }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($data.hotCompetitions, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("swiper-item", {
                      key: index,
                      class: "hot-swiper-item"
                    }, [
                      vue.createElementVNode("view", {
                        class: "hot-item",
                        onClick: ($event) => $options.viewDetail(item.id)
                      }, [
                        vue.createElementVNode("image", {
                          class: "hot-img",
                          src: item.coverImageUrl,
                          mode: "aspectFill"
                        }, null, 8, ["src"]),
                        vue.createElementVNode("view", { class: "hot-overlay" }, [
                          vue.createElementVNode(
                            "text",
                            { class: "hot-title" },
                            vue.toDisplayString(item.title),
                            1
                            /* TEXT */
                          ),
                          vue.createElementVNode(
                            "text",
                            { class: "hot-desc" },
                            vue.toDisplayString(item.shortDescription),
                            1
                            /* TEXT */
                          ),
                          vue.createElementVNode("view", { class: "hot-info" }, [
                            vue.createElementVNode("view", { class: "hot-info-item" }, [
                              vue.createElementVNode(
                                "text",
                                { class: "hot-date" },
                                "报名截止: " + vue.toDisplayString($options.formatDate(item.registrationDeadline)),
                                1
                                /* TEXT */
                              )
                            ]),
                            vue.createElementVNode("view", { class: "hot-info-item" }, [
                              vue.createVNode(_component_SvgIcon, {
                                name: "baomingrhenshu2",
                                size: "18",
                                color: "#ffffff",
                                style: { "margin-right": "5rpx" }
                              }),
                              vue.createElementVNode(
                                "text",
                                { class: "hot-team" },
                                vue.toDisplayString(item.teamSize && item.teamMax ? `${item.teamSize}~${item.teamMax}人` : "个人赛"),
                                1
                                /* TEXT */
                              )
                            ]),
                            vue.createElementVNode("view", { class: "hot-info-item" }, [
                              vue.createVNode(_component_SvgIcon, {
                                name: "Baominrenshu",
                                size: "18",
                                color: "#ffffff",
                                style: { "margin-right": "5rpx" }
                              }),
                              vue.createElementVNode(
                                "text",
                                { class: "hot-team-count" },
                                vue.toDisplayString(item.teamCount || 0) + "队已报名",
                                1
                                /* TEXT */
                              )
                            ])
                          ])
                        ])
                      ], 8, ["onClick"])
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ], 40, ["current"]),
              vue.createElementVNode("view", { class: "dots-container" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($data.hotCompetitions, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      key: index,
                      class: vue.normalizeClass(["dot", { "active-dot": $data.currentHotIndex === index }]),
                      onClick: ($event) => $options.switchToSlide(index)
                    }, null, 10, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ])) : vue.createCommentVNode("v-if", true),
            vue.createCommentVNode(" 竞赛列表 "),
            vue.createElementVNode("view", { class: "section" }, [
              vue.createElementVNode("view", { class: "section-header" }, [
                vue.createElementVNode("text", { class: "section-title" }, "最新竞赛")
              ]),
              vue.createElementVNode("view", { class: "competition-list" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($data.competitionList, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "competition-card",
                      key: index,
                      onClick: ($event) => $options.viewDetail(item.id)
                    }, [
                      vue.createElementVNode("view", { class: "card-image-wrapper" }, [
                        vue.createElementVNode("image", {
                          class: "card-image",
                          src: item.coverImageUrl,
                          mode: "aspectFill"
                        }, null, 8, ["src"]),
                        vue.createElementVNode(
                          "view",
                          {
                            class: vue.normalizeClass(["status-badge", $options.getStatusClass(item.status)])
                          },
                          vue.toDisplayString(item.statusText),
                          3
                          /* TEXT, CLASS */
                        )
                      ]),
                      vue.createElementVNode("view", { class: "card-content" }, [
                        vue.createElementVNode(
                          "text",
                          { class: "card-title" },
                          vue.toDisplayString(item.title),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode(
                          "text",
                          { class: "card-desc" },
                          vue.toDisplayString(item.shortDescription),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode("view", { class: "card-tags" }, [
                          (vue.openBlock(true), vue.createElementBlock(
                            vue.Fragment,
                            null,
                            vue.renderList(item.categoryNames, (category) => {
                              return vue.openBlock(), vue.createElementBlock(
                                "text",
                                {
                                  class: vue.normalizeClass(["category-tag", $options.getCategoryClass(category)]),
                                  key: category
                                },
                                vue.toDisplayString(category),
                                3
                                /* TEXT, CLASS */
                              );
                            }),
                            128
                            /* KEYED_FRAGMENT */
                          ))
                        ]),
                        vue.createElementVNode("view", { class: "card-tags" }, [
                          vue.createElementVNode("text", { class: "level-tag" }, [
                            vue.createVNode(_component_SvgIcon, {
                              name: "dengji",
                              size: "18",
                              style: { "padding-bottom": "15rpx" }
                            }),
                            vue.createTextVNode(
                              " " + vue.toDisplayString(item.level),
                              1
                              /* TEXT */
                            )
                          ]),
                          vue.createElementVNode("text", { class: "team-tag" }, [
                            vue.createVNode(_component_SvgIcon, {
                              name: "baomingrhenshu2",
                              size: "18",
                              style: { "padding-bottom": "10rpx" }
                            }),
                            vue.createTextVNode(
                              " " + vue.toDisplayString(item.teamSize && item.teamMax ? `${item.teamSize}~${item.teamMax}人` : "个人赛"),
                              1
                              /* TEXT */
                            )
                          ]),
                          vue.createElementVNode("text", { class: "team-size-tag" }, [
                            vue.createVNode(_component_SvgIcon, {
                              name: "Baominrenshu",
                              size: "20",
                              style: { "padding-bottom": "10rpx" }
                            }),
                            vue.createTextVNode(
                              " " + vue.toDisplayString(item.teamCount || 0) + "队已报名 ",
                              1
                              /* TEXT */
                            )
                          ])
                        ]),
                        vue.createElementVNode("view", { class: "card-footer" }, [
                          vue.createElementVNode("view", { class: "date-info" }, [
                            vue.createElementVNode(
                              "text",
                              { class: "date-text" },
                              vue.toDisplayString($options.isUpcoming(item) ? "报名开始" : "报名截止") + ": " + vue.toDisplayString($options.formatDate($options.isUpcoming(item) ? item.registrationStart : item.registrationDeadline)),
                              1
                              /* TEXT */
                            )
                          ]),
                          vue.createElementVNode(
                            "view",
                            {
                              class: vue.normalizeClass(["action-btn", { "disabled-btn": item.status === "0" || item.status === "3" }])
                            },
                            vue.toDisplayString($options.getActionText(item.status)),
                            3
                            /* TEXT, CLASS */
                          )
                        ])
                      ])
                    ], 8, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                )),
                vue.createCommentVNode(" 加载更多提示 "),
                $data.competitionList.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "loading-more"
                }, [
                  $data.loading ? (vue.openBlock(), vue.createElementBlock("text", { key: 0 }, "加载中...")) : $data.hasMore ? (vue.openBlock(), vue.createElementBlock("text", {
                    key: 1,
                    onClick: _cache[1] || (_cache[1] = (...args) => $options.loadMore && $options.loadMore(...args))
                  }, "点击加载更多")) : (vue.openBlock(), vue.createElementBlock("text", { key: 2 }, "没有更多竞赛了"))
                ])) : vue.createCommentVNode("v-if", true),
                vue.createCommentVNode(" 空状态 "),
                $data.competitionList.length === 0 && !$data.loading ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 1,
                  class: "empty-state"
                }, [
                  vue.createElementVNode("text", { class: "empty-text" }, "暂无竞赛数据")
                ])) : vue.createCommentVNode("v-if", true)
              ])
            ])
          ],
          32
          /* NEED_HYDRATION */
        ),
        vue.createCommentVNode(" 底部导航栏 "),
        vue.createVNode(_component_tab_bar, {
          "active-tab": "competition",
          onTabChange: $options.handleTabChange,
          onPublish: $options.showPublishOptions
        }, null, 8, ["onTabChange", "onPublish"])
      ],
      512
      /* NEED_PATCH */
    );
  }
  const PagesCompetitionIndex = /* @__PURE__ */ _export_sfc(_sfc_main$l, [["render", _sfc_render$k], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/competition/index.vue"]]);
  const _imports_0$7 = "/static/image/empty-stage.png";
  const _sfc_main$k = {
    __name: "create",
    setup(__props, { expose: __expose }) {
      __expose();
      const steps = ["基本信息", "比赛阶段", "联系附件", "预览发布"];
      const currentStep = vue.ref(0);
      const stagePopup = vue.ref(null);
      const isEditingStage = vue.ref(false);
      const editingStageIndex = vue.ref(-1);
      const isPopupOpen = vue.ref(false);
      const form = vue.reactive({
        title: "",
        categoryId: null,
        level: "",
        shortDescription: "",
        description: "",
        requirements: "",
        registrationStart: "",
        registrationEnd: "",
        teamMin: "",
        teamMax: "",
        isHot: false,
        websiteUrl: "",
        name: "",
        contactQQ: "",
        contactEmail: "",
        coverUrl: "",
        coverFile: null,
        attachments: [],
        stages: []
        // 比赛阶段数据
      });
      const stageForm = vue.reactive({
        stageName: "",
        startDate: "",
        startTime: "09:00",
        endDate: "",
        endTime: "18:00",
        description: "",
        location: ""
      });
      const stageStatusOptions = [
        { label: "待开始", value: "pending" },
        { label: "进行中", value: "active" },
        { label: "已结束", value: "completed" }
      ];
      const categoryOptions = vue.ref([]);
      const levelOptions = ["国家级", "省级", "市级", "校级"];
      vue.onMounted(async () => {
        await checkAdminRole();
        await loadCategories();
        setInterval(() => {
          if (form.stages.length > 0) {
            form.stages = [...form.stages];
          }
        }, 6e4);
      });
      function nextStep() {
        if (currentStep.value < steps.length - 1) {
          if (validateCurrentStep()) {
            currentStep.value++;
          }
        }
      }
      function prevStep() {
        if (currentStep.value > 0) {
          currentStep.value--;
        }
      }
      function goToStep(index) {
        if (index <= currentStep.value + 1 && index >= 0 && index < steps.length) {
          if (index > currentStep.value) {
            if (validateCurrentStep()) {
              currentStep.value = index;
            }
          } else {
            currentStep.value = index;
          }
        }
      }
      function validateCurrentStep() {
        switch (currentStep.value) {
          case 0:
            if (!form.title) {
              showError("请输入竞赛标题");
              return false;
            }
            if (!form.categoryId) {
              showError("请选择竞赛分类");
              return false;
            }
            if (!form.level) {
              showError("请选择竞赛级别");
              return false;
            }
            if (!form.shortDescription) {
              showError("请填写竞赛简介");
              return false;
            }
            if (!form.description) {
              showError("请填写竞赛介绍");
              return false;
            }
            if (!form.requirements) {
              showError("请填写参赛要求");
              return false;
            }
            if (!form.registrationStart || !form.registrationEnd) {
              showError("请选择报名时间");
              return false;
            }
            if (!form.teamMin || !form.teamMax) {
              showError("请填写团队人数");
              return false;
            }
            return true;
          case 1:
            if (form.stages.length === 0) {
              showError("请至少添加一个比赛阶段");
              return false;
            }
            return true;
          case 2:
            if (!form.name || !form.contactEmail) {
              showError("请填写联系方式");
              return false;
            }
            if (!form.coverUrl) {
              showError("请上传竞赛封面");
              return false;
            }
            return true;
          default:
            return true;
        }
      }
      async function loadCategories() {
        try {
          const res = await competitionsApi.getCompetitionCategories();
          if (res.code === 200 && res.data && Array.isArray(res.data)) {
            categoryOptions.value = res.data.map((item) => ({
              label: item.name,
              value: item.id,
              icon: getIconForCategory(item.name),
              id: item.id
            }));
          } else {
            formatAppLog("error", "at pages/competition/create.vue:756", "获取分类失败:", res);
            setDefaultCategories();
          }
        } catch (error) {
          formatAppLog("error", "at pages/competition/create.vue:760", "获取分类出错:", error);
          setDefaultCategories();
        }
      }
      function getIconForCategory(name2) {
        const iconMap = {
          "计算机类": "iconfont icon-computer",
          "设计类": "iconfont icon-palette",
          "创新创业": "iconfont icon-lightbulb",
          "学科竞赛": "iconfont icon-book",
          "科技竞赛": "iconfont icon-chip",
          "文化艺术": "iconfont icon-palette",
          "体育竞赛": "iconfont icon-running"
        };
        return iconMap[name2] || "iconfont icon-more";
      }
      function setDefaultCategories() {
        categoryOptions.value = [
          { label: "创新创业", value: 2, icon: "iconfont icon-lightbulb", id: 2 },
          { label: "学科竞赛", value: 1, icon: "iconfont icon-book", id: 1 },
          { label: "科技竞赛", value: 3, icon: "iconfont icon-chip", id: 3 },
          { label: "文化艺术", value: 4, icon: "iconfont icon-palette", id: 4 },
          { label: "体育竞赛", value: 5, icon: "iconfont icon-running", id: 5 },
          { label: "其他", value: 6, icon: "iconfont icon-more", id: 6 }
        ];
      }
      function getCategoryName() {
        const category = categoryOptions.value.find((item) => item.id === form.categoryId);
        return category ? category.label : "未设置分类";
      }
      async function checkAdminRole() {
        try {
          const token = uni.getStorageSync("token");
          if (!token) {
            redirectNoPermission();
            return;
          }
          const res = await userApi.getUserRole(token);
          if (res.code !== 200 || res.data !== "admin") {
            redirectNoPermission();
          }
        } catch (error) {
          formatAppLog("error", "at pages/competition/create.vue:812", "获取角色失败:", error);
          redirectNoPermission();
        }
      }
      function redirectNoPermission() {
        uni.showToast({
          title: "只有管理员才能发布竞赛",
          icon: "none"
        });
        setTimeout(() => {
          uni.navigateBack();
        }, 1500);
      }
      function goBack() {
        uni.showModal({
          title: "提示",
          content: "离开后当前编辑的内容将不会保存，确定要离开吗？",
          success: (res) => {
            if (res.confirm) {
              uni.navigateBack();
            }
          }
        });
      }
      function addStage() {
        resetStageForm();
        isEditingStage.value = false;
        isPopupOpen.value = true;
        stagePopup.value.open();
      }
      function editStage(index) {
        const stage = form.stages[index];
        const startDateTime = new Date(stage.startTime);
        const endDateTime = new Date(stage.endTime);
        stageForm.stageName = stage.stageName;
        stageForm.startDate = formatDate(startDateTime);
        stageForm.startTime = formatTimeOnly(startDateTime);
        stageForm.endDate = formatDate(endDateTime);
        stageForm.endTime = formatTimeOnly(endDateTime);
        stageForm.description = stage.description;
        if (stage.metadata) {
          try {
            const metadata = typeof stage.metadata === "string" ? JSON.parse(stage.metadata) : stage.metadata;
            stageForm.location = metadata.location || "";
          } catch (e) {
            stageForm.location = "";
          }
        } else {
          stageForm.location = "";
        }
        isEditingStage.value = true;
        editingStageIndex.value = index;
        isPopupOpen.value = true;
        stagePopup.value.open();
      }
      function removeStage(index) {
        uni.showModal({
          title: "确认删除",
          content: "确定要删除该阶段吗？",
          success: (res) => {
            if (res.confirm) {
              form.stages.splice(index, 1);
            }
          }
        });
      }
      function cancelStage() {
        stagePopup.value.close();
        setTimeout(() => {
          isPopupOpen.value = false;
        }, 300);
      }
      function confirmStage() {
        if (!validateStageForm()) {
          return;
        }
        const startDateTime = combineDateTime(stageForm.startDate, stageForm.startTime);
        const endDateTime = combineDateTime(stageForm.endDate, stageForm.endTime);
        const stage = {
          stageName: stageForm.stageName,
          startTime: startDateTime,
          endTime: endDateTime,
          description: stageForm.description,
          // 自动计算最新状态
          status: calculateStageStatus(startDateTime, endDateTime),
          metadata: JSON.stringify({
            location: stageForm.location
          })
        };
        if (isEditingStage.value) {
          form.stages[editingStageIndex.value] = stage;
        } else {
          form.stages.push(stage);
        }
        stagePopup.value.close();
        setTimeout(() => {
          isPopupOpen.value = false;
        }, 300);
        uni.showToast({
          title: isEditingStage.value ? "阶段已更新" : "阶段已添加",
          icon: "success"
        });
      }
      function validateStageForm() {
        if (!stageForm.stageName) {
          showError("请输入阶段名称");
          return false;
        }
        if (!stageForm.startDate) {
          showError("请选择开始日期");
          return false;
        }
        if (!stageForm.startTime) {
          showError("请选择开始时间");
          return false;
        }
        if (!stageForm.endDate) {
          showError("请选择结束日期");
          return false;
        }
        if (!stageForm.endTime) {
          showError("请选择结束时间");
          return false;
        }
        const startDateTime = new Date(combineDateTime(stageForm.startDate, stageForm.startTime));
        const endDateTime = new Date(combineDateTime(stageForm.endDate, stageForm.endTime));
        if (endDateTime <= startDateTime) {
          showError("结束时间必须晚于开始时间");
          return false;
        }
        if (!stageForm.description) {
          showError("请输入阶段描述");
          return false;
        }
        return true;
      }
      function resetStageForm() {
        stageForm.stageName = "";
        stageForm.startDate = "";
        stageForm.startTime = "09:00";
        stageForm.endDate = "";
        stageForm.endTime = "18:00";
        stageForm.description = "";
        stageForm.location = "";
      }
      function combineDateTime(date, time) {
        return `${date}T${time}:00`;
      }
      function formatDate(date) {
        if (typeof date === "string") {
          date = new Date(date);
        }
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, "0");
        const day = String(date.getDate()).padStart(2, "0");
        return `${year}-${month}-${day}`;
      }
      function formatTimeOnly(date) {
        if (typeof date === "string") {
          date = new Date(date);
        }
        const hours = String(date.getHours()).padStart(2, "0");
        const minutes = String(date.getMinutes()).padStart(2, "0");
        return `${hours}:${minutes}`;
      }
      function formatDateTime(dateTime) {
        if (!dateTime)
          return "";
        const date = new Date(dateTime);
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, "0");
        const day = String(date.getDate()).padStart(2, "0");
        const hours = String(date.getHours()).padStart(2, "0");
        const minutes = String(date.getMinutes()).padStart(2, "0");
        return `${year}-${month}-${day} ${hours}:${minutes}`;
      }
      function getStageStatusClass(status) {
        const classes = {
          "pending": "status-pending",
          "active": "status-active",
          "completed": "status-completed"
        };
        return classes[status] || "status-pending";
      }
      function getStageStatusText(status) {
        const texts = {
          "pending": "待开始",
          "active": "进行中",
          "completed": "已结束"
        };
        return texts[status] || "待开始";
      }
      function calculateStageStatus(startTime, endTime) {
        const now = /* @__PURE__ */ new Date();
        const startDate = new Date(startTime);
        const endDate = new Date(endTime);
        if (now < startDate) {
          return "pending";
        } else if (now > endDate) {
          return "completed";
        } else {
          return "active";
        }
      }
      function getStageLocation(stage) {
        if (!stage.metadata)
          return "未设置";
        try {
          const metadata = typeof stage.metadata === "string" ? JSON.parse(stage.metadata) : stage.metadata;
          return metadata.location || "未设置";
        } catch (e) {
          return "未设置";
        }
      }
      function saveDraft() {
        if (!form.title) {
          return uni.showToast({
            title: "请输入竞赛标题",
            icon: "none"
          });
        }
        saveCompetition(0);
      }
      function uploadCover() {
        uni.chooseImage({
          count: 1,
          sizeType: ["original", "compressed"],
          sourceType: ["album", "camera"],
          success: (res) => {
            form.coverUrl = res.tempFilePaths[0];
            form.coverFile = res.tempFiles[0];
          }
        });
      }
      function uploadAttachment() {
        uni.chooseFile({
          count: 5,
          type: "all",
          extension: [".pdf", ".doc", ".docx", ".ppt", ".pptx", ".xls", ".xlsx", ".zip"],
          success: (res) => {
            const files = res.tempFiles.map((file) => ({
              name: file.name || "未命名文件",
              path: file.path,
              size: file.size,
              file
              // 保存文件对象
            }));
            form.attachments = [...form.attachments, ...files];
          }
        });
      }
      function removeFile(index) {
        form.attachments.splice(index, 1);
      }
      function publishCompetition() {
        if (!validateForm())
          return;
        saveCompetition(1);
      }
      function validateForm() {
        if (!form.title) {
          showError("请输入竞赛标题");
          return false;
        }
        if (!form.categoryId) {
          showError("请选择竞赛分类");
          return false;
        }
        if (!form.level) {
          showError("请选择竞赛级别");
          return false;
        }
        if (!form.shortDescription) {
          showError("请填写竞赛简介");
          return false;
        }
        if (!form.description) {
          showError("请填写竞赛介绍");
          return false;
        }
        if (!form.requirements) {
          showError("请填写参赛要求");
          return false;
        }
        if (!form.registrationStart || !form.registrationEnd) {
          showError("请选择竞赛时间");
          return false;
        }
        if (!form.teamMin || !form.teamMax) {
          showError("请填写团队人数");
          return false;
        }
        if (form.stages.length === 0) {
          showError("请至少添加一个比赛阶段");
          return false;
        }
        if (!form.name || !form.contactEmail) {
          showError("请填写联系方式");
          return false;
        }
        if (!form.coverUrl) {
          showError("请上传竞赛封面");
          return false;
        }
        return true;
      }
      function showError(message) {
        uni.showToast({
          title: message,
          icon: "none"
        });
      }
      async function saveCompetition(status) {
        const competitionData = {
          title: form.title,
          categoryId: form.categoryId,
          level: form.level,
          shortDescription: form.shortDescription,
          description: form.description,
          requirements: form.requirements,
          registrationStart: form.registrationStart + "T00:00:00",
          registrationDeadline: form.registrationEnd + "T23:59:59",
          teamSize: parseInt(form.teamMin) || 1,
          teamMax: parseInt(form.teamMax) || 5,
          status: status.toString(),
          // 0: 草稿, 1: 已发布
          organizer: "主办方名称",
          // 这里可以添加主办方输入字段
          websiteUrl: form.websiteUrl,
          contactInfo: {
            email: form.contactEmail,
            qq: form.contactQQ,
            name: form.name
          }
          // 注意：阶段会在创建成功后通过单独的接口创建
        };
        uni.showLoading({
          title: status === 0 ? "保存中..." : "发布中..."
        });
        try {
          const formData = new FormData();
          formData.append("competitionData", JSON.stringify(competitionData));
          if (form.coverFile) {
            formData.append("coverImage", form.coverFile);
          }
          form.attachments.forEach((attachment, index) => {
            if (attachment.file) {
              formData.append("attachmentFiles", attachment.file);
            }
          });
          const token = uni.getStorageSync("token");
          const res = await new Promise((resolve, reject) => {
            uni.uploadFile({
              url: `${config.baseUrl}/competitions/with-files`,
              files: form.attachments.map((item) => ({
                name: "attachmentFiles",
                file: item.file
              })),
              filePath: form.coverUrl,
              name: "coverImage",
              formData: {
                "competitionData": JSON.stringify(competitionData)
              },
              header: {
                "Authorization": "Bearer " + token
              },
              success: (uploadRes) => {
                let result;
                try {
                  result = JSON.parse(uploadRes.data);
                } catch (e) {
                  result = { code: -1, message: "返回数据解析失败" };
                }
                resolve(result);
              },
              fail: (err) => {
                reject(err);
              }
            });
          });
          if (res.code === 200) {
            const competitionId = res.data.id;
            if (form.stages && form.stages.length > 0) {
              try {
                const formattedStages = form.stages.map((stage) => {
                  let metadata = stage.metadata;
                  if (typeof metadata !== "string") {
                    metadata = JSON.stringify(metadata);
                  }
                  return {
                    competitionId,
                    // 会在API层再次添加
                    stageName: stage.stageName,
                    startTime: stage.startTime,
                    endTime: stage.endTime,
                    description: stage.description,
                    // 自动计算最新状态
                    status: calculateStageStatus(stage.startTime, stage.endTime),
                    metadata
                  };
                });
                formatAppLog("log", "at pages/competition/create.vue:1366", "格式化后的阶段数据:", formattedStages);
                await competitionsApi.createCompetitionStages(formattedStages, competitionId);
                formatAppLog("log", "at pages/competition/create.vue:1371", "比赛阶段创建成功");
              } catch (stageError) {
                formatAppLog("error", "at pages/competition/create.vue:1373", "比赛阶段创建失败:", stageError);
                uni.showToast({
                  title: "竞赛已创建，但阶段创建失败",
                  icon: "none",
                  duration: 3e3
                });
                setTimeout(() => {
                  uni.navigateBack();
                }, 3e3);
                return;
              }
            }
            uni.showToast({
              title: status === 0 ? "保存成功" : "发布成功",
              icon: "success"
            });
            setTimeout(() => {
              uni.navigateBack();
            }, 1500);
          } else {
            uni.showToast({
              title: res.message || "操作失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/competition/create.vue:1404", "操作失败:", error);
          uni.showToast({
            title: "操作失败，请重试",
            icon: "none"
          });
        } finally {
          uni.hideLoading();
        }
      }
      const __returned__ = { steps, currentStep, stagePopup, isEditingStage, editingStageIndex, isPopupOpen, form, stageForm, stageStatusOptions, categoryOptions, levelOptions, nextStep, prevStep, goToStep, validateCurrentStep, loadCategories, getIconForCategory, setDefaultCategories, getCategoryName, checkAdminRole, redirectNoPermission, goBack, addStage, editStage, removeStage, cancelStage, confirmStage, validateStageForm, resetStageForm, combineDateTime, formatDate, formatTimeOnly, formatDateTime, getStageStatusClass, getStageStatusText, calculateStageStatus, getStageLocation, saveDraft, uploadCover, uploadAttachment, removeFile, publishCompetition, validateForm, showError, saveCompetition, ref: vue.ref, reactive: vue.reactive, onMounted: vue.onMounted, get competitionsApi() {
        return competitionsApi;
      }, get userApi() {
        return userApi;
      }, get icons() {
        return icons;
      }, get config() {
        return config;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$j(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_easyinput = resolveEasycom(vue.resolveDynamicComponent("uni-easyinput"), __easycom_0);
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_0$3);
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createElementVNode("view", { class: "sticky-header" }, [
        vue.createElementVNode("view", { class: "nav-bar" }, [
          vue.createElementVNode("view", {
            class: "back-btn",
            onClick: $setup.goBack
          }, [
            vue.createElementVNode("image", {
              src: $setup.icons.back,
              class: "icon-btn"
            }, null, 8, ["src"])
          ]),
          vue.createElementVNode("text", { class: "page-title" }, "发布竞赛"),
          vue.createElementVNode("view", {
            class: "draft-btn",
            onClick: $setup.saveDraft
          }, "草稿箱")
        ]),
        vue.createCommentVNode(" 步骤指示器 "),
        vue.createElementVNode("view", { class: "steps-container" }, [
          (vue.openBlock(), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.steps, (step, index) => {
              return vue.createElementVNode("view", {
                key: index,
                class: vue.normalizeClass(["step-item", { "active": $setup.currentStep >= index, "current": $setup.currentStep === index }]),
                onClick: ($event) => $setup.goToStep(index)
              }, [
                vue.createElementVNode(
                  "view",
                  { class: "step-number" },
                  vue.toDisplayString(index + 1),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode(
                  "text",
                  { class: "step-text" },
                  vue.toDisplayString(step),
                  1
                  /* TEXT */
                )
              ], 10, ["onClick"]);
            }),
            64
            /* STABLE_FRAGMENT */
          ))
        ])
      ]),
      vue.createCommentVNode(" 表单内容 "),
      vue.createElementVNode("scroll-view", {
        "scroll-y": "",
        class: "form-content"
      }, [
        vue.createCommentVNode(" 第一步：竞赛基本信息 "),
        $setup.currentStep === 0 ? (vue.openBlock(), vue.createElementBlock("view", { key: 0 }, [
          vue.createElementVNode("view", { class: "form-section" }, [
            vue.createElementVNode("text", { class: "section-title" }, "基本信息"),
            vue.createCommentVNode(" 竞赛标题 "),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("view", { class: "form-label" }, [
                vue.createElementVNode("text", null, "竞赛标题"),
                vue.createElementVNode("text", { class: "required" }, "*")
              ]),
              vue.createVNode(_component_uni_easyinput, {
                type: "text",
                modelValue: $setup.form.title,
                "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.form.title = $event),
                placeholder: "请输入竞赛名称（5-50字）",
                clearable: false
              }, null, 8, ["modelValue"])
            ]),
            vue.createCommentVNode(" 竞赛分类 "),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("view", { class: "form-label" }, [
                vue.createElementVNode("text", null, "竞赛分类"),
                vue.createElementVNode("text", { class: "required" }, "*")
              ]),
              vue.createElementVNode("view", { class: "category-grid" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.categoryOptions, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      key: index,
                      class: vue.normalizeClass(["category-item", { "category-active": $setup.form.categoryId === item.id }]),
                      onClick: ($event) => $setup.form.categoryId = item.id
                    }, [
                      vue.createElementVNode(
                        "text",
                        {
                          class: vue.normalizeClass(["category-icon", item.icon])
                        },
                        null,
                        2
                        /* CLASS */
                      ),
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString(item.label),
                        1
                        /* TEXT */
                      )
                    ], 10, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ]),
            vue.createCommentVNode(" 竞赛级别 "),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("view", { class: "form-label" }, [
                vue.createElementVNode("text", null, "竞赛级别"),
                vue.createElementVNode("text", { class: "required" }, "*")
              ]),
              vue.createElementVNode("scroll-view", {
                class: "level-scroll",
                "scroll-x": ""
              }, [
                vue.createElementVNode("view", { class: "level-list" }, [
                  (vue.openBlock(), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($setup.levelOptions, (level, index) => {
                      return vue.createElementVNode("view", {
                        key: index,
                        class: vue.normalizeClass(["level-item", { "level-active": $setup.form.level === level }]),
                        onClick: ($event) => $setup.form.level = level
                      }, [
                        vue.createElementVNode(
                          "text",
                          null,
                          vue.toDisplayString(level),
                          1
                          /* TEXT */
                        )
                      ], 10, ["onClick"]);
                    }),
                    64
                    /* STABLE_FRAGMENT */
                  ))
                ])
              ])
            ]),
            vue.createCommentVNode(" 竞赛简介 "),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("view", { class: "form-label" }, [
                vue.createElementVNode("text", null, "竞赛简介"),
                vue.createElementVNode("text", { class: "required" }, "*")
              ]),
              vue.withDirectives(vue.createElementVNode(
                "textarea",
                {
                  "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.form.shortDescription = $event),
                  placeholder: "请填写竞赛简介（10-30个字）",
                  class: "form-textarea",
                  maxlength: "140"
                },
                null,
                512
                /* NEED_PATCH */
              ), [
                [vue.vModelText, $setup.form.shortDescription]
              ])
            ]),
            vue.createCommentVNode(" 竞赛介绍 "),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("view", { class: "form-label" }, [
                vue.createElementVNode("text", null, "竞赛介绍"),
                vue.createElementVNode("text", { class: "required" }, "*")
              ]),
              vue.withDirectives(vue.createElementVNode(
                "textarea",
                {
                  "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => $setup.form.description = $event),
                  placeholder: "请详细描述竞赛背景、目的和意义（50-1000字）",
                  class: "form-textarea",
                  maxlength: "2000"
                },
                null,
                512
                /* NEED_PATCH */
              ), [
                [vue.vModelText, $setup.form.description]
              ])
            ]),
            vue.createCommentVNode(" 参赛要求 "),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("view", { class: "form-label" }, [
                vue.createElementVNode("text", null, "参赛要求"),
                vue.createElementVNode("text", { class: "required" }, "*")
              ]),
              vue.withDirectives(vue.createElementVNode(
                "textarea",
                {
                  "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => $setup.form.requirements = $event),
                  placeholder: "请说明参赛资格、人数限制等要求（20-500字）",
                  class: "form-textarea form-textarea-medium",
                  maxlength: "1000"
                },
                null,
                512
                /* NEED_PATCH */
              ), [
                [vue.vModelText, $setup.form.requirements]
              ])
            ])
          ]),
          vue.createElementVNode("view", { class: "form-section" }, [
            vue.createElementVNode("text", { class: "section-title" }, "时间与团队"),
            vue.createCommentVNode(" 报名时间 "),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("view", { class: "form-label" }, [
                vue.createElementVNode("text", null, "报名时间"),
                vue.createElementVNode("text", { class: "required" }, "*")
              ]),
              vue.createElementVNode("view", { class: "time-grid" }, [
                vue.createElementVNode("view", { class: "time-column" }, [
                  vue.createElementVNode("text", { class: "time-label" }, "报名开始时间"),
                  vue.createElementVNode("picker", {
                    mode: "date",
                    value: $setup.form.registrationStart,
                    onChange: _cache[4] || (_cache[4] = (e) => $setup.form.registrationStart = e.detail.value),
                    class: "date-picker"
                  }, [
                    vue.createElementVNode("view", { class: "picker-view" }, [
                      $setup.form.registrationStart ? (vue.openBlock(), vue.createElementBlock(
                        "text",
                        { key: 0 },
                        vue.toDisplayString($setup.form.registrationStart),
                        1
                        /* TEXT */
                      )) : (vue.openBlock(), vue.createElementBlock("text", {
                        key: 1,
                        class: "placeholder-text"
                      }, "选择日期"))
                    ])
                  ], 40, ["value"])
                ]),
                vue.createElementVNode("view", { class: "time-column" }, [
                  vue.createElementVNode("text", { class: "time-label" }, "报名截止时间"),
                  vue.createElementVNode("picker", {
                    mode: "date",
                    value: $setup.form.registrationEnd,
                    onChange: _cache[5] || (_cache[5] = (e) => $setup.form.registrationEnd = e.detail.value),
                    class: "date-picker"
                  }, [
                    vue.createElementVNode("view", { class: "picker-view" }, [
                      $setup.form.registrationEnd ? (vue.openBlock(), vue.createElementBlock(
                        "text",
                        { key: 0 },
                        vue.toDisplayString($setup.form.registrationEnd),
                        1
                        /* TEXT */
                      )) : (vue.openBlock(), vue.createElementBlock("text", {
                        key: 1,
                        class: "placeholder-text"
                      }, "选择日期"))
                    ])
                  ], 40, ["value"])
                ])
              ])
            ]),
            vue.createCommentVNode(" 团队人数 "),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("view", { class: "form-label" }, [
                vue.createElementVNode("text", null, "团队人数"),
                vue.createElementVNode("text", { class: "required" }, "*")
              ]),
              vue.createElementVNode("view", { class: "time-grid" }, [
                vue.createElementVNode("view", { class: "time-column" }, [
                  vue.createElementVNode("text", { class: "time-label" }, "最少人数"),
                  vue.createVNode(_component_uni_easyinput, {
                    type: "number",
                    modelValue: $setup.form.teamMin,
                    "onUpdate:modelValue": _cache[6] || (_cache[6] = ($event) => $setup.form.teamMin = $event),
                    placeholder: "输入人数",
                    clearable: false
                  }, null, 8, ["modelValue"])
                ]),
                vue.createElementVNode("view", { class: "time-column" }, [
                  vue.createElementVNode("text", { class: "time-label" }, "最多人数"),
                  vue.createVNode(_component_uni_easyinput, {
                    type: "number",
                    modelValue: $setup.form.teamMax,
                    "onUpdate:modelValue": _cache[7] || (_cache[7] = ($event) => $setup.form.teamMax = $event),
                    placeholder: "输入人数",
                    clearable: false
                  }, null, 8, ["modelValue"])
                ])
              ])
            ]),
            vue.createCommentVNode(" 是否设为热门 "),
            vue.createElementVNode("view", { class: "hot-toggle" }, [
              vue.createElementVNode("view", { class: "hot-info" }, [
                vue.createElementVNode("text", { class: "hot-title" }, "设为热门竞赛"),
                vue.createElementVNode("text", { class: "hot-desc" }, "热门竞赛将在首页和竞赛列表优先展示")
              ]),
              vue.createElementVNode("switch", {
                checked: $setup.form.isHot,
                onChange: _cache[8] || (_cache[8] = (e) => $setup.form.isHot = e.detail.value),
                color: "#00aaff"
              }, null, 40, ["checked"])
            ])
          ])
        ])) : vue.createCommentVNode("v-if", true),
        vue.createCommentVNode(" 第二步：比赛阶段设置 "),
        $setup.currentStep === 1 ? (vue.openBlock(), vue.createElementBlock("view", { key: 1 }, [
          vue.createElementVNode("view", { class: "form-section" }, [
            vue.createElementVNode("view", { class: "section-header" }, [
              vue.createElementVNode("text", { class: "section-title" }, "比赛阶段设置"),
              vue.createElementVNode("view", {
                class: "add-stage-btn",
                onClick: $setup.addStage
              }, [
                vue.createElementVNode("text", { class: "add-icon" }, "+"),
                vue.createElementVNode("text", null, "添加阶段")
              ])
            ]),
            vue.createElementVNode("view", { class: "stage-list" }, [
              $setup.form.stages.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "empty-stage"
              }, [
                vue.createElementVNode("image", {
                  src: _imports_0$7,
                  mode: "aspectFit",
                  class: "empty-image"
                }),
                vue.createElementVNode("text", { class: "empty-text" }, "暂无比赛阶段，请添加阶段"),
                vue.createElementVNode("view", {
                  class: "add-stage-btn center-btn",
                  onClick: $setup.addStage
                }, [
                  vue.createElementVNode("text", { class: "add-icon" }, "+"),
                  vue.createElementVNode("text", null, "添加阶段")
                ])
              ])) : vue.createCommentVNode("v-if", true),
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.form.stages, (stage, index) => {
                  return vue.openBlock(), vue.createElementBlock("view", {
                    key: index,
                    class: "stage-card"
                  }, [
                    vue.createElementVNode("view", { class: "stage-header" }, [
                      vue.createElementVNode("view", { class: "stage-title-row" }, [
                        vue.createElementVNode(
                          "text",
                          { class: "stage-name" },
                          vue.toDisplayString(stage.stageName || "未命名阶段"),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode(
                          "view",
                          {
                            class: vue.normalizeClass(["stage-status", $setup.getStageStatusClass($setup.calculateStageStatus(stage.startTime, stage.endTime))])
                          },
                          [
                            vue.createElementVNode(
                              "text",
                              null,
                              vue.toDisplayString($setup.getStageStatusText($setup.calculateStageStatus(stage.startTime, stage.endTime))),
                              1
                              /* TEXT */
                            )
                          ],
                          2
                          /* CLASS */
                        )
                      ]),
                      vue.createElementVNode("view", { class: "stage-actions" }, [
                        vue.createElementVNode("view", {
                          class: "stage-action-btn",
                          onClick: ($event) => $setup.editStage(index)
                        }, [
                          vue.createElementVNode("text", { class: "iconfont icon-edit" }),
                          vue.createElementVNode("text", null, "编辑")
                        ], 8, ["onClick"]),
                        vue.createElementVNode("view", {
                          class: "stage-action-btn delete",
                          onClick: ($event) => $setup.removeStage(index)
                        }, [
                          vue.createElementVNode("text", { class: "iconfont icon-delete" }),
                          vue.createElementVNode("text", null, "删除")
                        ], 8, ["onClick"])
                      ])
                    ]),
                    vue.createElementVNode("view", { class: "stage-content" }, [
                      vue.createElementVNode("view", { class: "stage-info-item" }, [
                        vue.createElementVNode("text", { class: "stage-info-label" }, "开始时间:"),
                        vue.createElementVNode(
                          "text",
                          { class: "stage-info-value" },
                          vue.toDisplayString($setup.formatDateTime(stage.startTime)),
                          1
                          /* TEXT */
                        )
                      ]),
                      vue.createElementVNode("view", { class: "stage-info-item" }, [
                        vue.createElementVNode("text", { class: "stage-info-label" }, "结束时间:"),
                        vue.createElementVNode(
                          "text",
                          { class: "stage-info-value" },
                          vue.toDisplayString($setup.formatDateTime(stage.endTime)),
                          1
                          /* TEXT */
                        )
                      ]),
                      vue.createElementVNode("view", { class: "stage-info-item" }, [
                        vue.createElementVNode("text", { class: "stage-info-label" }, "阶段描述:"),
                        vue.createElementVNode(
                          "text",
                          { class: "stage-info-value description" },
                          vue.toDisplayString(stage.description || "暂无描述"),
                          1
                          /* TEXT */
                        )
                      ]),
                      stage.metadata ? (vue.openBlock(), vue.createElementBlock("view", {
                        key: 0,
                        class: "stage-info-item"
                      }, [
                        vue.createElementVNode("text", { class: "stage-info-label" }, "地点:"),
                        vue.createElementVNode(
                          "text",
                          { class: "stage-info-value" },
                          vue.toDisplayString($setup.getStageLocation(stage)),
                          1
                          /* TEXT */
                        )
                      ])) : vue.createCommentVNode("v-if", true)
                    ])
                  ]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ])
          ])
        ])) : vue.createCommentVNode("v-if", true),
        vue.createCommentVNode(" 第三步：联系方式与附件 "),
        $setup.currentStep === 2 ? (vue.openBlock(), vue.createElementBlock("view", { key: 2 }, [
          vue.createElementVNode("view", { class: "form-section" }, [
            vue.createElementVNode("text", { class: "section-title" }, "联系方式与附件"),
            vue.createCommentVNode(" 官方网站 "),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("view", { class: "form-label" }, [
                vue.createElementVNode("text", null, "官方网站（可选）")
              ]),
              vue.createVNode(_component_uni_easyinput, {
                type: "text",
                modelValue: $setup.form.websiteUrl,
                "onUpdate:modelValue": _cache[9] || (_cache[9] = ($event) => $setup.form.websiteUrl = $event),
                placeholder: "输入网站",
                clearable: false
              }, null, 8, ["modelValue"])
            ]),
            vue.createCommentVNode(" 联系方式 "),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("view", { class: "form-label" }, [
                vue.createElementVNode("text", null, "联系方式"),
                vue.createElementVNode("text", { class: "required" }, "*")
              ]),
              vue.createElementVNode("view", { class: "contact-grid" }, [
                vue.createElementVNode("view", { class: "contact-row" }, [
                  vue.createElementVNode("view", { class: "contact-input" }, [
                    vue.createElementVNode("text", { class: "contact-icon iconfont icon-user" }),
                    vue.withDirectives(vue.createElementVNode(
                      "input",
                      {
                        type: "text",
                        "onUpdate:modelValue": _cache[10] || (_cache[10] = ($event) => $setup.form.name = $event),
                        placeholder: "联系人"
                      },
                      null,
                      512
                      /* NEED_PATCH */
                    ), [
                      [vue.vModelText, $setup.form.name]
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "contact-input" }, [
                    vue.createElementVNode("text", { class: "contact-icon iconfont icon-qq" }),
                    vue.withDirectives(vue.createElementVNode(
                      "input",
                      {
                        type: "text",
                        "onUpdate:modelValue": _cache[11] || (_cache[11] = ($event) => $setup.form.contactQQ = $event),
                        placeholder: "QQ群"
                      },
                      null,
                      512
                      /* NEED_PATCH */
                    ), [
                      [vue.vModelText, $setup.form.contactQQ]
                    ])
                  ])
                ]),
                vue.createElementVNode("view", { class: "contact-input contact-email" }, [
                  vue.createElementVNode("text", { class: "contact-icon iconfont icon-email" }),
                  vue.withDirectives(vue.createElementVNode(
                    "input",
                    {
                      type: "text",
                      "onUpdate:modelValue": _cache[12] || (_cache[12] = ($event) => $setup.form.contactEmail = $event),
                      placeholder: "联系邮箱"
                    },
                    null,
                    512
                    /* NEED_PATCH */
                  ), [
                    [vue.vModelText, $setup.form.contactEmail]
                  ])
                ])
              ])
            ]),
            vue.createCommentVNode(" 上传封面 "),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("view", { class: "form-label" }, [
                vue.createElementVNode("text", null, "竞赛封面"),
                vue.createElementVNode("text", { class: "required" }, "*")
              ]),
              vue.createElementVNode("view", {
                class: "upload-box",
                onClick: $setup.uploadCover
              }, [
                !$setup.form.coverUrl ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "upload-placeholder"
                }, [
                  vue.createElementVNode("text", { class: "upload-icon iconfont icon-image" }),
                  vue.createElementVNode("text", { class: "upload-text" }, "点击上传或拖拽图片至此处"),
                  vue.createElementVNode("text", { class: "upload-tip" }, "建议尺寸：800x400，文件大小不超过2MB")
                ])) : (vue.openBlock(), vue.createElementBlock("image", {
                  key: 1,
                  src: $setup.form.coverUrl,
                  mode: "aspectFill",
                  class: "cover-image"
                }, null, 8, ["src"]))
              ])
            ]),
            vue.createCommentVNode(" 上传附件 "),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("view", { class: "form-label" }, [
                vue.createElementVNode("text", null, "竞赛附件（可选）")
              ]),
              vue.createElementVNode("view", {
                class: "upload-box",
                onClick: $setup.uploadAttachment
              }, [
                $setup.form.attachments.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "upload-placeholder"
                }, [
                  vue.createElementVNode("text", { class: "upload-icon iconfont icon-file" }),
                  vue.createElementVNode("text", { class: "upload-text" }, "点击上传或拖拽文件至此处"),
                  vue.createElementVNode("text", { class: "upload-tip" }, "支持PDF、Word、PPT等格式，单个文件不超过10MB")
                ])) : (vue.openBlock(), vue.createElementBlock("view", {
                  key: 1,
                  class: "file-list"
                }, [
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($setup.form.attachments, (file, index) => {
                      return vue.openBlock(), vue.createElementBlock("view", {
                        key: index,
                        class: "file-item"
                      }, [
                        vue.createElementVNode("text", { class: "file-icon iconfont icon-file" }),
                        vue.createElementVNode(
                          "text",
                          { class: "file-name" },
                          vue.toDisplayString(file.name),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode("text", {
                          class: "delete-icon iconfont icon-close",
                          onClick: vue.withModifiers(($event) => $setup.removeFile(index), ["stop"])
                        }, null, 8, ["onClick"])
                      ]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  ))
                ]))
              ])
            ])
          ])
        ])) : vue.createCommentVNode("v-if", true),
        vue.createCommentVNode(" 第四步：预览 "),
        $setup.currentStep === 3 ? (vue.openBlock(), vue.createElementBlock("view", { key: 3 }, [
          vue.createElementVNode("view", { class: "form-section" }, [
            vue.createElementVNode("text", { class: "section-title" }, "竞赛预览"),
            vue.createElementVNode("view", { class: "preview-card" }, [
              $setup.form.coverUrl ? (vue.openBlock(), vue.createElementBlock("image", {
                key: 0,
                src: $setup.form.coverUrl,
                mode: "aspectFill",
                class: "preview-cover"
              }, null, 8, ["src"])) : (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "preview-placeholder"
              }, [
                vue.createElementVNode("text", { class: "iconfont icon-image" }),
                vue.createElementVNode("text", null, "无封面图片")
              ])),
              vue.createElementVNode("view", { class: "preview-content" }, [
                vue.createElementVNode(
                  "text",
                  { class: "preview-title" },
                  vue.toDisplayString($setup.form.title || "未设置竞赛标题"),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode("view", { class: "preview-badges" }, [
                  vue.createElementVNode(
                    "view",
                    { class: "preview-badge level" },
                    vue.toDisplayString($setup.form.level || "未设置级别"),
                    1
                    /* TEXT */
                  ),
                  vue.createElementVNode(
                    "view",
                    { class: "preview-badge category" },
                    vue.toDisplayString($setup.getCategoryName()),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "preview-info-item" }, [
                  vue.createElementVNode("text", { class: "preview-label" }, "报名时间:"),
                  vue.createElementVNode(
                    "text",
                    { class: "preview-value" },
                    vue.toDisplayString($setup.form.registrationStart || "未设置") + " 至 " + vue.toDisplayString($setup.form.registrationEnd || "未设置"),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "preview-info-item" }, [
                  vue.createElementVNode("text", { class: "preview-label" }, "团队人数:"),
                  vue.createElementVNode(
                    "text",
                    { class: "preview-value" },
                    vue.toDisplayString($setup.form.teamMin || "?") + " - " + vue.toDisplayString($setup.form.teamMax || "?") + " 人",
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "preview-desc" }, [
                  vue.createElementVNode("text", { class: "preview-desc-title" }, "竞赛简介"),
                  vue.createElementVNode(
                    "text",
                    { class: "preview-desc-content" },
                    vue.toDisplayString($setup.form.shortDescription || "未设置竞赛简介"),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "preview-stages" }, [
                  vue.createElementVNode("text", { class: "preview-stages-title" }, "比赛阶段"),
                  $setup.form.stages.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 0,
                    class: "preview-empty-stages"
                  }, [
                    vue.createElementVNode("text", null, "未设置比赛阶段")
                  ])) : (vue.openBlock(), vue.createElementBlock("view", {
                    key: 1,
                    class: "preview-stage-timeline"
                  }, [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList($setup.form.stages, (stage, index) => {
                        return vue.openBlock(), vue.createElementBlock("view", {
                          key: index,
                          class: "preview-stage-item"
                        }, [
                          vue.createElementVNode(
                            "view",
                            {
                              class: vue.normalizeClass(["timeline-dot", $setup.getStageStatusClass($setup.calculateStageStatus(stage.startTime, stage.endTime))])
                            },
                            null,
                            2
                            /* CLASS */
                          ),
                          vue.createElementVNode("view", { class: "timeline-content" }, [
                            vue.createElementVNode(
                              "text",
                              { class: "timeline-title" },
                              vue.toDisplayString(stage.stageName),
                              1
                              /* TEXT */
                            ),
                            vue.createElementVNode("view", { class: "timeline-status-row" }, [
                              vue.createElementVNode(
                                "text",
                                { class: "timeline-time" },
                                vue.toDisplayString($setup.formatDateTime(stage.startTime)) + " - " + vue.toDisplayString($setup.formatDateTime(stage.endTime)),
                                1
                                /* TEXT */
                              ),
                              vue.createElementVNode(
                                "view",
                                {
                                  class: vue.normalizeClass(["timeline-status", $setup.getStageStatusClass($setup.calculateStageStatus(stage.startTime, stage.endTime))])
                                },
                                [
                                  vue.createElementVNode(
                                    "text",
                                    null,
                                    vue.toDisplayString($setup.getStageStatusText($setup.calculateStageStatus(stage.startTime, stage.endTime))),
                                    1
                                    /* TEXT */
                                  )
                                ],
                                2
                                /* CLASS */
                              )
                            ]),
                            vue.createElementVNode(
                              "text",
                              { class: "timeline-desc" },
                              vue.toDisplayString(stage.description),
                              1
                              /* TEXT */
                            )
                          ])
                        ]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    ))
                  ]))
                ])
              ])
            ])
          ])
        ])) : vue.createCommentVNode("v-if", true)
      ]),
      vue.createCommentVNode(" 比赛阶段弹窗 "),
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "stagePopup",
          type: "bottom"
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "popup-content" }, [
              vue.createElementVNode("view", { class: "popup-header" }, [
                vue.createElementVNode("button", {
                  class: "btn cancel-btn",
                  onClick: $setup.cancelStage
                }, "取消"),
                vue.createElementVNode(
                  "text",
                  { class: "popup-title" },
                  vue.toDisplayString($setup.isEditingStage ? "编辑阶段" : "添加阶段"),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode("button", {
                  class: "btn confirm-btn",
                  onClick: $setup.confirmStage
                }, "保存")
              ]),
              vue.createElementVNode("view", { class: "form-content popup-form" }, [
                vue.createElementVNode("view", { class: "form-item" }, [
                  vue.createElementVNode("view", { class: "form-label" }, [
                    vue.createElementVNode("text", null, "阶段名称"),
                    vue.createElementVNode("text", { class: "required" }, "*")
                  ]),
                  vue.createVNode(_component_uni_easyinput, {
                    type: "text",
                    modelValue: $setup.stageForm.stageName,
                    "onUpdate:modelValue": _cache[13] || (_cache[13] = ($event) => $setup.stageForm.stageName = $event),
                    placeholder: "如：初赛、复赛、决赛等",
                    clearable: false
                  }, null, 8, ["modelValue"])
                ]),
                vue.createElementVNode("view", { class: "form-item" }, [
                  vue.createElementVNode("view", { class: "form-label" }, [
                    vue.createElementVNode("text", null, "开始时间"),
                    vue.createElementVNode("text", { class: "required" }, "*")
                  ]),
                  vue.createElementVNode("view", { class: "time-grid" }, [
                    vue.createElementVNode("view", { class: "time-column" }, [
                      vue.createElementVNode("text", { class: "time-label" }, "日期"),
                      vue.createElementVNode("picker", {
                        mode: "date",
                        value: $setup.stageForm.startDate,
                        onChange: _cache[14] || (_cache[14] = (e) => $setup.stageForm.startDate = e.detail.value),
                        class: "date-picker"
                      }, [
                        vue.createElementVNode("view", { class: "picker-view" }, [
                          $setup.stageForm.startDate ? (vue.openBlock(), vue.createElementBlock(
                            "text",
                            { key: 0 },
                            vue.toDisplayString($setup.stageForm.startDate),
                            1
                            /* TEXT */
                          )) : (vue.openBlock(), vue.createElementBlock("text", {
                            key: 1,
                            class: "placeholder-text"
                          }, "选择日期"))
                        ])
                      ], 40, ["value"])
                    ]),
                    vue.createElementVNode("view", { class: "time-column" }, [
                      vue.createElementVNode("text", { class: "time-label" }, "时间"),
                      vue.createElementVNode("picker", {
                        mode: "time",
                        value: $setup.stageForm.startTime,
                        onChange: _cache[15] || (_cache[15] = (e) => $setup.stageForm.startTime = e.detail.value),
                        class: "date-picker"
                      }, [
                        vue.createElementVNode("view", { class: "picker-view" }, [
                          $setup.stageForm.startTime ? (vue.openBlock(), vue.createElementBlock(
                            "text",
                            { key: 0 },
                            vue.toDisplayString($setup.stageForm.startTime),
                            1
                            /* TEXT */
                          )) : (vue.openBlock(), vue.createElementBlock("text", {
                            key: 1,
                            class: "placeholder-text"
                          }, "选择时间"))
                        ])
                      ], 40, ["value"])
                    ])
                  ])
                ]),
                vue.createElementVNode("view", { class: "form-item" }, [
                  vue.createElementVNode("view", { class: "form-label" }, [
                    vue.createElementVNode("text", null, "结束时间"),
                    vue.createElementVNode("text", { class: "required" }, "*")
                  ]),
                  vue.createElementVNode("view", { class: "time-grid" }, [
                    vue.createElementVNode("view", { class: "time-column" }, [
                      vue.createElementVNode("text", { class: "time-label" }, "日期"),
                      vue.createElementVNode("picker", {
                        mode: "date",
                        value: $setup.stageForm.endDate,
                        onChange: _cache[16] || (_cache[16] = (e) => $setup.stageForm.endDate = e.detail.value),
                        class: "date-picker"
                      }, [
                        vue.createElementVNode("view", { class: "picker-view" }, [
                          $setup.stageForm.endDate ? (vue.openBlock(), vue.createElementBlock(
                            "text",
                            { key: 0 },
                            vue.toDisplayString($setup.stageForm.endDate),
                            1
                            /* TEXT */
                          )) : (vue.openBlock(), vue.createElementBlock("text", {
                            key: 1,
                            class: "placeholder-text"
                          }, "选择日期"))
                        ])
                      ], 40, ["value"])
                    ]),
                    vue.createElementVNode("view", { class: "time-column" }, [
                      vue.createElementVNode("text", { class: "time-label" }, "时间"),
                      vue.createElementVNode("picker", {
                        mode: "time",
                        value: $setup.stageForm.endTime,
                        onChange: _cache[17] || (_cache[17] = (e) => $setup.stageForm.endTime = e.detail.value),
                        class: "date-picker"
                      }, [
                        vue.createElementVNode("view", { class: "picker-view" }, [
                          $setup.stageForm.endTime ? (vue.openBlock(), vue.createElementBlock(
                            "text",
                            { key: 0 },
                            vue.toDisplayString($setup.stageForm.endTime),
                            1
                            /* TEXT */
                          )) : (vue.openBlock(), vue.createElementBlock("text", {
                            key: 1,
                            class: "placeholder-text"
                          }, "选择时间"))
                        ])
                      ], 40, ["value"])
                    ])
                  ])
                ]),
                vue.createElementVNode("view", { class: "form-item" }, [
                  vue.createElementVNode("view", { class: "form-label" }, [
                    vue.createElementVNode("text", null, "阶段描述"),
                    vue.createElementVNode("text", { class: "required" }, "*")
                  ]),
                  vue.withDirectives(vue.createElementVNode(
                    "textarea",
                    {
                      "onUpdate:modelValue": _cache[18] || (_cache[18] = ($event) => $setup.stageForm.description = $event),
                      placeholder: "请简要描述该阶段的任务、要求等",
                      class: "form-textarea",
                      maxlength: "500"
                    },
                    null,
                    512
                    /* NEED_PATCH */
                  ), [
                    [vue.vModelText, $setup.stageForm.description]
                  ])
                ]),
                vue.createElementVNode("view", { class: "form-item" }, [
                  vue.createElementVNode("view", { class: "form-label" }, [
                    vue.createElementVNode("text", null, "比赛地点")
                  ]),
                  vue.createVNode(_component_uni_easyinput, {
                    type: "text",
                    modelValue: $setup.stageForm.location,
                    "onUpdate:modelValue": _cache[19] || (_cache[19] = ($event) => $setup.stageForm.location = $event),
                    placeholder: "如：线上、学校大礼堂等",
                    clearable: false
                  }, null, 8, ["modelValue"])
                ])
              ])
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      ),
      vue.createCommentVNode(" 底部操作按钮 "),
      vue.withDirectives(vue.createElementVNode(
        "view",
        { class: "action-bar" },
        [
          vue.createElementVNode("view", { class: "action-grid" }, [
            $setup.currentStep > 0 ? (vue.openBlock(), vue.createElementBlock("button", {
              key: 0,
              class: "prev-button",
              onClick: $setup.prevStep
            }, "上一步")) : vue.createCommentVNode("v-if", true),
            $setup.currentStep === 3 ? (vue.openBlock(), vue.createElementBlock("button", {
              key: 1,
              class: "draft-button",
              onClick: $setup.saveDraft
            }, "保存草稿")) : vue.createCommentVNode("v-if", true),
            $setup.currentStep < 3 ? (vue.openBlock(), vue.createElementBlock("button", {
              key: 2,
              class: "next-button",
              onClick: $setup.nextStep
            }, "下一步")) : vue.createCommentVNode("v-if", true),
            $setup.currentStep === 3 ? (vue.openBlock(), vue.createElementBlock("button", {
              key: 3,
              class: "publish-button",
              onClick: $setup.publishCompetition
            }, [
              vue.createElementVNode("text", { class: "iconfont icon-send" }),
              vue.createElementVNode("text", null, "发布竞赛")
            ])) : vue.createCommentVNode("v-if", true)
          ])
        ],
        512
        /* NEED_PATCH */
      ), [
        [vue.vShow, !$setup.isPopupOpen]
      ])
    ]);
  }
  const PagesCompetitionCreate = /* @__PURE__ */ _export_sfc(_sfc_main$k, [["render", _sfc_render$j], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/competition/create.vue"]]);
  const _sfc_main$j = {
    __name: "detail",
    setup(__props, { expose: __expose }) {
      __expose();
      const competitionId = vue.ref(null);
      const loading = vue.ref(false);
      const currentTab = vue.ref("details");
      const competition = vue.ref({
        id: null,
        title: "",
        category: "",
        level: "国家级",
        status: "",
        // 可能的值: '未开始', '报名中', '进行中', '已截止'
        statusCode: "",
        // 状态码: "0"=未开始, "1"=报名中, "2"=进行中, "3"=已截止
        image: "",
        registrationPeriod: "",
        registrationStart: "",
        registrationDeadline: "",
        competitionPeriod: "",
        location: "线上初赛 + 线下决赛",
        teamRequirement: "",
        description: "",
        shortDescription: "",
        requirements: "",
        organizer: {
          name: "",
          description: "",
          logo: ""
        },
        contactInfo: {
          phone: "",
          email: ""
        },
        teamSize: 0,
        teamMax: 0,
        websiteUrl: "",
        viewCount: 0,
        attachments: [],
        categoryNames: [],
        coverImageUrl: ""
      });
      const documentAttachments = vue.ref([]);
      const isDownloading = vue.ref(false);
      const downloadingFileId = vue.ref(null);
      const competitionStages = vue.ref([]);
      const relatedCompetitions = vue.ref([
        {
          title: "挑战杯创业计划大赛",
          image: "https://images.unsplash.com/photo-1523240795612-9a054b0db644?w=500",
          deadline: "6月10日"
        },
        {
          title: "创青春创业大赛",
          image: "https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=500",
          deadline: "7月5日"
        }
      ]);
      const teams = vue.ref([]);
      const teamsLoading = vue.ref(false);
      const teamsCurrentPage = vue.ref(1);
      const teamsPageSize = vue.ref(10);
      const teamsHasMore = vue.ref(true);
      const searchText = vue.ref("");
      const statusFilter = vue.ref("all");
      const showFilterPanel = vue.ref(false);
      const isFavorite = vue.ref(false);
      const selectedStageId = vue.ref("all");
      const competitionResults = vue.ref([]);
      const filteredResults = vue.computed(() => {
        if (selectedStageId.value === "all") {
          return competitionResults.value;
        }
        return competitionResults.value.filter((result) => result.stageId == selectedStageId.value);
      });
      const filteredTeams = vue.computed(() => {
        if (!teams.value || teams.value.length === 0)
          return [];
        let result = [...teams.value];
        if (searchText.value.trim()) {
          const searchLower = searchText.value.toLowerCase();
          result = result.filter(
            (team) => team.name.toLowerCase().includes(searchLower) || team.description && team.description.toLowerCase().includes(searchLower)
          );
        }
        if (statusFilter.value === "recruiting") {
          result = result.filter((team) => team.status === "0");
        } else if (statusFilter.value === "full") {
          result = result.filter((team) => team.status === "1");
        }
        return result;
      });
      async function getCompetitionDetail(id) {
        loading.value = true;
        try {
          const res = await api.competitions.getCompetitionDetail(id);
          if (res && res.code === 200 && res.data) {
            const data = res.data;
            competition.value = {
              ...competition.value,
              id: data.id,
              title: data.title,
              category: data.categoryNames,
              level: data.level || "国家级",
              status: getStatusText(data.status),
              statusCode: data.status,
              image: data.coverImageUrl || "https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?w=800",
              registrationStart: data.registrationStart,
              registrationDeadline: data.registrationDeadline,
              registrationPeriod: formatDatePeriod(data.registrationStart, data.registrationDeadline),
              description: data.description || data.shortDescription || "",
              shortDescription: data.shortDescription || "",
              requirements: data.requirements || "",
              teamRequirement: `${data.teamSize}~${data.teamMax}人/队`,
              teamSize: data.teamSize,
              teamMax: data.teamMax,
              organizer: {
                name: data.organizer || "未知主办方",
                description: "",
                logo: ""
              },
              contactInfo: data.contactInfo || {
                phone: "暂无联系方式",
                email: ""
              },
              websiteUrl: data.websiteUrl || "",
              viewCount: data.viewCount || 0,
              attachments: data.attachments || [],
              categoryNames: data.categoryNames || [],
              coverImageUrl: data.coverImageUrl || ""
            };
            getCompetitionDocuments(data.id);
            getCompetitionStages(data.id);
            getCompetitionResults(data.id);
            formatAppLog("log", "at pages/competition/detail.vue:594", "竞赛详情数据:", competition.value);
          } else {
            uni.showToast({
              title: "获取竞赛详情失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/competition/detail.vue:602", "获取竞赛详情错误:", error);
          uni.showToast({
            title: "获取竞赛详情失败",
            icon: "none"
          });
        } finally {
          loading.value = false;
        }
      }
      async function getCompetitionDocuments(competitionId2) {
        try {
          const res = await api.competitions.getCompetitionAttachmentsByType(competitionId2, "document");
          if (res && res.code === 200 && res.data) {
            documentAttachments.value = res.data.documents || [];
            formatAppLog("log", "at pages/competition/detail.vue:618", "竞赛文档附件:", documentAttachments.value);
          } else {
            formatAppLog("warn", "at pages/competition/detail.vue:620", "获取竞赛附件失败或无数据:", res);
          }
        } catch (error) {
          formatAppLog("error", "at pages/competition/detail.vue:623", "获取竞赛附件错误:", error);
        }
      }
      function downloadAttachment(attachment) {
        if (!attachment || !attachment.url) {
          uni.showToast({
            title: "下载链接不存在",
            icon: "none"
          });
          return;
        }
        isDownloading.value = true;
        downloadingFileId.value = attachment.fileId;
        if (uni.getSystemInfoSync().platform === "mp-weixin" || uni.getSystemInfoSync().platform === "mp-alipay" || uni.getSystemInfoSync().platform === "mp-baidu") {
          uni.showLoading({
            title: "下载中..."
          });
          uni.downloadFile({
            url: attachment.url,
            success: (res) => {
              if (res.statusCode === 200) {
                uni.saveFile({
                  tempFilePath: res.tempFilePath,
                  success: (saveRes) => {
                    uni.hideLoading();
                    uni.showToast({
                      title: "下载成功",
                      icon: "success"
                    });
                    uni.openDocument({
                      filePath: saveRes.savedFilePath,
                      success: () => {
                        formatAppLog("log", "at pages/competition/detail.vue:667", "打开文件成功");
                      },
                      fail: (err) => {
                        formatAppLog("error", "at pages/competition/detail.vue:670", "打开文件失败:", err);
                        uni.showToast({
                          title: "无法打开此类型文件",
                          icon: "none"
                        });
                      }
                    });
                  },
                  fail: (err) => {
                    formatAppLog("error", "at pages/competition/detail.vue:679", "保存文件失败:", err);
                    uni.hideLoading();
                    uni.showToast({
                      title: "保存文件失败",
                      icon: "none"
                    });
                  }
                });
              } else {
                uni.hideLoading();
                uni.showToast({
                  title: "下载失败",
                  icon: "none"
                });
              }
            },
            fail: (err) => {
              formatAppLog("error", "at pages/competition/detail.vue:696", "下载文件失败:", err);
              uni.hideLoading();
              uni.showToast({
                title: "下载失败",
                icon: "none"
              });
            },
            complete: () => {
              isDownloading.value = false;
              downloadingFileId.value = null;
            }
          });
        } else {
          window.open(attachment.url, "_blank");
          setTimeout(() => {
            isDownloading.value = false;
            downloadingFileId.value = null;
          }, 1e3);
        }
      }
      function formatFileSize(size) {
        if (!size)
          return "未知大小";
        const units = ["B", "KB", "MB", "GB", "TB"];
        let formattedSize = size;
        let unitIndex = 0;
        while (formattedSize >= 1024 && unitIndex < units.length - 1) {
          formattedSize /= 1024;
          unitIndex++;
        }
        return `${formattedSize.toFixed(2)} ${units[unitIndex]}`;
      }
      async function getCompetitionStages(competitionId2) {
        try {
          const res = await api.competitions.getCompetitionStages(competitionId2);
          if (res && res.code === 200 && res.data) {
            const stagesData = res.data.map((stage) => {
              let location = "";
              if (stage.metadata) {
                try {
                  const metadata = JSON.parse(stage.metadata);
                  location = metadata.location || "";
                } catch (e) {
                  formatAppLog("error", "at pages/competition/detail.vue:751", "解析元数据失败:", e);
                }
              }
              let active = false;
              let statusText = "";
              switch (stage.status) {
                case "pending":
                  statusText = "未开始";
                  active = false;
                  break;
                case "ongoing":
                case "active":
                  statusText = "进行中";
                  active = true;
                  break;
                case "completed":
                  statusText = "已结束";
                  active = false;
                  break;
                default:
                  statusText = "未知状态";
                  active = false;
              }
              return {
                id: stage.id,
                title: stage.stageName,
                period: formatDatePeriod(stage.startTime, stage.endTime),
                description: stage.description,
                status: statusText,
                active,
                location,
                rawData: stage
              };
            });
            stagesData.sort((a, b) => {
              const aTime = new Date(a.rawData.startTime).getTime();
              const bTime = new Date(b.rawData.startTime).getTime();
              return aTime - bTime;
            });
            competitionStages.value = stagesData;
            formatAppLog("log", "at pages/competition/detail.vue:798", "竞赛阶段数据:", competitionStages.value);
          } else {
            formatAppLog("warn", "at pages/competition/detail.vue:800", "获取竞赛阶段失败或无数据:", res);
          }
        } catch (error) {
          formatAppLog("error", "at pages/competition/detail.vue:803", "获取竞赛阶段错误:", error);
        }
      }
      function getStatusText(status) {
        switch (status) {
          case "0":
            return "未开始";
          case "1":
            return "报名中";
          case "2":
            return "进行中";
          case "3":
            return "已截止";
          default:
            return "未知状态";
        }
      }
      function formatDatePeriod(startDate, endDate) {
        if (!startDate || !endDate)
          return "";
        const formatDate2 = (dateString) => {
          const date = new Date(dateString);
          return `${date.getFullYear()}年${date.getMonth() + 1}月${date.getDate()}日`;
        };
        return `${formatDate2(startDate)} - ${formatDate2(endDate)}`;
      }
      async function getCompetitionTeams(refresh = true) {
        if (refresh) {
          teamsCurrentPage.value = 1;
          teams.value = [];
        }
        if (!teamsHasMore.value && !refresh)
          return;
        teamsLoading.value = true;
        try {
          const res = await api.team.getTeamList({
            pageNum: teamsCurrentPage.value,
            pageSize: teamsPageSize.value,
            competitionId: competitionId.value
          });
          if (res.code === 200 && res.data) {
            const teamList = res.data.list || [];
            const processedTeams = teamList.map((team) => {
              let avatars = [];
              if (team.teamMemberAvatars) {
                if (typeof team.teamMemberAvatars === "string") {
                  avatars = team.teamMemberAvatars.split(",").filter((avatar) => avatar);
                } else if (Array.isArray(team.teamMemberAvatars)) {
                  avatars = team.teamMemberAvatars.filter((avatar) => avatar);
                }
              } else if (team.teamMembers && Array.isArray(team.teamMembers)) {
                avatars = team.teamMembers.slice(0, 3);
              }
              let statusColor = "#6B7280";
              if (team.status === "0" || team.statusText === "招募中") {
                statusColor = "#2563EB";
              } else if (team.status === "1" || team.statusText === "进行中") {
                statusColor = "#10B981";
              } else if (team.status === "2" || team.statusText === "已完成") {
                statusColor = "#059669";
              }
              const memberCount = team.memberCount || team.currentMemberCount || 0;
              const maxMemberCount = team.maxMemberCount || 0;
              const remainingCount = Math.max(0, maxMemberCount - memberCount);
              const facultyColor = getRandomColor(team.faculty || team.direction || "");
              let roles = [];
              if (team.roles && team.roles.length > 0) {
                roles = team.roles.map((role) => ({
                  id: role.id || 0,
                  name: role.name || "未知角色",
                  description: role.description || "",
                  currentCount: role.currentCount || 0,
                  requiredCount: role.requiredCount || 1,
                  isFilled: (role.currentCount || 0) >= (role.requiredCount || 1)
                }));
              }
              return {
                ...team,
                avatars: avatars.slice(0, 3),
                // 最多显示3个头像
                statusColor,
                memberCount,
                remainingCount,
                actionText: team.status === "0" ? "申请加入" : "查看详情",
                facultyColor,
                faculty: team.direction || "未知方向",
                // 使用研究方向作为院系显示
                roles
              };
            });
            if (refresh) {
              teams.value = processedTeams;
            } else {
              teams.value = [...teams.value, ...processedTeams];
            }
            teamsHasMore.value = res.data.hasNext || false;
            if (teams.value.length === 0 && !refresh) {
              uni.showToast({
                title: "没有更多团队了",
                icon: "none"
              });
            }
          } else {
            if (refresh) {
              uni.showToast({
                title: "暂无参赛队伍",
                icon: "none"
              });
            }
          }
        } catch (error) {
          formatAppLog("error", "at pages/competition/detail.vue:935", "获取竞赛队伍列表失败:", error);
          uni.showToast({
            title: "获取队伍列表失败",
            icon: "none"
          });
        } finally {
          teamsLoading.value = false;
        }
      }
      function getRandomColor(str) {
        const colors = [
          "#2563EB",
          // 蓝色
          "#10B981",
          // 绿色
          "#7B5CF6",
          // 紫色
          "#EC4899",
          // 粉色
          "#F59E0B",
          // 橙色
          "#EF4444"
          // 红色
        ];
        let hash = 0;
        if (str.length === 0)
          return colors[0];
        for (let i = 0; i < str.length; i++) {
          hash = str.charCodeAt(i) + ((hash << 5) - hash);
          hash = hash & hash;
        }
        hash = Math.abs(hash) % colors.length;
        return colors[hash];
      }
      function loadMoreTeams() {
        if (teamsLoading.value || !teamsHasMore.value)
          return;
        teamsCurrentPage.value++;
        getCompetitionTeams(false);
      }
      function switchTab(tab) {
        currentTab.value = tab;
        if (tab === "teams" && teams.value.length === 0) {
          getCompetitionTeams();
        }
        if (tab === "results" && competitionResults.value.length === 0) {
          getCompetitionResults(competitionId.value);
        }
      }
      function viewTeamDetail(teamId) {
        uni.navigateTo({
          url: `/pages/team/detail?id=${teamId}`
        });
      }
      vue.onMounted(() => {
        const pages = getCurrentPages();
        const page = pages[pages.length - 1];
        if (page.$page && page.$page.options) {
          competitionId.value = page.$page.options.id;
          if (competitionId.value) {
            getCompetitionDetail(competitionId.value).finally(() => {
              uni.hideLoading();
            });
          } else {
            uni.hideLoading();
            uni.showToast({
              title: "竞赛ID不存在",
              icon: "none"
            });
          }
        } else {
          uni.hideLoading();
        }
      });
      function getTagClass(category) {
        switch (category) {
          case "程序设计":
            return "tag-blue";
          case "数学建模":
            return "tag-purple";
          case "电子设计":
            return "tag-cyan";
          case "机器人":
            return "tag-teal";
          case "创新创业":
            return "tag-orange";
          case "商业挑战":
            return "tag-amber";
          case "艺术设计":
            return "tag-pink";
          case "体育竞技":
            return "tag-green";
          case "学术科研":
            return "tag-indigo";
          case "其他":
            return "tag-gray";
          default:
            return "tag-gray";
        }
      }
      function getStatusBadgeClass(status) {
        switch (status) {
          case "未开始":
            return "status-badge bg-gray-500";
          case "报名中":
            return "status-badge bg-green-500";
          case "进行中":
            return "status-badge bg-blue-500";
          case "已截止":
            return "status-badge bg-gray-500";
          default:
            return "status-badge bg-gray-500";
        }
      }
      function getActionButtonText() {
        switch (competition.value.status) {
          case "未开始":
            return "提醒我";
          case "报名中":
            return "寻找队伍";
          case "进行中":
            return "查看队伍";
          case "已截止":
            return "查看结果";
          default:
            return "了解详情";
        }
      }
      function getRegistrationDeadline() {
        if (competition.value.registrationDeadline) {
          const date = new Date(competition.value.registrationDeadline);
          return `${date.getFullYear()}年${date.getMonth() + 1}月${date.getDate()}日`;
        }
        if (competition.value.registrationPeriod) {
          const periodParts = competition.value.registrationPeriod.split(" - ");
          return periodParts.length > 1 ? periodParts[1] : competition.value.registrationPeriod;
        }
        return "暂无截止日期";
      }
      function goBack() {
        uni.navigateBack();
      }
      function clearSearch() {
        searchText.value = "";
      }
      function toggleFilter() {
        showFilterPanel.value = !showFilterPanel.value;
      }
      function applyFilter(status) {
        statusFilter.value = status;
        showFilterPanel.value = false;
      }
      function clearFilter() {
        statusFilter.value = "all";
        showFilterPanel.value = false;
      }
      function createTeam() {
        uni.navigateTo({
          url: `/pages/team/create?competitionId=${competition.value.id}&competitionName=${encodeURIComponent(competition.value.title)}`
        });
      }
      function handleActionButton() {
        const buttonText = getActionButtonText();
        switch (buttonText) {
          case "寻找队伍":
          case "查看队伍":
            currentTab.value = "teams";
            if (teams.value.length === 0) {
              getCompetitionTeams();
            }
            uni.pageScrollTo({
              selector: ".tab-active",
              duration: 300
            });
            break;
          case "提醒我":
            uni.showToast({
              title: "已设置提醒",
              icon: "success"
            });
            break;
          case "查看结果":
            uni.showToast({
              title: "比赛结果即将公布",
              icon: "none"
            });
            break;
          default:
            uni.showToast({
              title: "功能开发中",
              icon: "none"
            });
        }
      }
      function toggleFavorite() {
        isFavorite.value = !isFavorite.value;
        if (isFavorite.value) {
          uni.showToast({
            title: "收藏成功",
            icon: "success",
            duration: 2e3
          });
        } else {
          uni.showToast({
            title: "已取消收藏",
            icon: "none",
            duration: 2e3
          });
        }
      }
      function shareCompetition() {
        uni.showToast({
          title: "分享功能开发中",
          icon: "none",
          duration: 2e3
        });
      }
      async function getCompetitionResults(competitionId2) {
        try {
          formatAppLog("log", "at pages/competition/detail.vue:1203", "开始获取比赛结果数据，竞赛ID:", competitionId2);
          const res = await api.competitionResults.getCompetitionResults(competitionId2);
          formatAppLog("log", "at pages/competition/detail.vue:1205", "获取到比赛结果响应:", res);
          if (res && res.code === 200 && res.data) {
            const resultsData = Array.isArray(res.data) ? res.data : [res.data];
            formatAppLog("log", "at pages/competition/detail.vue:1210", "处理比赛结果数据:", resultsData);
            const processedResults = await Promise.all(resultsData.map(async (result) => {
              let awardDetails = {};
              let metadata = {};
              try {
                if (result.awardDetails) {
                  awardDetails = typeof result.awardDetails === "string" ? JSON.parse(result.awardDetails) : result.awardDetails;
                }
                if (result.metadata) {
                  metadata = typeof result.metadata === "string" ? JSON.parse(result.metadata) : result.metadata;
                }
              } catch (e) {
                formatAppLog("error", "at pages/competition/detail.vue:1231", "解析JSON数据失败:", e);
              }
              let teamName = "未知队伍";
              let teamLogo = "";
              let teamMembers = 0;
              let memberAvatars = [];
              try {
                formatAppLog("log", "at pages/competition/detail.vue:1242", "开始获取队伍信息，队伍ID:", result.teamId);
                const teamRes = await api.competitionResults.getTeamDetail(result.teamId);
                formatAppLog("log", "at pages/competition/detail.vue:1244", "获取到队伍响应:", teamRes);
                if (teamRes && teamRes.code === 200 && teamRes.data) {
                  teamName = teamRes.data.name || "未知队伍";
                  teamLogo = teamRes.data.logo || "";
                  if (teamRes.data.roles && Array.isArray(teamRes.data.roles)) {
                    teamMembers = teamRes.data.roles.reduce((total, role) => {
                      return total + (role.currentCount || 0);
                    }, 0);
                    teamMembers += 1;
                    formatAppLog("log", "at pages/competition/detail.vue:1261", "从roles计算的团队成员数量(包含队长):", teamMembers);
                  } else if (teamRes.data.memberCount !== void 0 && teamRes.data.memberCount !== null) {
                    teamMembers = teamRes.data.memberCount;
                    if (teamRes.data.leaderId && !teamRes.data.isLeaderCountedInMemberCount) {
                      teamMembers += 1;
                    }
                  } else if (teamRes.data.currentMemberCount !== void 0 && teamRes.data.currentMemberCount !== null) {
                    teamMembers = teamRes.data.currentMemberCount;
                    if (teamRes.data.leaderId && !teamRes.data.isLeaderCountedInCurrentMemberCount) {
                      teamMembers += 1;
                    }
                  } else if (teamRes.data.teamMembers && Array.isArray(teamRes.data.teamMembers)) {
                    teamMembers = teamRes.data.teamMembers.length;
                  } else if (teamRes.data.members && Array.isArray(teamRes.data.members)) {
                    teamMembers = teamRes.data.members.length;
                  } else {
                    teamMembers = 1;
                  }
                  try {
                    const membersRes = await api.competitionResults.getTeamMembers(result.teamId);
                    formatAppLog("log", "at pages/competition/detail.vue:1286", "获取团队成员响应:", membersRes);
                    if (membersRes && membersRes.code === 200 && membersRes.data) {
                      const members = membersRes.data;
                      if (Array.isArray(members)) {
                        teamMembers = members.length;
                        members.forEach((member) => {
                          if (member.userAvatarUrl) {
                            memberAvatars.push(member.userAvatarUrl);
                          } else if (member.avatarUrl) {
                            memberAvatars.push(member.avatarUrl);
                          }
                        });
                        const leaderMember = members.find((m) => m.isLeader === true);
                        if (leaderMember && leaderMember.userAvatarUrl) {
                          memberAvatars = memberAvatars.filter((avatar) => avatar !== leaderMember.userAvatarUrl);
                          memberAvatars.unshift(leaderMember.userAvatarUrl);
                        }
                        formatAppLog("log", "at pages/competition/detail.vue:1314", "从团队成员接口获取的头像:", memberAvatars);
                      }
                    }
                  } catch (memberError) {
                    formatAppLog("error", "at pages/competition/detail.vue:1318", "获取团队成员失败:", memberError);
                  }
                  if (memberAvatars.length === 0) {
                    formatAppLog("log", "at pages/competition/detail.vue:1323", "检查队伍详情数据结构:", teamRes.data);
                    if (teamRes.data.data && Array.isArray(teamRes.data.data)) {
                      const memberData = teamRes.data.data;
                      formatAppLog("log", "at pages/competition/detail.vue:1328", "发现队员data数组:", memberData);
                      memberData.forEach((member) => {
                        if (member.avatar) {
                          memberAvatars.push(member.avatar);
                        } else if (member.avatarUrl) {
                          memberAvatars.push(member.avatarUrl);
                        } else if (member.userAvatar) {
                          memberAvatars.push(member.userAvatar);
                        }
                      });
                      formatAppLog("log", "at pages/competition/detail.vue:1341", "从data数组提取的队员头像:", memberAvatars);
                    }
                    if (teamRes.data.memberAvatars) {
                      if (typeof teamRes.data.memberAvatars === "string") {
                        const avatarsFromString = teamRes.data.memberAvatars.split(",").filter((url) => url && url.trim());
                        memberAvatars = [...memberAvatars, ...avatarsFromString];
                      } else if (Array.isArray(teamRes.data.memberAvatars)) {
                        memberAvatars = [...memberAvatars, ...teamRes.data.memberAvatars.filter((url) => url)];
                      }
                    } else if (teamRes.data.teamMemberAvatars) {
                      if (typeof teamRes.data.teamMemberAvatars === "string") {
                        const avatarsFromString = teamRes.data.teamMemberAvatars.split(",").filter((url) => url && url.trim());
                        memberAvatars = [...memberAvatars, ...avatarsFromString];
                      } else if (Array.isArray(teamRes.data.teamMemberAvatars)) {
                        memberAvatars = [...memberAvatars, ...teamRes.data.teamMemberAvatars.filter((url) => url)];
                      }
                    } else if (teamRes.data.members && Array.isArray(teamRes.data.members)) {
                      const avatarsFromMembers = teamRes.data.members.filter((member) => member && member.avatarUrl).map((member) => member.avatarUrl);
                      memberAvatars = [...memberAvatars, ...avatarsFromMembers];
                    }
                    if (teamRes.data.leaderAvatarUrl) {
                      memberAvatars = memberAvatars.filter((avatar) => avatar !== teamRes.data.leaderAvatarUrl);
                      memberAvatars.unshift(teamRes.data.leaderAvatarUrl);
                    }
                  }
                  memberAvatars = [...new Set(memberAvatars)].filter(Boolean);
                  formatAppLog("log", "at pages/competition/detail.vue:1380", "最终处理后的成员头像列表:", memberAvatars);
                }
              } catch (e) {
                formatAppLog("error", "at pages/competition/detail.vue:1383", "获取队伍信息失败:", e);
              }
              return {
                ...result,
                awardDetails,
                metadata,
                teamName,
                teamLogo,
                teamMembers,
                memberAvatars,
                memberCount: teamMembers,
                // 添加memberCount字段用于显示
                formattedDate: formatDate(result.announcedAt)
              };
            }));
            competitionResults.value = processedResults;
            formatAppLog("log", "at pages/competition/detail.vue:1400", "最终处理的比赛结果数据:", competitionResults.value);
            if (competitionResults.value.length === 0) {
              uni.showToast({
                title: "暂无比赛结果数据",
                icon: "none"
              });
            }
          } else {
            formatAppLog("warn", "at pages/competition/detail.vue:1410", "获取比赛结果失败或无数据:", res);
            uni.showToast({
              title: "暂无比赛结果",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/competition/detail.vue:1417", "获取比赛结果错误:", error);
          uni.showToast({
            title: "获取比赛结果失败",
            icon: "none"
          });
        }
      }
      function formatDate(dateString) {
        if (!dateString)
          return "未知时间";
        try {
          const date = new Date(dateString);
          return `${date.getFullYear()}年${date.getMonth() + 1}月${date.getDate()}日`;
        } catch (e) {
          formatAppLog("error", "at pages/competition/detail.vue:1433", "日期格式化失败:", e);
          return "日期格式有误";
        }
      }
      function getStageNameById(stageId) {
        const stage = competitionStages.value.find((s) => s.id == stageId);
        return stage ? stage.title : "未知阶段";
      }
      function getAwardClass(awardType) {
        switch (awardType) {
          case "金奖":
            return "gold-award";
          case "银奖":
            return "silver-award";
          case "铜奖":
            return "bronze-award";
          case "特等奖":
            return "special-award";
          case "一等奖":
            return "first-award";
          case "二等奖":
            return "second-award";
          case "三等奖":
            return "third-award";
          case "优秀奖":
            return "excellent-award";
          default:
            return "";
        }
      }
      function filterResultsByStage(stageId) {
        selectedStageId.value = stageId;
      }
      const __returned__ = { competitionId, loading, currentTab, competition, documentAttachments, isDownloading, downloadingFileId, competitionStages, relatedCompetitions, teams, teamsLoading, teamsCurrentPage, teamsPageSize, teamsHasMore, searchText, statusFilter, showFilterPanel, isFavorite, selectedStageId, competitionResults, filteredResults, filteredTeams, getCompetitionDetail, getCompetitionDocuments, downloadAttachment, formatFileSize, getCompetitionStages, getStatusText, formatDatePeriod, getCompetitionTeams, getRandomColor, loadMoreTeams, switchTab, viewTeamDetail, getTagClass, getStatusBadgeClass, getActionButtonText, getRegistrationDeadline, goBack, clearSearch, toggleFilter, applyFilter, clearFilter, createTeam, handleActionButton, toggleFavorite, shareCompetition, getCompetitionResults, formatDate, getStageNameById, getAwardClass, filterResultsByStage, ref: vue.ref, onMounted: vue.onMounted, computed: vue.computed, get api() {
        return api;
      }, get icons() {
        return icons;
      }, SvgIcon };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$i(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 加载中状态 "),
      $setup.loading ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 0,
        class: "loading-container"
      }, [
        vue.createElementVNode("view", { class: "spinner" }),
        vue.createElementVNode("text", { class: "loading-text" }, "加载中...")
      ])) : (vue.openBlock(), vue.createElementBlock(
        vue.Fragment,
        { key: 1 },
        [
          vue.createCommentVNode(" 顶部导航栏 "),
          vue.createElementVNode("view", { class: "sticky-header" }, [
            vue.createElementVNode("view", { class: "flex-row px-4 py-3" }, [
              vue.createElementVNode("view", {
                class: "back-btn",
                onClick: $setup.goBack
              }, [
                vue.createVNode($setup["SvgIcon"], {
                  name: "back",
                  class: "icon-btn"
                })
              ]),
              vue.createElementVNode("text", { class: "text-xl font-bold text-gray-800" }, "竞赛详情"),
              vue.createElementVNode("view", { class: "ml-auto flex-row space-x-3" }, [
                vue.createElementVNode("view", {
                  class: "icon-circle",
                  onClick: $setup.toggleFavorite
                }, [
                  vue.createVNode($setup["SvgIcon"], {
                    name: $setup.isFavorite ? "souchang" : "weishouchang",
                    class: "icon-btn"
                  }, null, 8, ["name"])
                ]),
                vue.createElementVNode("view", {
                  class: "icon-circle",
                  onClick: $setup.shareCompetition
                }, [
                  vue.createVNode($setup["SvgIcon"], {
                    name: "fenxiang",
                    class: "icon-btn"
                  })
                ])
              ])
            ])
          ]),
          vue.createCommentVNode(" 竞赛封面 "),
          vue.createElementVNode("view", { class: "relative" }, [
            vue.createElementVNode("image", {
              class: "cover-image",
              src: $setup.competition.image,
              mode: "aspectFill"
            }, null, 8, ["src"]),
            vue.createElementVNode("view", { class: "cover-overlay" }, [
              vue.createElementVNode(
                "view",
                {
                  class: vue.normalizeClass($setup.getStatusBadgeClass($setup.competition.status))
                },
                vue.toDisplayString($setup.competition.status),
                3
                /* TEXT, CLASS */
              ),
              vue.createElementVNode(
                "text",
                { class: "text-white text-2xl font-bold" },
                vue.toDisplayString($setup.competition.title),
                1
                /* TEXT */
              ),
              vue.createElementVNode("view", { class: "flex-row items-center mt-1 space-x-2" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.competition.categoryNames, (category) => {
                    return vue.openBlock(), vue.createElementBlock(
                      "text",
                      {
                        class: vue.normalizeClass(["category-tag", $setup.getTagClass(category)]),
                        key: category
                      },
                      vue.toDisplayString(category),
                      3
                      /* TEXT, CLASS */
                    );
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ])
          ]),
          vue.createCommentVNode(" 关键信息 "),
          vue.createElementVNode("view", { class: "bg-white p-4 shadow-sm" }, [
            vue.createElementVNode("view", { class: "flex-row justify-between items-center" }, [
              vue.createElementVNode("view", { class: "flex-row items-center space-x-2" }, [
                vue.createVNode($setup["SvgIcon"], {
                  name: "baoming",
                  class: "info-icon"
                }),
                vue.createElementVNode(
                  "text",
                  { class: "text-sm text-gray-700" },
                  "报名截止: " + vue.toDisplayString($setup.getRegistrationDeadline()),
                  1
                  /* TEXT */
                )
              ]),
              vue.createElementVNode("view", { class: "flex-row items-center space-x-2" }, [
                vue.createVNode($setup["SvgIcon"], {
                  name: "Baominrenshu",
                  class: "info-icon"
                }),
                vue.createElementVNode(
                  "text",
                  { class: "text-sm text-gray-700" },
                  vue.toDisplayString($setup.competition.teamRequirement),
                  1
                  /* TEXT */
                )
              ])
            ]),
            vue.createElementVNode("view", { class: "flex-row justify-between mt-3" }, [
              vue.createElementVNode("view", {
                class: "flex-row items-start space-x-2",
                style: { "flex": "1" }
              }, [
                vue.createVNode($setup["SvgIcon"], {
                  name: "Zhubanfang",
                  class: "info-icon",
                  style: { "margin-top": "4rpx" }
                }),
                vue.createElementVNode(
                  "text",
                  {
                    class: "text-sm text-gray-700 wrap-text",
                    style: { "margin-top": "10rpx" }
                  },
                  "主办方: " + vue.toDisplayString($setup.competition.organizer.name),
                  1
                  /* TEXT */
                )
              ]),
              vue.createElementVNode("view", {
                class: "flex-row items-start level-tag",
                style: { "margin-right": "45rpx" }
              }, [
                vue.createVNode($setup["SvgIcon"], {
                  name: "dengji",
                  class: "info-icon",
                  style: { "margin-top": "4rpx" }
                }),
                vue.createElementVNode(
                  "text",
                  {
                    class: "text-sm text-gray-700",
                    style: { "margin-top": "10rpx" }
                  },
                  vue.toDisplayString($setup.competition.level),
                  1
                  /* TEXT */
                )
              ])
            ])
          ]),
          vue.createCommentVNode(" 标签页导航 "),
          vue.createElementVNode("view", { class: "bg-white mt-2 shadow-sm" }, [
            vue.createElementVNode("view", { class: "flex-row border-b" }, [
              vue.createElementVNode(
                "view",
                {
                  class: vue.normalizeClass(["flex-1 py-3 text-center text-sm font-medium", $setup.currentTab === "details" ? "tab-active" : "text-gray-500"]),
                  onClick: _cache[0] || (_cache[0] = ($event) => $setup.switchTab("details"))
                },
                "竞赛详情",
                2
                /* CLASS */
              ),
              vue.createElementVNode(
                "view",
                {
                  class: vue.normalizeClass(["flex-1 py-3 text-center text-sm font-medium", $setup.currentTab === "schedule" ? "tab-active" : "text-gray-500"]),
                  onClick: _cache[1] || (_cache[1] = ($event) => $setup.switchTab("schedule"))
                },
                "赛程安排",
                2
                /* CLASS */
              ),
              vue.createElementVNode(
                "view",
                {
                  class: vue.normalizeClass(["flex-1 py-3 text-center text-sm font-medium", $setup.currentTab === "results" ? "tab-active" : "text-gray-500"]),
                  onClick: _cache[2] || (_cache[2] = ($event) => $setup.switchTab("results"))
                },
                "比赛结果",
                2
                /* CLASS */
              ),
              vue.createElementVNode(
                "view",
                {
                  class: vue.normalizeClass(["flex-1 py-3 text-center text-sm font-medium", $setup.currentTab === "teams" ? "tab-active" : "text-gray-500"]),
                  onClick: _cache[3] || (_cache[3] = ($event) => $setup.switchTab("teams"))
                },
                "参赛队伍",
                2
                /* CLASS */
              )
            ])
          ]),
          vue.createCommentVNode(" 竞赛详情内容 "),
          $setup.currentTab === "details" ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 0,
            class: "bg-white p-4 mt-2 shadow-sm"
          }, [
            vue.createElementVNode("view", { class: "font-bold text-lg text-gray-800 mb-3" }, "竞赛简介"),
            vue.createElementVNode(
              "text",
              { class: "text-gray-700 text-sm leading-relaxed" },
              vue.toDisplayString($setup.competition.description),
              1
              /* TEXT */
            ),
            $setup.competition.requirements ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "font-bold text-lg text-gray-800 mt-6 mb-3"
            }, "参赛要求")) : vue.createCommentVNode("v-if", true),
            $setup.competition.requirements ? (vue.openBlock(), vue.createElementBlock(
              "text",
              {
                key: 1,
                class: "text-gray-700 text-sm leading-relaxed"
              },
              vue.toDisplayString($setup.competition.requirements),
              1
              /* TEXT */
            )) : (vue.openBlock(), vue.createElementBlock("view", {
              key: 2,
              class: "text-gray-700 text-sm space-y-2 list-disc pl-5 mt-6"
            }, [
              vue.createElementVNode("view", { class: "list-item" }, "参赛项目须为本校在校生，允许跨校组队"),
              vue.createElementVNode(
                "view",
                { class: "list-item" },
                "参赛团队成员" + vue.toDisplayString($setup.competition.teamRequirement),
                1
                /* TEXT */
              ),
              vue.createElementVNode("view", { class: "list-item" }, "参赛项目需具有创新性、可行性和商业价值"),
              vue.createElementVNode("view", { class: "list-item" }, "参赛项目需提交商业计划书和路演PPT"),
              vue.createElementVNode("view", { class: "list-item" }, "参赛项目需在报名截止前完成在线提交")
            ])),
            vue.createElementVNode("view", { class: "font-bold text-lg text-gray-800 mt-6 mb-3" }, "联系方式"),
            vue.createElementVNode("view", { class: "space-y-2 text-sm text-gray-700" }, [
              $setup.competition.contactInfo.phone ? (vue.openBlock(), vue.createElementBlock(
                "text",
                { key: 0 },
                "联系电话：" + vue.toDisplayString($setup.competition.contactInfo.phone),
                1
                /* TEXT */
              )) : (vue.openBlock(), vue.createElementBlock("text", { key: 1 }, "联系人：竞赛组委会")),
              $setup.competition.contactInfo.email ? (vue.openBlock(), vue.createElementBlock(
                "view",
                { key: 2 },
                "邮箱：" + vue.toDisplayString($setup.competition.contactInfo.email),
                1
                /* TEXT */
              )) : vue.createCommentVNode("v-if", true),
              $setup.competition.websiteUrl ? (vue.openBlock(), vue.createElementBlock(
                "view",
                { key: 3 },
                "官网：" + vue.toDisplayString($setup.competition.websiteUrl),
                1
                /* TEXT */
              )) : vue.createCommentVNode("v-if", true)
            ]),
            vue.createCommentVNode(" 附件列表 "),
            $setup.documentAttachments && $setup.documentAttachments.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 3,
              class: "mt-6"
            }, [
              vue.createElementVNode("view", { class: "font-bold text-lg text-gray-800 mb-3" }, "相关资料"),
              $setup.documentAttachments.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "text-gray-500"
              }, "暂无相关资料")) : (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "space-y-3"
              }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.documentAttachments, (attachment, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      key: index,
                      class: "flex-row items-center p-3 bg-gray-50 rounded-lg"
                    }, [
                      vue.createElementVNode("view", { class: "flex-1" }, [
                        vue.createElementVNode(
                          "text",
                          { class: "text-sm text-gray-700 font-medium" },
                          vue.toDisplayString(attachment.originalFilename),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode(
                          "view",
                          { class: "text-xs text-gray-500 mt-1" },
                          vue.toDisplayString($setup.formatFileSize(attachment.size)),
                          1
                          /* TEXT */
                        )
                      ]),
                      vue.createElementVNode("view", {
                        class: "download-btn",
                        onClick: ($event) => $setup.downloadAttachment(attachment)
                      }, [
                        $setup.isDownloading && $setup.downloadingFileId === attachment.fileId ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 0,
                          class: "spinner-mini"
                        })) : (vue.openBlock(), vue.createElementBlock(
                          vue.Fragment,
                          { key: 1 },
                          [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "xiazai",
                              class: "download-icon"
                            }),
                            vue.createElementVNode("text", { class: "text-xs text-white" }, "下载")
                          ],
                          64
                          /* STABLE_FRAGMENT */
                        ))
                      ], 8, ["onClick"])
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ]))
            ])) : vue.createCommentVNode("v-if", true),
            vue.createCommentVNode(" 相关竞赛 - 移动到详情标签页内 "),
            vue.createElementVNode("view", { class: "mt-6" }, [
              vue.createElementVNode("view", { class: "font-bold text-lg text-gray-800 mb-3" }, "相关竞赛"),
              vue.createElementVNode("view", { class: "related-grid" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.relatedCompetitions, (relatedComp, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      key: index,
                      class: "related-card"
                    }, [
                      vue.createElementVNode("view", { class: "related-image-container" }, [
                        vue.createElementVNode("image", {
                          src: relatedComp.image,
                          class: "related-image"
                        }, null, 8, ["src"])
                      ]),
                      vue.createElementVNode("view", { class: "p-3" }, [
                        vue.createElementVNode(
                          "text",
                          { class: "font-bold text-sm text-gray-800" },
                          vue.toDisplayString(relatedComp.title),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode("view", { class: "flex-row items-center mt-1" }, [
                          vue.createElementVNode(
                            "text",
                            { class: "text-xs text-gray-500" },
                            "报名截止: " + vue.toDisplayString(relatedComp.deadline),
                            1
                            /* TEXT */
                          )
                        ])
                      ])
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ])
          ])) : vue.createCommentVNode("v-if", true),
          vue.createCommentVNode(" 赛程安排内容 "),
          $setup.currentTab === "schedule" ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 1,
            class: "bg-white p-4 mt-2 shadow-sm"
          }, [
            vue.createElementVNode("view", { class: "relative" }, [
              vue.createCommentVNode(" 时间轴 "),
              vue.createElementVNode("view", { class: "timeline-line" }),
              vue.createCommentVNode(" 阶段列表 "),
              $setup.competitionStages.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "empty-state"
              }, [
                vue.createElementVNode("text", { class: "text-gray-500" }, "暂无赛程安排")
              ])) : (vue.openBlock(), vue.createElementBlock("view", { key: 1 }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.competitionStages, (stage, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      key: stage.id,
                      class: "timeline-item"
                    }, [
                      vue.createElementVNode("view", { class: "timeline-dot-container" }, [
                        vue.createElementVNode(
                          "view",
                          {
                            class: vue.normalizeClass(["timeline-dot", stage.active ? "active-dot" : ""])
                          },
                          [
                            vue.createElementVNode(
                              "text",
                              { class: "timeline-dot-text" },
                              vue.toDisplayString(index + 1),
                              1
                              /* TEXT */
                            )
                          ],
                          2
                          /* CLASS */
                        )
                      ]),
                      vue.createElementVNode(
                        "view",
                        {
                          class: vue.normalizeClass(["timeline-content", stage.active ? "active-content" : ""])
                        },
                        [
                          vue.createElementVNode("view", { class: "flex-row justify-between items-center mb-2" }, [
                            vue.createElementVNode(
                              "text",
                              {
                                class: vue.normalizeClass(["stage-title", stage.active ? "text-blue-800" : "text-gray-700"])
                              },
                              vue.toDisplayString(stage.title),
                              3
                              /* TEXT, CLASS */
                            ),
                            vue.createElementVNode(
                              "text",
                              {
                                class: vue.normalizeClass(["status-text", stage.active ? "active-status" : "inactive-status"])
                              },
                              vue.toDisplayString(stage.status),
                              3
                              /* TEXT, CLASS */
                            )
                          ]),
                          vue.createElementVNode("view", { class: "stage-period-container" }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "shijian",
                              class: "stage-icon"
                            }),
                            vue.createElementVNode(
                              "text",
                              { class: "stage-period" },
                              vue.toDisplayString(stage.period),
                              1
                              /* TEXT */
                            )
                          ]),
                          vue.createElementVNode("view", { class: "stage-desc-container" }, [
                            vue.createElementVNode(
                              "text",
                              { class: "stage-desc" },
                              vue.toDisplayString(stage.description),
                              1
                              /* TEXT */
                            )
                          ]),
                          stage.location ? (vue.openBlock(), vue.createElementBlock("view", {
                            key: 0,
                            class: "stage-location-container"
                          }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "didian",
                              class: "stage-icon"
                            }),
                            vue.createElementVNode(
                              "text",
                              { class: "stage-location" },
                              vue.toDisplayString(stage.location),
                              1
                              /* TEXT */
                            )
                          ])) : vue.createCommentVNode("v-if", true)
                        ],
                        2
                        /* CLASS */
                      )
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ]))
            ])
          ])) : vue.createCommentVNode("v-if", true),
          vue.createCommentVNode(" 比赛结果内容 "),
          $setup.currentTab === "results" ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 2,
            class: "bg-white p-4 mt-2 shadow-sm"
          }, [
            vue.createCommentVNode(" 阶段选择筛选器 "),
            vue.createElementVNode("view", { class: "mb-4" }, [
              vue.createElementVNode("view", { class: "text-gray-600 text-sm mb-2" }, "比赛阶段"),
              vue.createElementVNode("scroll-view", {
                "scroll-x": "",
                class: "filter-scroll",
                "show-scrollbar": "false"
              }, [
                vue.createElementVNode("view", { class: "stage-filter-container" }, [
                  vue.createElementVNode(
                    "view",
                    {
                      class: vue.normalizeClass(["stage-filter-item", { "active": $setup.selectedStageId === "all" }]),
                      onClick: _cache[4] || (_cache[4] = ($event) => $setup.filterResultsByStage("all"))
                    },
                    " 全部 ",
                    2
                    /* CLASS */
                  ),
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($setup.competitionStages, (stage) => {
                      return vue.openBlock(), vue.createElementBlock("view", {
                        key: stage.id,
                        class: vue.normalizeClass(["stage-filter-item", { "active": $setup.selectedStageId === stage.id }]),
                        onClick: ($event) => $setup.filterResultsByStage(stage.id)
                      }, vue.toDisplayString(stage.title), 11, ["onClick"]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  ))
                ])
              ])
            ]),
            vue.createCommentVNode(" 结果列表 "),
            $setup.competitionResults.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "results-list"
            }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.filteredResults, (result) => {
                  return vue.openBlock(), vue.createElementBlock("view", {
                    key: result.id,
                    class: "result-card"
                  }, [
                    vue.createElementVNode("view", { class: "result-header" }, [
                      vue.createElementVNode("view", { class: "flex-row items-center" }, [
                        vue.createVNode($setup["SvgIcon"], {
                          name: "jiuyuan",
                          size: "30",
                          color: "#000000",
                          style: { "margin-right": "25rpx" }
                        }),
                        vue.createElementVNode("view", { class: "ml-3" }, [
                          vue.createElementVNode(
                            "text",
                            { class: "font-bold text-gray-800" },
                            vue.toDisplayString(result.teamName),
                            1
                            /* TEXT */
                          ),
                          vue.createElementVNode("view", { class: "flex-row items-center mt-1" }, [
                            vue.createElementVNode(
                              "text",
                              { class: "text-xs text-gray-600" },
                              vue.toDisplayString(result.teamMembers || 0) + "人团队",
                              1
                              /* TEXT */
                            )
                          ])
                        ])
                      ]),
                      vue.createElementVNode(
                        "view",
                        {
                          class: vue.normalizeClass(["award-badge", $setup.getAwardClass(result.awardType)])
                        },
                        vue.toDisplayString(result.awardType),
                        3
                        /* TEXT, CLASS */
                      )
                    ]),
                    vue.createCommentVNode(" 添加队员头像行 "),
                    result.memberAvatars && result.memberAvatars.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 0,
                      class: "member-avatars-row"
                    }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList(result.memberAvatars, (avatar, index) => {
                          return vue.openBlock(), vue.createElementBlock("image", {
                            key: index,
                            src: avatar || "/static/images/default-avatar.png",
                            class: "member-avatar"
                          }, null, 8, ["src"]);
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      )),
                      result.memberCount > result.memberAvatars.length ? (vue.openBlock(), vue.createElementBlock(
                        "view",
                        {
                          key: 0,
                          class: "more-members"
                        },
                        " +" + vue.toDisplayString(result.memberCount - result.memberAvatars.length),
                        1
                        /* TEXT */
                      )) : vue.createCommentVNode("v-if", true)
                    ])) : vue.createCommentVNode("v-if", true),
                    vue.createElementVNode("view", { class: "result-content" }, [
                      vue.createElementVNode("view", { class: "result-detail-item" }, [
                        vue.createElementVNode("text", { class: "result-label" }, "比赛阶段:"),
                        vue.createElementVNode(
                          "text",
                          { class: "result-value" },
                          vue.toDisplayString($setup.getStageNameById(result.stageId)),
                          1
                          /* TEXT */
                        )
                      ]),
                      result.announcedAt ? (vue.openBlock(), vue.createElementBlock("view", {
                        key: 0,
                        class: "result-detail-item"
                      }, [
                        vue.createElementVNode("text", { class: "result-label" }, "公布时间:"),
                        vue.createElementVNode(
                          "text",
                          { class: "result-value" },
                          vue.toDisplayString(result.formattedDate),
                          1
                          /* TEXT */
                        )
                      ])) : vue.createCommentVNode("v-if", true),
                      result.awardDetails && result.awardDetails.bonus ? (vue.openBlock(), vue.createElementBlock("view", {
                        key: 1,
                        class: "result-detail-item"
                      }, [
                        vue.createElementVNode("text", { class: "result-label" }, "奖金:"),
                        vue.createElementVNode(
                          "text",
                          { class: "result-value" },
                          vue.toDisplayString(result.awardDetails.bonus) + "元",
                          1
                          /* TEXT */
                        )
                      ])) : vue.createCommentVNode("v-if", true),
                      result.awardDetails && result.awardDetails.certificate ? (vue.openBlock(), vue.createElementBlock("view", {
                        key: 2,
                        class: "result-detail-item"
                      }, [
                        vue.createElementVNode("text", { class: "result-label" }, "证书编号:"),
                        vue.createElementVNode(
                          "text",
                          { class: "result-value" },
                          vue.toDisplayString(result.awardDetails.certificate),
                          1
                          /* TEXT */
                        )
                      ])) : vue.createCommentVNode("v-if", true),
                      result.metadata && result.metadata.sponsor ? (vue.openBlock(), vue.createElementBlock("view", {
                        key: 3,
                        class: "result-detail-item"
                      }, [
                        vue.createElementVNode("text", { class: "result-label" }, "赞助方:"),
                        vue.createElementVNode(
                          "text",
                          { class: "result-value" },
                          vue.toDisplayString(result.metadata.sponsor),
                          1
                          /* TEXT */
                        )
                      ])) : vue.createCommentVNode("v-if", true)
                    ]),
                    vue.createElementVNode("view", { class: "result-footer" }, [
                      vue.createElementVNode(
                        "text",
                        {
                          class: vue.normalizeClass(["status-text", { "text-green-600": result.resultStatus === "announced" }])
                        },
                        vue.toDisplayString(result.resultStatus === "announced" ? "已公布" : "待公布"),
                        3
                        /* TEXT, CLASS */
                      ),
                      vue.createElementVNode("button", {
                        class: "view-team-btn",
                        onClick: vue.withModifiers(($event) => $setup.viewTeamDetail(result.teamId), ["stop"])
                      }, "查看队伍", 8, ["onClick"])
                    ])
                  ]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ])) : (vue.openBlock(), vue.createElementBlock(
              vue.Fragment,
              { key: 1 },
              [
                vue.createCommentVNode(" 空状态 "),
                vue.createElementVNode("view", { class: "empty-state" }, [
                  vue.createElementVNode("text", { class: "text-gray-500" }, "暂无比赛结果")
                ])
              ],
              2112
              /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
            ))
          ])) : vue.createCommentVNode("v-if", true),
          vue.createCommentVNode(" 参赛队伍内容 "),
          $setup.currentTab === "teams" ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 3,
            class: "bg-white p-4 mt-2 shadow-sm"
          }, [
            vue.createCommentVNode(" 搜索和筛选 "),
            vue.createElementVNode("view", { class: "search-filter-container" }, [
              vue.createElementVNode("view", { class: "search-box" }, [
                vue.createVNode($setup["SvgIcon"], {
                  name: "sousuo",
                  size: "20",
                  color: "#000000",
                  style: { "margin-right": "10rpx" }
                }),
                vue.withDirectives(vue.createElementVNode(
                  "input",
                  {
                    type: "text",
                    placeholder: "搜索队伍",
                    class: "search-input",
                    "onUpdate:modelValue": _cache[5] || (_cache[5] = ($event) => $setup.searchText = $event)
                  },
                  null,
                  512
                  /* NEED_PATCH */
                ), [
                  [vue.vModelText, $setup.searchText]
                ]),
                $setup.searchText ? (vue.openBlock(), vue.createElementBlock("text", {
                  key: 0,
                  class: "iconfont icon-close-circle clear-icon",
                  onClick: $setup.clearSearch
                })) : vue.createCommentVNode("v-if", true)
              ]),
              vue.createElementVNode("view", {
                class: "filter-btn",
                onClick: $setup.toggleFilter
              }, [
                vue.createVNode($setup["SvgIcon"], {
                  name: "saixuanx",
                  size: "20",
                  color: "#000000",
                  style: { "margin-right": "10rpx" }
                }),
                vue.createElementVNode("text", { class: "filter-text" }, "筛选")
              ])
            ]),
            vue.createCommentVNode(" 筛选面板 "),
            $setup.showFilterPanel ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "filter-panel"
            }, [
              vue.createElementVNode("view", { class: "filter-panel-header" }, [
                vue.createElementVNode("text", { class: "filter-panel-title" }, "队伍状态筛选"),
                vue.createElementVNode("view", {
                  class: "filter-panel-close",
                  onClick: $setup.toggleFilter
                }, [
                  vue.createVNode($setup["SvgIcon"], {
                    name: "close",
                    size: "18",
                    color: "#666666"
                  })
                ])
              ]),
              vue.createElementVNode("view", { class: "filter-panel-body" }, [
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "active": $setup.statusFilter === "all" }]),
                    onClick: _cache[6] || (_cache[6] = ($event) => $setup.applyFilter("all"))
                  },
                  [
                    vue.createElementVNode("text", null, "全部")
                  ],
                  2
                  /* CLASS */
                ),
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "active": $setup.statusFilter === "recruiting" }]),
                    onClick: _cache[7] || (_cache[7] = ($event) => $setup.applyFilter("recruiting"))
                  },
                  [
                    vue.createElementVNode("text", null, "招募中")
                  ],
                  2
                  /* CLASS */
                ),
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "active": $setup.statusFilter === "full" }]),
                    onClick: _cache[8] || (_cache[8] = ($event) => $setup.applyFilter("full"))
                  },
                  [
                    vue.createElementVNode("text", null, "已组满")
                  ],
                  2
                  /* CLASS */
                )
              ]),
              vue.createElementVNode("view", { class: "filter-panel-footer" }, [
                vue.createElementVNode("view", {
                  class: "filter-btn-reset",
                  onClick: $setup.clearFilter
                }, "重置"),
                vue.createElementVNode("view", {
                  class: "filter-btn-confirm",
                  onClick: $setup.toggleFilter
                }, "确认")
              ])
            ])) : vue.createCommentVNode("v-if", true),
            vue.createCommentVNode(" 队伍列表 "),
            $setup.filteredTeams.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 1,
              class: "space-y-4"
            }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.filteredTeams, (team) => {
                  return vue.openBlock(), vue.createElementBlock("view", {
                    key: team.id,
                    class: "team-card",
                    onClick: ($event) => $setup.viewTeamDetail(team.id)
                  }, [
                    vue.createElementVNode("view", { class: "flex-row justify-between items-start" }, [
                      vue.createElementVNode("view", null, [
                        vue.createElementVNode(
                          "text",
                          { class: "font-bold text-gray-800" },
                          vue.toDisplayString(team.name),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode("view", { class: "flex-row items-center mt-1" }, [
                          vue.createElementVNode(
                            "text",
                            {
                              class: "faculty-tag",
                              style: vue.normalizeStyle({ backgroundColor: team.facultyColor + "20", color: team.facultyColor })
                            },
                            vue.toDisplayString(team.faculty),
                            5
                            /* TEXT, STYLE */
                          ),
                          vue.createElementVNode(
                            "text",
                            { class: "text-xs text-gray-500" },
                            vue.toDisplayString(team.memberCount) + "人团队",
                            1
                            /* TEXT */
                          )
                        ])
                      ]),
                      vue.createElementVNode(
                        "view",
                        {
                          class: "team-status",
                          style: vue.normalizeStyle({ backgroundColor: team.statusColor + "20", color: team.statusColor })
                        },
                        vue.toDisplayString(team.statusText),
                        5
                        /* TEXT, STYLE */
                      )
                    ]),
                    vue.createElementVNode(
                      "text",
                      { class: "text-sm text-gray-600 mt-3" },
                      "项目简介：" + vue.toDisplayString(team.description),
                      1
                      /* TEXT */
                    ),
                    vue.createCommentVNode(" 角色标签 "),
                    team.roles && team.roles.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 0,
                      class: "role-tags mt-3"
                    }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList(team.roles, (role, roleIndex) => {
                          return vue.openBlock(), vue.createElementBlock(
                            "view",
                            {
                              key: roleIndex,
                              class: vue.normalizeClass(["role-tag", role.isFilled ? "role-filled" : "role-recruiting"])
                            },
                            [
                              vue.createElementVNode(
                                "text",
                                { class: "role-name" },
                                vue.toDisplayString(role.name),
                                1
                                /* TEXT */
                              ),
                              vue.createElementVNode(
                                "text",
                                { class: "role-count" },
                                vue.toDisplayString(role.currentCount || 0) + "/" + vue.toDisplayString(role.requiredCount || 1),
                                1
                                /* TEXT */
                              )
                            ],
                            2
                            /* CLASS */
                          );
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ])) : vue.createCommentVNode("v-if", true),
                    vue.createElementVNode("view", { class: "flex-row items-center justify-between mt-3" }, [
                      vue.createElementVNode("view", { class: "flex-row member-avatars" }, [
                        (vue.openBlock(true), vue.createElementBlock(
                          vue.Fragment,
                          null,
                          vue.renderList(team.avatars, (avatar, idx) => {
                            return vue.openBlock(), vue.createElementBlock("image", {
                              key: idx,
                              src: avatar || "/static/images/default-avatar.png",
                              class: "member-avatar"
                            }, null, 8, ["src"]);
                          }),
                          128
                          /* KEYED_FRAGMENT */
                        )),
                        team.remainingCount > 0 ? (vue.openBlock(), vue.createElementBlock(
                          "view",
                          {
                            key: 0,
                            class: "member-avatar-more"
                          },
                          "+" + vue.toDisplayString(team.remainingCount),
                          1
                          /* TEXT */
                        )) : vue.createCommentVNode("v-if", true)
                      ]),
                      vue.createElementVNode(
                        "text",
                        { class: "text-blue-500 text-sm" },
                        vue.toDisplayString(team.actionText),
                        1
                        /* TEXT */
                      )
                    ])
                  ], 8, ["onClick"]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ])) : !$setup.teamsLoading ? (vue.openBlock(), vue.createElementBlock(
              vue.Fragment,
              { key: 2 },
              [
                vue.createCommentVNode(" 空状态 "),
                vue.createElementVNode("view", { class: "empty-state" }, [
                  vue.createElementVNode(
                    "text",
                    { class: "text-gray-500" },
                    vue.toDisplayString($setup.statusFilter !== "all" ? `没有${$setup.statusFilter === "recruiting" ? "招募中" : "已组满"}的队伍` : "暂无参赛队伍"),
                    1
                    /* TEXT */
                  )
                ])
              ],
              2112
              /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
            )) : vue.createCommentVNode("v-if", true),
            vue.createCommentVNode(" 加载状态 "),
            $setup.teamsLoading ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 3,
              class: "loading-state"
            }, [
              vue.createElementVNode("view", { class: "spinner-sm" }),
              vue.createElementVNode("text", { class: "text-sm text-gray-500 ml-2" }, "加载中...")
            ])) : vue.createCommentVNode("v-if", true),
            vue.createCommentVNode(" 加载更多 "),
            $setup.teams.length > 0 && $setup.teamsHasMore ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 4,
              class: "text-center mt-6"
            }, [
              vue.createElementVNode("button", {
                class: "load-more-btn",
                onClick: $setup.loadMoreTeams
              }, "加载更多")
            ])) : vue.createCommentVNode("v-if", true)
          ])) : vue.createCommentVNode("v-if", true),
          vue.createCommentVNode(" 底部固定按钮 "),
          vue.createElementVNode("view", { class: "fixed-bottom" }, [
            vue.createElementVNode("button", {
              class: "team-btn",
              onClick: $setup.createTeam
            }, [
              vue.createVNode($setup["SvgIcon"], {
                name: "chuangjianduiwu",
                class: "btn-icon"
              }),
              vue.createElementVNode("text", null, "创建队伍")
            ]),
            vue.createElementVNode("button", {
              class: vue.normalizeClass(["register-btn", { "disabled-btn": $setup.competition.statusCode === "0" || $setup.competition.statusCode === "3" }]),
              disabled: $setup.competition.statusCode === "0" || $setup.competition.statusCode === "3",
              onClick: $setup.handleActionButton
            }, [
              $setup.competition.statusCode === "0" ? (vue.openBlock(), vue.createBlock($setup["SvgIcon"], {
                key: 0,
                name: "tixingwo",
                class: "btn-icon"
              })) : vue.createCommentVNode("v-if", true),
              vue.createElementVNode(
                "text",
                null,
                vue.toDisplayString($setup.getActionButtonText()),
                1
                /* TEXT */
              )
            ], 10, ["disabled"])
          ])
        ],
        64
        /* STABLE_FRAGMENT */
      ))
    ]);
  }
  const PagesCompetitionDetail = /* @__PURE__ */ _export_sfc(_sfc_main$j, [["render", _sfc_render$i], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/competition/detail.vue"]]);
  const _sfc_main$i = {
    __name: "index",
    setup(__props, { expose: __expose }) {
      __expose();
      const userInfo = vue.ref({
        realName: "加载中...",
        phoneNumber: "",
        schoolId: null,
        schoolName: "",
        role: "",
        isVerified: false,
        creditScore: 0,
        major: "",
        studentTeacherId: "加载中...",
        avatarUrl: null,
        bio: "",
        skillTags: [],
        awardsHistory: []
      });
      const loading = vue.ref(true);
      const needRefreshUserInfo = vue.ref(false);
      async function getUserProfile() {
        try {
          loading.value = true;
          const res = await userApi.getUserProfile();
          if (res.code === 200 && res.data) {
            userInfo.value = res.data;
            formatAppLog("log", "at pages/profile/index.vue:141", "个人中心页获取到用户资料:", userInfo.value);
          } else {
            formatAppLog("error", "at pages/profile/index.vue:143", "获取用户资料失败:", res.message);
          }
        } catch (error) {
          formatAppLog("error", "at pages/profile/index.vue:146", "获取用户资料失败:", error);
        } finally {
          loading.value = false;
        }
      }
      function refreshUserInfo() {
        formatAppLog("log", "at pages/profile/index.vue:154", "刷新用户信息");
        getUserProfile();
      }
      function navigateTo(page) {
        if (page === "applications") {
          uni.navigateTo({
            url: "/pages/application/application"
          });
          return;
        } else if (page === "apply-badge") {
          uni.navigateTo({
            url: "/pages/profile/apply-badge"
          });
          return;
        } else if (page === "material-reward") {
          uni.navigateTo({
            url: "/pages/profile/material-reward"
          });
          return;
        } else if (page === "myCompetitions") {
          uni.navigateTo({
            url: "/pages/mycompetitions/mycompetitions"
          });
          return;
        } else if (page === "myTeams") {
          uni.navigateTo({
            url: "/pages/myTeam/myTeam"
          });
          return;
        } else if (page == "myTask") {
          uni.navigateTo({
            url: "/pages/mytasks/index"
          });
          return;
        } else if (page === "myAwards") {
          uni.navigateTo({
            url: "/pages/profile/my-awards"
          });
          return;
        }
      }
      function logout() {
        uni.showModal({
          title: "退出确认",
          content: "确定要退出登录吗？",
          success: function(res) {
            if (res.confirm) {
              store.clearState();
              uni.removeStorageSync("userInteractionState");
              uni.removeStorageSync("_DC_STAT_UUID");
              uni.removeStorageSync("ai_recommend_cache_time");
              uni.removeStorageSync("ai_recommended_teams");
              uni.removeStorageSync("ai_summary");
              uni.removeStorageSync("token");
              uni.showToast({
                title: "已退出登录",
                icon: "success",
                success: () => {
                  setTimeout(() => {
                    uni.redirectTo({
                      url: "/pages/login/login"
                    });
                  }, 1500);
                }
              });
            }
          }
        });
      }
      function goToNotification() {
        uni.navigateTo({
          url: "/pages/Xiaoxi/Xiaoxi"
        });
      }
      function goToUserInfo() {
        uni.navigateTo({
          url: "/pages/profile/user-info"
        });
      }
      function handleTabChange(tab) {
        if (tab === "home") {
          uni.switchTab({
            url: "/pages/index/index"
          });
        } else if (tab === "myCompetitions") {
          uni.switchTab({
            url: "/pages/competition/index"
          });
        } else if (tab === "team") {
          uni.switchTab({
            url: "/pages/team/list"
          });
        }
      }
      function showPublishOptions() {
        uni.showActionSheet({
          itemList: ["发布竞赛信息", "招募队友", "发布项目展示"],
          success: function(res) {
            uni.showToast({
              title: `选择了: ${res.tapIndex}`,
              icon: "none"
            });
          }
        });
      }
      vue.onMounted(() => {
        getUserProfile();
        uni.$on("profileUpdated", () => {
          formatAppLog("log", "at pages/profile/index.vue:285", "收到profileUpdated事件，刷新用户信息");
          refreshUserInfo();
        });
      });
      onShow(() => {
        const avatarUpdated = uni.getStorageSync("avatar_updated");
        if (avatarUpdated) {
          uni.removeStorageSync("avatar_updated");
          refreshUserInfo();
        }
      });
      const __returned__ = { userInfo, loading, needRefreshUserInfo, getUserProfile, refreshUserInfo, navigateTo, logout, goToNotification, goToUserInfo, handleTabChange, showPublishOptions, ref: vue.ref, onMounted: vue.onMounted, get onShow() {
        return onShow;
      }, TabBar, get userApi() {
        return userApi;
      }, get store() {
        return store;
      }, SvgIcon };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$h(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部用户信息区 "),
      vue.createElementVNode("view", { class: "user-info-section" }, [
        vue.createCommentVNode(" 加载中显示 "),
        $setup.loading ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 0,
          class: "loading-container"
        }, [
          vue.createElementVNode("view", { class: "loading-circle" }),
          vue.createElementVNode("text", { class: "loading-text" }, "加载中...")
        ])) : (vue.openBlock(), vue.createElementBlock("view", { key: 1 }, [
          vue.createElementVNode("view", { class: "user-header" }, [
            vue.createElementVNode("view", {
              class: "user-info-clickable",
              onClick: $setup.goToUserInfo
            }, [
              vue.createElementVNode("image", {
                class: "user-avatar",
                src: $setup.userInfo.avatarUrl || "https://images.unsplash.com/photo-1547425260-76bcadfb4f2c?w=200",
                mode: "aspectFill"
              }, null, 8, ["src"]),
              vue.createElementVNode("view", { class: "user-details" }, [
                vue.createElementVNode(
                  "text",
                  { class: "user-name" },
                  vue.toDisplayString($setup.userInfo.realName),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode(
                  "text",
                  { class: "user-id" },
                  "学号: " + vue.toDisplayString($setup.userInfo.studentTeacherId),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode("view", { class: "user-school" }, [
                  vue.createElementVNode(
                    "text",
                    { class: "school-name" },
                    vue.toDisplayString($setup.userInfo.schoolName),
                    1
                    /* TEXT */
                  ),
                  vue.createElementVNode(
                    "text",
                    { class: "major-name" },
                    vue.toDisplayString($setup.userInfo.major),
                    1
                    /* TEXT */
                  )
                ])
              ])
            ]),
            vue.createElementVNode("view", {
              class: "edit-btn",
              onClick: $setup.goToUserInfo
            }, [
              vue.createVNode($setup["SvgIcon"], { name: "bianji" }, {
                default: vue.withCtx(() => [
                  vue.createTextVNode("22")
                ]),
                _: 1
                /* STABLE */
              })
            ])
          ]),
          vue.createElementVNode("view", { class: "user-stats" }, [
            vue.createElementVNode("view", {
              class: "stat-item",
              onClick: _cache[0] || (_cache[0] = ($event) => $setup.navigateTo("myCompetitions"))
            }, [
              vue.createElementVNode("text", { class: "stat-value" }, "4"),
              vue.createElementVNode("text", { class: "stat-label" }, "参与竞赛")
            ]),
            vue.createElementVNode("view", {
              class: "stat-item",
              onClick: _cache[1] || (_cache[1] = ($event) => $setup.navigateTo("myTeams"))
            }, [
              vue.createElementVNode("text", { class: "stat-value" }, "2"),
              vue.createElementVNode("text", { class: "stat-label" }, "我的团队")
            ]),
            vue.createElementVNode("view", {
              class: "stat-item",
              onClick: _cache[2] || (_cache[2] = ($event) => $setup.navigateTo("myTask"))
            }, [
              vue.createElementVNode(
                "text",
                { class: "stat-value" },
                vue.toDisplayString($setup.userInfo.awardsHistory ? $setup.userInfo.awardsHistory.length : 0),
                1
                /* TEXT */
              ),
              vue.createElementVNode("text", { class: "stat-label" }, "我的任务")
            ]),
            vue.createElementVNode("view", {
              class: "stat-item",
              onClick: _cache[3] || (_cache[3] = ($event) => $setup.navigateTo("myAwards"))
            }, [
              vue.createElementVNode(
                "text",
                { class: "stat-value" },
                vue.toDisplayString($setup.userInfo.awardsCount || 0),
                1
                /* TEXT */
              ),
              vue.createElementVNode("text", { class: "stat-label" }, "我的获奖")
            ])
          ])
        ]))
      ]),
      vue.createCommentVNode(" 功能菜单 "),
      vue.createElementVNode("view", { class: "menu-section" }, [
        vue.createElementVNode("view", { class: "menu-group" }, [
          vue.createElementVNode("view", {
            class: "menu-item",
            onClick: _cache[4] || (_cache[4] = ($event) => $setup.navigateTo("material-reward"))
          }, [
            vue.createVNode($setup["SvgIcon"], {
              name: "shiwu",
              class: "menu-icon"
            }),
            vue.createElementVNode("text", { class: "menu-text" }, "实物奖励"),
            vue.createVNode($setup["SvgIcon"], {
              name: "zuojiantou",
              size: "20"
            })
          ]),
          vue.createElementVNode("view", {
            class: "menu-item",
            onClick: _cache[5] || (_cache[5] = ($event) => $setup.navigateTo("apply-badge"))
          }, [
            vue.createVNode($setup["SvgIcon"], {
              name: "xunzhang",
              class: "menu-icon"
            }),
            vue.createElementVNode("text", { class: "menu-text" }, "勋章申请"),
            vue.createVNode($setup["SvgIcon"], {
              name: "zuojiantou",
              size: "20"
            })
          ]),
          vue.createElementVNode("view", {
            class: "menu-item",
            onClick: _cache[6] || (_cache[6] = ($event) => $setup.navigateTo("applications"))
          }, [
            vue.createVNode($setup["SvgIcon"], {
              name: "shenqing",
              class: "menu-icon"
            }),
            vue.createElementVNode("text", { class: "menu-text" }, "申请管理"),
            vue.createVNode($setup["SvgIcon"], {
              name: "zuojiantou",
              size: "20"
            })
          ])
        ]),
        vue.createElementVNode("view", { class: "menu-group" }, [
          vue.createElementVNode("view", {
            class: "menu-item",
            onClick: _cache[7] || (_cache[7] = ($event) => $setup.navigateTo("settings"))
          }, [
            vue.createVNode($setup["SvgIcon"], {
              name: "shezhi",
              class: "menu-icon"
            }),
            vue.createElementVNode("text", { class: "menu-text" }, "账号设置"),
            vue.createVNode($setup["SvgIcon"], {
              name: "zuojiantou",
              size: "20"
            })
          ]),
          vue.createElementVNode("view", {
            class: "menu-item",
            onClick: _cache[8] || (_cache[8] = ($event) => $setup.navigateTo("feedback"))
          }, [
            vue.createVNode($setup["SvgIcon"], {
              name: "yijianfankui",
              class: "menu-icon"
            }),
            vue.createElementVNode("text", { class: "menu-text" }, "意见反馈"),
            vue.createVNode($setup["SvgIcon"], {
              name: "zuojiantou",
              size: "20"
            })
          ]),
          vue.createElementVNode("view", {
            class: "menu-item",
            onClick: _cache[9] || (_cache[9] = ($event) => $setup.navigateTo("about"))
          }, [
            vue.createVNode($setup["SvgIcon"], {
              name: "guanyuwomen",
              class: "menu-icon"
            }),
            vue.createElementVNode("text", { class: "menu-text" }, "关于我们"),
            vue.createVNode($setup["SvgIcon"], {
              name: "zuojiantou",
              size: "20"
            })
          ])
        ])
      ]),
      vue.createCommentVNode(" 注销按钮 "),
      vue.createElementVNode("view", {
        class: "logout-btn",
        onClick: $setup.logout
      }, [
        vue.createElementVNode("text", null, "退出登录")
      ]),
      vue.createCommentVNode(" 底部导航栏 "),
      vue.createVNode($setup["TabBar"], {
        "active-tab": "profile",
        onTabChange: $setup.handleTabChange,
        onPublish: $setup.showPublishOptions
      })
    ]);
  }
  const PagesProfileIndex = /* @__PURE__ */ _export_sfc(_sfc_main$i, [["render", _sfc_render$h], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/profile/index.vue"]]);
  const _imports_0$6 = "/static/image/empty-medal.png";
  const _sfc_main$h = {
    __name: "user-info",
    setup(__props, { expose: __expose }) {
      __expose();
      const userInfo = vue.ref({
        realName: "",
        phoneNumber: "",
        schoolId: null,
        schoolName: "",
        role: "",
        isVerified: false,
        creditScore: 0,
        major: "",
        studentTeacherId: "",
        avatarUrl: null,
        bio: "",
        skillTags: [],
        awardsHistory: []
      });
      const loading = vue.ref(true);
      const isRefreshing = vue.ref(false);
      const medals = vue.ref([]);
      const reachedBottom = vue.ref(false);
      const showBottomTip = vue.ref(false);
      function onScrollToBottom() {
        reachedBottom.value = true;
        showBottomTip.value = true;
        setTimeout(() => {
          showBottomTip.value = false;
        }, 3e3);
      }
      async function getUserProfile() {
        try {
          loading.value = true;
          const res = await userApi.getUserProfile();
          if (res.code === 200 && res.data) {
            userInfo.value = res.data;
            formatAppLog("log", "at pages/profile/user-info.vue:279", "获取到用户资料:", userInfo.value);
          } else {
            uni.showToast({
              title: res.message || "获取资料失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/profile/user-info.vue:287", "获取用户资料失败:", error);
          uni.showToast({
            title: "获取个人资料失败",
            icon: "none"
          });
        } finally {
          loading.value = false;
        }
      }
      async function getUserBadges() {
        try {
          const res = await userApi.getUserBadges();
          if (res.code === 200 && res.data) {
            medals.value = res.data.map((badge) => ({
              id: badge.badgeId,
              name: badge.name,
              imageUrl: badge.icon,
              description: `${badge.name} - 稀有度: ${badge.rarity}/6`,
              type: badge.badgeType,
              glowEffect: badge.glowEffect,
              rarity: badge.rarity
            }));
            formatAppLog("log", "at pages/profile/user-info.vue:311", "获取到用户勋章:", medals.value);
          } else {
            formatAppLog("error", "at pages/profile/user-info.vue:313", "获取勋章失败:", res.message);
          }
        } catch (error) {
          formatAppLog("error", "at pages/profile/user-info.vue:316", "获取用户勋章失败:", error);
        }
      }
      async function refreshUserInfo() {
        if (isRefreshing.value)
          return;
        isRefreshing.value = true;
        uni.showToast({
          title: "正在刷新...",
          icon: "none",
          duration: 1e3
        });
        try {
          const [profileRes, badgesRes] = await Promise.all([
            userApi.getUserProfile(),
            userApi.getUserBadges()
          ]);
          if (profileRes.code === 200 && profileRes.data) {
            userInfo.value = profileRes.data;
          }
          if (badgesRes.code === 200 && badgesRes.data) {
            medals.value = badgesRes.data.map((badge) => ({
              id: badge.badgeId,
              name: badge.name,
              imageUrl: badge.icon,
              description: `${badge.name} - 稀有度: ${badge.rarity}/6`,
              type: badge.badgeType,
              glowEffect: badge.glowEffect,
              rarity: badge.rarity
            }));
          }
          uni.showToast({
            title: "刷新成功",
            icon: "success",
            duration: 1e3
          });
        } catch (error) {
          formatAppLog("error", "at pages/profile/user-info.vue:359", "刷新用户资料失败:", error);
          uni.showToast({
            title: "刷新失败",
            icon: "none"
          });
        } finally {
          isRefreshing.value = false;
        }
      }
      function changeAvatar() {
        try {
          const imageOptions = {
            count: 1,
            // 最多可以选择的图片张数
            sizeType: ["compressed"],
            // 压缩图
            sourceType: ["album", "camera"],
            // 从相册选择或拍照
            success: function(res) {
              try {
                formatAppLog("log", "at pages/profile/user-info.vue:379", "选择图片成功:", res);
                const tempFilePath = res.tempFilePaths[0];
                let fileExt = "";
                try {
                  const extMatch = tempFilePath.match(/\.([a-zA-Z0-9]+)$/);
                  if (extMatch && extMatch[1]) {
                    fileExt = extMatch[1].toLowerCase();
                  }
                } catch (e) {
                  formatAppLog("error", "at pages/profile/user-info.vue:391", "提取文件扩展名失败:", e);
                }
                formatAppLog("log", "at pages/profile/user-info.vue:394", "文件路径:", tempFilePath);
                formatAppLog("log", "at pages/profile/user-info.vue:395", "识别到的扩展名:", fileExt);
                const allowedExts = ["jpg", "jpeg", "png"];
                if (fileExt && !allowedExts.includes(fileExt)) {
                  uni.showToast({
                    title: "仅支持JPG、JPEG和PNG格式",
                    icon: "none"
                  });
                  return;
                }
                uni.showModal({
                  title: "确认上传",
                  content: "是否将选择的图片设为头像？",
                  confirmColor: "#3B82F6",
                  success: function(modalRes) {
                    if (modalRes.confirm) {
                      try {
                        uploadAvatar(tempFilePath);
                      } catch (uploadErr) {
                        formatAppLog("error", "at pages/profile/user-info.vue:419", "启动上传过程出错:", uploadErr);
                        uni.showToast({
                          title: "上传初始化失败",
                          icon: "none"
                        });
                      }
                    }
                  }
                });
              } catch (innerErr) {
                formatAppLog("error", "at pages/profile/user-info.vue:429", "处理选中的图片时出错:", innerErr);
                uni.showToast({
                  title: "处理图片错误",
                  icon: "none"
                });
              }
            },
            fail: function(err) {
              formatAppLog("error", "at pages/profile/user-info.vue:437", "选择图片失败:", err);
              uni.showToast({
                title: "选择图片失败",
                icon: "none"
              });
            },
            complete: function() {
              formatAppLog("log", "at pages/profile/user-info.vue:444", "选择图片操作完成");
            }
          };
          uni.chooseImage(imageOptions);
        } catch (err) {
          formatAppLog("error", "at pages/profile/user-info.vue:451", "调用选择图片API出错:", err);
          uni.showToast({
            title: "选择图片功能异常",
            icon: "none"
          });
        }
      }
      function uploadAvatar(filePath) {
        const loadingText = "上传中";
        let dots = "";
        let loadingTimer = null;
        uni.showLoading({
          title: loadingText,
          mask: true
        });
        loadingTimer = setInterval(() => {
          dots = dots.length >= 3 ? "" : dots + ".";
          uni.showLoading({
            title: loadingText + dots,
            mask: true
          });
        }, 500);
        userApi.uploadAvatar(filePath, (progress) => {
          formatAppLog("log", "at pages/profile/user-info.vue:482", "上传进度:", progress);
          if (progress > 0) {
            uni.showLoading({
              title: `上传中 ${progress}%`,
              mask: true
            });
          }
        }).then((res) => {
          if (loadingTimer) {
            clearInterval(loadingTimer);
          }
          uni.hideLoading();
          if (res.code === 200 && res.data) {
            userInfo.value.avatarUrl = res.data.avatarUrl;
            uni.setStorageSync("avatar_updated", true);
            getUserProfile();
            uni.showToast({
              title: "头像上传成功",
              icon: "success"
            });
          } else {
            uni.showToast({
              title: res.message || "头像上传失败",
              icon: "none"
            });
          }
        }).catch((error) => {
          if (loadingTimer) {
            clearInterval(loadingTimer);
          }
          uni.hideLoading();
          formatAppLog("error", "at pages/profile/user-info.vue:526", "头像上传失败:", error);
          uni.showToast({
            title: "头像上传失败",
            icon: "none"
          });
        });
      }
      function editBasicInfo() {
        uni.navigateTo({
          url: "/pages/profile/edit-basic-info"
        });
      }
      function editBio() {
        uni.navigateTo({
          url: "/pages/profile/edit-bio"
        });
      }
      function editSkills() {
        uni.navigateTo({
          url: "/pages/profile/edit-skills"
        });
      }
      function editAwards() {
        uni.navigateTo({
          url: "/pages/profile/edit-awards"
        });
      }
      function goBack() {
        const avatarUpdated = uni.getStorageSync("avatar_updated");
        if (avatarUpdated) {
          uni.removeStorageSync("avatar_updated");
          const pages = getCurrentPages();
          if (pages.length > 1) {
            const prevPage = pages[pages.length - 2];
            if (prevPage && prevPage.$vm) {
              if (typeof prevPage.$vm.refreshUserInfo === "function") {
                prevPage.$vm.refreshUserInfo();
              } else {
                uni.$emit("profileUpdated");
              }
            }
          }
        }
        uni.navigateBack();
      }
      const showPreview = vue.ref(false);
      const currentMedal = vue.ref({});
      const previewScale = vue.ref(1);
      const touchStartDistance = vue.ref(0);
      function showMedalImage(medal) {
        currentMedal.value = medal;
        showPreview.value = true;
        previewScale.value = 1;
      }
      function closePreview() {
        showPreview.value = false;
      }
      function handleTouchStart(event2) {
        if (event2.touches.length === 2) {
          const touch1 = event2.touches[0];
          const touch2 = event2.touches[1];
          touchStartDistance.value = Math.sqrt(
            Math.pow(touch2.pageX - touch1.pageX, 2) + Math.pow(touch2.pageY - touch1.pageY, 2)
          );
        }
      }
      function handleTouchMove(event2) {
        if (event2.touches.length === 2 && touchStartDistance.value > 0) {
          const touch1 = event2.touches[0];
          const touch2 = event2.touches[1];
          const currentDistance = Math.sqrt(
            Math.pow(touch2.pageX - touch1.pageX, 2) + Math.pow(touch2.pageY - touch1.pageY, 2)
          );
          const scaleFactor = currentDistance / touchStartDistance.value;
          previewScale.value = Math.max(0.5, Math.min(3, previewScale.value * scaleFactor));
          touchStartDistance.value = currentDistance;
        }
      }
      function handleTouchEnd() {
        touchStartDistance.value = 0;
      }
      function getMedalEffectByRarity(rarity) {
        if (!rarity)
          return "common_shine";
        switch (Number(rarity)) {
          case 6:
            return "gold_glow";
          case 5:
            return "purple_pulse";
          case 4:
            return "blue_shimmer";
          case 3:
            return "green_sparkle";
          default:
            return "common_shine";
        }
      }
      function showMedalDetail(medal) {
        uni.showModal({
          title: medal.name,
          content: medal.description,
          showCancel: false,
          confirmText: "知道了"
        });
      }
      function goToMedalDetail() {
        uni.navigateTo({
          url: "/pages/profile/medal-detail"
        });
      }
      vue.onMounted(() => {
        getUserProfile();
        getUserBadges();
      });
      const __returned__ = { userInfo, loading, isRefreshing, medals, reachedBottom, showBottomTip, onScrollToBottom, getUserProfile, getUserBadges, refreshUserInfo, changeAvatar, uploadAvatar, editBasicInfo, editBio, editSkills, editAwards, goBack, showPreview, currentMedal, previewScale, touchStartDistance, showMedalImage, closePreview, handleTouchStart, handleTouchMove, handleTouchEnd, getMedalEffectByRarity, showMedalDetail, goToMedalDetail, ref: vue.ref, onMounted: vue.onMounted, get userApi() {
        return userApi;
      }, SvgIcon };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$g(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createElementVNode("view", { class: "header" }, [
        vue.createElementVNode("view", {
          class: "back-btn",
          onClick: $setup.goBack
        }, [
          vue.createVNode($setup["SvgIcon"], {
            name: "back",
            size: "20"
          })
        ]),
        vue.createElementVNode("text", { class: "header-title" }, "个人资料"),
        vue.createElementVNode("view", { class: "right-placeholder" })
      ]),
      vue.createCommentVNode(" 加载中显示 "),
      $setup.loading ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 0,
        class: "loading-container"
      }, [
        vue.createElementVNode("view", { class: "loading-circle" }),
        vue.createElementVNode("text", { class: "loading-text" }, "加载中...")
      ])) : (vue.openBlock(), vue.createElementBlock(
        vue.Fragment,
        { key: 1 },
        [
          vue.createCommentVNode(" 个人资料内容 "),
          vue.createElementVNode("scroll-view", {
            "scroll-y": "",
            class: "content-scroll"
          }, [
            vue.createCommentVNode(" 头像区域 "),
            vue.createElementVNode("view", { class: "avatar-section" }, [
              vue.createCommentVNode(" 用户信息卡片 "),
              vue.createElementVNode("view", { class: "user-info-card" }, [
                vue.createElementVNode("view", { class: "user-info-header" }, [
                  vue.createElementVNode("view", { class: "user-avatar-container" }, [
                    vue.createElementVNode("image", {
                      class: "user-avatar",
                      src: $setup.userInfo.avatarUrl || "https://images.unsplash.com/photo-1547425260-76bcadfb4f2c?w=200",
                      mode: "aspectFill"
                    }, null, 8, ["src"]),
                    vue.createCommentVNode(" 头像编辑按钮 "),
                    vue.createElementVNode("view", {
                      class: "avatar-edit-btn",
                      onClick: $setup.changeAvatar
                    }, [
                      vue.createVNode($setup["SvgIcon"], {
                        name: "bianji",
                        size: "16",
                        color: "#ffffff"
                      })
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "user-basic-info" }, [
                    vue.createElementVNode(
                      "text",
                      { class: "user-name" },
                      vue.toDisplayString($setup.userInfo.realName || "未设置姓名"),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode("view", { class: "role-tag" }, [
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString($setup.userInfo.role === "student" ? "学生" : $setup.userInfo.role === "teacher" ? "教师" : "管理员"),
                        1
                        /* TEXT */
                      )
                    ])
                  ]),
                  vue.createElementVNode("view", {
                    class: "edit-profile-btn",
                    onClick: $setup.editBasicInfo
                  }, [
                    vue.createVNode($setup["SvgIcon"], {
                      name: "bianji",
                      size: "16"
                    }),
                    vue.createElementVNode("text", null, "编辑资料")
                  ])
                ]),
                vue.createElementVNode("view", { class: "user-info-details" }, [
                  vue.createElementVNode("view", { class: "detail-item" }, [
                    vue.createElementVNode("text", { class: "detail-label" }, "学校"),
                    vue.createElementVNode(
                      "text",
                      { class: "detail-value" },
                      vue.toDisplayString($setup.userInfo.schoolName || "未设置"),
                      1
                      /* TEXT */
                    )
                  ]),
                  vue.createElementVNode("view", { class: "detail-item" }, [
                    vue.createElementVNode("text", { class: "detail-label" }, "专业"),
                    vue.createElementVNode(
                      "text",
                      { class: "detail-value" },
                      vue.toDisplayString($setup.userInfo.major || "未设置"),
                      1
                      /* TEXT */
                    )
                  ]),
                  vue.createElementVNode("view", { class: "detail-item" }, [
                    vue.createElementVNode("text", { class: "detail-label" }, "信用分"),
                    vue.createElementVNode(
                      "text",
                      { class: "detail-value credit-score" },
                      vue.toDisplayString($setup.userInfo.creditScore || 0),
                      1
                      /* TEXT */
                    )
                  ])
                ])
              ]),
              vue.createCommentVNode(" 勋章展示区域 "),
              vue.createElementVNode("view", { class: "medals-container" }, [
                vue.createElementVNode("view", { class: "medals-header" }, [
                  vue.createElementVNode("view", { class: "medals-title-wrapper" }, [
                    vue.createElementVNode("text", {
                      class: "medals-title",
                      style: { "margin-left": "25rpx" }
                    }, "荣誉勋章"),
                    vue.createElementVNode(
                      "text",
                      { class: "medals-count" },
                      vue.toDisplayString($setup.medals.length || 0) + "个",
                      1
                      /* TEXT */
                    )
                  ]),
                  vue.createElementVNode("view", {
                    class: "view-all-btn",
                    onClick: $setup.goToMedalDetail
                  }, [
                    vue.createElementVNode("text", null, "查看详情"),
                    vue.createVNode($setup["SvgIcon"], {
                      name: "arrow-right",
                      size: "14"
                    })
                  ])
                ]),
                vue.createCommentVNode(" 勋章展示框 - 竖向滚动 "),
                vue.createElementVNode("view", { class: "medals-box" }, [
                  vue.createElementVNode(
                    "scroll-view",
                    {
                      class: "medals-scroll",
                      "scroll-y": "true",
                      "show-scrollbar": true,
                      onScrolltolower: $setup.onScrollToBottom,
                      "scroll-anchoring": true,
                      enhanced: true,
                      bounces: false
                    },
                    [
                      vue.createCommentVNode(" 勋章网格 "),
                      vue.createElementVNode("view", { class: "medals-grid" }, [
                        (vue.openBlock(true), vue.createElementBlock(
                          vue.Fragment,
                          null,
                          vue.renderList($setup.medals, (medal, index) => {
                            return vue.openBlock(), vue.createElementBlock("view", {
                              class: "medal-item",
                              key: index,
                              onClick: ($event) => $setup.showMedalImage(medal)
                            }, [
                              vue.createElementVNode("image", {
                                class: "medal-image",
                                src: medal.imageUrl,
                                mode: "aspectFit"
                              }, null, 8, ["src"]),
                              vue.createElementVNode(
                                "text",
                                { class: "medal-name" },
                                vue.toDisplayString(medal.name),
                                1
                                /* TEXT */
                              )
                            ], 8, ["onClick"]);
                          }),
                          128
                          /* KEYED_FRAGMENT */
                        )),
                        vue.createCommentVNode(" 暂无勋章时显示 "),
                        !$setup.medals || $setup.medals.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 0,
                          class: "empty-medals"
                        }, [
                          vue.createElementVNode("image", {
                            class: "empty-medal-icon",
                            src: _imports_0$6,
                            mode: "aspectFit"
                          }),
                          vue.createElementVNode("text", null, "暂无勋章")
                        ])) : vue.createCommentVNode("v-if", true),
                        vue.createCommentVNode(" 滚动到底部的提示 "),
                        $setup.medals && $setup.medals.length > 8 && $setup.showBottomTip ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 1,
                          class: "bottom-tip"
                        }, [
                          vue.createElementVNode("text", null, "已显示全部勋章")
                        ])) : vue.createCommentVNode("v-if", true),
                        vue.createCommentVNode(" 添加底部空白区域，防止内容被提示遮挡 "),
                        $setup.medals && $setup.medals.length > 8 ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 2,
                          class: "bottom-space"
                        })) : vue.createCommentVNode("v-if", true)
                      ])
                    ],
                    32
                    /* NEED_HYDRATION */
                  ),
                  vue.createCommentVNode(" 滚动提示 "),
                  $setup.medals && $setup.medals.length > 8 && !$setup.reachedBottom ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 0,
                    class: "scroll-hint"
                  }, [
                    vue.createVNode($setup["SvgIcon"], {
                      name: "arrow-down",
                      size: "16"
                    }),
                    vue.createElementVNode("text", null, "向下滑动查看更多")
                  ])) : vue.createCommentVNode("v-if", true)
                ])
              ])
            ]),
            vue.createCommentVNode(" 个人简介卡片 "),
            vue.createElementVNode("view", { class: "info-card" }, [
              vue.createElementVNode("view", { class: "card-header" }, [
                vue.createElementVNode("text", { class: "card-title" }, "个人简介"),
                vue.createElementVNode("view", {
                  class: "edit-btn",
                  onClick: $setup.editBio
                }, [
                  vue.createVNode($setup["SvgIcon"], {
                    name: "bianji",
                    size: "20"
                  }),
                  vue.createElementVNode("text", { class: "edit-text" }, "编辑")
                ])
              ]),
              vue.createElementVNode("view", { class: "bio-content" }, [
                vue.createElementVNode(
                  "text",
                  null,
                  vue.toDisplayString($setup.userInfo.bio || "暂无个人简介，点击右上角编辑添加"),
                  1
                  /* TEXT */
                )
              ])
            ]),
            vue.createCommentVNode(" 技能标签卡片 "),
            vue.createElementVNode("view", { class: "info-card" }, [
              vue.createElementVNode("view", { class: "card-header" }, [
                vue.createElementVNode("text", { class: "card-title" }, "技能标签"),
                vue.createElementVNode("view", {
                  class: "edit-btn",
                  onClick: $setup.editSkills
                }, [
                  vue.createVNode($setup["SvgIcon"], {
                    name: "bianji",
                    size: "20"
                  }),
                  vue.createElementVNode("text", { class: "edit-text" }, "编辑")
                ])
              ]),
              vue.createElementVNode("view", { class: "skills-container" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.userInfo.skillTags, (skill, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "skill-tag",
                      key: index
                    }, [
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString(skill),
                        1
                        /* TEXT */
                      )
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                )),
                !$setup.userInfo.skillTags || $setup.userInfo.skillTags.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "empty-skills"
                }, [
                  vue.createElementVNode("text", null, "暂无技能标签，点击右上角编辑添加")
                ])) : vue.createCommentVNode("v-if", true)
              ])
            ]),
            vue.createCommentVNode(" 获奖经历卡片 "),
            vue.createElementVNode("view", { class: "info-card" }, [
              vue.createElementVNode("view", { class: "card-header" }, [
                vue.createElementVNode("text", { class: "card-title" }, "获奖经历"),
                vue.createElementVNode("view", {
                  class: "edit-btn",
                  onClick: $setup.editAwards
                }, [
                  vue.createVNode($setup["SvgIcon"], {
                    name: "bianji",
                    size: "20"
                  }),
                  vue.createElementVNode("text", { class: "edit-text" }, "编辑")
                ])
              ]),
              vue.createElementVNode("view", { class: "awards-container" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.userInfo.awardsHistory, (award, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "award-item",
                      key: index
                    }, [
                      vue.createElementVNode("view", { class: "award-header" }, [
                        vue.createElementVNode(
                          "text",
                          { class: "award-name" },
                          vue.toDisplayString(award.awardName),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode(
                          "text",
                          { class: "award-level" },
                          vue.toDisplayString(award.level),
                          1
                          /* TEXT */
                        )
                      ]),
                      vue.createElementVNode("view", { class: "award-detail" }, [
                        vue.createElementVNode(
                          "text",
                          { class: "award-org" },
                          vue.toDisplayString(award.organization),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode(
                          "text",
                          { class: "award-time" },
                          vue.toDisplayString(award.awardTime),
                          1
                          /* TEXT */
                        )
                      ])
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                )),
                !$setup.userInfo.awardsHistory || $setup.userInfo.awardsHistory.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "empty-awards"
                }, [
                  vue.createElementVNode("text", null, "暂无获奖经历，点击右上角编辑添加")
                ])) : vue.createCommentVNode("v-if", true)
              ])
            ])
          ])
        ],
        2112
        /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
      )),
      vue.createCommentVNode(" 悬浮刷新按钮 "),
      vue.createElementVNode("view", {
        class: "refresh-btn",
        onClick: $setup.refreshUserInfo
      }, [
        vue.createVNode($setup["SvgIcon"], {
          name: "shuaxin",
          size: "48",
          color: "#ffffff"
        })
      ]),
      vue.createCommentVNode(" 勋章大图预览弹窗 "),
      $setup.showPreview ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 2,
        class: "medal-preview-overlay",
        onClick: $setup.closePreview
      }, [
        vue.createElementVNode("view", {
          class: "medal-preview-content",
          onClick: _cache[0] || (_cache[0] = vue.withModifiers(() => {
          }, ["stop"]))
        }, [
          vue.createElementVNode("view", { class: "medal-preview-header" }, [
            vue.createElementVNode(
              "text",
              { class: "medal-preview-title" },
              vue.toDisplayString($setup.currentMedal.name),
              1
              /* TEXT */
            ),
            vue.createElementVNode("view", {
              class: "medal-preview-close",
              onClick: $setup.closePreview
            }, [
              vue.createVNode($setup["SvgIcon"], {
                name: "close",
                size: "20"
              })
            ])
          ]),
          vue.createElementVNode("image", {
            class: "medal-preview-image",
            src: $setup.currentMedal.imageUrl,
            mode: "aspectFit",
            style: vue.normalizeStyle({ transform: `scale(${$setup.previewScale})` }),
            onTouchstart: $setup.handleTouchStart,
            onTouchmove: $setup.handleTouchMove,
            onTouchend: $setup.handleTouchEnd
          }, null, 44, ["src"]),
          vue.createElementVNode("view", { class: "medal-preview-info" }, [
            vue.createElementVNode(
              "text",
              { class: "medal-preview-desc" },
              vue.toDisplayString($setup.currentMedal.description),
              1
              /* TEXT */
            ),
            vue.createElementVNode("view", { class: "medal-preview-hint" }, [
              vue.createElementVNode("text", null, "双指缩放可调整图片大小")
            ])
          ])
        ])
      ])) : vue.createCommentVNode("v-if", true)
    ]);
  }
  const PagesProfileUserInfo = /* @__PURE__ */ _export_sfc(_sfc_main$h, [["render", _sfc_render$g], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/profile/user-info.vue"]]);
  const _sfc_main$g = {
    __name: "edit-basic-info",
    setup(__props, { expose: __expose }) {
      __expose();
      const userInfo = vue.ref({
        realName: "",
        phoneNumber: "",
        schoolId: null,
        schoolName: "",
        major: "",
        studentTeacherId: ""
      });
      const loading = vue.ref(true);
      const schoolOptions = vue.ref([]);
      const selectedSchoolIndex = vue.computed(() => {
        if (!userInfo.value.schoolId || schoolOptions.value.length === 0)
          return 0;
        const index = schoolOptions.value.findIndex((school2) => school2.id === userInfo.value.schoolId);
        return index >= 0 ? index : 0;
      });
      const selectedSchoolName = vue.computed(() => {
        return userInfo.value.schoolName || "请选择学校";
      });
      async function getUserProfile() {
        try {
          loading.value = true;
          const res = await userApi.getUserProfile();
          if (res.code === 200 && res.data) {
            userInfo.value = res.data;
            formatAppLog("log", "at pages/profile/edit-basic-info.vue:105", "获取到用户资料:", userInfo.value);
            await getSchools();
          } else {
            uni.showToast({
              title: res.message || "获取资料失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/profile/edit-basic-info.vue:114", "获取用户资料失败:", error);
          uni.showToast({
            title: "获取个人资料失败",
            icon: "none"
          });
        } finally {
          loading.value = false;
        }
      }
      async function getSchools() {
        try {
          const res = await userApi.getSchools();
          if (res.code === 200 && res.data) {
            schoolOptions.value = res.data;
          } else {
            formatAppLog("error", "at pages/profile/edit-basic-info.vue:131", "获取学校列表失败:", res.message);
          }
        } catch (error) {
          formatAppLog("error", "at pages/profile/edit-basic-info.vue:134", "获取学校列表失败:", error);
        }
      }
      function onSchoolChange(e) {
        const index = e.detail.value;
        if (index >= 0 && index < schoolOptions.value.length) {
          const selectedSchool = schoolOptions.value[index];
          userInfo.value.schoolId = selectedSchool.id;
          userInfo.value.schoolName = selectedSchool.name;
        }
      }
      async function saveChanges() {
        if (!userInfo.value.realName || userInfo.value.realName.trim() === "") {
          uni.showToast({
            title: "姓名不能为空",
            icon: "none"
          });
          return;
        }
        if (!userInfo.value.schoolId) {
          uni.showToast({
            title: "请选择学校",
            icon: "none"
          });
          return;
        }
        try {
          uni.showLoading({
            title: "保存中..."
          });
          const updateData = {
            realName: userInfo.value.realName,
            schoolId: userInfo.value.schoolId,
            major: userInfo.value.major,
            bio: userInfo.value.bio,
            skillTags: userInfo.value.skillTags || [],
            awardsHistory: userInfo.value.awardsHistory || []
          };
          const res = await userApi.updateUserProfile(updateData);
          if (res.code === 200) {
            uni.showToast({
              title: "保存成功",
              icon: "success"
            });
            setTimeout(() => {
              goBack();
            }, 1500);
          } else {
            uni.showToast({
              title: res.message || "保存失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/profile/edit-basic-info.vue:198", "保存用户资料失败:", error);
          uni.showToast({
            title: "保存失败，请稍后再试",
            icon: "none"
          });
        } finally {
          uni.hideLoading();
        }
      }
      function goBack() {
        uni.navigateBack();
      }
      vue.onMounted(() => {
        getUserProfile();
      });
      const __returned__ = { userInfo, loading, schoolOptions, selectedSchoolIndex, selectedSchoolName, getUserProfile, getSchools, onSchoolChange, saveChanges, goBack, ref: vue.ref, computed: vue.computed, onMounted: vue.onMounted, get userApi() {
        return userApi;
      }, SvgIcon };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$f(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createElementVNode("view", { class: "header" }, [
        vue.createElementVNode("view", {
          class: "back-btn",
          onClick: $setup.goBack
        }, [
          vue.createVNode($setup["SvgIcon"], {
            name: "back",
            size: "20"
          })
        ]),
        vue.createElementVNode("text", { class: "header-title" }, "编辑基本信息"),
        vue.createElementVNode("view", {
          class: "save-btn",
          onClick: $setup.saveChanges
        }, [
          vue.createElementVNode("text", null, "保存")
        ])
      ]),
      vue.createCommentVNode(" 加载中显示 "),
      $setup.loading ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 0,
        class: "loading-container"
      }, [
        vue.createElementVNode("view", { class: "loading-circle" }),
        vue.createElementVNode("text", { class: "loading-text" }, "加载中...")
      ])) : (vue.openBlock(), vue.createElementBlock(
        vue.Fragment,
        { key: 1 },
        [
          vue.createCommentVNode(" 编辑表单 "),
          vue.createElementVNode("scroll-view", {
            "scroll-y": "",
            class: "content-scroll"
          }, [
            vue.createElementVNode("view", { class: "form-section" }, [
              vue.createElementVNode("view", { class: "form-item" }, [
                vue.createElementVNode("text", { class: "form-label" }, "姓名"),
                vue.withDirectives(vue.createElementVNode(
                  "input",
                  {
                    class: "form-input",
                    type: "text",
                    "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.userInfo.realName = $event),
                    placeholder: "请输入真实姓名",
                    maxlength: "20"
                  },
                  null,
                  512
                  /* NEED_PATCH */
                ), [
                  [vue.vModelText, $setup.userInfo.realName]
                ])
              ]),
              vue.createElementVNode("view", { class: "form-item" }, [
                vue.createElementVNode("text", { class: "form-label" }, "学校"),
                vue.createElementVNode("picker", {
                  class: "form-picker",
                  range: $setup.schoolOptions,
                  "range-key": "name",
                  value: $setup.selectedSchoolIndex,
                  onChange: $setup.onSchoolChange
                }, [
                  vue.createElementVNode(
                    "view",
                    { class: "picker-text" },
                    vue.toDisplayString($setup.selectedSchoolName || "请选择学校"),
                    1
                    /* TEXT */
                  )
                ], 40, ["range", "value"])
              ]),
              vue.createElementVNode("view", { class: "form-item" }, [
                vue.createElementVNode("text", { class: "form-label" }, "专业"),
                vue.withDirectives(vue.createElementVNode(
                  "input",
                  {
                    class: "form-input",
                    type: "text",
                    "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.userInfo.major = $event),
                    placeholder: "请输入专业",
                    maxlength: "30"
                  },
                  null,
                  512
                  /* NEED_PATCH */
                ), [
                  [vue.vModelText, $setup.userInfo.major]
                ])
              ]),
              vue.createElementVNode("view", { class: "form-item form-item-last" }, [
                vue.createElementVNode("text", { class: "form-label" }, "手机号"),
                vue.createElementVNode(
                  "view",
                  { class: "form-text" },
                  vue.toDisplayString($setup.userInfo.phoneNumber || "未设置"),
                  1
                  /* TEXT */
                )
              ])
            ]),
            vue.createElementVNode("text", { class: "form-tip" }, "注意：学号和角色信息不可修改")
          ])
        ],
        2112
        /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
      ))
    ]);
  }
  const PagesProfileEditBasicInfo = /* @__PURE__ */ _export_sfc(_sfc_main$g, [["render", _sfc_render$f], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/profile/edit-basic-info.vue"]]);
  const _sfc_main$f = {
    __name: "edit-bio",
    setup(__props, { expose: __expose }) {
      __expose();
      const userInfo = vue.ref({
        bio: "",
        realName: "",
        schoolId: null,
        major: "",
        skillTags: [],
        awardsHistory: []
      });
      const loading = vue.ref(true);
      async function getUserProfile() {
        try {
          loading.value = true;
          const res = await userApi.getUserProfile();
          if (res.code === 200 && res.data) {
            userInfo.value = res.data;
            formatAppLog("log", "at pages/profile/edit-bio.vue:83", "获取到用户资料:", userInfo.value);
          } else {
            uni.showToast({
              title: res.message || "获取资料失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/profile/edit-bio.vue:91", "获取用户资料失败:", error);
          uni.showToast({
            title: "获取个人资料失败",
            icon: "none"
          });
        } finally {
          loading.value = false;
        }
      }
      async function saveChanges() {
        try {
          uni.showLoading({
            title: "保存中..."
          });
          const updateData = {
            realName: userInfo.value.realName,
            schoolId: userInfo.value.schoolId,
            major: userInfo.value.major,
            bio: userInfo.value.bio,
            skillTags: userInfo.value.skillTags || [],
            awardsHistory: userInfo.value.awardsHistory || []
          };
          const res = await userApi.updateUserProfile(updateData);
          if (res.code === 200) {
            uni.showToast({
              title: "保存成功",
              icon: "success"
            });
            setTimeout(() => {
              goBack();
            }, 1500);
          } else {
            uni.showToast({
              title: res.message || "保存失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/profile/edit-bio.vue:135", "保存用户资料失败:", error);
          uni.showToast({
            title: "保存失败，请稍后再试",
            icon: "none"
          });
        } finally {
          uni.hideLoading();
        }
      }
      function goBack() {
        uni.navigateBack();
      }
      vue.onMounted(() => {
        getUserProfile();
      });
      const __returned__ = { userInfo, loading, getUserProfile, saveChanges, goBack, ref: vue.ref, onMounted: vue.onMounted, get userApi() {
        return userApi;
      }, SvgIcon };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$e(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createElementVNode("view", { class: "header" }, [
        vue.createElementVNode("view", {
          class: "back-btn",
          onClick: $setup.goBack
        }, [
          vue.createVNode($setup["SvgIcon"], {
            name: "back",
            size: "20"
          })
        ]),
        vue.createElementVNode("text", { class: "header-title" }, "编辑个人简介"),
        vue.createElementVNode("view", {
          class: "save-btn",
          onClick: $setup.saveChanges
        }, [
          vue.createElementVNode("text", null, "保存")
        ])
      ]),
      vue.createCommentVNode(" 加载中显示 "),
      $setup.loading ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 0,
        class: "loading-container"
      }, [
        vue.createElementVNode("view", { class: "loading-circle" }),
        vue.createElementVNode("text", { class: "loading-text" }, "加载中...")
      ])) : (vue.openBlock(), vue.createElementBlock(
        vue.Fragment,
        { key: 1 },
        [
          vue.createCommentVNode(" 编辑表单 "),
          vue.createElementVNode("view", { class: "content-scroll" }, [
            vue.createElementVNode("view", { class: "form-section" }, [
              vue.withDirectives(vue.createElementVNode(
                "textarea",
                {
                  class: "bio-textarea",
                  "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.userInfo.bio = $event),
                  placeholder: "请输入您的个人简介，介绍自己的专业背景、技术特长、研究方向等（1000字以内）",
                  maxlength: "1000",
                  "auto-height": ""
                },
                null,
                512
                /* NEED_PATCH */
              ), [
                [vue.vModelText, $setup.userInfo.bio]
              ]),
              vue.createElementVNode(
                "view",
                { class: "text-count" },
                vue.toDisplayString($setup.userInfo.bio ? $setup.userInfo.bio.length : 0) + "/1000",
                1
                /* TEXT */
              )
            ]),
            vue.createElementVNode("view", { class: "tip-section" }, [
              vue.createElementVNode("text", { class: "tip-title" }, "写一个好的个人简介"),
              vue.createElementVNode("view", { class: "tip-list" }, [
                vue.createElementVNode("view", { class: "tip-item" }, [
                  vue.createElementVNode("text", { class: "dot" }, "•"),
                  vue.createElementVNode("text", { class: "tip-text" }, "介绍您的学习背景和专业领域")
                ]),
                vue.createElementVNode("view", { class: "tip-item" }, [
                  vue.createElementVNode("text", { class: "dot" }, "•"),
                  vue.createElementVNode("text", { class: "tip-text" }, "突出您的核心技能和特长")
                ]),
                vue.createElementVNode("view", { class: "tip-item" }, [
                  vue.createElementVNode("text", { class: "dot" }, "•"),
                  vue.createElementVNode("text", { class: "tip-text" }, "分享您的研究兴趣或项目经验")
                ]),
                vue.createElementVNode("view", { class: "tip-item" }, [
                  vue.createElementVNode("text", { class: "dot" }, "•"),
                  vue.createElementVNode("text", { class: "tip-text" }, "提及您期望的团队合作方式")
                ])
              ])
            ])
          ])
        ],
        2112
        /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
      ))
    ]);
  }
  const PagesProfileEditBio = /* @__PURE__ */ _export_sfc(_sfc_main$f, [["render", _sfc_render$e], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/profile/edit-bio.vue"]]);
  const _sfc_main$e = {
    __name: "edit-skills",
    setup(__props, { expose: __expose }) {
      __expose();
      const userInfo = vue.ref({
        skillTags: [],
        realName: "",
        schoolId: null,
        major: "",
        bio: "",
        awardsHistory: []
      });
      const selectedTags = vue.ref([]);
      const skillCategories = vue.ref({});
      const currentCategory = vue.ref("");
      const loading = vue.ref(true);
      async function getUserProfile() {
        try {
          loading.value = true;
          const res = await userApi.getUserProfile();
          if (res.code === 200 && res.data) {
            userInfo.value = res.data;
            if (userInfo.value.skillTags && Array.isArray(userInfo.value.skillTags)) {
              selectedTags.value = [...userInfo.value.skillTags];
            }
            formatAppLog("log", "at pages/profile/edit-skills.vue:110", "获取到用户资料:", userInfo.value);
            await getSkillTags();
          } else {
            uni.showToast({
              title: res.message || "获取资料失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/profile/edit-skills.vue:119", "获取用户资料失败:", error);
          uni.showToast({
            title: "获取个人资料失败",
            icon: "none"
          });
        } finally {
          loading.value = false;
        }
      }
      async function getSkillTags() {
        try {
          const res = await userApi.getSkillTags();
          if (res.code === 200 && res.data) {
            skillCategories.value = res.data;
            const categories = Object.keys(res.data);
            if (categories.length > 0) {
              currentCategory.value = categories[0];
            }
            formatAppLog("log", "at pages/profile/edit-skills.vue:140", "获取技能标签成功:", skillCategories.value);
          } else {
            formatAppLog("error", "at pages/profile/edit-skills.vue:142", "获取技能标签失败:", res.message);
          }
        } catch (error) {
          formatAppLog("error", "at pages/profile/edit-skills.vue:145", "获取技能标签失败:", error);
        }
      }
      function changeCategory(category) {
        currentCategory.value = category;
      }
      function isTagSelected(tagName) {
        return selectedTags.value.includes(tagName);
      }
      function toggleTag(tagName) {
        const index = selectedTags.value.indexOf(tagName);
        if (index === -1) {
          if (selectedTags.value.length >= 10) {
            uni.showToast({
              title: "最多只能选择10个标签",
              icon: "none"
            });
            return;
          }
          selectedTags.value.push(tagName);
        } else {
          removeTag(index);
        }
      }
      function removeTag(index) {
        selectedTags.value.splice(index, 1);
      }
      async function saveChanges() {
        try {
          uni.showLoading({
            title: "保存中..."
          });
          const updateData = {
            realName: userInfo.value.realName,
            schoolId: userInfo.value.schoolId,
            major: userInfo.value.major,
            bio: userInfo.value.bio,
            skillTags: selectedTags.value,
            awardsHistory: userInfo.value.awardsHistory || []
          };
          const res = await userApi.updateUserProfile(updateData);
          if (res.code === 200) {
            uni.showToast({
              title: "保存成功",
              icon: "success"
            });
            setTimeout(() => {
              goBack();
            }, 1500);
          } else {
            uni.showToast({
              title: res.message || "保存失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/profile/edit-skills.vue:216", "保存用户资料失败:", error);
          uni.showToast({
            title: "保存失败，请稍后再试",
            icon: "none"
          });
        } finally {
          uni.hideLoading();
        }
      }
      function goBack() {
        uni.navigateBack();
      }
      vue.onMounted(() => {
        getUserProfile();
      });
      const __returned__ = { userInfo, selectedTags, skillCategories, currentCategory, loading, getUserProfile, getSkillTags, changeCategory, isTagSelected, toggleTag, removeTag, saveChanges, goBack, ref: vue.ref, computed: vue.computed, onMounted: vue.onMounted, get userApi() {
        return userApi;
      }, SvgIcon };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$d(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createElementVNode("view", { class: "header" }, [
        vue.createElementVNode("view", {
          class: "back-btn",
          onClick: $setup.goBack
        }, [
          vue.createVNode($setup["SvgIcon"], {
            name: "back",
            size: "20"
          })
        ]),
        vue.createElementVNode("text", { class: "header-title" }, "编辑技能标签"),
        vue.createElementVNode("view", {
          class: "save-btn",
          onClick: $setup.saveChanges
        }, [
          vue.createElementVNode("text", null, "保存")
        ])
      ]),
      vue.createCommentVNode(" 加载中显示 "),
      $setup.loading ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 0,
        class: "loading-container"
      }, [
        vue.createElementVNode("view", { class: "loading-circle" }),
        vue.createElementVNode("text", { class: "loading-text" }, "加载中...")
      ])) : (vue.openBlock(), vue.createElementBlock(
        vue.Fragment,
        { key: 1 },
        [
          vue.createCommentVNode(" 编辑内容 "),
          vue.createElementVNode("scroll-view", {
            "scroll-y": "",
            class: "content-scroll"
          }, [
            vue.createCommentVNode(" 已选标签区域 "),
            vue.createElementVNode("view", { class: "selected-section" }, [
              vue.createElementVNode("view", { class: "section-title" }, "已选择的标签"),
              vue.createElementVNode("view", { class: "selected-tags" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.selectedTags, (tag, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      key: index,
                      class: "tag selected-tag"
                    }, [
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString(tag),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("text", {
                        class: "remove-icon",
                        onClick: ($event) => $setup.removeTag(index)
                      }, "×", 8, ["onClick"])
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                )),
                $setup.selectedTags.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "empty-tips"
                }, [
                  vue.createElementVNode("text", null, "尚未选择任何标签，请从下方分类中选择")
                ])) : vue.createCommentVNode("v-if", true)
              ])
            ]),
            vue.createCommentVNode(" 标签分类区域 "),
            vue.createElementVNode("view", { class: "categories-section" }, [
              vue.createElementVNode("view", { class: "section-title" }, "选择技能标签"),
              vue.createElementVNode("view", { class: "categories-tab" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList(Object.keys($setup.skillCategories), (category, cIndex) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      key: cIndex,
                      class: vue.normalizeClass(["category-tab", { active: $setup.currentCategory === category }]),
                      onClick: ($event) => $setup.changeCategory(category)
                    }, [
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString(category),
                        1
                        /* TEXT */
                      )
                    ], 10, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ]),
              vue.createCommentVNode(" 当前分类的标签列表 "),
              vue.createElementVNode("view", { class: "tag-list" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.skillCategories[$setup.currentCategory], (tag, tIndex) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      key: tIndex,
                      class: vue.normalizeClass(["tag", { active: $setup.isTagSelected(tag.tagName) }]),
                      onClick: ($event) => $setup.toggleTag(tag.tagName)
                    }, [
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString(tag.tagName),
                        1
                        /* TEXT */
                      )
                    ], 10, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ]),
            vue.createCommentVNode(" 提示信息 "),
            vue.createElementVNode("view", { class: "tips-section" }, [
              vue.createElementVNode("text", { class: "tip-text" }, "提示：精确的技能标签有助于AI更准确地为您推荐合适的团队")
            ])
          ])
        ],
        2112
        /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
      ))
    ]);
  }
  const PagesProfileEditSkills = /* @__PURE__ */ _export_sfc(_sfc_main$e, [["render", _sfc_render$d], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/profile/edit-skills.vue"]]);
  const _sfc_main$d = {
    __name: "edit-awards",
    setup(__props, { expose: __expose }) {
      __expose();
      const userInfo = vue.ref({
        awardsHistory: [],
        realName: "",
        schoolId: null,
        major: "",
        bio: "",
        skillTags: []
      });
      const awardsList = vue.ref([]);
      const levelOptions = ["国家级", "省级", "市级", "校级", "院级", "其他"];
      const levelIndex = vue.ref(0);
      const editingAward = vue.ref({
        awardName: "",
        level: "",
        organization: "",
        awardTime: ""
      });
      const isEditing = vue.ref(false);
      const editingIndex = vue.ref(-1);
      const loading = vue.ref(true);
      const awardPopup = vue.ref(null);
      async function getUserProfile() {
        try {
          loading.value = true;
          const res = await userApi.getUserProfile();
          if (res.code === 200 && res.data) {
            userInfo.value = res.data;
            if (userInfo.value.awardsHistory && Array.isArray(userInfo.value.awardsHistory)) {
              awardsList.value = [...userInfo.value.awardsHistory];
            }
            formatAppLog("log", "at pages/profile/edit-awards.vue:177", "获取到用户资料:", userInfo.value);
          } else {
            uni.showToast({
              title: res.message || "获取资料失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/profile/edit-awards.vue:185", "获取用户资料失败:", error);
          uni.showToast({
            title: "获取个人资料失败",
            icon: "none"
          });
        } finally {
          loading.value = false;
        }
      }
      function editAward(index) {
        if (index >= 0 && index < awardsList.value.length) {
          isEditing.value = true;
          editingIndex.value = index;
          editingAward.value = { ...awardsList.value[index] };
          const level = editingAward.value.level;
          const idx = levelOptions.indexOf(level);
          levelIndex.value = idx >= 0 ? idx : 0;
          showPopup();
        }
      }
      function deleteAward(index) {
        uni.showModal({
          title: "删除确认",
          content: "确定要删除这条获奖记录吗？",
          success: function(res) {
            if (res.confirm) {
              awardsList.value.splice(index, 1);
              uni.showToast({
                title: "已删除",
                icon: "success"
              });
            }
          }
        });
      }
      function showAwardForm(index) {
        if (index === null) {
          isEditing.value = false;
          editingIndex.value = -1;
          editingAward.value = {
            awardName: "",
            level: levelOptions[0],
            organization: "",
            awardTime: ""
          };
          levelIndex.value = 0;
        }
        showPopup();
      }
      function showPopup() {
        if (awardPopup.value) {
          awardPopup.value.open();
        }
      }
      function closeAwardForm() {
        if (awardPopup.value) {
          awardPopup.value.close();
        }
      }
      function onLevelChange(e) {
        const index = e.detail.value;
        levelIndex.value = index;
        editingAward.value.level = levelOptions[index];
      }
      function onDateChange(e) {
        editingAward.value.awardTime = e.detail.value;
      }
      function confirmAwardEdit() {
        if (!editingAward.value.awardName || editingAward.value.awardName.trim() === "") {
          uni.showToast({
            title: "请输入奖项名称",
            icon: "none"
          });
          return;
        }
        if (!editingAward.value.level) {
          uni.showToast({
            title: "请选择获奖级别",
            icon: "none"
          });
          return;
        }
        if (!editingAward.value.organization || editingAward.value.organization.trim() === "") {
          uni.showToast({
            title: "请输入颁发机构",
            icon: "none"
          });
          return;
        }
        if (!editingAward.value.awardTime) {
          uni.showToast({
            title: "请选择获奖时间",
            icon: "none"
          });
          return;
        }
        if (isEditing.value && editingIndex.value >= 0) {
          awardsList.value[editingIndex.value] = { ...editingAward.value };
        } else {
          awardsList.value.push({ ...editingAward.value });
        }
        closeAwardForm();
        uni.showToast({
          title: isEditing.value ? "修改成功" : "添加成功",
          icon: "success"
        });
      }
      async function saveChanges() {
        try {
          uni.showLoading({
            title: "保存中..."
          });
          const updateData = {
            realName: userInfo.value.realName,
            schoolId: userInfo.value.schoolId,
            major: userInfo.value.major,
            bio: userInfo.value.bio,
            skillTags: userInfo.value.skillTags || [],
            awardsHistory: awardsList.value
          };
          const res = await userApi.updateUserProfile(updateData);
          if (res.code === 200) {
            uni.showToast({
              title: "保存成功",
              icon: "success"
            });
            setTimeout(() => {
              goBack();
            }, 1500);
          } else {
            uni.showToast({
              title: res.message || "保存失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/profile/edit-awards.vue:356", "保存用户资料失败:", error);
          uni.showToast({
            title: "保存失败，请稍后再试",
            icon: "none"
          });
        } finally {
          uni.hideLoading();
        }
      }
      function goBack() {
        uni.navigateBack();
      }
      vue.onMounted(() => {
        getUserProfile();
      });
      const __returned__ = { userInfo, awardsList, levelOptions, levelIndex, editingAward, isEditing, editingIndex, loading, awardPopup, getUserProfile, editAward, deleteAward, showAwardForm, showPopup, closeAwardForm, onLevelChange, onDateChange, confirmAwardEdit, saveChanges, goBack, ref: vue.ref, onMounted: vue.onMounted, get userApi() {
        return userApi;
      }, SvgIcon };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$c(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_0$3);
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createElementVNode("view", { class: "header" }, [
        vue.createElementVNode("view", {
          class: "back-btn",
          onClick: $setup.goBack
        }, [
          vue.createVNode($setup["SvgIcon"], {
            name: "back",
            size: "20"
          })
        ]),
        vue.createElementVNode("text", { class: "header-title" }, "编辑获奖经历"),
        vue.createElementVNode("view", {
          class: "save-btn",
          onClick: $setup.saveChanges
        }, [
          vue.createElementVNode("text", null, "保存")
        ])
      ]),
      vue.createCommentVNode(" 加载中显示 "),
      $setup.loading ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 0,
        class: "loading-container"
      }, [
        vue.createElementVNode("view", { class: "loading-circle" }),
        vue.createElementVNode("text", { class: "loading-text" }, "加载中...")
      ])) : (vue.openBlock(), vue.createElementBlock(
        vue.Fragment,
        { key: 1 },
        [
          vue.createCommentVNode(" 编辑内容 "),
          vue.createElementVNode("scroll-view", {
            "scroll-y": "",
            class: "content-scroll"
          }, [
            vue.createCommentVNode(" 获奖列表 "),
            vue.createElementVNode("view", { class: "awards-list" }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.awardsList, (award, index) => {
                  return vue.openBlock(), vue.createElementBlock("view", {
                    key: index,
                    class: "award-item"
                  }, [
                    vue.createElementVNode("view", { class: "award-content" }, [
                      vue.createElementVNode("view", { class: "award-header" }, [
                        vue.createElementVNode(
                          "text",
                          { class: "award-name" },
                          vue.toDisplayString(award.awardName),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode(
                          "text",
                          { class: "award-level" },
                          vue.toDisplayString(award.level),
                          1
                          /* TEXT */
                        )
                      ]),
                      vue.createElementVNode("view", { class: "award-detail" }, [
                        vue.createElementVNode(
                          "text",
                          { class: "award-org" },
                          vue.toDisplayString(award.organization),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode(
                          "text",
                          { class: "award-time" },
                          vue.toDisplayString(award.awardTime),
                          1
                          /* TEXT */
                        )
                      ])
                    ]),
                    vue.createElementVNode("view", { class: "award-actions" }, [
                      vue.createElementVNode("view", {
                        class: "action-btn edit-btn",
                        onClick: ($event) => $setup.editAward(index)
                      }, [
                        vue.createElementVNode("text", { class: "iconfont icon-edit" })
                      ], 8, ["onClick"]),
                      vue.createElementVNode("view", {
                        class: "action-btn delete-btn",
                        onClick: ($event) => $setup.deleteAward(index)
                      }, [
                        vue.createElementVNode("text", { class: "iconfont icon-trash" })
                      ], 8, ["onClick"])
                    ])
                  ]);
                }),
                128
                /* KEYED_FRAGMENT */
              )),
              vue.createCommentVNode(" 没有获奖记录时显示 "),
              $setup.awardsList.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "empty-state"
              }, [
                vue.createElementVNode("text", null, "暂无获奖记录，点击下方添加按钮添加")
              ])) : vue.createCommentVNode("v-if", true)
            ]),
            vue.createCommentVNode(" 添加按钮 "),
            vue.createElementVNode("view", {
              class: "add-btn",
              onClick: _cache[0] || (_cache[0] = ($event) => $setup.showAwardForm(null))
            }, [
              vue.createElementVNode("text", { class: "iconfont icon-plus" }),
              vue.createElementVNode("text", { class: "add-text" }, "添加获奖经历")
            ])
          ])
        ],
        2112
        /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
      )),
      vue.createCommentVNode(" 获奖经历编辑弹窗 "),
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "awardPopup",
          type: "center"
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "award-form" }, [
              vue.createElementVNode("view", { class: "form-header" }, [
                vue.createElementVNode(
                  "text",
                  { class: "form-title" },
                  vue.toDisplayString($setup.isEditing ? "编辑获奖经历" : "添加获奖经历"),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode("text", {
                  class: "close-icon",
                  onClick: $setup.closeAwardForm
                }, "×")
              ]),
              vue.createElementVNode("view", { class: "form-body" }, [
                vue.createElementVNode("view", { class: "form-item" }, [
                  vue.createElementVNode("text", { class: "form-label" }, [
                    vue.createTextVNode("奖项名称"),
                    vue.createElementVNode("text", { class: "required" }, "*")
                  ]),
                  vue.withDirectives(vue.createElementVNode(
                    "input",
                    {
                      class: "form-input",
                      type: "text",
                      "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.editingAward.awardName = $event),
                      placeholder: "请输入奖项名称",
                      maxlength: "50"
                    },
                    null,
                    512
                    /* NEED_PATCH */
                  ), [
                    [vue.vModelText, $setup.editingAward.awardName]
                  ])
                ]),
                vue.createElementVNode("view", { class: "form-item" }, [
                  vue.createElementVNode("text", { class: "form-label" }, [
                    vue.createTextVNode("获奖级别"),
                    vue.createElementVNode("text", { class: "required" }, "*")
                  ]),
                  vue.createElementVNode("picker", {
                    class: "form-picker",
                    range: $setup.levelOptions,
                    value: $setup.levelIndex,
                    onChange: $setup.onLevelChange
                  }, [
                    vue.createElementVNode(
                      "view",
                      { class: "picker-text" },
                      vue.toDisplayString($setup.editingAward.level || "请选择获奖级别"),
                      1
                      /* TEXT */
                    )
                  ], 40, ["value"])
                ]),
                vue.createElementVNode("view", { class: "form-item" }, [
                  vue.createElementVNode("text", { class: "form-label" }, [
                    vue.createTextVNode("颁发机构"),
                    vue.createElementVNode("text", { class: "required" }, "*")
                  ]),
                  vue.withDirectives(vue.createElementVNode(
                    "input",
                    {
                      class: "form-input",
                      type: "text",
                      "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => $setup.editingAward.organization = $event),
                      placeholder: "请输入颁发机构",
                      maxlength: "50"
                    },
                    null,
                    512
                    /* NEED_PATCH */
                  ), [
                    [vue.vModelText, $setup.editingAward.organization]
                  ])
                ]),
                vue.createElementVNode("view", { class: "form-item" }, [
                  vue.createElementVNode("text", { class: "form-label" }, [
                    vue.createTextVNode("获奖时间"),
                    vue.createElementVNode("text", { class: "required" }, "*")
                  ]),
                  vue.createElementVNode("picker", {
                    class: "form-picker",
                    mode: "date",
                    fields: "month",
                    value: $setup.editingAward.awardTime,
                    onChange: $setup.onDateChange
                  }, [
                    vue.createElementVNode(
                      "view",
                      { class: "picker-text" },
                      vue.toDisplayString($setup.editingAward.awardTime || "请选择获奖时间"),
                      1
                      /* TEXT */
                    )
                  ], 40, ["value"])
                ])
              ]),
              vue.createElementVNode("view", { class: "form-footer" }, [
                vue.createElementVNode("button", {
                  class: "cancel-btn",
                  onClick: $setup.closeAwardForm
                }, "取消"),
                vue.createElementVNode("button", {
                  class: "confirm-btn",
                  onClick: $setup.confirmAwardEdit
                }, "确认")
              ])
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesProfileEditAwards = /* @__PURE__ */ _export_sfc(_sfc_main$d, [["render", _sfc_render$c], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/profile/edit-awards.vue"]]);
  const _sfc_main$c = {
    __name: "my-awards",
    setup(__props, { expose: __expose }) {
      __expose();
      const loading = vue.ref(true);
      const refreshing = vue.ref(false);
      const awardsList = vue.ref([]);
      const currentPage = vue.ref(1);
      const pageSize2 = vue.ref(10);
      const hasMore = vue.ref(true);
      const myTeams = vue.ref([]);
      async function getAwardsList(isRefresh = false) {
        if (isRefresh) {
          currentPage.value = 1;
          hasMore.value = true;
          awardsList.value = [];
        }
        if (!hasMore.value && !isRefresh)
          return;
        try {
          loading.value = true;
          const teamsRes = await teamApi.getMyTeams();
          if (teamsRes && teamsRes.code === 200 && teamsRes.data) {
            myTeams.value = teamsRes.data;
            let allAwards = [];
            for (const team of myTeams.value) {
              try {
                const teamMembersRes = await teamApi.getTeamMembers(team.id);
                let memberAvatars = [];
                let teamMembers = 0;
                if (teamMembersRes && teamMembersRes.code === 200 && teamMembersRes.data) {
                  const members = teamMembersRes.data;
                  teamMembers = members.length;
                  members.forEach((member) => {
                    if (member.userAvatarUrl) {
                      memberAvatars.push(member.userAvatarUrl);
                    }
                  });
                  const leaderMember = members.find((m) => m.isLeader === true);
                  if (leaderMember && leaderMember.userAvatarUrl) {
                    memberAvatars = memberAvatars.filter((avatar) => avatar !== leaderMember.userAvatarUrl);
                    memberAvatars.unshift(leaderMember.userAvatarUrl);
                  }
                }
                const awardsRes = await competitionResultsApi.getTeamAwards(team.id);
                if (awardsRes && awardsRes.code === 200 && awardsRes.data) {
                  const teamAwards = awardsRes.data;
                  teamAwards.forEach((award) => {
                    try {
                      let awardDetails = {};
                      let metadata = {};
                      if (award.awardDetails) {
                        awardDetails = typeof award.awardDetails === "string" ? JSON.parse(award.awardDetails) : award.awardDetails;
                      }
                      if (award.metadata) {
                        metadata = typeof award.metadata === "string" ? JSON.parse(award.metadata) : award.metadata;
                      }
                      allAwards.push({
                        ...award,
                        awardDetails,
                        metadata,
                        teamName: team.name,
                        teamLogo: team.leaderAvatarUrl,
                        memberAvatars,
                        teamMembers
                      });
                    } catch (e) {
                      formatAppLog("error", "at pages/profile/my-awards.vue:242", "处理获奖记录错误:", e);
                    }
                  });
                }
              } catch (e) {
                formatAppLog("error", "at pages/profile/my-awards.vue:247", `获取团队 ${team.id} 信息失败:`, e);
              }
            }
            allAwards.sort((a, b) => {
              if (!a.announcedAt)
                return 1;
              if (!b.announcedAt)
                return -1;
              return new Date(b.announcedAt) - new Date(a.announcedAt);
            });
            const startIndex = (currentPage.value - 1) * pageSize2.value;
            const endIndex = currentPage.value * pageSize2.value;
            const pageAwards = allAwards.slice(startIndex, endIndex);
            if (isRefresh) {
              awardsList.value = pageAwards;
            } else {
              awardsList.value = [...awardsList.value, ...pageAwards];
            }
            hasMore.value = endIndex < allAwards.length;
            if (isRefresh) {
              refreshing.value = false;
              uni.showToast({
                title: "刷新成功",
                icon: "success",
                duration: 1500
              });
            }
            if (hasMore.value) {
              currentPage.value++;
            }
          } else {
            formatAppLog("warn", "at pages/profile/my-awards.vue:287", "获取用户团队失败:", teamsRes);
            if (isRefresh) {
              refreshing.value = false;
            }
          }
        } catch (error) {
          formatAppLog("error", "at pages/profile/my-awards.vue:293", "获取获奖记录错误:", error);
          if (isRefresh) {
            refreshing.value = false;
            uni.showToast({
              title: "刷新失败",
              icon: "none",
              duration: 1500
            });
          }
        } finally {
          loading.value = false;
        }
      }
      function refreshData() {
        refreshing.value = true;
        getAwardsList(true);
      }
      function loadMore() {
        if (hasMore.value && !loading.value) {
          getAwardsList();
        }
      }
      function getAwardClass(awardType) {
        switch (awardType) {
          case "金奖":
            return "gold-award";
          case "银奖":
            return "silver-award";
          case "铜奖":
            return "bronze-award";
          case "特等奖":
            return "special-award";
          case "一等奖":
            return "first-award";
          case "二等奖":
            return "second-award";
          case "三等奖":
            return "third-award";
          case "优秀奖":
            return "excellent-award";
          case "入选":
            return "selected-award";
          default:
            return "";
        }
      }
      function formatDate(dateString) {
        if (!dateString)
          return "未知时间";
        try {
          const date = new Date(dateString);
          return `${date.getFullYear()}年${date.getMonth() + 1}月${date.getDate()}日`;
        } catch (e) {
          formatAppLog("error", "at pages/profile/my-awards.vue:354", "日期格式化失败:", e);
          return "日期格式有误";
        }
      }
      function viewCompetition(competitionId) {
        uni.navigateTo({
          url: `/pages/competition/detail?id=${competitionId}`
        });
      }
      function viewTeam(teamId) {
        uni.navigateTo({
          url: `/pages/team/detail?id=${teamId}`
        });
      }
      function gotoCompetitions() {
        uni.switchTab({
          url: "/pages/competition/index"
        });
      }
      function navigateBack() {
        uni.navigateBack();
      }
      vue.onMounted(() => {
        getAwardsList();
      });
      const __returned__ = { loading, refreshing, awardsList, currentPage, pageSize: pageSize2, hasMore, myTeams, getAwardsList, refreshData, loadMore, getAwardClass, formatDate, viewCompetition, viewTeam, gotoCompetitions, navigateBack, ref: vue.ref, onMounted: vue.onMounted, computed: vue.computed, get api() {
        return api;
      }, get teamApi() {
        return teamApi;
      }, get competitionResultsApi() {
        return competitionResultsApi;
      }, SvgIcon, uniIcons };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$b(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createElementVNode("view", { class: "header" }, [
        vue.createElementVNode("view", {
          class: "nav-back",
          onClick: $setup.navigateBack
        }, [
          vue.createVNode($setup["SvgIcon"], {
            name: "back",
            class: "back-icon"
          })
        ]),
        vue.createElementVNode("text", { class: "page-title" }, "我的获奖")
      ]),
      vue.createCommentVNode(" 页面内容 "),
      vue.createElementVNode("view", { class: "content" }, [
        vue.createCommentVNode(" 加载中状态 "),
        $setup.loading ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 0,
          class: "loading-container"
        }, [
          vue.createElementVNode("view", { class: "spinner" }),
          vue.createElementVNode("text", { class: "loading-text" }, "加载中...")
        ])) : $setup.awardsList.length === 0 ? (vue.openBlock(), vue.createElementBlock(
          vue.Fragment,
          { key: 1 },
          [
            vue.createCommentVNode(" 数据为空状态 "),
            vue.createElementVNode("view", { class: "empty-state" }, [
              vue.createVNode($setup["uniIcons"], {
                type: "info",
                size: "60",
                color: "#CCCCCC"
              }),
              vue.createElementVNode("text", { class: "empty-text" }, "暂无获奖记录"),
              vue.createElementVNode("text", { class: "empty-desc" }, "参加更多比赛，努力获取奖项！"),
              vue.createElementVNode("button", {
                class: "primary-btn",
                onClick: $setup.gotoCompetitions
              }, "去看看比赛")
            ])
          ],
          2112
          /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
        )) : (vue.openBlock(), vue.createElementBlock(
          vue.Fragment,
          { key: 2 },
          [
            vue.createCommentVNode(" 获奖列表 "),
            vue.createElementVNode("scroll-view", {
              "scroll-y": "",
              class: "award-list",
              onScrolltolower: $setup.loadMore,
              "refresher-enabled": "",
              "refresher-triggered": $setup.refreshing,
              onRefresherrefresh: $setup.refreshData
            }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.awardsList, (award) => {
                  return vue.openBlock(), vue.createElementBlock("view", {
                    class: "award-item",
                    key: award.id
                  }, [
                    vue.createCommentVNode(" 奖项标记 "),
                    vue.createElementVNode(
                      "view",
                      {
                        class: vue.normalizeClass(["award-badge", $setup.getAwardClass(award.awardType)])
                      },
                      vue.toDisplayString(award.awardType),
                      3
                      /* TEXT, CLASS */
                    ),
                    vue.createCommentVNode(" 状态标记 "),
                    vue.createElementVNode(
                      "view",
                      {
                        class: vue.normalizeClass(["status-badge", { "status-announced": award.resultStatus === "announced", "status-pending": award.resultStatus === "pending" }])
                      },
                      vue.toDisplayString(award.resultStatus === "announced" ? "已公布" : "待公布"),
                      3
                      /* TEXT, CLASS */
                    ),
                    vue.createCommentVNode(" 奖项内容 "),
                    vue.createElementVNode("view", { class: "award-content" }, [
                      vue.createElementVNode("view", { class: "award-header" }, [
                        vue.createElementVNode("view", { class: "team-info" }, [
                          vue.createElementVNode("image", {
                            class: "team-logo",
                            src: award.teamLogo || "/static/image/default-avatar.png",
                            mode: "aspectFill"
                          }, null, 8, ["src"]),
                          vue.createElementVNode("view", { class: "team-detail" }, [
                            vue.createElementVNode(
                              "text",
                              { class: "team-name" },
                              vue.toDisplayString(award.teamName),
                              1
                              /* TEXT */
                            ),
                            vue.createElementVNode(
                              "text",
                              { class: "competition-name" },
                              vue.toDisplayString(award.competitionName),
                              1
                              /* TEXT */
                            )
                          ])
                        ])
                      ]),
                      vue.createCommentVNode(" 奖项详情 "),
                      vue.createElementVNode("view", { class: "award-details" }, [
                        vue.createElementVNode("view", { class: "detail-item" }, [
                          vue.createElementVNode("text", { class: "detail-label" }, "获奖时间："),
                          vue.createElementVNode(
                            "text",
                            { class: "detail-value" },
                            vue.toDisplayString(award.announcedAt ? $setup.formatDate(award.announcedAt) : "待公布"),
                            1
                            /* TEXT */
                          )
                        ]),
                        award.stageName ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 0,
                          class: "detail-item"
                        }, [
                          vue.createElementVNode("text", { class: "detail-label" }, "比赛阶段："),
                          vue.createElementVNode(
                            "text",
                            { class: "detail-value" },
                            vue.toDisplayString(award.stageName),
                            1
                            /* TEXT */
                          )
                        ])) : vue.createCommentVNode("v-if", true),
                        award.awardDetails && award.awardDetails.bonus ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 1,
                          class: "detail-item"
                        }, [
                          vue.createElementVNode("text", { class: "detail-label" }, "奖金金额："),
                          vue.createElementVNode(
                            "text",
                            { class: "detail-value highlight" },
                            vue.toDisplayString(award.awardDetails.bonus) + "元",
                            1
                            /* TEXT */
                          )
                        ])) : vue.createCommentVNode("v-if", true),
                        award.awardDetails && award.awardDetails.certificate ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 2,
                          class: "detail-item"
                        }, [
                          vue.createElementVNode("text", { class: "detail-label" }, "证书编号："),
                          vue.createElementVNode(
                            "text",
                            { class: "detail-value" },
                            vue.toDisplayString(award.awardDetails.certificate),
                            1
                            /* TEXT */
                          )
                        ])) : vue.createCommentVNode("v-if", true),
                        award.metadata && award.metadata.sponsor ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 3,
                          class: "detail-item"
                        }, [
                          vue.createElementVNode("text", { class: "detail-label" }, "赞助方："),
                          vue.createElementVNode(
                            "text",
                            { class: "detail-value" },
                            vue.toDisplayString(award.metadata.sponsor),
                            1
                            /* TEXT */
                          )
                        ])) : vue.createCommentVNode("v-if", true),
                        award.metadata && award.metadata.category ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 4,
                          class: "detail-item"
                        }, [
                          vue.createElementVNode("text", { class: "detail-label" }, "奖项类别："),
                          vue.createElementVNode(
                            "text",
                            { class: "detail-value" },
                            vue.toDisplayString(award.metadata.category),
                            1
                            /* TEXT */
                          )
                        ])) : vue.createCommentVNode("v-if", true),
                        award.metadata && award.metadata.special_mention ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 5,
                          class: "detail-item"
                        }, [
                          vue.createElementVNode("text", { class: "detail-label" }, "特别提名："),
                          vue.createElementVNode(
                            "text",
                            { class: "detail-value" },
                            vue.toDisplayString(award.metadata.special_mention),
                            1
                            /* TEXT */
                          )
                        ])) : vue.createCommentVNode("v-if", true),
                        award.metadata && award.metadata.patent_support ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 6,
                          class: "detail-item"
                        }, [
                          vue.createElementVNode("text", { class: "detail-label" }, "专利支持："),
                          vue.createElementVNode(
                            "text",
                            { class: "detail-value" },
                            vue.toDisplayString(award.metadata.patent_support ? "是" : "否"),
                            1
                            /* TEXT */
                          )
                        ])) : vue.createCommentVNode("v-if", true)
                      ]),
                      vue.createCommentVNode(" 获奖队员 "),
                      award.memberAvatars && award.memberAvatars.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                        key: 0,
                        class: "team-members"
                      }, [
                        vue.createElementVNode("text", { class: "members-label" }, "获奖队员："),
                        vue.createElementVNode("view", { class: "members-avatars" }, [
                          (vue.openBlock(true), vue.createElementBlock(
                            vue.Fragment,
                            null,
                            vue.renderList(award.memberAvatars, (avatar, idx) => {
                              return vue.openBlock(), vue.createElementBlock("image", {
                                key: idx,
                                src: avatar || "/static/image/default-avatar.png",
                                class: "member-avatar"
                              }, null, 8, ["src"]);
                            }),
                            128
                            /* KEYED_FRAGMENT */
                          )),
                          award.teamMembers > award.memberAvatars.length ? (vue.openBlock(), vue.createElementBlock(
                            "view",
                            {
                              key: 0,
                              class: "more-members"
                            },
                            " +" + vue.toDisplayString(award.teamMembers - award.memberAvatars.length),
                            1
                            /* TEXT */
                          )) : vue.createCommentVNode("v-if", true)
                        ])
                      ])) : vue.createCommentVNode("v-if", true),
                      vue.createCommentVNode(" 操作按钮 "),
                      vue.createElementVNode("view", { class: "award-footer" }, [
                        vue.createElementVNode("view", { class: "footer-actions" }, [
                          vue.createElementVNode("button", {
                            class: "action-btn",
                            onClick: ($event) => $setup.viewCompetition(award.competitionId)
                          }, "查看比赛", 8, ["onClick"]),
                          vue.createElementVNode("button", {
                            class: "action-btn",
                            onClick: ($event) => $setup.viewTeam(award.teamId)
                          }, "查看队伍", 8, ["onClick"])
                        ])
                      ])
                    ])
                  ]);
                }),
                128
                /* KEYED_FRAGMENT */
              )),
              vue.createCommentVNode(" 加载更多 "),
              $setup.hasMore ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "load-more"
              }, [
                vue.createElementVNode("view", { class: "spinner-sm" }),
                vue.createElementVNode("text", { class: "load-more-text" }, "加载更多...")
              ])) : $setup.awardsList.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "no-more"
              }, [
                vue.createElementVNode("text", { class: "no-more-text" }, "没有更多数据了")
              ])) : vue.createCommentVNode("v-if", true)
            ], 40, ["refresher-triggered"])
          ],
          2112
          /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
        ))
      ])
    ]);
  }
  const PagesProfileMyAwards = /* @__PURE__ */ _export_sfc(_sfc_main$c, [["render", _sfc_render$b], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/profile/my-awards.vue"]]);
  const wsConfig = {
    url: env$1.wsUrl,
    // 使用环境配置中的WebSocket地址
    token: "",
    // 身份验证token
    debug: env$1.debug || false,
    // 是否开启调试模式
    autoReconnect: true,
    // 是否自动重连
    reconnectInterval: 5e3,
    // 重连间隔时间（毫秒）
    maxReconnectTimes: 5,
    // 最大重连次数
    heartbeat: true,
    // 是否发送心跳包
    heartbeatInterval: 3e4,
    // 心跳间隔时间（毫秒）
    heartbeatContent: "ping"
    // 心跳包内容
  };
  let socketTask = null;
  let isConnected = false;
  let reconnectCount = 0;
  let reconnectTimer = null;
  let heartbeatTimer = null;
  let messageCallback = null;
  let openCallback = null;
  let closeCallback = null;
  let errorCallback = null;
  function initConfig(options = {}) {
    Object.assign(wsConfig, options);
    log("WebSocket配置已初始化");
  }
  function connect(token) {
    if (isConnected && socketTask) {
      log("WebSocket已连接，无需重复连接");
      return socketTask;
    }
    if (token) {
      wsConfig.token = token;
    }
    let url = wsConfig.url || "";
    const validUrl = url.replace(/^http/, "ws").replace(/^https/, "wss");
    if (wsConfig.token) {
      const separator = validUrl.includes("?") ? "&" : "?";
      url = `${validUrl}${separator}token=${encodeURIComponent(wsConfig.token)}`;
    } else {
      url = validUrl;
    }
    log(`正在连接WebSocket: ${url}`);
    try {
      socketTask = uni.connectSocket({
        url,
        // 在支持的平台上启用多实例
        multiple: true,
        // 允许接收所有类型的数据
        allowArrayBuffer: true,
        success: () => {
          log("WebSocket连接创建成功");
        },
        fail: (err) => {
          log("WebSocket连接创建失败", err);
          handleError(err);
          isConnected = false;
          socketTask = null;
          if (wsConfig.autoReconnect) {
            reconnect();
          }
        },
        complete: () => {
        }
      });
      if (!socketTask) {
        log("WebSocket连接创建返回为空，可能不支持或已被拦截");
        return null;
      }
      socketTask.onOpen((res) => {
        isConnected = true;
        reconnectCount = 0;
        log("WebSocket连接已打开", res);
        if (wsConfig.heartbeat) {
          startHeartbeat();
        }
        if (openCallback) {
          openCallback(res);
        }
      });
      socketTask.onMessage((res) => {
        log("收到WebSocket消息", res.data);
        if (res.data === "pong" && wsConfig.heartbeat) {
          return;
        }
        if (messageCallback) {
          messageCallback(res.data);
        }
      });
      socketTask.onClose((res) => {
        isConnected = false;
        socketTask = null;
        log("WebSocket连接已关闭", res);
        clearTimeout(heartbeatTimer);
        if (closeCallback) {
          closeCallback(res);
        }
        if (wsConfig.autoReconnect) {
          reconnect();
        }
      });
      socketTask.onError((err) => {
        log("WebSocket连接错误", err);
        isConnected = false;
        if (errorCallback) {
          errorCallback(err);
        }
        if (wsConfig.autoReconnect) {
          setTimeout(() => {
            reconnect();
          }, 3e3);
        }
      });
      return socketTask;
    } catch (e) {
      formatAppLog("error", "at utils/websocket.js:178", "创建WebSocket连接异常", e);
      isConnected = false;
      socketTask = null;
      if (wsConfig.autoReconnect) {
        setTimeout(() => {
          reconnect();
        }, 5e3);
      }
      return null;
    }
  }
  function send(data) {
    if (!isConnected || !socketTask) {
      log("WebSocket未连接，无法发送消息");
      return false;
    }
    let sendData = data;
    if (typeof data === "object" && !(data instanceof ArrayBuffer) && data !== null) {
      sendData = JSON.stringify(data);
    }
    log("发送WebSocket消息", sendData);
    socketTask.send({
      data: sendData,
      success: () => {
        log("WebSocket消息发送成功");
      },
      fail: (err) => {
        log("WebSocket消息发送失败", err);
      }
    });
    return true;
  }
  function close(code = 1e3, reason = "主动关闭连接") {
    if (!socketTask || !isConnected) {
      log("WebSocket未连接，无法关闭");
      return false;
    }
    clearTimeout(reconnectTimer);
    clearTimeout(heartbeatTimer);
    log(`正在关闭WebSocket连接: code=${code}, reason=${reason}`);
    socketTask.close({
      code,
      reason,
      success: () => {
        log("WebSocket连接已关闭");
        isConnected = false;
        socketTask = null;
      },
      fail: (err) => {
        log("WebSocket关闭失败", err);
      }
    });
    return true;
  }
  function onMessage(callback) {
    if (typeof callback === "function") {
      messageCallback = callback;
    }
  }
  function onOpen(callback) {
    if (typeof callback === "function") {
      openCallback = callback;
    }
  }
  function onClose(callback) {
    if (typeof callback === "function") {
      closeCallback = callback;
    }
  }
  function onError(callback) {
    if (typeof callback === "function") {
      errorCallback = callback;
    }
  }
  function reconnect() {
    if (reconnectCount >= wsConfig.maxReconnectTimes) {
      log(`WebSocket重连次数已达上限(${wsConfig.maxReconnectTimes}次)，停止重连`);
      return;
    }
    reconnectCount++;
    log(`WebSocket ${reconnectCount}秒后尝试第${reconnectCount}次重连...`);
    clearTimeout(reconnectTimer);
    reconnectTimer = setTimeout(() => {
      log(`正在进行第${reconnectCount}次重连...`);
      connect();
    }, wsConfig.reconnectInterval);
  }
  function startHeartbeat() {
    clearTimeout(heartbeatTimer);
    heartbeatTimer = setTimeout(() => {
      if (isConnected) {
        log("发送心跳包", wsConfig.heartbeatContent);
        send(wsConfig.heartbeatContent);
      }
      startHeartbeat();
    }, wsConfig.heartbeatInterval);
  }
  function handleError(err) {
    formatAppLog("error", "at utils/websocket.js:344", "WebSocket错误:", err);
  }
  function log(message, data) {
    if (wsConfig.debug) {
      if (data) {
        formatAppLog("log", "at utils/websocket.js:355", `[WebSocket] ${message}`, data);
      } else {
        formatAppLog("log", "at utils/websocket.js:357", `[WebSocket] ${message}`);
      }
    }
  }
  function isSocketConnected() {
    return isConnected;
  }
  function getSocketTask() {
    return socketTask;
  }
  const websocket = {
    initConfig,
    connect,
    send,
    close,
    onMessage,
    onOpen,
    onClose,
    onError,
    isConnected: isSocketConnected,
    getSocketTask
  };
  const notificationTypes = {
    "system_announcement": "系统公告",
    "team_invite": "团队邀请",
    "team_application_received": "收到队伍申请",
    "team_application_result": "队伍申请结果",
    "task_application": "任务申请",
    "task_update": "任务更新",
    "team_application": "队伍申请",
    "badge_application": "徽章申请"
  };
  let notificationCallback = null;
  function initNotificationService(callback) {
    if (typeof callback === "function") {
      notificationCallback = callback;
    }
    const token = getToken();
    if (!token) {
      formatAppLog("warn", "at utils/notification-service.js:38", "通知服务初始化失败: 用户未登录或无效的token");
      setTimeout(() => {
        try {
          const pages = getCurrentPages();
          if (pages.length === 0 || !pages[pages.length - 1].route.includes("login")) {
            formatAppLog("log", "at utils/notification-service.js:45", "无效的登录状态，准备跳转到登录页面");
            uni.navigateTo({
              url: "/pages/login/login"
            });
          }
        } catch (e) {
          formatAppLog("error", "at utils/notification-service.js:51", "跳转到登录页面失败:", e);
        }
      }, 500);
      return false;
    }
    websocket.onOpen((res) => {
      formatAppLog("log", "at utils/notification-service.js:59", "通知服务: WebSocket连接已打开", res);
      const token2 = getToken();
      if (token2) {
        formatAppLog("log", "at utils/notification-service.js:64", "通知服务: 发送认证消息");
        websocket.send({
          type: "auth",
          token: token2
        });
      } else {
        formatAppLog("warn", "at utils/notification-service.js:70", "通知服务: 无法发送认证消息，token不存在");
      }
    });
    websocket.onMessage((data) => {
      formatAppLog("log", "at utils/notification-service.js:75", "通知服务: 收到WebSocket消息", data);
      try {
        let message;
        if (typeof data === "string") {
          message = JSON.parse(data);
        } else {
          message = data;
        }
        if (message.typeId || message.type) {
          const notification = parseNotification(message);
          if (notificationCallback) {
            notificationCallback(notification);
          }
        }
      } catch (e) {
        formatAppLog("error", "at utils/notification-service.js:96", "通知服务: 解析WebSocket消息失败", e);
      }
    });
    websocket.onClose((res) => {
      formatAppLog("log", "at utils/notification-service.js:101", "通知服务: WebSocket连接已关闭", res);
    });
    websocket.onError((err) => {
      formatAppLog("error", "at utils/notification-service.js:105", "通知服务: WebSocket连接错误", err);
    });
    websocket.initConfig({
      debug: true,
      autoReconnect: true,
      heartbeat: true,
      token
      // 直接在配置中设置token
    });
    const socketTask2 = websocket.connect(token);
    return !!socketTask2;
  }
  function parseNotification(message) {
    return {
      id: message.id || Date.now(),
      // 如果没有id，使用时间戳
      userId: message.userId,
      title: message.title || "",
      content: message.content || "",
      typeId: message.typeId || message.type || "system_announcement",
      typeName: getNotificationType(message.typeId || message.type),
      category: message.category || null,
      isRead: message.isRead || false,
      createdAt: message.createdAt || (/* @__PURE__ */ new Date()).toISOString(),
      relatedId: message.relatedId || null,
      relatedType: message.relatedType || null,
      dynamicData: message.dynamicData || null,
      priority: message.priority || 0,
      expireAt: message.expireAt || null,
      // UI展示用属性
      time: formatTime(message.createdAt || /* @__PURE__ */ new Date()),
      avatar: getAvatarByType(message.typeId || message.type),
      actions: getActionsForType(message.typeId || message.type, message.relatedType, message.relatedId)
    };
  }
  function getAvatarByType(typeId) {
    const avatarMap = {
      "system_announcement": "/static/avatars/system.png",
      "team_application_received": "/static/avatars/team.png",
      "team_invite": "/static/avatars/team.png",
      "task_application": "/static/avatars/task.png",
      "task_update": "/static/avatars/task.png",
      "badge_application": "/static/avatars/badge.png",
      "friend_request": "/static/avatars/user.png"
    };
    return avatarMap[typeId] || "/static/avatars/system.png";
  }
  function getNotificationType(typeId) {
    return notificationTypes[typeId] || "系统通知";
  }
  function getActionsForType(typeId, relatedType, relatedId) {
    if (typeId === "system_announcement") {
      return [{ name: "查看", type: "view", primary: true }];
    } else if (typeId === "team_invite") {
      return [
        { name: "接受", type: "accept", primary: true },
        { name: "拒绝", type: "reject", primary: false }
      ];
    } else if (typeId === "team_application_received") {
      return [
        { name: "接受", type: "accept", primary: true },
        { name: "拒绝", type: "reject", primary: false }
      ];
    } else if (typeId.includes("task_application") || typeId.includes("team_application") || typeId.includes("badge_application")) {
      return [{ name: "查看", type: "view", primary: true }];
    }
    return [{ name: "查看", type: "view", primary: true }];
  }
  function formatTime(dateStr) {
    try {
      const date = new Date(dateStr);
      const now = /* @__PURE__ */ new Date();
      const diff = now - date;
      if (diff < 60 * 1e3) {
        return "刚刚";
      } else if (diff < 60 * 60 * 1e3) {
        return Math.floor(diff / (60 * 1e3)) + "分钟前";
      } else if (diff < 24 * 60 * 60 * 1e3) {
        return Math.floor(diff / (60 * 60 * 1e3)) + "小时前";
      } else if (diff < 30 * 24 * 60 * 60 * 1e3) {
        return Math.floor(diff / (24 * 60 * 60 * 1e3)) + "天前";
      } else {
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, "0");
        const day = String(date.getDate()).padStart(2, "0");
        return `${year}-${month}-${day}`;
      }
    } catch (e) {
      formatAppLog("error", "at utils/notification-service.js:241", "格式化时间错误", e);
      return dateStr;
    }
  }
  function closeNotificationService() {
    websocket.close();
  }
  async function markAsRead(notificationId) {
    if (!notificationId)
      return;
    try {
      await notificationsApi.markAsRead(notificationId);
      websocket.send({
        type: "notification_read",
        notificationId
      });
      return true;
    } catch (error) {
      formatAppLog("error", "at utils/notification-service.js:272", "标记通知已读失败:", error);
      return false;
    }
  }
  async function markAllAsRead() {
    try {
      await notificationsApi.markAllAsRead();
      websocket.send({
        type: "notification_read_all"
      });
      return true;
    } catch (error) {
      formatAppLog("error", "at utils/notification-service.js:292", "标记所有通知已读失败:", error);
      return false;
    }
  }
  async function getUnreadCount() {
    try {
      const res = await notificationsApi.getUnreadCount();
      if (res.code === 200 && res.data !== void 0) {
        return res.data;
      }
      return 0;
    } catch (error) {
      formatAppLog("error", "at utils/notification-service.js:309", "获取未读通知数量失败:", error);
      return 0;
    }
  }
  const notificationService = {
    initNotificationService,
    closeNotificationService,
    markAsRead,
    markAllAsRead,
    parseNotification,
    formatTime,
    getNotificationType,
    getUnreadCount,
    getAvatarByType,
    getActionsForType
  };
  const _imports_0$5 = "/static/empty-notification.png";
  const _sfc_main$b = {
    __name: "Xiaoxi",
    setup(__props, { expose: __expose }) {
      __expose();
      const app = getApp();
      const wsConnected = vue.ref(false);
      const activeTab = vue.ref("unread");
      const unreadCount = vue.ref(0);
      const unreadNotifications = vue.ref([]);
      const readNotifications = vue.ref([]);
      const pagination = vue.ref({
        current: 1,
        size: 10,
        total: 0,
        pages: 0
      });
      const loading = vue.ref(false);
      const refreshing = vue.ref(false);
      const hasMore = vue.ref(true);
      const isEditMode = vue.ref(false);
      const selectedItems = vue.ref([]);
      const isAllSelected = vue.computed(() => {
        const currentList = activeTab.value === "unread" ? unreadNotifications.value : readNotifications.value;
        return currentList.length > 0 && selectedItems.value.length === currentList.length;
      });
      function toggleEditMode() {
        isEditMode.value = !isEditMode.value;
        if (!isEditMode.value) {
          selectedItems.value = [];
        }
      }
      function toggleSelectItem(id) {
        const index = selectedItems.value.indexOf(id);
        if (index === -1) {
          selectedItems.value.push(id);
        } else {
          selectedItems.value.splice(index, 1);
        }
      }
      function toggleSelectAll() {
        const currentList = activeTab.value === "unread" ? unreadNotifications.value : readNotifications.value;
        if (isAllSelected.value) {
          selectedItems.value = [];
        } else {
          selectedItems.value = currentList.map((item) => item.id);
        }
      }
      function confirmBatchDelete() {
        if (selectedItems.value.length === 0) {
          uni.showToast({
            title: "请先选择要删除的通知",
            icon: "none"
          });
          return;
        }
        uni.showModal({
          title: "删除通知",
          content: `确定要删除选中的${selectedItems.value.length}条通知吗？`,
          success: (res) => {
            if (res.confirm) {
              batchDeleteNotifications2(selectedItems.value);
              toggleEditMode();
            }
          }
        });
      }
      function handleNewNotification(notification) {
        formatAppLog("log", "at pages/Xiaoxi/Xiaoxi.vue:269", "收到新通知", notification);
        const newNotification = {
          id: notification.id,
          type: notification.typeName,
          message: notification.content || notification.title,
          time: notification.time,
          avatar: getAvatarByType2(notification.typeId),
          read: notification.isRead,
          actions: notification.actions,
          // 保存原始数据，用于后续处理
          originalData: notification
        };
        if (!notification.isRead) {
          unreadNotifications.value.unshift(newNotification);
          unreadCount.value++;
        }
        readNotifications.value.unshift(newNotification);
        uni.showToast({
          title: "收到新通知",
          icon: "none"
        });
      }
      function getAvatarByType2(typeId) {
        const avatarMap = {
          "system_announcement": "/static/avatars/system.png",
          "team_application_received": "/static/avatars/team.png",
          "team_invite": "/static/avatars/team.png",
          "task_application": "/static/avatars/task.png",
          "task_update": "/static/avatars/task.png",
          "badge_application": "/static/avatars/badge.png",
          "friend_request": "/static/avatars/user.png"
        };
        return avatarMap[typeId] || "/static/avatars/system.png";
      }
      async function markAllAsRead2() {
        try {
          loading.value = true;
          const res = await notificationsApi.markAllAsRead();
          if (res.code === 200) {
            unreadNotifications.value.forEach((item) => {
              const index = readNotifications.value.findIndex((n) => n.id === item.id);
              if (index !== -1) {
                readNotifications.value[index].read = true;
              }
            });
            unreadNotifications.value = [];
            unreadCount.value = 0;
            if (app && app.resetUnreadNotificationCount) {
              app.resetUnreadNotificationCount();
            }
            uni.showToast({
              title: "已全部标记为已读",
              icon: "success"
            });
          } else {
            uni.showToast({
              title: res.message || "操作失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/Xiaoxi/Xiaoxi.vue:350", "标记全部已读失败:", error);
          uni.showToast({
            title: "操作失败，请稍后重试",
            icon: "none"
          });
        } finally {
          loading.value = false;
        }
      }
      function handleAction(type, id) {
        var _a, _b;
        const notification = (activeTab.value === "unread" ? unreadNotifications.value : readNotifications.value).find((item) => item.id === id);
        if (!notification)
          return;
        const typeId = (_a = notification.originalData) == null ? void 0 : _a.typeId;
        const relatedId = (_b = notification.originalData) == null ? void 0 : _b.relatedId;
        if (type.startsWith("task_")) {
          const statusMap = {
            "task_ongoing": "ongoing",
            "task_completed": "completed",
            "task_ended": "ended",
            "task_recruiting": "recruiting",
            "task_cancel": "canceled"
          };
          const status = statusMap[type];
          if (!status || !relatedId) {
            uni.showToast({
              title: "操作失败：缺少必要参数",
              icon: "none"
            });
            return;
          }
          if (status === "canceled") {
            uni.showModal({
              title: "取消任务",
              content: "确定要取消该任务吗？",
              editable: true,
              placeholderText: "请填写取消原因",
              success: async (res) => {
                if (res.confirm && res.content) {
                  const apiRes = await updateTaskStatus2(relatedId, status, res.content);
                  handleTaskStatusUpdateResult(apiRes, id);
                } else if (res.confirm) {
                  uni.showToast({
                    title: "取消原因不能为空",
                    icon: "none"
                  });
                }
              }
            });
            return;
          }
          const statusTextMap = {
            "recruiting": "招募中",
            "ongoing": "进行中",
            "completed": "已完成",
            "ended": "已结束",
            "canceled": "已取消"
          };
          uni.showModal({
            title: `更改状态为"${statusTextMap[status] || status}"`,
            content: `确定要将任务状态更改为"${statusTextMap[status] || status}"吗？`,
            success: async (res) => {
              if (res.confirm) {
                const apiRes = await updateTaskStatus2(relatedId, status);
                handleTaskStatusUpdateResult(apiRes, id);
              }
            }
          });
          return;
        }
        if (type === "accept") {
          let title = "接受申请";
          let content = `确定接受此${notification.type}？`;
          if (typeId && typeId.includes("team_application")) {
            title = "接受入队申请";
            content = "确定接受该成员加入队伍吗？";
          } else if (typeId && typeId.includes("task")) {
            title = "接受任务申请";
            content = "确定接受该用户的任务申请吗？";
          }
          uni.showModal({
            title,
            content,
            success: async function(res) {
              var _a2, _b2;
              if (res.confirm) {
                try {
                  loading.value = true;
                  let apiRes = null;
                  if (typeId && typeId.includes("team_application") && relatedId) {
                    apiRes = await teamApi.handleApplication(relatedId, {
                      status: "approved",
                      reviewNotes: "欢迎加入我们的队伍！"
                    });
                  } else if (typeId && typeId.includes("task_application") && relatedId) {
                    apiRes = await taskApplicationApi.updateTaskApplication(relatedId, {
                      status: "approved",
                      reviewNotes: "申请已通过，欢迎参与任务！"
                    });
                  } else {
                    apiRes = await notificationsApi.handleNotificationAction(id, "accept", {
                      relatedId: (_a2 = notification.originalData) == null ? void 0 : _a2.relatedId,
                      relatedType: (_b2 = notification.originalData) == null ? void 0 : _b2.relatedType
                    });
                  }
                  if (apiRes && (apiRes.code === 200 || apiRes.status === 200)) {
                    removeNotification(id);
                    uni.showToast({
                      title: "已接受",
                      icon: "success"
                    });
                  } else {
                    uni.showToast({
                      title: apiRes && apiRes.message || "操作失败",
                      icon: "none"
                    });
                  }
                } catch (error) {
                  formatAppLog("error", "at pages/Xiaoxi/Xiaoxi.vue:495", "接受操作失败:", error);
                  uni.showToast({
                    title: "操作失败，请稍后重试",
                    icon: "none"
                  });
                } finally {
                  loading.value = false;
                }
              }
            }
          });
        } else if (type === "reject") {
          let title = "拒绝申请";
          let content = `确定拒绝此${notification.type}？`;
          if (typeId && typeId.includes("team_application")) {
            title = "拒绝入队申请";
            content = "确定拒绝该成员加入队伍吗？";
          } else if (typeId && typeId.includes("task")) {
            title = "拒绝任务申请";
            content = "确定拒绝该用户的任务申请吗？";
          }
          uni.showModal({
            title,
            content,
            success: async function(res) {
              var _a2, _b2;
              if (res.confirm) {
                try {
                  loading.value = true;
                  let apiRes = null;
                  if (typeId && typeId.includes("team_application") && relatedId) {
                    apiRes = await teamApi.handleApplication(relatedId, {
                      status: "rejected",
                      reviewNotes: "抱歉，当前不符合队伍需求"
                    });
                  } else if (typeId && typeId.includes("task_application") && relatedId) {
                    apiRes = await taskApplicationApi.updateTaskApplication(relatedId, {
                      status: "rejected",
                      reviewNotes: "抱歉，当前不符合任务要求"
                    });
                  } else {
                    apiRes = await notificationsApi.handleNotificationAction(id, "reject", {
                      relatedId: (_a2 = notification.originalData) == null ? void 0 : _a2.relatedId,
                      relatedType: (_b2 = notification.originalData) == null ? void 0 : _b2.relatedType
                    });
                  }
                  if (apiRes && (apiRes.code === 200 || apiRes.status === 200)) {
                    removeNotification(id);
                    uni.showToast({
                      title: "已拒绝",
                      icon: "none"
                    });
                  } else {
                    uni.showToast({
                      title: apiRes && apiRes.message || "操作失败",
                      icon: "none"
                    });
                  }
                } catch (error) {
                  formatAppLog("error", "at pages/Xiaoxi/Xiaoxi.vue:565", "拒绝操作失败:", error);
                  uni.showToast({
                    title: "操作失败，请稍后重试",
                    icon: "none"
                  });
                } finally {
                  loading.value = false;
                }
              }
            }
          });
        } else if (type === "view") {
          navigateToDetail(notification);
          removeNotification(id);
        }
      }
      function handleTaskStatusUpdateResult(apiRes, notificationId) {
        if (apiRes && (apiRes.code === 200 || apiRes.status === 200)) {
          removeNotification(notificationId);
          uni.showToast({
            title: "任务状态已更新",
            icon: "success"
          });
        } else {
          uni.showToast({
            title: apiRes && apiRes.message || "操作失败",
            icon: "none"
          });
        }
      }
      const importantNotificationTypes = [
        "system_announcement",
        // 系统公告
        "team_invite",
        // 团队邀请
        "task_application"
        // 任务申请
      ];
      function readNotificationAloud(notification) {
        if (!notification || !notification.originalData || !importantNotificationTypes.includes(notification.originalData.typeId)) {
          return;
        }
        const content = `${notification.type}：${notification.message}`;
        if (window.speechSynthesis) {
          const speech = new SpeechSynthesisUtterance();
          speech.text = content;
          speech.lang = "zh-CN";
          speech.volume = 0.7;
          speech.rate = 1;
          speech.pitch = 1;
          window.speechSynthesis.speak(speech);
        }
      }
      function goBack() {
        uni.navigateBack();
      }
      function navigateToDetail(notification) {
        if (!notification || !notification.originalData)
          return;
        markNotificationAsRead(notification.id);
        readNotificationAloud(notification);
        const typeId = notification.originalData.typeId;
        const relatedId = notification.originalData.relatedId;
        formatAppLog("log", "at pages/Xiaoxi/Xiaoxi.vue:651", "准备导航，通知类型:", typeId, "关联ID:", relatedId);
        if (typeId === "team_invite" || typeId.includes("team_application")) {
          if (typeId === "team_application_received") {
            formatAppLog("log", "at pages/Xiaoxi/Xiaoxi.vue:658", "收到队伍申请，正在跳转到待我处理标签页");
            const url = `/pages/application/application?tab=1&type=team&id=${relatedId}`;
            formatAppLog("log", "at pages/Xiaoxi/Xiaoxi.vue:660", "跳转URL:", url);
            uni.navigateTo({
              url,
              success: function() {
                formatAppLog("log", "at pages/Xiaoxi/Xiaoxi.vue:664", "跳转成功");
              },
              fail: function(err) {
                formatAppLog("error", "at pages/Xiaoxi/Xiaoxi.vue:667", "跳转失败:", err);
              }
            });
          } else if (typeId === "team_application_result") {
            uni.navigateTo({
              url: `/pages/application/application?tab=0&type=team&id=${relatedId}`
            });
          } else {
            uni.navigateTo({
              url: `/pages/application/application?tab=0&type=team&id=${relatedId}`
            });
          }
        } else if (typeId.includes("task_application") || typeId.includes("task_update")) {
          uni.navigateTo({
            url: `/pages/application/application?type=task&id=${relatedId}`
          });
        } else if (typeId === "system_announcement") {
          uni.navigateTo({
            url: `/pages/notification/detail?id=${notification.id}`
          });
        } else if (typeId === "badge_application") {
          uni.navigateTo({
            url: `/pages/application/application?type=badge&id=${relatedId}`
          });
        } else {
          uni.navigateTo({
            url: `/pages/application/application`
          });
        }
      }
      function handleNotificationView(notification, index) {
        if (notification.read)
          return;
        notification.isReading = true;
        notification.viewStartTime = Date.now();
        notification.viewTimer = setTimeout(() => {
          markNotificationAsRead(notification.id);
        }, 2e3);
      }
      function handleNotificationLeave(notification) {
        notification.isReading = false;
        if (notification.viewTimer) {
          clearTimeout(notification.viewTimer);
          notification.viewTimer = null;
        }
        if (notification.read)
          return;
        if (notification.viewStartTime && Date.now() - notification.viewStartTime > 1e3) {
          markNotificationAsRead(notification.id);
        }
      }
      function isNotificationVisible(element) {
        if (!element)
          return false;
        const rect = element.getBoundingClientRect();
        const windowHeight = window.innerHeight || document.documentElement.clientHeight;
        return rect.top >= 0 && rect.bottom <= windowHeight && rect.height > 0;
      }
      function handleScroll() {
        if (isEditMode.value)
          return;
        const notifications = activeTab.value === "unread" ? unreadNotifications.value : readNotifications.value;
        const notificationElements = document.querySelectorAll(".notification-item");
        notificationElements.forEach((element, index) => {
          if (index < notifications.length && isNotificationVisible(element)) {
            const notification = notifications[index];
            if (!notification.read && !notification.scrollTimer) {
              notification.scrollTimer = setTimeout(() => {
                markNotificationAsRead(notification.id);
                notification.scrollTimer = null;
              }, 3e3);
            }
          }
        });
      }
      async function markNotificationAsRead(id) {
        const unreadIndex = unreadNotifications.value.findIndex((item) => item.id === id);
        if (unreadIndex === -1) {
          return;
        }
        try {
          if (unreadIndex !== -1) {
            const notification = unreadNotifications.value.splice(unreadIndex, 1)[0];
            notification.read = true;
            readNotifications.value.unshift(notification);
            unreadCount.value--;
            if (app && app.globalData) {
              app.globalData.unreadNotificationCount = Math.max(0, app.globalData.unreadNotificationCount - 1);
              if (app.updateMessageBadge) {
                app.updateMessageBadge();
              }
            }
          }
          await notificationsApi.markAsRead(id);
        } catch (error) {
          formatAppLog("error", "at pages/Xiaoxi/Xiaoxi.vue:817", "标记已读失败:", error);
        }
      }
      function monitorWebSocketStatus() {
        const statusTimer = setInterval(() => {
          wsConnected.value = websocket.isConnected();
        }, 5e3);
        vue.onUnmounted(() => {
          clearInterval(statusTimer);
        });
      }
      async function loadNotifications(refresh = false) {
        if (loading.value)
          return;
        try {
          loading.value = true;
          if (refresh) {
            pagination.value.current = 1;
            refreshing.value = true;
          }
          const res = await notificationsApi.getNotificationList({
            pageNum: pagination.value.current,
            pageSize: pagination.value.size,
            onlyUnread: activeTab.value === "unread",
            // 未读标签页只请求未读通知
            onlyRead: activeTab.value === "read"
            // 已读标签页只请求已读通知
          });
          if (res.code === 200 && res.data) {
            const notifications = (res.data.records || []).map((item) => {
              return {
                id: item.id,
                type: item.typeName,
                message: item.content || item.title,
                time: formatTime2(item.createdAt),
                avatar: getAvatarByType2(item.typeId),
                read: item.isRead,
                // 确保正确映射已读状态
                actions: getActionsForNotification(item),
                originalData: item,
                // 添加UI状态属性
                isReading: false,
                viewStartTime: null,
                viewTimer: null,
                scrollTimer: null
              };
            });
            pagination.value = {
              current: res.data.current,
              size: res.data.size,
              total: res.data.total,
              pages: res.data.pages
            };
            hasMore.value = pagination.value.current < pagination.value.pages;
            if (refresh) {
              if (activeTab.value === "unread") {
                unreadNotifications.value = notifications.filter((item) => !item.read);
              } else if (activeTab.value === "read") {
                readNotifications.value = notifications.filter((item) => item.read);
              }
            } else {
              if (activeTab.value === "unread") {
                const newUnread = notifications.filter((item) => !item.read);
                unreadNotifications.value = [...unreadNotifications.value, ...newUnread];
              } else if (activeTab.value === "read") {
                const newRead = notifications.filter((item) => item.read);
                readNotifications.value = [...readNotifications.value, ...newRead];
              }
            }
            if (activeTab.value === "unread" || refresh) {
              unreadCount.value = activeTab.value === "unread" ? unreadNotifications.value.length : notifications.filter((item) => !item.read).length;
              if (app && app.globalData) {
                app.globalData.unreadNotificationCount = unreadCount.value;
                updateTabBarBadge(unreadCount.value);
              }
            }
          } else {
            uni.showToast({
              title: res.message || "获取通知失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/Xiaoxi/Xiaoxi.vue:930", "获取通知列表失败:", error);
          uni.showToast({
            title: "获取通知失败",
            icon: "none"
          });
        } finally {
          loading.value = false;
          refreshing.value = false;
        }
      }
      function updateTabBarBadge(count) {
        if (!app || !app.updateMessageBadge)
          return;
        try {
          app.updateMessageBadge();
        } catch (error) {
          try {
            if (count > 0) {
              uni.setTabBarBadge({
                index: 4,
                // 消息页面的TabBar索引，根据实际情况调整
                text: count.toString()
              }).catch((err) => {
                formatAppLog("log", "at pages/Xiaoxi/Xiaoxi.vue:956", "设置TabBar徽标失败，可能不在TabBar页面", err);
              });
            } else {
              uni.removeTabBarBadge({
                index: 4
              }).catch((err) => {
                formatAppLog("log", "at pages/Xiaoxi/Xiaoxi.vue:963", "移除TabBar徽标失败，可能不在TabBar页面", err);
              });
            }
          } catch (e) {
            formatAppLog("log", "at pages/Xiaoxi/Xiaoxi.vue:968", "TabBar操作失败，可能不在TabBar页面");
          }
        }
      }
      function isProcessedApplication(notification) {
        if (!notification)
          return false;
        if (notification.typeId) {
          if (notification.typeId.includes("approved") || notification.typeId.includes("rejected") || notification.typeId.includes("result") || notification.typeId.includes("processed")) {
            return true;
          }
        }
        if (notification.originalData) {
          if (notification.originalData.isProcessed || notification.originalData.status === "approved" || notification.originalData.status === "rejected" || notification.originalData.status === "canceled") {
            return true;
          }
        }
        if (notification.message) {
          const processedKeywords = [
            "已批准",
            "已接受",
            "已拒绝",
            "已处理",
            "已取消",
            "已同意",
            "已完成",
            "已结束",
            "批准了",
            "拒绝了"
          ];
          for (const keyword of processedKeywords) {
            if (notification.message.includes(keyword)) {
              return true;
            }
          }
        }
        return false;
      }
      function isCreatorOrManager(notification) {
        if (!notification || !notification.originalData)
          return false;
        return notification.originalData.isCreator || notification.originalData.isManager || notification.originalData.role === "leader" || notification.originalData.role === "creator" || notification.originalData.role === "admin";
      }
      function getActionsForNotification(notification) {
        var _a;
        if (isProcessedApplication(notification)) {
          return [{ name: "查看", type: "view", primary: true }];
        }
        if (notification.typeId && notification.typeId.includes("team_application") && !notification.isRead) {
          if (notification.typeId.includes("sent") || notification.originalData && notification.originalData.role === "applicant" || !isCreatorOrManager(notification)) {
            return [{ name: "查看", type: "view", primary: true }];
          }
          return [
            { name: "接受", type: "accept", primary: true },
            { name: "拒绝", type: "reject", primary: false }
          ];
        } else if (notification.typeId === "team_invite" && !notification.isRead) {
          if (notification.originalData && notification.originalData.role === "leader") {
            return [{ name: "查看", type: "view", primary: true }];
          }
          return [
            { name: "接受", type: "accept", primary: true },
            { name: "拒绝", type: "reject", primary: false }
          ];
        } else if (notification.typeId && notification.typeId.includes("task_application") && !notification.isRead) {
          if (!notification.typeId.includes("received") || !isCreatorOrManager(notification) || notification.originalData && notification.originalData.role === "applicant") {
            return [{ name: "查看", type: "view", primary: true }];
          }
          return [
            { name: "接受", type: "accept", primary: true },
            { name: "拒绝", type: "reject", primary: false }
          ];
        } else if (notification.typeId && notification.typeId.includes("task_update") && isCreatorOrManager(notification) && !notification.isRead) {
          const currentStatus = (_a = notification.originalData) == null ? void 0 : _a.taskStatus;
          if (currentStatus === "recruiting") {
            return [
              { name: "开始进行", type: "task_ongoing", primary: true },
              { name: "取消任务", type: "task_cancel", primary: false },
              { name: "查看详情", type: "view", primary: false }
            ];
          } else if (currentStatus === "ongoing") {
            return [
              { name: "标记完成", type: "task_completed", primary: true },
              { name: "结束任务", type: "task_ended", primary: false },
              { name: "查看详情", type: "view", primary: false }
            ];
          } else {
            return [{ name: "查看详情", type: "view", primary: true }];
          }
        } else {
          return [{ name: "查看", type: "view", primary: true }];
        }
      }
      function formatTime2(dateStr) {
        try {
          const date = new Date(dateStr);
          const now = /* @__PURE__ */ new Date();
          const diff = now - date;
          if (diff < 60 * 1e3) {
            return "刚刚";
          } else if (diff < 60 * 60 * 1e3) {
            return Math.floor(diff / (60 * 1e3)) + "分钟前";
          } else if (diff < 24 * 60 * 60 * 1e3) {
            return Math.floor(diff / (60 * 60 * 1e3)) + "小时前";
          } else if (diff < 30 * 24 * 60 * 60 * 1e3) {
            return Math.floor(diff / (24 * 60 * 60 * 1e3)) + "天前";
          } else {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, "0");
            const day = String(date.getDate()).padStart(2, "0");
            return `${year}-${month}-${day}`;
          }
        } catch (e) {
          formatAppLog("error", "at pages/Xiaoxi/Xiaoxi.vue:1132", "格式化时间错误", e);
          return dateStr;
        }
      }
      function switchTab(tab) {
        if (activeTab.value === tab)
          return;
        activeTab.value = tab;
        loadNotifications(true);
      }
      function onRefresh() {
        loadNotifications(true);
      }
      function loadMore() {
        if (loading.value || !hasMore.value)
          return;
        pagination.value.current++;
        loadNotifications(false);
      }
      async function batchDeleteNotifications2(ids) {
        if (!ids || ids.length === 0)
          return;
        try {
          loading.value = true;
          const res = await notificationsApi.batchDeleteNotifications(ids);
          if (res.code === 200) {
            ids.forEach((id) => {
              const unreadIndex = unreadNotifications.value.findIndex((item) => item.id === id);
              if (unreadIndex !== -1) {
                unreadNotifications.value.splice(unreadIndex, 1);
                unreadCount.value--;
              }
              const readIndex = readNotifications.value.findIndex((item) => item.id === id);
              if (readIndex !== -1) {
                readNotifications.value.splice(readIndex, 1);
              }
            });
            if (app && app.globalData) {
              app.globalData.unreadNotificationCount = unreadCount.value;
              if (app.updateMessageBadge) {
                app.updateMessageBadge();
              }
            }
            uni.showToast({
              title: "删除成功",
              icon: "success"
            });
          } else {
            uni.showToast({
              title: res.message || "删除失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/Xiaoxi/Xiaoxi.vue:1206", "批量删除通知失败:", error);
          uni.showToast({
            title: "操作失败，请稍后重试",
            icon: "none"
          });
        } finally {
          loading.value = false;
        }
      }
      vue.onMounted(() => {
        loadNotifications(true);
        monitorWebSocketStatus();
        const scrollView = document.querySelector(".notification-list");
        if (scrollView) {
          scrollView.addEventListener("scroll", handleScroll);
        }
        listenForNewNotifications();
        formatAppLog("log", "at pages/Xiaoxi/Xiaoxi.vue:1233", "通知页面加载完成");
      });
      function listenForNewNotifications() {
        uni.$on("newNotification", (notification) => {
          formatAppLog("log", "at pages/Xiaoxi/Xiaoxi.vue:1240", "消息页面接收到新通知:", notification);
          addNewNotificationToUI(notification);
        });
      }
      function addNewNotificationToUI(notification) {
        if (!notification)
          return;
        const newNotification = {
          id: notification.id,
          type: notification.typeName,
          message: notification.content || notification.title,
          time: notification.time || formatTime2(notification.createdAt || /* @__PURE__ */ new Date()),
          avatar: getAvatarByType2(notification.typeId),
          read: notification.isRead || false,
          actions: notification.actions || getActionsForNotification(notification),
          // 保存原始数据，用于后续处理
          originalData: notification,
          // UI状态属性
          isReading: false,
          viewStartTime: null,
          viewTimer: null,
          scrollTimer: null
        };
        if (!newNotification.read) {
          const existingIndex = unreadNotifications.value.findIndex((item) => item.id === newNotification.id);
          if (existingIndex === -1) {
            unreadNotifications.value.unshift(newNotification);
            unreadCount.value++;
          }
        } else {
          const existingIndex = readNotifications.value.findIndex((item) => item.id === newNotification.id);
          if (existingIndex === -1) {
            readNotifications.value.unshift(newNotification);
          }
        }
        playNotificationSound();
      }
      function playNotificationSound() {
        try {
          const audio = uni.createInnerAudioContext();
          audio.src = "/static/sounds/notification.mp3";
          audio.play();
        } catch (error) {
          formatAppLog("log", "at pages/Xiaoxi/Xiaoxi.vue:1297", "播放通知提示音失败", error);
        }
      }
      vue.onUnmounted(() => {
        const scrollView = document.querySelector(".notification-list");
        if (scrollView) {
          scrollView.removeEventListener("scroll", handleScroll);
        }
        const allNotifications = [...unreadNotifications.value, ...readNotifications.value];
        allNotifications.forEach((notification) => {
          if (notification.viewTimer)
            clearTimeout(notification.viewTimer);
          if (notification.scrollTimer)
            clearTimeout(notification.scrollTimer);
        });
        uni.$off("newNotification");
      });
      function removeNotification(id) {
        if (!id)
          return;
        const unreadIndex = unreadNotifications.value.findIndex((item) => item.id === id);
        if (unreadIndex !== -1) {
          const notification = unreadNotifications.value.splice(unreadIndex, 1)[0];
          notification.read = true;
          readNotifications.value.unshift(notification);
          unreadCount.value--;
          if (app && app.globalData) {
            app.globalData.unreadNotificationCount = Math.max(0, app.globalData.unreadNotificationCount - 1);
            if (app.updateMessageBadge) {
              app.updateMessageBadge();
            }
          }
        }
      }
      async function updateTaskStatus2(taskId, status, cancelReason = "") {
        if (!taskId)
          return null;
        try {
          const data = {
            status
          };
          if (status === "canceled" && cancelReason) {
            data.cancelReason = cancelReason;
          }
          const response = await tasksApi.updateTaskStatus(taskId, data);
          return response;
        } catch (error) {
          formatAppLog("error", "at pages/Xiaoxi/Xiaoxi.vue:1365", "更新任务状态失败:", error);
          return null;
        }
      }
      const __returned__ = { app, wsConnected, activeTab, unreadCount, unreadNotifications, readNotifications, pagination, loading, refreshing, hasMore, isEditMode, selectedItems, isAllSelected, toggleEditMode, toggleSelectItem, toggleSelectAll, confirmBatchDelete, handleNewNotification, getAvatarByType: getAvatarByType2, markAllAsRead: markAllAsRead2, handleAction, handleTaskStatusUpdateResult, importantNotificationTypes, readNotificationAloud, goBack, navigateToDetail, handleNotificationView, handleNotificationLeave, isNotificationVisible, handleScroll, markNotificationAsRead, monitorWebSocketStatus, loadNotifications, updateTabBarBadge, isProcessedApplication, isCreatorOrManager, getActionsForNotification, formatTime: formatTime2, switchTab, onRefresh, loadMore, batchDeleteNotifications: batchDeleteNotifications2, listenForNewNotifications, addNewNotificationToUI, playNotificationSound, removeNotification, updateTaskStatus: updateTaskStatus2, ref: vue.ref, onMounted: vue.onMounted, onUnmounted: vue.onUnmounted, computed: vue.computed, get notificationService() {
        return notificationService;
      }, get websocket() {
        return websocket;
      }, get notificationsApi() {
        return notificationsApi;
      }, get teamApi() {
        return teamApi;
      }, get taskApplicationsApi() {
        return taskApplicationApi;
      }, get tasksApi() {
        return tasksApi;
      }, SvgIcon };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$a(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createElementVNode("view", { class: "header" }, [
        vue.createElementVNode("view", { class: "navbar" }, [
          vue.createVNode($setup["SvgIcon"], {
            name: "back",
            size: "20",
            onClick: $setup.goBack
          }),
          vue.createElementVNode("view", { class: "title" }, "通知"),
          vue.createElementVNode("view", { class: "actions" }, [
            !$setup.isEditMode ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "mark-read",
              onClick: $setup.markAllAsRead
            }, [
              vue.createElementVNode("text", { class: "mark-text" }, "全部标记为已读"),
              vue.createVNode($setup["SvgIcon"], {
                name: "yidubiaoji",
                size: "20"
              })
            ])) : vue.createCommentVNode("v-if", true),
            !$setup.isEditMode ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 1,
              class: "edit-btn",
              onClick: $setup.toggleEditMode
            }, [
              vue.createElementVNode("text", { class: "edit-text" }, "编辑"),
              vue.createVNode($setup["SvgIcon"], {
                name: "bianji",
                size: "20"
              })
            ])) : (vue.openBlock(), vue.createElementBlock("view", {
              key: 2,
              class: "edit-actions"
            }, [
              vue.createElementVNode("view", {
                class: "cancel-btn",
                onClick: $setup.toggleEditMode
              }, [
                vue.createElementVNode("text", null, "取消")
              ]),
              vue.createElementVNode("view", {
                class: "delete-btn",
                onClick: $setup.confirmBatchDelete
              }, [
                vue.createElementVNode("text", { class: "iconfont icon-delete" }),
                vue.createElementVNode("text", null, "删除")
              ])
            ]))
          ])
        ]),
        vue.createCommentVNode(" WebSocket连接状态指示器 "),
        vue.createCommentVNode(` <view class="ws-status" :class="{ 'connected': wsConnected }">
        <text class="ws-status-text">{{ wsConnected ? '实时消息已连接' : '实时消息未连接' }}</text>
        <view class="ws-indicator"></view>
      </view> `)
      ]),
      vue.createCommentVNode(" 标签页 "),
      vue.createElementVNode("view", { class: "tabs" }, [
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass(["tab-item", $setup.activeTab === "unread" ? "tab-active" : ""]),
            onClick: _cache[0] || (_cache[0] = ($event) => $setup.switchTab("unread"))
          },
          [
            vue.createElementVNode("text", null, "未读"),
            $setup.unreadCount > 0 ? (vue.openBlock(), vue.createElementBlock(
              "text",
              {
                key: 0,
                class: "badge"
              },
              vue.toDisplayString($setup.unreadCount),
              1
              /* TEXT */
            )) : vue.createCommentVNode("v-if", true)
          ],
          2
          /* CLASS */
        ),
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass(["tab-item", $setup.activeTab === "read" ? "tab-active" : ""]),
            onClick: _cache[1] || (_cache[1] = ($event) => $setup.switchTab("read"))
          },
          [
            vue.createElementVNode("text", null, "已读")
          ],
          2
          /* CLASS */
        )
      ]),
      vue.createCommentVNode(" 通知列表 "),
      vue.createElementVNode("scroll-view", {
        "scroll-y": "",
        class: "notification-list",
        "refresher-enabled": "",
        "refresher-triggered": $setup.refreshing,
        onRefresherrefresh: $setup.onRefresh,
        onScrolltolower: $setup.loadMore
      }, [
        vue.createCommentVNode(" 未读通知列表 "),
        $setup.activeTab === "unread" ? (vue.openBlock(), vue.createElementBlock("view", { key: 0 }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.unreadNotifications, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: vue.normalizeClass(["notification-item unread", {
                  "item-selected": $setup.isEditMode && $setup.selectedItems.includes(item.id),
                  "reading": item.isReading,
                  "processed": $setup.isProcessedApplication(item)
                }]),
                key: index,
                onMouseenter: ($event) => !$setup.isEditMode && $setup.handleNotificationView(item, index),
                onMouseleave: ($event) => !$setup.isEditMode && $setup.handleNotificationLeave(item),
                onTouchstart: ($event) => !$setup.isEditMode && $setup.handleNotificationView(item, index),
                onTouchend: ($event) => !$setup.isEditMode && $setup.handleNotificationLeave(item)
              }, [
                $setup.isEditMode ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "select-box",
                  onClick: vue.withModifiers(($event) => $setup.toggleSelectItem(item.id), ["stop"])
                }, [
                  vue.createElementVNode(
                    "view",
                    {
                      class: vue.normalizeClass(["checkbox", { "checked": $setup.selectedItems.includes(item.id) }])
                    },
                    [
                      $setup.selectedItems.includes(item.id) ? (vue.openBlock(), vue.createElementBlock("text", {
                        key: 0,
                        class: "iconfont icon-check"
                      })) : vue.createCommentVNode("v-if", true)
                    ],
                    2
                    /* CLASS */
                  )
                ], 8, ["onClick"])) : vue.createCommentVNode("v-if", true),
                vue.createElementVNode("view", { class: "notification-avatar" }, [
                  vue.createElementVNode("image", {
                    src: item.avatar || "/static/default-avatar.png",
                    mode: "aspectFill"
                  }, null, 8, ["src"])
                ]),
                vue.createElementVNode("view", {
                  class: "notification-content",
                  onClick: ($event) => $setup.isEditMode ? $setup.toggleSelectItem(item.id) : $setup.navigateToDetail(item)
                }, [
                  vue.createElementVNode(
                    "view",
                    { class: "notification-type" },
                    vue.toDisplayString(item.type),
                    1
                    /* TEXT */
                  ),
                  vue.createElementVNode(
                    "view",
                    { class: "notification-message" },
                    vue.toDisplayString(item.message),
                    1
                    /* TEXT */
                  ),
                  vue.createElementVNode(
                    "view",
                    { class: "notification-time" },
                    vue.toDisplayString(item.time),
                    1
                    /* TEXT */
                  ),
                  vue.createCommentVNode(" 操作按钮 "),
                  !$setup.isEditMode && item.actions && !$setup.isProcessedApplication(item) ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 0,
                    class: "notification-actions"
                  }, [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList(item.actions, (action, idx) => {
                        return vue.openBlock(), vue.createElementBlock("button", {
                          key: idx,
                          class: vue.normalizeClass(["action-btn", action.primary ? "btn-primary" : "btn-default"]),
                          onClick: vue.withModifiers(($event) => $setup.handleAction(action.type, item.id), ["stop"])
                        }, vue.toDisplayString(action.name), 11, ["onClick"]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    ))
                  ])) : vue.createCommentVNode("v-if", true)
                ], 8, ["onClick"])
              ], 42, ["onMouseenter", "onMouseleave", "onTouchstart", "onTouchend"]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])) : vue.createCommentVNode("v-if", true),
        vue.createCommentVNode(" 已读通知列表 "),
        $setup.activeTab === "read" ? (vue.openBlock(), vue.createElementBlock("view", { key: 1 }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.readNotifications, (item, index) => {
              return vue.openBlock(), vue.createElementBlock(
                "view",
                {
                  class: vue.normalizeClass(["notification-item read", {
                    "item-selected": $setup.isEditMode && $setup.selectedItems.includes(item.id),
                    "processed": $setup.isProcessedApplication(item)
                  }]),
                  key: index
                },
                [
                  $setup.isEditMode ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 0,
                    class: "select-box",
                    onClick: vue.withModifiers(($event) => $setup.toggleSelectItem(item.id), ["stop"])
                  }, [
                    vue.createElementVNode(
                      "view",
                      {
                        class: vue.normalizeClass(["checkbox", { "checked": $setup.selectedItems.includes(item.id) }])
                      },
                      [
                        $setup.selectedItems.includes(item.id) ? (vue.openBlock(), vue.createElementBlock("text", {
                          key: 0,
                          class: "iconfont icon-check"
                        })) : vue.createCommentVNode("v-if", true)
                      ],
                      2
                      /* CLASS */
                    )
                  ], 8, ["onClick"])) : vue.createCommentVNode("v-if", true),
                  vue.createElementVNode("view", { class: "notification-avatar" }, [
                    vue.createElementVNode("image", {
                      src: item.avatar || "/static/default-avatar.png",
                      mode: "aspectFill"
                    }, null, 8, ["src"])
                  ]),
                  vue.createElementVNode("view", {
                    class: "notification-content",
                    onClick: ($event) => $setup.isEditMode ? $setup.toggleSelectItem(item.id) : $setup.navigateToDetail(item)
                  }, [
                    vue.createElementVNode(
                      "view",
                      { class: "notification-type" },
                      vue.toDisplayString(item.type),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode(
                      "view",
                      { class: "notification-message" },
                      vue.toDisplayString(item.message),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode(
                      "view",
                      { class: "notification-time" },
                      vue.toDisplayString(item.time),
                      1
                      /* TEXT */
                    )
                  ], 8, ["onClick"])
                ],
                2
                /* CLASS */
              );
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])) : vue.createCommentVNode("v-if", true),
        vue.createCommentVNode(" 加载更多 "),
        $setup.loading && !$setup.refreshing ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 2,
          class: "loading-more"
        }, [
          vue.createElementVNode("text", null, "加载中...")
        ])) : vue.createCommentVNode("v-if", true),
        vue.createCommentVNode(" 无更多数据 "),
        !$setup.loading && !$setup.hasMore && ($setup.activeTab === "unread" ? $setup.unreadNotifications.length > 0 : $setup.readNotifications.length > 0) ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 3,
          class: "no-more"
        }, [
          vue.createElementVNode("text", null, "没有更多了")
        ])) : vue.createCommentVNode("v-if", true),
        vue.createCommentVNode(" 无通知状态 "),
        !$setup.loading && ($setup.activeTab === "unread" && $setup.unreadNotifications.length === 0) || $setup.activeTab === "read" && $setup.readNotifications.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 4,
          class: "empty-state"
        }, [
          vue.createElementVNode("image", {
            class: "empty-image",
            src: _imports_0$5,
            mode: "aspectFit"
          }),
          vue.createElementVNode(
            "text",
            { class: "empty-text" },
            "暂无" + vue.toDisplayString($setup.activeTab === "unread" ? "未读" : "已读") + "通知",
            1
            /* TEXT */
          )
        ])) : vue.createCommentVNode("v-if", true)
      ], 40, ["refresher-triggered"]),
      vue.createCommentVNode(" 底部批量操作栏 "),
      $setup.isEditMode ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 0,
        class: "bottom-action-bar"
      }, [
        vue.createElementVNode("view", {
          class: "select-all",
          onClick: $setup.toggleSelectAll
        }, [
          vue.createElementVNode(
            "view",
            {
              class: vue.normalizeClass(["checkbox", { "checked": $setup.isAllSelected }])
            },
            [
              $setup.isAllSelected ? (vue.openBlock(), vue.createElementBlock("text", {
                key: 0,
                class: "iconfont icon-check"
              })) : vue.createCommentVNode("v-if", true)
            ],
            2
            /* CLASS */
          ),
          vue.createElementVNode("text", null, "全选")
        ]),
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass(["batch-delete", { "disabled": $setup.selectedItems.length === 0 }]),
            onClick: $setup.confirmBatchDelete
          },
          [
            vue.createElementVNode(
              "text",
              null,
              "删除(" + vue.toDisplayString($setup.selectedItems.length) + ")",
              1
              /* TEXT */
            )
          ],
          2
          /* CLASS */
        )
      ])) : vue.createCommentVNode("v-if", true)
    ]);
  }
  const PagesXiaoxiXiaoxi = /* @__PURE__ */ _export_sfc(_sfc_main$b, [["render", _sfc_render$a], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/Xiaoxi/Xiaoxi.vue"]]);
  const _imports_0$4 = "/static/images/empty.png";
  const _sfc_main$a = {
    __name: "application",
    setup(__props, { expose: __expose }) {
      __expose();
      const baseApiUrl2 = config.baseUrl;
      const refreshing = vue.ref(false);
      const loading = vue.ref(false);
      const hasNoMore = vue.ref(false);
      const currentPage = vue.ref(1);
      const pageSize2 = vue.ref(10);
      const loadMoreText = {
        contentdown: "上拉显示更多",
        contentrefresh: "正在加载...",
        contentnomore: "已经到底啦"
      };
      const currentRole = vue.ref("applicant");
      const safeAreaTop = vue.ref(0);
      const tabs = vue.ref([
        { name: "我发起的", badge: 0, role: "applicant" },
        { name: "待我处理", badge: 0, role: "creator" }
      ]);
      const currentTab = vue.ref(0);
      const applicationTypes = vue.ref([
        { label: "全部", value: "all" },
        { label: "任务申请", value: "task" },
        { label: "队伍申请", value: "team" },
        { label: "徽章申请", value: "badge" }
      ]);
      const getApplicationTypes = vue.computed(() => {
        if (currentTab.value === 1) {
          return applicationTypes.value.filter((type) => type.value !== "badge");
        }
        return applicationTypes.value;
      });
      const statusTypes = vue.ref([
        { label: "全部", value: "all" },
        { label: "待处理", value: "pending" },
        { label: "已通过", value: "approved" },
        { label: "已拒绝", value: "rejected" },
        { label: "已取消", value: "canceled" }
      ]);
      const pendingStatusTypes = vue.ref([
        { label: "全部", value: "all" },
        { label: "未处理", value: "pending" },
        { label: "已处理", value: "processed" }
        // 特殊值，表示已处理的所有状态
      ]);
      const selectedType = vue.ref("all");
      const selectedStatus = vue.ref("all");
      const applications = vue.ref([]);
      const filteredApplications = vue.computed(() => {
        const list = applications.value.map((item) => {
          let statusText = "";
          switch (item.status) {
            case "pending":
              statusText = "待处理";
              break;
            case "approved":
              statusText = "已通过";
              break;
            case "rejected":
              statusText = "已拒绝";
              break;
            case "canceled":
              statusText = "已取消";
              break;
            case "returned":
              statusText = "已退回";
              break;
            default:
              statusText = "未知状态";
          }
          return {
            ...item,
            statusText
          };
        });
        let filtered = list;
        if (selectedStatus.value !== "all") {
          if (selectedStatus.value === "processed") {
            filtered = filtered.filter(
              (item) => item.status === "approved" || item.status === "rejected" || item.status === "canceled"
            );
          } else {
            filtered = filtered.filter((item) => item.status === selectedStatus.value);
          }
        }
        if (selectedType.value !== "all") {
          filtered = filtered.filter((item) => item.type === selectedType.value);
        }
        return filtered;
      });
      vue.onMounted(() => {
        getSystemInfo();
        let query = {};
        if (uni.getSystemInfoSync().platform === "h5") {
          query = getQueryParams();
        } else {
          const instance = vue.getCurrentInstance();
          if (instance && instance.proxy && instance.proxy.$mp && instance.proxy.$mp.query) {
            query = instance.proxy.$mp.query;
          }
        }
        handleUrlParams(query);
        loadBadgeCount();
        loadApplications(true);
      });
      function getQueryParams() {
        const params = {};
        const queryString = window.location.search.substring(1);
        const pairs = queryString.split("&");
        for (let i = 0; i < pairs.length; i++) {
          const pair = pairs[i].split("=");
          params[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || "");
        }
        return params;
      }
      function handleUrlParams(query) {
        formatAppLog("log", "at pages/application/application.vue:344", "处理URL参数:", query);
        if (query.tab !== void 0) {
          const tabIndex = parseInt(query.tab);
          if (!isNaN(tabIndex) && tabIndex >= 0 && tabIndex < tabs.value.length) {
            switchTab(tabIndex);
          }
        }
        if (query.type) {
          const type = query.type;
          if (["task", "team", "badge", "all"].includes(type)) {
            selectedType.value = type;
          }
        }
        if (query.id) {
          targetApplicationId.value = query.id;
        }
      }
      const targetApplicationId = vue.ref(null);
      function scrollToApplication() {
        if (!targetApplicationId.value)
          return;
        setTimeout(() => {
          const selector = `.application-card[data-id="${targetApplicationId.value}"]`;
          const query = uni.createSelectorQuery();
          query.select(selector).boundingClientRect();
          query.selectViewport().scrollOffset();
          query.exec((res) => {
            if (res[0]) {
              uni.pageScrollTo({
                scrollTop: res[1].scrollTop + res[0].top - 100,
                // 减去一些偏移，让元素不要太靠近顶部
                duration: 300
              });
              highlightApplication(targetApplicationId.value);
            }
          });
          targetApplicationId.value = null;
        }, 500);
      }
      function highlightApplication(id) {
        const element = document.querySelector(`.application-card[data-id="${id}"]`);
        if (!element)
          return;
        element.classList.add("highlight-application");
        setTimeout(() => {
          element.classList.remove("highlight-application");
        }, 3e3);
      }
      function getCardTitle(item) {
        if (!item || !item.type)
          return "申请";
        if (item.type === "task") {
          return item.taskTitle || "任务申请";
        } else if (item.type === "team") {
          return item.teamName || "队伍申请";
        } else if (item.type === "badge") {
          if (item.badgeName) {
            return item.badgeTitle || item.badgeName;
          }
          return item.badgeTitle || "勋章申请";
        }
        return "申请";
      }
      function getTypeClass(type) {
        if (type === "task")
          return "task-type";
        if (type === "team")
          return "team-type";
        if (type === "badge")
          return "badge-type";
        return "";
      }
      function getApplicationClass(type) {
        if (!type)
          return "card-task";
        if (type === "task")
          return "card-task";
        if (type === "team")
          return "card-team";
        if (type === "badge")
          return "card-badge";
        return "card-task";
      }
      async function loadApplications(isRefresh = false) {
        if (isRefresh) {
          currentPage.value = 1;
          hasNoMore.value = false;
          applications.value = [];
        }
        if (loading.value)
          return;
        loading.value = true;
        try {
          if (currentTab.value === 0) {
            currentRole.value = "applicant";
          } else if (currentTab.value === 1) {
            currentRole.value = "creator";
          }
          if (selectedType.value === "all" || selectedType.value === "task") {
            await loadTaskApplications(isRefresh);
          }
          if (selectedType.value === "all" || selectedType.value === "team") {
            await loadTeamApplications(isRefresh);
          }
          if ((selectedType.value === "all" || selectedType.value === "badge") && currentTab.value === 0) {
            await loadBadgeApplications(isRefresh);
          }
          formatAppLog("log", "at pages/application/application.vue:483", "加载完成的应用列表数据：", applications.value);
          if (targetApplicationId.value) {
            scrollToApplication();
          }
        } catch (error) {
          formatAppLog("error", "at pages/application/application.vue:491", "获取申请列表失败:", error);
          uni.showToast({
            title: "网络异常，请稍后重试",
            icon: "none"
          });
        } finally {
          loading.value = false;
          if (refreshing.value) {
            refreshing.value = false;
          }
        }
      }
      async function loadTaskApplications(isRefresh) {
        try {
          const params = {
            pageNum: currentPage.value,
            pageSize: pageSize2.value
          };
          if (selectedStatus.value !== "all" && selectedStatus.value !== "processed") {
            params.status = selectedStatus.value;
          }
          params.role = currentRole.value;
          const res = await taskApplicationApi.getTaskApplicationList(params);
          if (res && res.code === 200 && res.data) {
            const taskList = (res.data.list || []).map((item) => ({
              ...item,
              type: "task"
              // 确保每个任务申请都有type字段
            }));
            if (isRefresh) {
              if (selectedType.value === "task") {
                applications.value = taskList;
              } else if (selectedType.value === "all") {
                applications.value = taskList;
              }
            } else {
              applications.value = [...applications.value, ...taskList];
            }
            if (selectedType.value === "task") {
              hasNoMore.value = !res.data.hasNext;
            }
            formatAppLog("log", "at pages/application/application.vue:550", "任务申请列表:", taskList);
          }
        } catch (error) {
          formatAppLog("error", "at pages/application/application.vue:553", "获取任务申请列表失败:", error);
          uni.showToast({
            title: "获取任务申请失败",
            icon: "none"
          });
        }
      }
      async function loadTeamApplications(isRefresh) {
        try {
          const params = {
            pageNum: currentPage.value,
            pageSize: pageSize2.value
          };
          if (selectedStatus.value !== "all" && selectedStatus.value !== "processed") {
            params.status = selectedStatus.value;
          }
          let res;
          if (currentRole.value === "applicant") {
            res = await teamApi.getMyApplications(params);
          } else if (currentRole.value === "creator" || currentRole.value === "leader") {
            res = await teamApi.getTeamApplications(params);
          }
          if (res && res.code === 200 && res.data) {
            const teamList = (res.data.list || []).map((item) => ({
              ...item,
              type: "team"
              // 确保每个队伍申请都有type字段
            }));
            if (isRefresh) {
              if (selectedType.value === "team") {
                applications.value = teamList;
              } else if (selectedType.value === "all") {
                applications.value = [...applications.value, ...teamList];
              }
            } else {
              applications.value = [...applications.value, ...teamList];
            }
            if (selectedType.value === "team") {
              hasNoMore.value = !res.data.hasNext;
            }
            formatAppLog("log", "at pages/application/application.vue:609", "队伍申请列表:", teamList);
          }
        } catch (error) {
          formatAppLog("error", "at pages/application/application.vue:612", "获取队伍申请列表失败:", error);
          uni.showToast({
            title: "获取队伍申请失败",
            icon: "none"
          });
        }
      }
      async function loadBadgeApplications(isRefresh) {
        try {
          const params = {
            pageNum: currentPage.value,
            pageSize: pageSize2.value
          };
          if (selectedStatus.value !== "all" && selectedStatus.value !== "processed") {
            params.status = selectedStatus.value;
          }
          let res;
          try {
            res = await uni.request({
              url: `${baseApiUrl2}/badge/approvals/my-applications`,
              method: "GET",
              data: params,
              header: {
                "Authorization": `Bearer ${uni.getStorageSync("token")}`
              }
            });
          } catch (error) {
            formatAppLog("error", "at pages/application/application.vue:645", "徽章申请请求失败:", error);
            res = {
              statusCode: 500,
              data: null
            };
          }
          if (res.statusCode === 200 && res.data && res.data.code === 200) {
            const badgeList = (res.data.data.records || []).map((item) => ({
              ...item,
              id: item.approvalId,
              type: "badge",
              status: item.currentStatus,
              appliedAt: item.createdAt,
              reviewedAt: item.updatedAt,
              message: item.reviewMessage,
              reviewNotes: item.adminFeedback,
              // 为了适配显示格式，添加一些字段
              badgeTitle: item.competitionName ? `${item.competitionName} - ${item.badgeName || "勋章申请"}` : item.badgeName ? item.badgeName : "勋章申请",
              applicantName: item.badgeType ? item.badgeType === "team_competition" ? "团队竞赛勋章" : "个人勋章" : item.applicantType === "team" ? "团队申请" : "个人申请",
              applicantMajor: item.competitionLevel && item.awardRank ? `${item.competitionLevel} · ${item.awardRank}` : ""
            }));
            if (isRefresh) {
              if (selectedType.value === "badge") {
                applications.value = badgeList;
              } else if (selectedType.value === "all") {
                applications.value = [...applications.value, ...badgeList];
              }
            } else {
              applications.value = [...applications.value, ...badgeList];
            }
            if (selectedType.value === "badge") {
              const totalPages = Math.ceil(res.data.data.total / pageSize2.value);
              hasNoMore.value = currentPage.value >= totalPages;
            }
            formatAppLog("log", "at pages/application/application.vue:698", "徽章申请列表:", badgeList);
          }
        } catch (error) {
          formatAppLog("error", "at pages/application/application.vue:701", "获取徽章申请列表失败:", error);
          uni.showToast({
            title: "获取徽章申请失败",
            icon: "none"
          });
        }
      }
      async function loadBadgeCount() {
        try {
          const taskParams = { status: "pending", role: "creator", pageSize: 1 };
          const taskRes = await taskApplicationApi.getTaskApplicationList(taskParams);
          const teamParams = { status: "pending", pageSize: 1 };
          const teamRes = await teamApi.getTeamApplications(teamParams);
          let totalPending = 0;
          if (taskRes && taskRes.code === 200 && taskRes.data && taskRes.data.pendingCount !== void 0) {
            totalPending += taskRes.data.pendingCount;
          }
          if (teamRes && teamRes.code === 200 && teamRes.data) {
            if (teamRes.data.pendingCount !== void 0) {
              totalPending += teamRes.data.pendingCount;
            } else if (teamRes.data.total !== void 0) {
              totalPending += teamRes.data.total;
            } else {
              const pendingCount = (teamRes.data.list || []).filter((item) => item.status === "pending").length;
              totalPending += pendingCount;
            }
          }
          formatAppLog("log", "at pages/application/application.vue:740", "更新待处理数量角标:", totalPending);
          tabs.value[1].badge = totalPending;
        } catch (error) {
          formatAppLog("error", "at pages/application/application.vue:746", "获取待处理数量失败:", error);
        }
      }
      function onRefresh() {
        refreshing.value = true;
        loadBadgeCount();
        loadApplications(true);
      }
      function loadMore() {
        if (loading.value || hasNoMore.value)
          return;
        currentPage.value++;
        loadApplications(false);
      }
      function switchTab(index) {
        if (currentTab.value === index)
          return;
        currentTab.value = index;
        selectedStatus.value = "all";
        if (index === 1 && selectedType.value === "badge") {
          selectedType.value = "all";
        }
        if (index === 0) {
          currentRole.value = "applicant";
        } else if (index === 1) {
          currentRole.value = "creator";
        }
        loadApplications(true);
      }
      function selectType(type) {
        if (selectedType.value === type)
          return;
        if (currentTab.value === 1 && type === "badge") {
          uni.showToast({
            title: "待处理列表中不包含徽章申请",
            icon: "none"
          });
          return;
        }
        selectedType.value = type;
        currentPage.value = 1;
        hasNoMore.value = false;
        applications.value = [];
        loadApplications(true);
      }
      function selectStatus(status) {
        if (selectedStatus.value === status)
          return;
        selectedStatus.value = status;
        loadApplications(true);
      }
      function getStatusClass(status) {
        switch (status) {
          case "pending":
            return "status-pending";
          case "approved":
            return "status-approved";
          case "rejected":
            return "status-rejected";
          case "canceled":
            return "status-canceled";
          default:
            return "";
        }
      }
      function formatDateTime(dateTimeStr) {
        if (!dateTimeStr)
          return "-";
        try {
          const date = new Date(dateTimeStr);
          const year = date.getFullYear();
          const month = String(date.getMonth() + 1).padStart(2, "0");
          const day = String(date.getDate()).padStart(2, "0");
          const hours = String(date.getHours()).padStart(2, "0");
          const minutes = String(date.getMinutes()).padStart(2, "0");
          return `${year}-${month}-${day} ${hours}:${minutes}`;
        } catch (e) {
          return dateTimeStr;
        }
      }
      async function handleApplication(id, action, type) {
        if (!id || !type) {
          uni.showToast({
            title: "参数错误",
            icon: "none"
          });
          return;
        }
        if (type === "badge") {
          uni.showToast({
            title: "徽章申请处理功能开发中",
            icon: "none"
          });
          return;
        }
        uni.showModal({
          title: action === "approved" ? "通过申请" : "拒绝申请",
          content: action === "approved" ? "确定通过该申请吗？" : "确定拒绝该申请吗？",
          success: async (res) => {
            if (res.confirm) {
              try {
                uni.showLoading({
                  title: "处理中..."
                });
                let result;
                if (type === "task") {
                  result = await taskApplicationApi.updateTaskApplication(id, {
                    status: action,
                    reviewNotes: action === "approved" ? "申请已通过" : "申请已拒绝"
                  });
                } else if (type === "team") {
                  result = await teamApi.handleApplication(id, {
                    status: action,
                    reviewNotes: action === "approved" ? "申请已通过" : "申请已拒绝"
                  });
                } else {
                  throw new Error("未知的申请类型");
                }
                uni.hideLoading();
                if (result && result.code === 200 && result.data && result.data.success) {
                  uni.showToast({
                    title: action === "approved" ? "已通过申请" : "已拒绝申请",
                    icon: "success"
                  });
                  loadApplications(true);
                  loadBadgeCount();
                } else {
                  uni.showToast({
                    title: (result == null ? void 0 : result.message) || "操作失败",
                    icon: "none"
                  });
                }
              } catch (error) {
                uni.hideLoading();
                formatAppLog("error", "at pages/application/application.vue:920", "处理申请失败:", error);
                uni.showToast({
                  title: "网络异常，请稍后重试",
                  icon: "none"
                });
              }
            }
          }
        });
      }
      async function cancelApplication(id, type) {
        if (!id || !type) {
          uni.showToast({
            title: "参数错误",
            icon: "none"
          });
          return;
        }
        if (type === "badge") {
          uni.showToast({
            title: "徽章申请取消功能开发中",
            icon: "none"
          });
          return;
        }
        uni.showModal({
          title: "取消申请",
          content: "确定要取消该申请吗？",
          success: async (res) => {
            if (res.confirm) {
              try {
                uni.showLoading({
                  title: "处理中..."
                });
                let result;
                if (type === "task") {
                  result = await taskApplicationApi.cancelTaskApplication(id);
                } else if (type === "team") {
                  result = await teamApi.cancelApplication(id);
                } else {
                  throw new Error("未知的申请类型");
                }
                uni.hideLoading();
                if (result && result.code === 200 && result.data && result.data.success) {
                  uni.showToast({
                    title: "已取消申请",
                    icon: "success"
                  });
                  loadApplications(true);
                  loadBadgeCount();
                } else {
                  uni.showToast({
                    title: (result == null ? void 0 : result.message) || "操作失败",
                    icon: "none"
                  });
                }
              } catch (error) {
                uni.hideLoading();
                formatAppLog("error", "at pages/application/application.vue:990", "取消申请失败:", error);
                uni.showToast({
                  title: "网络异常，请稍后重试",
                  icon: "none"
                });
              }
            }
          }
        });
      }
      function createApplication() {
        if (selectedType.value === "team") {
          uni.navigateTo({
            url: "/pages/team/list"
          });
        } else if (selectedType.value === "badge") {
          uni.navigateTo({
            url: "/pages/badge/apply"
            // 假设有一个徽章申请页面
          });
        } else {
          uni.navigateTo({
            url: "/pages/task-square/index"
          });
        }
      }
      function viewDetail(item) {
        if (item.type === "task") {
          uni.navigateTo({
            url: `/pages/task-square/detail?id=${item.taskId}`
          });
        } else if (item.type === "team") {
          uni.navigateTo({
            url: `/pages/team/detail?id=${item.teamId}`
          });
        } else if (item.type === "badge") {
          uni.showToast({
            title: "徽章申请详情功能开发中",
            icon: "none"
          });
          uni.showModal({
            title: item.badgeName || "勋章申请详情",
            content: `竞赛：${item.competitionName || "未知竞赛"}
等级：${item.competitionLevel || "未知"}
奖项：${item.awardRank || "未知"}
申请时间：${formatDateTime(item.appliedAt)}
申请说明：${item.message || "无"}
${item.reviewNotes ? `审核反馈：${item.reviewNotes}` : ""}`,
            showCancel: false,
            confirmText: "关闭"
          });
        }
      }
      function goBack() {
        uni.navigateBack();
      }
      function getSystemInfo() {
        uni.getSystemInfo({
          success: (res) => {
            formatAppLog("log", "at pages/application/application.vue:1057", "系统信息:", res);
            if (res.safeArea) {
              formatAppLog("log", "at pages/application/application.vue:1059", "安全区域信息:", res.safeArea);
              if (res.safeArea.top) {
                const screenWidth = res.screenWidth;
                safeAreaTop.value = Math.round(res.safeArea.top * 750 / screenWidth);
                formatAppLog("log", "at pages/application/application.vue:1064", "屏幕宽度:", screenWidth, "px");
                formatAppLog("log", "at pages/application/application.vue:1065", "安全区顶部:", res.safeArea.top, "px");
                formatAppLog("log", "at pages/application/application.vue:1066", "安全区高度(rpx):", safeAreaTop.value);
                if (safeAreaTop.value > 40) {
                  document.documentElement.style.setProperty("--nav-extra-padding", "100rpx");
                  formatAppLog("log", "at pages/application/application.vue:1072", "应用了额外的导航栏内边距");
                }
              }
            }
          }
        });
      }
      const __returned__ = { baseApiUrl: baseApiUrl2, refreshing, loading, hasNoMore, currentPage, pageSize: pageSize2, loadMoreText, currentRole, safeAreaTop, tabs, currentTab, applicationTypes, getApplicationTypes, statusTypes, pendingStatusTypes, selectedType, selectedStatus, applications, filteredApplications, getQueryParams, handleUrlParams, targetApplicationId, scrollToApplication, highlightApplication, getCardTitle, getTypeClass, getApplicationClass, loadApplications, loadTaskApplications, loadTeamApplications, loadBadgeApplications, loadBadgeCount, onRefresh, loadMore, switchTab, selectType, selectStatus, getStatusClass, formatDateTime, handleApplication, cancelApplication, createApplication, viewDetail, goBack, getSystemInfo, ref: vue.ref, computed: vue.computed, onMounted: vue.onMounted, getCurrentInstance: vue.getCurrentInstance, get taskApplicationApi() {
        return taskApplicationApi;
      }, get teamApi() {
        return teamApi;
      }, get config() {
        return config;
      }, SvgIcon };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$9(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_load_more = resolveEasycom(vue.resolveDynamicComponent("uni-load-more"), __easycom_0$2);
    return vue.openBlock(), vue.createElementBlock("view", { class: "application-container" }, [
      vue.createCommentVNode(" 固定区域 "),
      vue.createElementVNode("view", { class: "fixed-area" }, [
        vue.createCommentVNode(" 安全区域占位 "),
        vue.createElementVNode("view", { class: "safe-area-top" }),
        vue.createCommentVNode(" 顶部导航栏 "),
        vue.createElementVNode("view", { class: "nav-bar" }, [
          vue.createElementVNode("view", {
            class: "back-btn",
            onClick: $setup.goBack
          }, [
            vue.createVNode($setup["SvgIcon"], {
              name: "back",
              size: "20"
            })
          ]),
          vue.createElementVNode("text", { class: "page-title" }, "申请管理"),
          vue.createElementVNode("view", { class: "placeholder-right" })
        ]),
        vue.createCommentVNode(" 标签页 "),
        vue.createElementVNode("view", { class: "tabs" }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.tabs, (tab, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                key: index,
                class: vue.normalizeClass(["tab", { active: $setup.currentTab === index }]),
                onClick: ($event) => $setup.switchTab(index)
              }, [
                vue.createTextVNode(
                  vue.toDisplayString(tab.name) + " ",
                  1
                  /* TEXT */
                ),
                tab.badge && tab.badge > 0 ? (vue.openBlock(), vue.createElementBlock(
                  "view",
                  {
                    key: 0,
                    class: "badge"
                  },
                  vue.toDisplayString(tab.badge),
                  1
                  /* TEXT */
                )) : vue.createCommentVNode("v-if", true)
              ], 10, ["onClick"]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ]),
        vue.createCommentVNode(" 分类筛选 "),
        vue.createElementVNode("view", { class: "filter-tabs" }, [
          vue.createElementVNode("view", { class: "filter-options" }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.getApplicationTypes, (type, index) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  key: index,
                  class: vue.normalizeClass(["filter-tab", { active: $setup.selectedType === type.value }]),
                  onClick: ($event) => $setup.selectType(type.value)
                }, vue.toDisplayString(type.label), 11, ["onClick"]);
              }),
              128
              /* KEYED_FRAGMENT */
            ))
          ])
        ]),
        vue.createCommentVNode(" 状态筛选标签 "),
        vue.createElementVNode("view", { class: "filter-tabs status-tabs" }, [
          vue.createElementVNode("view", { class: "filter-options" }, [
            vue.createCommentVNode(" 待处理标签页使用简化的状态筛选 "),
            $setup.currentTab === 1 ? (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              { key: 0 },
              vue.renderList($setup.pendingStatusTypes, (status, index) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  key: index,
                  class: vue.normalizeClass(["filter-tab", { active: $setup.selectedStatus === status.value }]),
                  onClick: ($event) => $setup.selectStatus(status.value)
                }, vue.toDisplayString(status.label), 11, ["onClick"]);
              }),
              128
              /* KEYED_FRAGMENT */
            )) : (vue.openBlock(), vue.createElementBlock(
              vue.Fragment,
              { key: 1 },
              [
                vue.createCommentVNode(" 其他标签页使用完整的状态筛选 "),
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.statusTypes, (status, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      key: index,
                      class: vue.normalizeClass(["filter-tab", { active: $setup.selectedStatus === status.value }]),
                      onClick: ($event) => $setup.selectStatus(status.value)
                    }, vue.toDisplayString(status.label), 11, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ],
              64
              /* STABLE_FRAGMENT */
            ))
          ])
        ])
      ]),
      vue.createCommentVNode(" 申请列表内容 "),
      vue.createElementVNode("scroll-view", {
        class: "application-list",
        "scroll-y": "",
        "refresher-enabled": "",
        onRefresherrefresh: $setup.onRefresh,
        "refresher-triggered": $setup.refreshing,
        onScrolltolower: $setup.loadMore
      }, [
        vue.createCommentVNode(" 任务申请卡片 "),
        (vue.openBlock(true), vue.createElementBlock(
          vue.Fragment,
          null,
          vue.renderList($setup.filteredApplications, (item, index) => {
            return vue.openBlock(), vue.createElementBlock("view", {
              key: index,
              class: vue.normalizeClass(["application-card", [$setup.getApplicationClass(item.type), $setup.getStatusClass(item.status)]]),
              "data-id": item.id
            }, [
              vue.createCommentVNode(" 状态角标 - 右上角 "),
              vue.createElementVNode(
                "view",
                {
                  class: vue.normalizeClass(["status-corner", $setup.getStatusClass(item.status)])
                },
                vue.toDisplayString(item.statusText),
                3
                /* TEXT, CLASS */
              ),
              vue.createElementVNode("view", { class: "card-content" }, [
                vue.createElementVNode("view", { class: "card-title" }, [
                  vue.createTextVNode(
                    vue.toDisplayString($setup.getCardTitle(item)) + " ",
                    1
                    /* TEXT */
                  ),
                  vue.createElementVNode(
                    "text",
                    {
                      class: vue.normalizeClass(["type-tag", $setup.getTypeClass(item.type)])
                    },
                    vue.toDisplayString(item.type === "task" ? "任务" : item.type === "team" ? "队伍" : item.type === "badge" ? "徽章" : "未知"),
                    3
                    /* TEXT, CLASS */
                  )
                ]),
                vue.createCommentVNode(" 如果当前角色是创建者，显示申请人信息 "),
                vue.createElementVNode("view", { class: "card-info" }, [
                  $setup.currentRole === "creator" || $setup.currentRole === "leader" ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 0,
                    class: "info-item"
                  }, [
                    vue.createElementVNode("text", { class: "info-label" }, "申请人："),
                    vue.createElementVNode(
                      "text",
                      { class: "info-value" },
                      vue.toDisplayString(item.applicantName) + " " + vue.toDisplayString(item.applicantMajor ? "· " + item.applicantMajor : ""),
                      1
                      /* TEXT */
                    )
                  ])) : vue.createCommentVNode("v-if", true),
                  item.type === "team" && item.roleName ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 1,
                    class: "info-item"
                  }, [
                    vue.createElementVNode("text", { class: "info-label" }, "申请角色："),
                    vue.createElementVNode(
                      "text",
                      { class: "info-value" },
                      vue.toDisplayString(item.roleName),
                      1
                      /* TEXT */
                    )
                  ])) : vue.createCommentVNode("v-if", true),
                  vue.createElementVNode("view", { class: "info-item" }, [
                    vue.createElementVNode("text", { class: "info-label" }, "申请时间："),
                    vue.createElementVNode(
                      "text",
                      { class: "info-value" },
                      vue.toDisplayString($setup.formatDateTime(item.appliedAt)),
                      1
                      /* TEXT */
                    )
                  ]),
                  item.message ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 2,
                    class: "info-item"
                  }, [
                    vue.createElementVNode("text", { class: "info-label" }, "申请理由："),
                    vue.createElementVNode(
                      "text",
                      { class: "info-value" },
                      vue.toDisplayString(item.message),
                      1
                      /* TEXT */
                    )
                  ])) : vue.createCommentVNode("v-if", true),
                  item.reviewNotes && item.status !== "pending" ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 3,
                    class: "info-item"
                  }, [
                    vue.createElementVNode("text", { class: "info-label" }, "审核备注："),
                    vue.createElementVNode(
                      "text",
                      { class: "info-value" },
                      vue.toDisplayString(item.reviewNotes),
                      1
                      /* TEXT */
                    )
                  ])) : vue.createCommentVNode("v-if", true)
                ])
              ]),
              vue.createCommentVNode(" 操作按钮: 创建者角色可批准/拒绝，申请者角色可取消申请 "),
              ($setup.currentRole === "creator" || $setup.currentRole === "leader") && item.status === "pending" ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "card-footer"
              }, [
                vue.createElementVNode("view", { class: "btn-group" }, [
                  vue.createElementVNode("button", {
                    class: "btn btn-approve",
                    onClick: vue.withModifiers(($event) => $setup.handleApplication(item.id, "approved", item.type), ["stop"])
                  }, "通过", 8, ["onClick"]),
                  vue.createElementVNode("button", {
                    class: "btn btn-reject",
                    onClick: vue.withModifiers(($event) => $setup.handleApplication(item.id, "rejected", item.type), ["stop"])
                  }, "拒绝", 8, ["onClick"]),
                  vue.createElementVNode("button", {
                    class: "btn btn-detail",
                    onClick: vue.withModifiers(($event) => $setup.viewDetail(item), ["stop"])
                  }, "查看详情", 8, ["onClick"])
                ])
              ])) : $setup.currentRole === "applicant" && item.status === "pending" ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "card-footer"
              }, [
                vue.createElementVNode("view", { class: "btn-group" }, [
                  vue.createElementVNode("button", {
                    class: "btn btn-reject",
                    onClick: vue.withModifiers(($event) => $setup.cancelApplication(item.id, item.type), ["stop"])
                  }, "取消申请", 8, ["onClick"]),
                  vue.createElementVNode("button", {
                    class: "btn btn-detail",
                    onClick: vue.withModifiers(($event) => $setup.viewDetail(item), ["stop"])
                  }, "查看详情", 8, ["onClick"])
                ])
              ])) : (vue.openBlock(), vue.createElementBlock("view", {
                key: 2,
                class: "card-footer"
              }, [
                item.reviewedAt ? (vue.openBlock(), vue.createElementBlock(
                  "text",
                  {
                    key: 0,
                    class: "process-time"
                  },
                  "处理时间：" + vue.toDisplayString($setup.formatDateTime(item.reviewedAt)),
                  1
                  /* TEXT */
                )) : vue.createCommentVNode("v-if", true),
                vue.createElementVNode("view", { class: "btn-group" }, [
                  vue.createElementVNode("button", {
                    class: "btn btn-detail",
                    onClick: vue.withModifiers(($event) => $setup.viewDetail(item), ["stop"])
                  }, "查看详情", 8, ["onClick"])
                ])
              ]))
            ], 10, ["data-id"]);
          }),
          128
          /* KEYED_FRAGMENT */
        )),
        vue.createCommentVNode(" 空状态 "),
        $setup.filteredApplications.length === 0 && !$setup.loading ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 0,
          class: "empty-state"
        }, [
          vue.createElementVNode("image", {
            class: "empty-image",
            src: _imports_0$4,
            mode: "aspectFit"
          }),
          vue.createElementVNode("text", { class: "empty-text" }, "暂无申请记录")
        ])) : vue.createCommentVNode("v-if", true),
        vue.createCommentVNode(" 加载状态 "),
        $setup.loading && !$setup.refreshing ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 1,
          class: "loading-more"
        }, [
          vue.createVNode(_component_uni_load_more, {
            status: "loading",
            contentText: $setup.loadMoreText
          })
        ])) : vue.createCommentVNode("v-if", true),
        $setup.hasNoMore && !$setup.loading && $setup.filteredApplications.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 2,
          class: "no-more"
        }, [
          vue.createVNode(_component_uni_load_more, {
            status: "noMore",
            contentText: $setup.loadMoreText
          })
        ])) : vue.createCommentVNode("v-if", true),
        vue.createCommentVNode(" 底部安全区域 "),
        vue.createElementVNode("view", { class: "safe-area-bottom" })
      ], 40, ["refresher-triggered"])
    ]);
  }
  const PagesApplicationApplication = /* @__PURE__ */ _export_sfc(_sfc_main$a, [["render", _sfc_render$9], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/application/application.vue"]]);
  const _sfc_main$9 = {
    data() {
      return {
        // 环境配置
        env: env$1,
        // 连接设置
        serverUrl: env$1.wsUrl || "ws://localhost:8080/ws",
        token: getToken() || "",
        debug: env$1.debug || true,
        autoReconnect: true,
        heartbeat: true,
        // 连接状态
        isConnected: false,
        // 消息发送
        messageTypes: ["普通消息", "聊天消息", "认证消息"],
        messageTypeIndex: 0,
        receiverId: "",
        messageContent: "",
        // 消息记录
        messages: [],
        scrollTop: 0
      };
    },
    // 页面加载时初始化
    onLoad() {
      this.setupWebSocketCallbacks();
      this.addMessage("系统", `环境: ${this.env.env || "未知"}`);
      this.addMessage("系统", `API地址: ${this.env.baseUrl || "未设置"}`);
      this.addMessage("系统", `WebSocket地址: ${this.env.wsUrl || "未设置"}`);
      this.addMessage("系统", `Token: ${this.token ? "已设置" : "未设置"}`);
    },
    // 页面卸载时断开连接
    onUnload() {
      this.disconnectWebSocket();
    },
    methods: {
      // 设置WebSocket回调函数
      setupWebSocketCallbacks() {
        websocket.onOpen((res) => {
          this.isConnected = true;
          this.addMessage("系统", `WebSocket连接已打开`);
        });
        websocket.onClose((res) => {
          this.isConnected = false;
          this.addMessage("系统", `WebSocket连接已关闭: ${res.code || ""} ${res.reason || ""}`);
        });
        websocket.onError((err) => {
          this.addMessage("错误", `WebSocket连接错误: ${err.errMsg || JSON.stringify(err)}`);
        });
        websocket.onMessage((data) => {
          let message = data;
          try {
            if (typeof data === "string") {
              message = JSON.parse(data);
              message = JSON.stringify(message, null, 2);
            }
          } catch (e) {
          }
          this.addMessage("接收", message);
        });
      },
      // 连接WebSocket
      connectWebSocket() {
        if (this.isConnected) {
          uni.showToast({
            title: "WebSocket已连接",
            icon: "none"
          });
          return;
        }
        websocket.initConfig({
          url: this.serverUrl,
          token: this.token,
          debug: this.debug,
          autoReconnect: this.autoReconnect,
          heartbeat: this.heartbeat
        });
        websocket.connect();
        this.addMessage("系统", "正在连接WebSocket...");
      },
      // 断开WebSocket连接
      disconnectWebSocket() {
        if (!this.isConnected) {
          uni.showToast({
            title: "WebSocket未连接",
            icon: "none"
          });
          return;
        }
        websocket.close();
        this.addMessage("系统", "正在断开WebSocket连接...");
      },
      // 发送消息
      sendMessage() {
        if (!this.isConnected) {
          uni.showToast({
            title: "WebSocket未连接",
            icon: "none"
          });
          return;
        }
        if (!this.messageContent) {
          uni.showToast({
            title: "消息内容不能为空",
            icon: "none"
          });
          return;
        }
        let message;
        switch (this.messageTypeIndex) {
          case 0:
            message = this.messageContent;
            break;
          case 1:
            message = {
              type: "chat",
              to: this.receiverId,
              content: this.messageContent,
              timestamp: Date.now()
            };
            break;
          case 2:
            message = {
              type: "auth",
              token: this.token || this.messageContent
            };
            break;
        }
        const success = websocket.send(message);
        if (success) {
          this.addMessage("发送", typeof message === "object" ? JSON.stringify(message, null, 2) : message);
          this.messageContent = "";
        } else {
          uni.showToast({
            title: "消息发送失败",
            icon: "none"
          });
        }
      },
      // 添加消息到记录
      addMessage(type, content) {
        const now = /* @__PURE__ */ new Date();
        const time = `${now.getHours().toString().padStart(2, "0")}:${now.getMinutes().toString().padStart(2, "0")}:${now.getSeconds().toString().padStart(2, "0")}`;
        let typeText = "";
        switch (type) {
          case "系统":
            typeText = "系统消息";
            break;
          case "发送":
            typeText = "发送消息";
            break;
          case "接收":
            typeText = "接收消息";
            break;
          case "错误":
            typeText = "错误消息";
            break;
          default:
            typeText = type;
        }
        this.messages.push({
          type,
          typeText,
          content,
          time
        });
        if (this.messages.length > 100) {
          this.messages.shift();
        }
        this.$nextTick(() => {
          this.scrollTop = 9999999;
        });
      },
      // 清空消息记录
      clearMessages() {
        this.messages = [];
      },
      // 调试模式切换
      onDebugChange(e) {
        this.debug = e.detail.value;
      },
      // 自动重连切换
      onAutoReconnectChange(e) {
        this.autoReconnect = e.detail.value;
      },
      // 心跳检测切换
      onHeartbeatChange(e) {
        this.heartbeat = e.detail.value;
      },
      // 消息类型切换
      onMessageTypeChange(e) {
        this.messageTypeIndex = e.detail.value;
      }
    }
  };
  function _sfc_render$8(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部状态栏 "),
      vue.createElementVNode(
        "view",
        {
          class: vue.normalizeClass(["status-bar", [$data.isConnected ? "connected" : "disconnected"]])
        },
        [
          vue.createElementVNode(
            "text",
            { class: "status-text" },
            "WebSocket状态: " + vue.toDisplayString($data.isConnected ? "已连接" : "未连接"),
            1
            /* TEXT */
          ),
          vue.createElementVNode("view", { class: "status-indicator" })
        ],
        2
        /* CLASS */
      ),
      vue.createCommentVNode(" 环境信息 "),
      vue.createElementVNode("view", { class: "env-info" }, [
        vue.createElementVNode(
          "text",
          { class: "env-title" },
          "当前环境: " + vue.toDisplayString($data.env.env),
          1
          /* TEXT */
        ),
        vue.createElementVNode(
          "text",
          { class: "env-detail" },
          "API地址: " + vue.toDisplayString($data.env.baseUrl),
          1
          /* TEXT */
        ),
        vue.createElementVNode(
          "text",
          { class: "env-detail" },
          "WebSocket地址: " + vue.toDisplayString($data.env.wsUrl),
          1
          /* TEXT */
        )
      ]),
      vue.createCommentVNode(" 连接设置区域 "),
      vue.createElementVNode("view", { class: "connection-settings" }, [
        vue.createElementVNode("view", { class: "form-item" }, [
          vue.createElementVNode("text", { class: "label" }, "服务器地址"),
          vue.withDirectives(vue.createElementVNode(
            "input",
            {
              class: "input",
              "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $data.serverUrl = $event),
              placeholder: "ws://服务器地址/ws"
            },
            null,
            512
            /* NEED_PATCH */
          ), [
            [vue.vModelText, $data.serverUrl]
          ])
        ]),
        vue.createElementVNode("view", { class: "form-item" }, [
          vue.createElementVNode("text", { class: "label" }, "Token"),
          vue.withDirectives(vue.createElementVNode(
            "input",
            {
              class: "input",
              "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $data.token = $event),
              placeholder: "可选，身份验证token"
            },
            null,
            512
            /* NEED_PATCH */
          ), [
            [vue.vModelText, $data.token]
          ])
        ]),
        vue.createElementVNode("view", { class: "form-item checkbox-item" }, [
          vue.createElementVNode("text", { class: "label" }, "调试模式"),
          vue.createElementVNode("switch", {
            checked: $data.debug,
            onChange: _cache[2] || (_cache[2] = (...args) => $options.onDebugChange && $options.onDebugChange(...args)),
            color: "#4CAF50"
          }, null, 40, ["checked"])
        ]),
        vue.createElementVNode("view", { class: "form-item checkbox-item" }, [
          vue.createElementVNode("text", { class: "label" }, "自动重连"),
          vue.createElementVNode("switch", {
            checked: $data.autoReconnect,
            onChange: _cache[3] || (_cache[3] = (...args) => $options.onAutoReconnectChange && $options.onAutoReconnectChange(...args)),
            color: "#4CAF50"
          }, null, 40, ["checked"])
        ]),
        vue.createElementVNode("view", { class: "form-item checkbox-item" }, [
          vue.createElementVNode("text", { class: "label" }, "心跳检测"),
          vue.createElementVNode("switch", {
            checked: $data.heartbeat,
            onChange: _cache[4] || (_cache[4] = (...args) => $options.onHeartbeatChange && $options.onHeartbeatChange(...args)),
            color: "#4CAF50"
          }, null, 40, ["checked"])
        ]),
        vue.createCommentVNode(" 连接按钮 "),
        vue.createElementVNode("view", { class: "button-group" }, [
          vue.createElementVNode("button", {
            class: "btn connect-btn",
            onClick: _cache[5] || (_cache[5] = (...args) => $options.connectWebSocket && $options.connectWebSocket(...args)),
            disabled: $data.isConnected
          }, "连接", 8, ["disabled"]),
          vue.createElementVNode("button", {
            class: "btn disconnect-btn",
            onClick: _cache[6] || (_cache[6] = (...args) => $options.disconnectWebSocket && $options.disconnectWebSocket(...args)),
            disabled: !$data.isConnected
          }, "断开", 8, ["disabled"])
        ])
      ]),
      vue.createCommentVNode(" 消息发送区域 "),
      vue.createElementVNode(
        "view",
        {
          class: vue.normalizeClass(["message-sender", { "disabled": !$data.isConnected }])
        },
        [
          vue.createElementVNode("view", { class: "form-item" }, [
            vue.createElementVNode("text", { class: "label" }, "消息类型"),
            vue.createElementVNode("picker", {
              onChange: _cache[7] || (_cache[7] = (...args) => $options.onMessageTypeChange && $options.onMessageTypeChange(...args)),
              value: $data.messageTypeIndex,
              range: $data.messageTypes
            }, [
              vue.createElementVNode(
                "view",
                { class: "picker" },
                vue.toDisplayString($data.messageTypes[$data.messageTypeIndex]),
                1
                /* TEXT */
              )
            ], 40, ["value", "range"])
          ]),
          $data.messageTypeIndex === 1 ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 0,
            class: "form-item"
          }, [
            vue.createElementVNode("text", { class: "label" }, "接收者ID"),
            vue.withDirectives(vue.createElementVNode(
              "input",
              {
                class: "input",
                "onUpdate:modelValue": _cache[8] || (_cache[8] = ($event) => $data.receiverId = $event),
                placeholder: "接收者ID"
              },
              null,
              512
              /* NEED_PATCH */
            ), [
              [vue.vModelText, $data.receiverId]
            ])
          ])) : vue.createCommentVNode("v-if", true),
          vue.createElementVNode("view", { class: "form-item" }, [
            vue.createElementVNode("text", { class: "label" }, "消息内容"),
            vue.withDirectives(vue.createElementVNode(
              "textarea",
              {
                class: "textarea",
                "onUpdate:modelValue": _cache[9] || (_cache[9] = ($event) => $data.messageContent = $event),
                placeholder: "请输入消息内容"
              },
              null,
              512
              /* NEED_PATCH */
            ), [
              [vue.vModelText, $data.messageContent]
            ])
          ]),
          vue.createElementVNode("button", {
            class: "btn send-btn",
            onClick: _cache[10] || (_cache[10] = (...args) => $options.sendMessage && $options.sendMessage(...args)),
            disabled: !$data.isConnected || !$data.messageContent
          }, "发送消息", 8, ["disabled"])
        ],
        2
        /* CLASS */
      ),
      vue.createCommentVNode(" 消息记录区域 "),
      vue.createElementVNode("view", { class: "message-log" }, [
        vue.createElementVNode("view", { class: "log-header" }, [
          vue.createElementVNode("text", { class: "log-title" }, "消息记录"),
          vue.createElementVNode("button", {
            class: "btn clear-btn",
            onClick: _cache[11] || (_cache[11] = (...args) => $options.clearMessages && $options.clearMessages(...args))
          }, "清空")
        ]),
        vue.createElementVNode("scroll-view", {
          class: "log-content",
          "scroll-y": "",
          "scroll-top": $data.scrollTop
        }, [
          $data.messages.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 0,
            class: "empty-log"
          }, [
            vue.createElementVNode("text", null, "暂无消息记录")
          ])) : vue.createCommentVNode("v-if", true),
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($data.messages, (msg, index) => {
              return vue.openBlock(), vue.createElementBlock(
                "view",
                {
                  key: index,
                  class: vue.normalizeClass(["message-item", msg.type])
                },
                [
                  vue.createElementVNode("view", { class: "message-header" }, [
                    vue.createElementVNode(
                      "text",
                      { class: "message-type" },
                      vue.toDisplayString(msg.typeText),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode(
                      "text",
                      { class: "message-time" },
                      vue.toDisplayString(msg.time),
                      1
                      /* TEXT */
                    )
                  ]),
                  vue.createElementVNode("view", { class: "message-content" }, [
                    vue.createElementVNode(
                      "text",
                      { class: "message-text" },
                      vue.toDisplayString(msg.content),
                      1
                      /* TEXT */
                    )
                  ])
                ],
                2
                /* CLASS */
              );
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ], 8, ["scroll-top"])
      ])
    ]);
  }
  const PagesWebsocketTestIndex = /* @__PURE__ */ _export_sfc(_sfc_main$9, [["render", _sfc_render$8], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/websocket-test/index.vue"]]);
  const _imports_0$3 = "/static/image/empty-calendar.png";
  const _sfc_main$8 = {
    __name: "index",
    setup(__props, { expose: __expose }) {
      __expose();
      const headerBarRef = vue.ref(null);
      const headerPlaceholderHeight = vue.computed(() => {
        if (headerBarRef.value && headerBarRef.value.headerHeight) {
          return headerBarRef.value.headerHeight + "rpx";
        }
        return "120rpx";
      });
      const weekDays = ["日", "一", "二", "三", "四", "五", "六"];
      const today = new Date(2025, 4, 13);
      const currentYear = vue.ref(today.getFullYear());
      const currentMonth = vue.ref(today.getMonth() + 1);
      const selectedDate = vue.ref(formatDate(today));
      const calendarDays = vue.ref([]);
      const events = vue.ref([
        // 5月事件
        {
          id: 1,
          title: "2025全国大学生人工智能创新大赛报名截止",
          date: "2025-05-15",
          startTime: "23:59",
          endTime: "23:59",
          location: "线上提交",
          type: "deadline",
          completed: false
        },
        {
          id: 2,
          title: "团队项目周报交流会",
          date: "2025-05-17",
          startTime: "14:30",
          endTime: "16:30",
          location: "信息楼A305",
          type: "team",
          completed: false
        },
        {
          id: 3,
          title: "机器学习期末项目演示",
          date: "2025-05-20",
          startTime: "09:00",
          endTime: "12:00",
          location: "计算机学院报告厅",
          type: "deadline",
          completed: false
        },
        {
          id: 4,
          title: "互联网+大赛校内选拔赛",
          date: "2025-05-25",
          startTime: "08:30",
          endTime: "17:00",
          location: "创新创业中心",
          type: "competition",
          completed: false
        },
        {
          id: 5,
          title: "校园开发者大会",
          date: "2025-05-28",
          startTime: "13:00",
          endTime: "18:00",
          location: "图书馆报告厅",
          type: "meeting",
          completed: false
        },
        // 6月事件
        {
          id: 6,
          title: "挑战杯竞赛初赛",
          date: "2025-06-03",
          startTime: "09:00",
          endTime: "17:00",
          location: "大学生活动中心",
          type: "competition",
          completed: false
        },
        {
          id: 7,
          title: "数据科学项目组会议",
          date: "2025-06-08",
          startTime: "15:00",
          endTime: "17:00",
          location: "信息楼B201",
          type: "team",
          completed: false
        },
        {
          id: 8,
          title: "第二十届ACM国际大学生程序设计竞赛",
          date: "2025-06-12",
          startTime: "08:00",
          endTime: "18:00",
          location: "计算机学院机房",
          type: "competition",
          completed: false
        },
        {
          id: 9,
          title: "青年创新创业论坛",
          date: "2025-06-15",
          startTime: "14:00",
          endTime: "17:30",
          location: "大礼堂",
          type: "meeting",
          completed: false
        },
        {
          id: 10,
          title: "期末考试周开始",
          date: "2025-06-24",
          startTime: "08:00",
          endTime: "18:00",
          location: "各考场",
          type: "deadline",
          completed: false
        },
        {
          id: 11,
          title: "软件工程实训作品提交",
          date: "2025-06-28",
          startTime: "17:00",
          endTime: "17:00",
          location: "线上提交",
          type: "deadline",
          completed: false
        },
        // 7月事件
        {
          id: 12,
          title: "暑期实习开始",
          date: "2025-07-01",
          startTime: "09:00",
          endTime: "18:00",
          location: "企业实习基地",
          type: "other",
          completed: false
        },
        {
          id: 13,
          title: "全国大学生智能汽车竞赛",
          date: "2025-07-05",
          startTime: "08:30",
          endTime: "17:30",
          location: "工程学院综合楼",
          type: "competition",
          completed: false
        },
        {
          id: 14,
          title: "开源项目代码审核会议",
          date: "2025-07-10",
          startTime: "14:00",
          endTime: "16:00",
          location: "线上会议",
          type: "team",
          completed: false
        },
        {
          id: 15,
          title: "创新创业夏令营",
          date: "2025-07-15",
          startTime: "09:00",
          endTime: "17:00",
          location: "创客空间",
          type: "meeting",
          completed: false
        },
        {
          id: 16,
          title: "人工智能与机器人大赛",
          date: "2025-07-20",
          startTime: "09:00",
          endTime: "18:00",
          location: "科技馆",
          type: "competition",
          completed: false
        },
        {
          id: 17,
          title: "暑期学术交流会",
          date: "2025-07-25",
          startTime: "14:30",
          endTime: "17:30",
          location: "国际会议中心",
          type: "meeting",
          completed: false
        },
        {
          id: 18,
          title: "实训成果展示",
          date: "2025-07-30",
          startTime: "10:00",
          endTime: "16:00",
          location: "学术交流中心",
          type: "deadline",
          completed: false
        }
      ]);
      const eventTypeMap = {
        "competition": "竞赛",
        "team": "团队",
        "meeting": "会议",
        "deadline": "截止",
        "other": "其他"
      };
      const addEventPopup = vue.ref(null);
      const newEvent = vue.ref({
        title: "",
        date: "",
        startTime: "",
        endTime: "",
        location: "",
        type: "other"
      });
      const selectedDateFormat = vue.computed(() => {
        if (!selectedDate.value)
          return "";
        const date = new Date(selectedDate.value);
        date.getFullYear();
        const month = date.getMonth() + 1;
        const day = date.getDate();
        const weekDay = weekDays[date.getDay()];
        return `${month}月${day}日 星期${weekDay}`;
      });
      const eventsForSelectedDate = vue.computed(() => {
        return events.value.filter((event2) => event2.date === selectedDate.value).sort((a, b) => a.startTime.localeCompare(b.startTime));
      });
      function generateCalendar() {
        const days = [];
        const firstDay = new Date(currentYear.value, currentMonth.value - 1, 1);
        const lastDay = new Date(currentYear.value, currentMonth.value, 0);
        const firstDayOfWeek = firstDay.getDay();
        const prevMonthLastDay = new Date(currentYear.value, currentMonth.value - 1, 0).getDate();
        for (let i = 0; i < firstDayOfWeek; i++) {
          const day = prevMonthLastDay - firstDayOfWeek + i + 1;
          let prevMonth2 = currentMonth.value - 1;
          let year = currentYear.value;
          if (prevMonth2 === 0) {
            prevMonth2 = 12;
            year -= 1;
          }
          days.push({
            day,
            fullDate: formatDate(new Date(year, prevMonth2 - 1, day)),
            otherMonth: true,
            isToday: false
          });
        }
        const todayStr = formatDate(today);
        for (let i = 1; i <= lastDay.getDate(); i++) {
          const date = new Date(currentYear.value, currentMonth.value - 1, i);
          const dateStr = formatDate(date);
          days.push({
            day: i,
            fullDate: dateStr,
            otherMonth: false,
            isToday: dateStr === todayStr
          });
        }
        const remainingDays = 42 - days.length;
        for (let i = 1; i <= remainingDays; i++) {
          let nextMonth2 = currentMonth.value + 1;
          let year = currentYear.value;
          if (nextMonth2 === 13) {
            nextMonth2 = 1;
            year += 1;
          }
          days.push({
            day: i,
            fullDate: formatDate(new Date(year, nextMonth2 - 1, i)),
            otherMonth: true,
            isToday: false
          });
        }
        calendarDays.value = days;
      }
      function prevMonth() {
        if (currentMonth.value === 1) {
          currentMonth.value = 12;
          currentYear.value -= 1;
        } else {
          currentMonth.value -= 1;
        }
        generateCalendar();
      }
      function nextMonth() {
        if (currentMonth.value === 12) {
          currentMonth.value = 1;
          currentYear.value += 1;
        } else {
          currentMonth.value += 1;
        }
        generateCalendar();
      }
      function selectDate(date) {
        selectedDate.value = date.fullDate;
      }
      function hasEvent(date) {
        return events.value.some((event2) => event2.date === date);
      }
      function addEvent() {
        newEvent.value = {
          title: "",
          date: selectedDate.value,
          // 默认使用当前选中日期
          startTime: "09:00",
          endTime: "10:00",
          location: "",
          type: "other"
        };
        addEventPopup.value.open();
      }
      function onDateChange(e) {
        newEvent.value.date = e.detail.value;
      }
      function onStartTimeChange(e) {
        const time = e.detail.value;
        newEvent.value.startTime = time;
        if (!newEvent.value.endTime || newEvent.value.endTime < time) {
          const [hours, minutes] = time.split(":").map(Number);
          let endHours = hours + 1;
          if (endHours > 23)
            endHours = 23;
          newEvent.value.endTime = `${String(endHours).padStart(2, "0")}:${String(minutes).padStart(2, "0")}`;
        }
      }
      function onEndTimeChange(e) {
        newEvent.value.endTime = e.detail.value;
      }
      function cancelAddEvent() {
        addEventPopup.value.close();
      }
      function confirmAddEvent() {
        if (!newEvent.value.title) {
          uni.showToast({
            title: "请输入事件标题",
            icon: "none"
          });
          return;
        }
        if (!newEvent.value.date) {
          uni.showToast({
            title: "请选择日期",
            icon: "none"
          });
          return;
        }
        if (!newEvent.value.startTime) {
          uni.showToast({
            title: "请选择开始时间",
            icon: "none"
          });
          return;
        }
        if (!newEvent.value.endTime) {
          uni.showToast({
            title: "请选择结束时间",
            icon: "none"
          });
          return;
        }
        const newEventObj = {
          id: events.value.length > 0 ? Math.max(...events.value.map((e) => e.id)) + 1 : 1,
          title: newEvent.value.title,
          date: newEvent.value.date,
          startTime: newEvent.value.startTime,
          endTime: newEvent.value.endTime,
          location: newEvent.value.location,
          type: newEvent.value.type,
          completed: false
        };
        events.value.push(newEventObj);
        addEventPopup.value.close();
        uni.showToast({
          title: "添加成功",
          icon: "success"
        });
      }
      function viewEventDetail(event2) {
        uni.showToast({
          title: "查看事件详情功能开发中",
          icon: "none"
        });
      }
      function onSearch() {
        uni.showToast({
          title: "搜索功能开发中",
          icon: "none"
        });
      }
      function formatDate(date) {
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, "0");
        const day = String(date.getDate()).padStart(2, "0");
        return `${year}-${month}-${day}`;
      }
      function formatTime2(time) {
        return time;
      }
      function getEventTypeText(type) {
        const typeMap = {
          "competition": "竞赛",
          "team": "团队",
          "deadline": "截止",
          "meeting": "会议",
          "other": "其他"
        };
        return typeMap[type] || "其他";
      }
      vue.onMounted(() => {
        generateCalendar();
      });
      const __returned__ = { headerBarRef, headerPlaceholderHeight, weekDays, today, currentYear, currentMonth, selectedDate, calendarDays, events, eventTypeMap, addEventPopup, newEvent, selectedDateFormat, eventsForSelectedDate, generateCalendar, prevMonth, nextMonth, selectDate, hasEvent, addEvent, onDateChange, onStartTimeChange, onEndTimeChange, cancelAddEvent, confirmAddEvent, viewEventDetail, onSearch, formatDate, formatTime: formatTime2, getEventTypeText, ref: vue.ref, computed: vue.computed, onMounted: vue.onMounted, HeaderBar, TabBar, SvgIcon };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$7(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_0$3);
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createVNode(
        $setup["HeaderBar"],
        {
          ref: "headerBarRef",
          title: "日程安排",
          onSearch: $setup.onSearch
        },
        null,
        512
        /* NEED_PATCH */
      ),
      vue.createCommentVNode(" 导航栏占位 "),
      vue.createElementVNode(
        "view",
        {
          class: "header-placeholder",
          style: vue.normalizeStyle({ height: $setup.headerPlaceholderHeight })
        },
        null,
        4
        /* STYLE */
      ),
      vue.createCommentVNode(" 主内容区域 "),
      vue.createElementVNode("view", { class: "content" }, [
        vue.createCommentVNode(" 日历区域 "),
        vue.createElementVNode("view", { class: "calendar-container" }, [
          vue.createElementVNode("view", { class: "calendar-header" }, [
            vue.createElementVNode("view", { class: "month-title" }, [
              vue.createElementVNode(
                "text",
                { class: "current-month" },
                vue.toDisplayString($setup.currentYear) + "年" + vue.toDisplayString($setup.currentMonth) + "月",
                1
                /* TEXT */
              )
            ]),
            vue.createElementVNode("view", { class: "calendar-controls" }, [
              vue.createElementVNode("view", {
                class: "control-btn",
                onClick: $setup.prevMonth
              }, [
                vue.createElementVNode("text", { class: "icon-arrow transform-rotate-180" })
              ]),
              vue.createElementVNode("view", {
                class: "control-btn",
                onClick: $setup.nextMonth
              }, [
                vue.createElementVNode("text", { class: "icon-arrow" })
              ]),
              vue.createElementVNode("view", {
                class: "add-btn top-add-btn",
                onClick: $setup.addEvent
              }, [
                vue.createElementVNode("text", { class: "add-icon" }, "+")
              ])
            ])
          ]),
          vue.createCommentVNode(" 星期标题 "),
          vue.createElementVNode("view", { class: "week-header" }, [
            (vue.openBlock(), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.weekDays, (day, index) => {
                return vue.createElementVNode("view", {
                  class: "week-day",
                  key: index
                }, [
                  vue.createElementVNode(
                    "text",
                    {
                      class: vue.normalizeClass({ "weekend": index === 0 || index === 6 })
                    },
                    vue.toDisplayString(day),
                    3
                    /* TEXT, CLASS */
                  )
                ]);
              }),
              64
              /* STABLE_FRAGMENT */
            ))
          ]),
          vue.createCommentVNode(" 日历格子 "),
          vue.createElementVNode("view", { class: "calendar-grid" }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.calendarDays, (date, index) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  key: index,
                  class: vue.normalizeClass([
                    "calendar-day",
                    { "other-month": date.otherMonth },
                    { "today": date.isToday },
                    { "has-event": $setup.hasEvent(date.fullDate) },
                    { "selected": $setup.selectedDate === date.fullDate }
                  ]),
                  onClick: ($event) => $setup.selectDate(date)
                }, [
                  vue.createElementVNode(
                    "text",
                    { class: "day-number" },
                    vue.toDisplayString(date.day),
                    1
                    /* TEXT */
                  ),
                  $setup.hasEvent(date.fullDate) ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 0,
                    class: "event-dot"
                  })) : vue.createCommentVNode("v-if", true)
                ], 10, ["onClick"]);
              }),
              128
              /* KEYED_FRAGMENT */
            ))
          ])
        ]),
        vue.createCommentVNode(" 事件列表 "),
        vue.createElementVNode("view", { class: "events-container" }, [
          vue.createElementVNode("view", { class: "events-header" }, [
            vue.createElementVNode(
              "text",
              { class: "events-title" },
              vue.toDisplayString($setup.selectedDateFormat),
              1
              /* TEXT */
            )
          ]),
          vue.createElementVNode("scroll-view", {
            "scroll-y": "",
            class: "events-list"
          }, [
            $setup.eventsForSelectedDate.length > 0 ? (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              { key: 0 },
              vue.renderList($setup.eventsForSelectedDate, (event2, index) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  key: index,
                  class: vue.normalizeClass(["event-item", { "completed": event2.completed }]),
                  onClick: ($event) => $setup.viewEventDetail(event2)
                }, [
                  vue.createElementVNode("view", { class: "event-time" }, [
                    vue.createVNode($setup["SvgIcon"], {
                      name: "shijian",
                      size: "18"
                    }),
                    vue.createElementVNode(
                      "text",
                      null,
                      vue.toDisplayString($setup.formatTime(event2.startTime)) + " - " + vue.toDisplayString($setup.formatTime(event2.endTime)),
                      1
                      /* TEXT */
                    )
                  ]),
                  vue.createElementVNode("view", { class: "event-content" }, [
                    vue.createElementVNode(
                      "text",
                      { class: "event-title" },
                      vue.toDisplayString(event2.title),
                      1
                      /* TEXT */
                    ),
                    event2.location ? (vue.openBlock(), vue.createElementBlock("text", {
                      key: 0,
                      class: "event-location"
                    }, [
                      vue.createVNode($setup["SvgIcon"], {
                        name: "weizhi",
                        size: "14"
                      }),
                      vue.createTextVNode(
                        " " + vue.toDisplayString(event2.location),
                        1
                        /* TEXT */
                      )
                    ])) : vue.createCommentVNode("v-if", true)
                  ]),
                  event2.type ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 0,
                    class: "event-status"
                  }, [
                    vue.createElementVNode(
                      "text",
                      {
                        class: vue.normalizeClass(["status-tag", event2.type])
                      },
                      vue.toDisplayString($setup.getEventTypeText(event2.type)),
                      3
                      /* TEXT, CLASS */
                    )
                  ])) : vue.createCommentVNode("v-if", true)
                ], 10, ["onClick"]);
              }),
              128
              /* KEYED_FRAGMENT */
            )) : (vue.openBlock(), vue.createElementBlock("view", {
              key: 1,
              class: "empty-state"
            }, [
              vue.createElementVNode("image", {
                class: "empty-image",
                src: _imports_0$3,
                mode: "aspectFit"
              }),
              vue.createElementVNode("text", { class: "empty-text" }, "今日暂无日程安排")
            ]))
          ])
        ])
      ]),
      vue.createCommentVNode(" 底部TabBar "),
      vue.createVNode($setup["TabBar"], { activeTab: "schedule" }),
      vue.createCommentVNode(" 添加事件弹窗 "),
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "addEventPopup",
          type: "bottom"
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "popup-content" }, [
              vue.createElementVNode("view", { class: "popup-header" }, [
                vue.createElementVNode("button", {
                  class: "btn cancel-btn",
                  onClick: $setup.cancelAddEvent
                }, "取消"),
                vue.createElementVNode("text", { class: "popup-title" }, "添加日程"),
                vue.createElementVNode("button", {
                  class: "btn confirm-btn",
                  onClick: $setup.confirmAddEvent
                }, "保存")
              ]),
              vue.createElementVNode("view", { class: "form-content" }, [
                vue.createElementVNode("view", { class: "form-item" }, [
                  vue.createElementVNode("text", { class: "form-label" }, "标题"),
                  vue.withDirectives(vue.createElementVNode(
                    "input",
                    {
                      class: "form-input",
                      "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.newEvent.title = $event),
                      placeholder: "请输入事件标题"
                    },
                    null,
                    512
                    /* NEED_PATCH */
                  ), [
                    [vue.vModelText, $setup.newEvent.title]
                  ])
                ]),
                vue.createElementVNode("view", { class: "form-item" }, [
                  vue.createElementVNode("text", { class: "form-label" }, "日期"),
                  vue.createElementVNode("picker", {
                    mode: "date",
                    value: $setup.newEvent.date,
                    onChange: $setup.onDateChange
                  }, [
                    vue.createElementVNode("view", { class: "form-input date-picker" }, [
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString($setup.newEvent.date || "请选择日期"),
                        1
                        /* TEXT */
                      ),
                      vue.createVNode($setup["SvgIcon"], {
                        name: "shijian",
                        size: "16"
                      })
                    ])
                  ], 40, ["value"])
                ]),
                vue.createElementVNode("view", { class: "form-item" }, [
                  vue.createElementVNode("text", { class: "form-label" }, "开始时间"),
                  vue.createElementVNode("picker", {
                    mode: "time",
                    value: $setup.newEvent.startTime,
                    onChange: $setup.onStartTimeChange
                  }, [
                    vue.createElementVNode("view", { class: "form-input date-picker" }, [
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString($setup.newEvent.startTime || "请选择开始时间"),
                        1
                        /* TEXT */
                      ),
                      vue.createVNode($setup["SvgIcon"], {
                        name: "shijian",
                        size: "16"
                      })
                    ])
                  ], 40, ["value"])
                ]),
                vue.createElementVNode("view", { class: "form-item" }, [
                  vue.createElementVNode("text", { class: "form-label" }, "结束时间"),
                  vue.createElementVNode("picker", {
                    mode: "time",
                    value: $setup.newEvent.endTime,
                    onChange: $setup.onEndTimeChange
                  }, [
                    vue.createElementVNode("view", { class: "form-input date-picker" }, [
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString($setup.newEvent.endTime || "请选择结束时间"),
                        1
                        /* TEXT */
                      ),
                      vue.createVNode($setup["SvgIcon"], {
                        name: "shijian",
                        size: "16"
                      })
                    ])
                  ], 40, ["value"])
                ]),
                vue.createElementVNode("view", { class: "form-item" }, [
                  vue.createElementVNode("text", { class: "form-label" }, "地点"),
                  vue.withDirectives(vue.createElementVNode(
                    "input",
                    {
                      class: "form-input",
                      "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.newEvent.location = $event),
                      placeholder: "请输入地点 (选填)"
                    },
                    null,
                    512
                    /* NEED_PATCH */
                  ), [
                    [vue.vModelText, $setup.newEvent.location]
                  ])
                ]),
                vue.createElementVNode("view", { class: "form-item" }, [
                  vue.createElementVNode("text", { class: "form-label" }, "类型"),
                  vue.createElementVNode("view", { class: "type-selector" }, [
                    (vue.openBlock(), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList($setup.eventTypeMap, (text, type) => {
                        return vue.createElementVNode("view", {
                          key: type,
                          class: vue.normalizeClass(["type-item", { "active": $setup.newEvent.type === type }, type]),
                          onClick: ($event) => $setup.newEvent.type = type
                        }, [
                          vue.createElementVNode(
                            "text",
                            null,
                            vue.toDisplayString(text),
                            1
                            /* TEXT */
                          )
                        ], 10, ["onClick"]);
                      }),
                      64
                      /* STABLE_FRAGMENT */
                    ))
                  ])
                ])
              ])
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesScheduleIndex = /* @__PURE__ */ _export_sfc(_sfc_main$8, [["render", _sfc_render$7], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/schedule/index.vue"]]);
  const _sfc_main$7 = {
    __name: "create",
    setup(__props, { expose: __expose }) {
      __expose();
      const form = vue.ref({
        title: "",
        description: "",
        categoryId: 1,
        // 默认选中第一个类型
        tags: [
          { text: "技术创新", type: "blue" },
          { text: "移动应用", type: "purple" },
          { text: "用户体验", type: "green" }
        ],
        startDate: "",
        endDate: "",
        status: "ongoing",
        // 默认为进行中
        coverImage: "",
        teamMembers: [
          { name: "张明", role: "项目负责人", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/3900eb55be7c4cb3b17c0b02d07a18bc.png" },
          { name: "李华", role: "技术开发", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/9ca105ebe429473faebca9c81b8e6f78.png" },
          { name: "王芳", role: "UI设计", avatar: "https://saichuang.oss-cn-beijing.aliyuncs.com/task_attachment/e71bf50a98ec42079b9746bbd982e405.png" }
        ],
        background: "",
        features: "",
        achievements: "",
        images: []
      });
      const projectTypes = [
        { id: 1, name: "创新创业" },
        { id: 2, name: "科技竞赛" },
        { id: 3, name: "研究项目" },
        { id: 4, name: "设计作品" },
        { id: 5, name: "其他" }
      ];
      const statusOptions = [
        { value: "ongoing", label: "进行中" },
        { value: "completed", label: "已完成" },
        { value: "planning", label: "规划中" }
      ];
      function goBack() {
        uni.navigateBack();
      }
      function selectType(id) {
        form.value.categoryId = id;
      }
      function showAddTagModal() {
        uni.showModal({
          title: "添加标签",
          editable: true,
          placeholderText: "请输入标签名称",
          success: (res) => {
            if (res.confirm && res.content) {
              const types2 = ["blue", "purple", "green", "yellow", "red"];
              const randomType = types2[Math.floor(Math.random() * types2.length)];
              form.value.tags.push({
                text: res.content,
                type: randomType
              });
            }
          }
        });
      }
      function removeTag(index) {
        form.value.tags.splice(index, 1);
      }
      function openDatePicker(type) {
        uni.showDatePicker({
          success: (res) => {
            if (type === "start") {
              form.value.startDate = res.value;
            } else {
              form.value.endDate = res.value;
            }
          }
        });
      }
      function showAddMemberModal() {
        uni.showModal({
          title: "添加团队成员",
          content: "请在弹出的表单中填写成员信息",
          success: (res) => {
            if (res.confirm) {
              const randomNames = ["赵云", "孙悦", "李明", "王强", "张艺", "刘洋"];
              const randomRoles = ["前端开发", "后端工程师", "产品经理", "设计师", "测试工程师", "运营"];
              const randomAvatars = [
                "https://beijing.aliyuncs.com/task_attachment/6d94aa83cfc8475d8bb0aa3d8dba9928.png",
                "https://beijing.aliyuncs.com/task_attachment/9ca105ebe429473faebca9c81b8e6f78.png",
                "https://beijing.aliyuncs.com/task_attachment/e71bf50a98ec42079b9746bbd982e405.png",
                "https://beijing.aliyuncs.com/task_attachment/fa539323f8304e5885a7a454ef468849.jpeg"
              ];
              const randomName = randomNames[Math.floor(Math.random() * randomNames.length)];
              const randomRole = randomRoles[Math.floor(Math.random() * randomRoles.length)];
              const randomAvatar = randomAvatars[Math.floor(Math.random() * randomAvatars.length)];
              form.value.teamMembers.push({
                name: randomName,
                role: randomRole,
                avatar: randomAvatar
              });
            }
          }
        });
      }
      function removeMember(index) {
        form.value.teamMembers.splice(index, 1);
      }
      function uploadCover() {
        uni.chooseImage({
          count: 1,
          sizeType: ["compressed"],
          sourceType: ["album", "camera"],
          success: (res) => {
            form.value.coverImage = res.tempFilePaths[0];
          }
        });
      }
      function uploadImage() {
        if (form.value.images.length >= 9) {
          uni.showToast({
            title: "最多上传9张图片",
            icon: "none"
          });
          return;
        }
        uni.chooseImage({
          count: 9 - form.value.images.length,
          sizeType: ["compressed"],
          sourceType: ["album", "camera"],
          success: (res) => {
            form.value.images = form.value.images.concat(res.tempFilePaths);
          }
        });
      }
      function removeImage(index) {
        form.value.images.splice(index, 1);
      }
      function submitProject() {
        if (!form.value.title) {
          showToast("请输入项目名称");
          return;
        }
        if (!form.value.description) {
          showToast("请输入项目简介");
          return;
        }
        if (!form.value.coverImage) {
          showToast("请上传项目封面");
          return;
        }
        uni.showLoading({
          title: "提交中..."
        });
        setTimeout(() => {
          uni.hideLoading();
          uni.showModal({
            title: "发布成功",
            content: "项目已成功发布，等待审核",
            showCancel: false,
            success: () => {
              uni.navigateBack();
            }
          });
        }, 1500);
      }
      function showToast(title) {
        uni.showToast({
          title,
          icon: "none"
        });
      }
      const __returned__ = { form, projectTypes, statusOptions, goBack, selectType, showAddTagModal, removeTag, openDatePicker, showAddMemberModal, removeMember, uploadCover, uploadImage, removeImage, submitProject, showToast, ref: vue.ref, SvgIcon };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$6(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_easyinput = resolveEasycom(vue.resolveDynamicComponent("uni-easyinput"), __easycom_0);
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createElementVNode("view", { class: "header" }, [
        vue.createElementVNode("view", {
          class: "header-left",
          onClick: $setup.goBack
        }, [
          vue.createVNode($setup["SvgIcon"], {
            name: "back",
            size: "38",
            color: "#666"
          })
        ]),
        vue.createElementVNode("view", { class: "header-title" }, "发布项目"),
        vue.createElementVNode("view", { class: "header-right" })
      ]),
      vue.createCommentVNode(" 主内容区域 "),
      vue.createElementVNode("scroll-view", {
        "scroll-y": "",
        class: "main-content"
      }, [
        vue.createElementVNode("form", { class: "project-form" }, [
          vue.createCommentVNode(" 项目封面 "),
          vue.createElementVNode("view", { class: "form-card" }, [
            vue.createElementVNode("view", { class: "form-title" }, "项目封面"),
            vue.createElementVNode("view", {
              class: "cover-upload",
              onClick: $setup.uploadCover
            }, [
              !$setup.form.coverImage ? (vue.openBlock(), vue.createElementBlock(
                vue.Fragment,
                { key: 0 },
                [
                  vue.createVNode($setup["SvgIcon"], {
                    name: "upload",
                    size: "60",
                    color: "#ccc"
                  }),
                  vue.createElementVNode("view", { class: "upload-tips" }, [
                    vue.createElementVNode("text", { class: "upload-main-tip" }, "点击或拖拽上传项目封面"),
                    vue.createElementVNode("text", { class: "upload-sub-tip" }, "建议尺寸: 1200 x 600px, 最大2MB")
                  ])
                ],
                64
                /* STABLE_FRAGMENT */
              )) : (vue.openBlock(), vue.createElementBlock("image", {
                key: 1,
                src: $setup.form.coverImage,
                mode: "aspectFill",
                class: "preview-image"
              }, null, 8, ["src"]))
            ])
          ]),
          vue.createCommentVNode(" 基本信息 "),
          vue.createElementVNode("view", { class: "form-card" }, [
            vue.createElementVNode("view", { class: "form-title" }, "基本信息"),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("text", { class: "form-label" }, "项目名称"),
              vue.createVNode(_component_uni_easyinput, {
                modelValue: $setup.form.title,
                "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.form.title = $event),
                placeholder: "请输入项目名称（20字以内）",
                maxlength: "20"
              }, null, 8, ["modelValue"])
            ]),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("text", { class: "form-label" }, "项目简介"),
              vue.createVNode(_component_uni_easyinput, {
                modelValue: $setup.form.description,
                "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.form.description = $event),
                type: "textarea",
                placeholder: "请简要描述您的项目（200字以内）",
                maxlength: "200",
                autoHeight: true
              }, null, 8, ["modelValue"])
            ]),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("text", { class: "form-label" }, "项目类型"),
              vue.createElementVNode("view", { class: "type-options" }, [
                (vue.openBlock(), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.projectTypes, (type, index) => {
                    return vue.createElementVNode("view", {
                      key: index,
                      class: vue.normalizeClass(["type-option", { "type-active": $setup.form.categoryId === type.id }]),
                      onClick: ($event) => $setup.selectType(type.id)
                    }, vue.toDisplayString(type.name), 11, ["onClick"]);
                  }),
                  64
                  /* STABLE_FRAGMENT */
                ))
              ])
            ])
          ]),
          vue.createCommentVNode(" 项目标签 "),
          vue.createElementVNode("view", { class: "form-card" }, [
            vue.createElementVNode("view", { class: "form-header" }, [
              vue.createElementVNode("view", { class: "form-title" }, "项目标签"),
              vue.createElementVNode("view", {
                class: "add-tag-btn",
                onClick: $setup.showAddTagModal
              }, [
                vue.createVNode($setup["SvgIcon"], {
                  name: "plus",
                  size: "28",
                  color: "#2d8cf0"
                }),
                vue.createElementVNode("text", { class: "add-tag-text" }, "添加标签")
              ])
            ]),
            vue.createElementVNode("view", { class: "tags-container" }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.form.tags, (tag, index) => {
                  return vue.openBlock(), vue.createElementBlock(
                    "view",
                    {
                      key: index,
                      class: vue.normalizeClass(["tag-pill", `tag-${tag.type}`])
                    },
                    [
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString(tag.text),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("view", {
                        class: "tag-delete",
                        onClick: ($event) => $setup.removeTag(index)
                      }, [
                        vue.createVNode($setup["SvgIcon"], {
                          name: "close",
                          size: "24",
                          color: "currentColor"
                        })
                      ], 8, ["onClick"])
                    ],
                    2
                    /* CLASS */
                  );
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ])
          ]),
          vue.createCommentVNode(" 项目时间 "),
          vue.createElementVNode("view", { class: "form-card" }, [
            vue.createElementVNode("view", { class: "form-title" }, "项目时间"),
            vue.createElementVNode("view", { class: "date-grid" }, [
              vue.createElementVNode("view", { class: "date-item" }, [
                vue.createElementVNode("text", { class: "form-label" }, "开始日期"),
                vue.createElementVNode("view", {
                  class: "date-input-container",
                  onClick: _cache[2] || (_cache[2] = ($event) => $setup.openDatePicker("start"))
                }, [
                  vue.createVNode($setup["SvgIcon"], {
                    name: "calendar",
                    size: "28",
                    color: "#999",
                    class: "date-icon"
                  }),
                  vue.createElementVNode(
                    "text",
                    { class: "date-text" },
                    vue.toDisplayString($setup.form.startDate || "YYYY-MM-DD"),
                    1
                    /* TEXT */
                  )
                ])
              ]),
              vue.createElementVNode("view", { class: "date-item" }, [
                vue.createElementVNode("text", { class: "form-label" }, "结束日期"),
                vue.createElementVNode("view", {
                  class: "date-input-container",
                  onClick: _cache[3] || (_cache[3] = ($event) => $setup.openDatePicker("end"))
                }, [
                  vue.createVNode($setup["SvgIcon"], {
                    name: "calendar",
                    size: "28",
                    color: "#999",
                    class: "date-icon"
                  }),
                  vue.createElementVNode(
                    "text",
                    { class: "date-text" },
                    vue.toDisplayString($setup.form.endDate || "YYYY-MM-DD"),
                    1
                    /* TEXT */
                  )
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("text", { class: "form-label" }, "项目状态"),
              vue.createElementVNode("view", { class: "status-options" }, [
                (vue.openBlock(), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.statusOptions, (status, index) => {
                    return vue.createElementVNode("view", {
                      key: index,
                      class: "status-option"
                    }, [
                      vue.createElementVNode("radio", {
                        value: status.value,
                        checked: $setup.form.status === status.value,
                        onClick: ($event) => $setup.form.status = status.value,
                        color: "#2d8cf0"
                      }, null, 8, ["value", "checked", "onClick"]),
                      vue.createElementVNode(
                        "text",
                        { class: "status-text" },
                        vue.toDisplayString(status.label),
                        1
                        /* TEXT */
                      )
                    ]);
                  }),
                  64
                  /* STABLE_FRAGMENT */
                ))
              ])
            ])
          ]),
          vue.createCommentVNode(" 团队成员 "),
          vue.createElementVNode("view", { class: "form-card" }, [
            vue.createElementVNode("view", { class: "form-header" }, [
              vue.createElementVNode("view", { class: "form-title" }, "团队成员"),
              vue.createElementVNode("view", {
                class: "add-member-btn",
                onClick: $setup.showAddMemberModal
              }, [
                vue.createVNode($setup["SvgIcon"], {
                  name: "plus",
                  size: "28",
                  color: "#2d8cf0"
                }),
                vue.createElementVNode("text", { class: "add-member-text" }, "添加成员")
              ])
            ]),
            vue.createElementVNode("view", { class: "members-list" }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.form.teamMembers, (member, index) => {
                  return vue.openBlock(), vue.createElementBlock("view", {
                    key: index,
                    class: "member-card"
                  }, [
                    vue.createElementVNode("view", { class: "member-info" }, [
                      vue.createElementVNode("image", {
                        src: member.avatar,
                        class: "member-avatar"
                      }, null, 8, ["src"]),
                      vue.createElementVNode("view", { class: "member-details" }, [
                        vue.createElementVNode(
                          "text",
                          { class: "member-name" },
                          vue.toDisplayString(member.name),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode(
                          "text",
                          { class: "member-role" },
                          vue.toDisplayString(member.role),
                          1
                          /* TEXT */
                        )
                      ])
                    ]),
                    vue.createElementVNode("view", {
                      class: "remove-member",
                      onClick: ($event) => $setup.removeMember(index)
                    }, [
                      vue.createVNode($setup["SvgIcon"], {
                        name: "close",
                        size: "32",
                        color: "#999"
                      })
                    ], 8, ["onClick"])
                  ]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ])
          ]),
          vue.createCommentVNode(" 项目详情 "),
          vue.createElementVNode("view", { class: "form-card" }, [
            vue.createElementVNode("view", { class: "form-title" }, "项目详情"),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("text", { class: "form-label" }, "项目背景"),
              vue.createVNode(_component_uni_easyinput, {
                modelValue: $setup.form.background,
                "onUpdate:modelValue": _cache[4] || (_cache[4] = ($event) => $setup.form.background = $event),
                type: "textarea",
                placeholder: "请描述项目的背景和意义",
                autoHeight: true
              }, null, 8, ["modelValue"])
            ]),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("text", { class: "form-label" }, "项目特色"),
              vue.createVNode(_component_uni_easyinput, {
                modelValue: $setup.form.features,
                "onUpdate:modelValue": _cache[5] || (_cache[5] = ($event) => $setup.form.features = $event),
                type: "textarea",
                placeholder: "请描述项目的创新点和特色",
                autoHeight: true
              }, null, 8, ["modelValue"])
            ]),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("text", { class: "form-label" }, "项目成果"),
              vue.createVNode(_component_uni_easyinput, {
                modelValue: $setup.form.achievements,
                "onUpdate:modelValue": _cache[6] || (_cache[6] = ($event) => $setup.form.achievements = $event),
                type: "textarea",
                placeholder: "请描述项目已取得或预期的成果",
                autoHeight: true
              }, null, 8, ["modelValue"])
            ])
          ]),
          vue.createCommentVNode(" 项目图片 "),
          vue.createElementVNode("view", { class: "form-card" }, [
            vue.createElementVNode("view", { class: "form-header" }, [
              vue.createElementVNode("view", { class: "form-title" }, "项目图片"),
              vue.createElementVNode("text", { class: "image-limit" }, "最多上传9张")
            ]),
            vue.createElementVNode("view", { class: "images-grid" }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.form.images, (img, index) => {
                  return vue.openBlock(), vue.createElementBlock("view", {
                    key: index,
                    class: "image-item"
                  }, [
                    vue.createElementVNode("image", {
                      src: img,
                      mode: "aspectFill",
                      class: "project-image"
                    }, null, 8, ["src"]),
                    vue.createElementVNode("view", {
                      class: "remove-image",
                      onClick: ($event) => $setup.removeImage(index)
                    }, [
                      vue.createVNode($setup["SvgIcon"], {
                        name: "close",
                        size: "24",
                        color: "#fff"
                      })
                    ], 8, ["onClick"])
                  ]);
                }),
                128
                /* KEYED_FRAGMENT */
              )),
              $setup.form.images.length < 9 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "add-image",
                onClick: $setup.uploadImage
              }, [
                vue.createVNode($setup["SvgIcon"], {
                  name: "plus",
                  size: "40",
                  color: "#ccc"
                }),
                vue.createElementVNode("text", { class: "add-image-text" }, "添加图片")
              ])) : vue.createCommentVNode("v-if", true)
            ])
          ])
        ])
      ]),
      vue.createCommentVNode(" 底部提交按钮 (移动端) "),
      vue.createElementVNode("view", { class: "mobile-submit" }, [
        vue.createElementVNode("button", {
          class: "submit-btn",
          onClick: $setup.submitProject
        }, "发布项目")
      ])
    ]);
  }
  const PagesProjectCreate = /* @__PURE__ */ _export_sfc(_sfc_main$7, [["render", _sfc_render$6], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/project/create.vue"]]);
  const _sfc_main$6 = {
    __name: "medal-detail",
    setup(__props, { expose: __expose }) {
      __expose();
      const loading = vue.ref(true);
      const badgesList = vue.ref([]);
      const activeTab = vue.ref("all");
      const showDetail = vue.ref(false);
      const currentBadge = vue.ref({});
      const showImageZoom = vue.ref(false);
      const previewScale = vue.ref(1);
      const touchStartDistance = vue.ref(0);
      const filteredBadges = vue.computed(() => {
        if (activeTab.value === "all") {
          return badgesList.value;
        } else if (activeTab.value === "competition") {
          return badgesList.value.filter((badge) => badge.badgeType === "team_competition");
        } else if (activeTab.value === "personal") {
          return badgesList.value.filter((badge) => badge.badgeType === "personal_achievement");
        }
        return badgesList.value;
      });
      async function getBadges() {
        try {
          loading.value = true;
          const res = await userApi.getUserBadgesDetail();
          if (res.code === 200 && res.data) {
            badgesList.value = res.data.records || [];
            formatAppLog("log", "at pages/profile/medal-detail.vue:262", "获取到勋章数据:", res.data);
          } else {
            uni.showToast({
              title: res.message || "获取勋章失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/profile/medal-detail.vue:270", "获取勋章列表失败:", error);
          uni.showToast({
            title: "获取勋章列表失败",
            icon: "none"
          });
        } finally {
          loading.value = false;
        }
      }
      function getRarityStats() {
        const highRarity = badgesList.value.filter((badge) => badge.rarity >= 4).length;
        return { highRarity };
      }
      function getTypeStats() {
        const competition = badgesList.value.filter((badge) => badge.badgeType === "team_competition").length;
        const personal = badgesList.value.filter((badge) => badge.badgeType === "personal_achievement").length;
        return { competition, personal };
      }
      function getBadgeTypeClass(type) {
        if (type === "team_competition") {
          return "competition-type";
        } else if (type === "personal_achievement") {
          return "personal-type";
        }
        return "";
      }
      function getBadgeTypeText(type) {
        if (type === "team_competition") {
          return "竞赛勋章";
        } else if (type === "personal_achievement") {
          return "个人成就";
        }
        return "未知类型";
      }
      function getEmptyText() {
        if (activeTab.value === "all") {
          return "暂无获得的勋章";
        } else if (activeTab.value === "competition") {
          return "暂无获得的竞赛勋章";
        } else if (activeTab.value === "personal") {
          return "暂无获得的个人成就勋章";
        }
        return "暂无数据";
      }
      function formatDate(dateString) {
        if (!dateString)
          return "无限期";
        try {
          const date = new Date(dateString);
          const year = date.getFullYear();
          const month = String(date.getMonth() + 1).padStart(2, "0");
          const day = String(date.getDate()).padStart(2, "0");
          return `${year}-${month}-${day}`;
        } catch (error) {
          formatAppLog("error", "at pages/profile/medal-detail.vue:336", "日期格式化错误:", error);
          return dateString;
        }
      }
      function showBadgeDetail(badge) {
        currentBadge.value = badge;
        showDetail.value = true;
      }
      function closeDetail() {
        showDetail.value = false;
      }
      function goBack() {
        uni.navigateBack();
      }
      function handleTouchStart(event2) {
        if (event2.touches.length === 2) {
          const touch1 = event2.touches[0];
          const touch2 = event2.touches[1];
          touchStartDistance.value = Math.sqrt(
            Math.pow(touch2.pageX - touch1.pageX, 2) + Math.pow(touch2.pageY - touch1.pageY, 2)
          );
        }
      }
      function handleTouchMove(event2) {
        if (event2.touches.length === 2 && touchStartDistance.value > 0) {
          const touch1 = event2.touches[0];
          const touch2 = event2.touches[1];
          const currentDistance = Math.sqrt(
            Math.pow(touch2.pageX - touch1.pageX, 2) + Math.pow(touch2.pageY - touch1.pageY, 2)
          );
          const scaleFactor = currentDistance / touchStartDistance.value;
          previewScale.value = Math.max(0.5, Math.min(4, previewScale.value * scaleFactor));
          touchStartDistance.value = currentDistance;
        }
      }
      function handleTouchEnd() {
        touchStartDistance.value = 0;
      }
      function showImagePreview() {
        if (currentBadge.value && currentBadge.value.icon) {
          previewScale.value = 1;
          showImageZoom.value = true;
        }
      }
      function closeImagePreview() {
        showImageZoom.value = false;
      }
      function goToApplyBadge() {
        uni.navigateTo({
          url: "/pages/profile/apply-badge"
        }).catch((err) => {
          formatAppLog("error", "at pages/profile/medal-detail.vue:413", "跳转勋章申请页面失败:", err);
          uni.showToast({
            title: "页面跳转失败",
            icon: "none"
          });
        });
      }
      vue.onMounted(() => {
        getBadges();
      });
      const __returned__ = { loading, badgesList, activeTab, showDetail, currentBadge, showImageZoom, previewScale, touchStartDistance, filteredBadges, getBadges, getRarityStats, getTypeStats, getBadgeTypeClass, getBadgeTypeText, getEmptyText, formatDate, showBadgeDetail, closeDetail, goBack, handleTouchStart, handleTouchMove, handleTouchEnd, showImagePreview, closeImagePreview, goToApplyBadge, ref: vue.ref, computed: vue.computed, onMounted: vue.onMounted, SvgIcon, get userApi() {
        return userApi;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$5(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createElementVNode("view", { class: "header" }, [
        vue.createElementVNode("view", {
          class: "back-btn",
          onClick: $setup.goBack
        }, [
          vue.createVNode($setup["SvgIcon"], {
            name: "back",
            size: "20"
          })
        ]),
        vue.createElementVNode("text", { class: "header-title" }, "荣誉勋章"),
        vue.createElementVNode("view", { class: "right-placeholder" })
      ]),
      vue.createCommentVNode(" 加载中显示 "),
      $setup.loading ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 0,
        class: "loading-container"
      }, [
        vue.createElementVNode("view", { class: "loading-circle" }),
        vue.createElementVNode("text", { class: "loading-text" }, "加载中...")
      ])) : (vue.openBlock(), vue.createElementBlock(
        vue.Fragment,
        { key: 1 },
        [
          vue.createCommentVNode(" 勋章内容 "),
          vue.createElementVNode("scroll-view", {
            "scroll-y": "",
            class: "content-scroll"
          }, [
            vue.createCommentVNode(" 统计信息 "),
            vue.createElementVNode("view", { class: "stats-card" }, [
              vue.createElementVNode("view", { class: "stats-item" }, [
                vue.createElementVNode(
                  "text",
                  { class: "stats-value" },
                  vue.toDisplayString($setup.badgesList.length),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode("text", { class: "stats-label" }, "勋章总数")
              ]),
              vue.createElementVNode("view", { class: "stats-item" }, [
                vue.createElementVNode(
                  "text",
                  { class: "stats-value" },
                  vue.toDisplayString($setup.getRarityStats().highRarity),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode("text", { class: "stats-label" }, "高稀有度")
              ]),
              vue.createElementVNode("view", { class: "stats-item" }, [
                vue.createElementVNode(
                  "text",
                  { class: "stats-value" },
                  vue.toDisplayString($setup.getTypeStats().competition),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode("text", { class: "stats-label" }, "竞赛勋章")
              ]),
              vue.createElementVNode("view", { class: "stats-item" }, [
                vue.createElementVNode(
                  "text",
                  { class: "stats-value" },
                  vue.toDisplayString($setup.getTypeStats().personal),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode("text", { class: "stats-label" }, "个人成就")
              ])
            ]),
            vue.createCommentVNode(" 勋章分类标签 "),
            vue.createElementVNode("view", { class: "category-tabs" }, [
              vue.createElementVNode(
                "view",
                {
                  class: vue.normalizeClass(["tab-item", { active: $setup.activeTab === "all" }]),
                  onClick: _cache[0] || (_cache[0] = ($event) => $setup.activeTab = "all")
                },
                [
                  vue.createElementVNode("text", null, "全部")
                ],
                2
                /* CLASS */
              ),
              vue.createElementVNode(
                "view",
                {
                  class: vue.normalizeClass(["tab-item", { active: $setup.activeTab === "competition" }]),
                  onClick: _cache[1] || (_cache[1] = ($event) => $setup.activeTab = "competition")
                },
                [
                  vue.createElementVNode("text", null, "竞赛勋章")
                ],
                2
                /* CLASS */
              ),
              vue.createElementVNode(
                "view",
                {
                  class: vue.normalizeClass(["tab-item", { active: $setup.activeTab === "personal" }]),
                  onClick: _cache[2] || (_cache[2] = ($event) => $setup.activeTab = "personal")
                },
                [
                  vue.createElementVNode("text", null, "个人成就")
                ],
                2
                /* CLASS */
              )
            ]),
            vue.createCommentVNode(" 勋章列表 "),
            vue.createElementVNode("view", { class: "badges-list" }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.filteredBadges, (badge) => {
                  return vue.openBlock(), vue.createElementBlock("view", {
                    class: "badge-card",
                    key: badge.badgeId,
                    onClick: ($event) => $setup.showBadgeDetail(badge)
                  }, [
                    vue.createElementVNode("view", { class: "badge-content" }, [
                      vue.createElementVNode(
                        "view",
                        {
                          class: vue.normalizeClass(["badge-image-container", { "with-glow": badge.glowEffect }])
                        },
                        [
                          vue.createElementVNode("image", {
                            class: "badge-image",
                            src: badge.icon,
                            mode: "aspectFit"
                          }, null, 8, ["src"]),
                          badge.glowEffect ? (vue.openBlock(), vue.createElementBlock(
                            "view",
                            {
                              key: 0,
                              class: vue.normalizeClass(["glow-effect", badge.glowEffect])
                            },
                            null,
                            2
                            /* CLASS */
                          )) : vue.createCommentVNode("v-if", true)
                        ],
                        2
                        /* CLASS */
                      ),
                      vue.createElementVNode("view", { class: "badge-info" }, [
                        vue.createElementVNode("view", { class: "badge-header" }, [
                          vue.createElementVNode(
                            "text",
                            { class: "badge-name" },
                            vue.toDisplayString(badge.name),
                            1
                            /* TEXT */
                          ),
                          vue.createElementVNode("view", { class: "badge-rarity" }, [
                            (vue.openBlock(true), vue.createElementBlock(
                              vue.Fragment,
                              null,
                              vue.renderList(badge.rarity, (n) => {
                                return vue.openBlock(), vue.createElementBlock("text", {
                                  key: n,
                                  class: "rarity-star"
                                }, "★");
                              }),
                              128
                              /* KEYED_FRAGMENT */
                            ))
                          ])
                        ]),
                        vue.createElementVNode("view", { class: "badge-details" }, [
                          badge.teamName ? (vue.openBlock(), vue.createElementBlock("view", {
                            key: 0,
                            class: "badge-detail-item"
                          }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "team",
                              size: "14"
                            }),
                            vue.createElementVNode(
                              "text",
                              null,
                              vue.toDisplayString(badge.teamName),
                              1
                              /* TEXT */
                            )
                          ])) : vue.createCommentVNode("v-if", true),
                          badge.competitionName ? (vue.openBlock(), vue.createElementBlock("view", {
                            key: 1,
                            class: "badge-detail-item"
                          }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "trophy",
                              size: "14"
                            }),
                            vue.createElementVNode(
                              "text",
                              null,
                              vue.toDisplayString(badge.competitionName),
                              1
                              /* TEXT */
                            )
                          ])) : vue.createCommentVNode("v-if", true),
                          vue.createElementVNode("view", { class: "badge-detail-item" }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "calendar",
                              size: "14"
                            }),
                            vue.createElementVNode(
                              "text",
                              null,
                              vue.toDisplayString($setup.formatDate(badge.acquiredTime)),
                              1
                              /* TEXT */
                            )
                          ])
                        ]),
                        vue.createElementVNode(
                          "view",
                          {
                            class: vue.normalizeClass(["badge-type-tag", $setup.getBadgeTypeClass(badge.badgeType)])
                          },
                          [
                            vue.createElementVNode(
                              "text",
                              null,
                              vue.toDisplayString($setup.getBadgeTypeText(badge.badgeType)),
                              1
                              /* TEXT */
                            )
                          ],
                          2
                          /* CLASS */
                        )
                      ])
                    ])
                  ], 8, ["onClick"]);
                }),
                128
                /* KEYED_FRAGMENT */
              )),
              vue.createCommentVNode(" 空状态 "),
              $setup.filteredBadges.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "empty-badges"
              }, [
                vue.createElementVNode("image", {
                  class: "empty-badge-icon",
                  src: _imports_0$6,
                  mode: "aspectFit"
                }),
                vue.createElementVNode(
                  "text",
                  null,
                  vue.toDisplayString($setup.getEmptyText()),
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true)
            ])
          ])
        ],
        2112
        /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
      )),
      vue.createCommentVNode(" 勋章详情弹窗 "),
      $setup.showDetail ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 2,
        class: "badge-detail-overlay",
        onClick: $setup.closeDetail
      }, [
        vue.createElementVNode("view", {
          class: "badge-detail-content",
          onClick: _cache[3] || (_cache[3] = vue.withModifiers(() => {
          }, ["stop"]))
        }, [
          vue.createElementVNode("view", { class: "badge-detail-header" }, [
            vue.createElementVNode("text", { class: "badge-detail-title" }, "勋章详情"),
            vue.createElementVNode("view", {
              class: "badge-detail-close",
              onClick: $setup.closeDetail
            }, [
              vue.createVNode($setup["SvgIcon"], {
                name: "close",
                size: "20"
              })
            ])
          ]),
          vue.createElementVNode("view", { class: "badge-detail-body" }, [
            vue.createElementVNode(
              "view",
              {
                class: vue.normalizeClass(["badge-detail-image-container", { "with-glow": $setup.currentBadge.glowEffect }]),
                onClick: $setup.showImagePreview
              },
              [
                vue.createElementVNode("image", {
                  class: "badge-detail-image",
                  src: $setup.currentBadge.icon,
                  mode: "aspectFit"
                }, null, 8, ["src"]),
                $setup.currentBadge.glowEffect ? (vue.openBlock(), vue.createElementBlock(
                  "view",
                  {
                    key: 0,
                    class: vue.normalizeClass(["glow-effect", $setup.currentBadge.glowEffect])
                  },
                  null,
                  2
                  /* CLASS */
                )) : vue.createCommentVNode("v-if", true),
                vue.createElementVNode("view", { class: "zoom-hint" }, [
                  vue.createVNode($setup["SvgIcon"], {
                    name: "search-plus",
                    size: "16",
                    color: "#ffffff"
                  }),
                  vue.createElementVNode("text", null, "查看大图")
                ])
              ],
              2
              /* CLASS */
            ),
            vue.createElementVNode(
              "view",
              { class: "badge-detail-name" },
              vue.toDisplayString($setup.currentBadge.name),
              1
              /* TEXT */
            ),
            vue.createElementVNode("view", { class: "badge-detail-rarity" }, [
              vue.createElementVNode("text", { class: "rarity-label" }, "稀有度："),
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.currentBadge.rarity, (n) => {
                  return vue.openBlock(), vue.createElementBlock("text", {
                    key: n,
                    class: "rarity-star large"
                  }, "★");
                }),
                128
                /* KEYED_FRAGMENT */
              )),
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList(6 - $setup.currentBadge.rarity, (n) => {
                  return vue.openBlock(), vue.createElementBlock("text", {
                    key: `empty-${n}`,
                    class: "rarity-star empty"
                  }, "★");
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ]),
            vue.createElementVNode("view", { class: "badge-detail-info-grid" }, [
              $setup.currentBadge.badgeType === "team_competition" ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "badge-detail-info-item"
              }, [
                vue.createElementVNode("text", { class: "detail-label" }, "竞赛名称"),
                vue.createElementVNode(
                  "text",
                  { class: "detail-value" },
                  vue.toDisplayString($setup.currentBadge.competitionName),
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true),
              $setup.currentBadge.teamName ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "badge-detail-info-item"
              }, [
                vue.createElementVNode("text", { class: "detail-label" }, "参赛团队"),
                vue.createElementVNode(
                  "text",
                  { class: "detail-value" },
                  vue.toDisplayString($setup.currentBadge.teamName),
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true),
              $setup.currentBadge.conditionTemplate && $setup.currentBadge.conditionTemplate.level ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 2,
                class: "badge-detail-info-item"
              }, [
                vue.createElementVNode("text", { class: "detail-label" }, "竞赛级别"),
                vue.createElementVNode(
                  "text",
                  { class: "detail-value" },
                  vue.toDisplayString($setup.currentBadge.conditionTemplate.level),
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true),
              $setup.currentBadge.conditionTemplate && $setup.currentBadge.conditionTemplate.rank ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 3,
                class: "badge-detail-info-item"
              }, [
                vue.createElementVNode("text", { class: "detail-label" }, "获得奖项"),
                vue.createElementVNode(
                  "text",
                  { class: "detail-value" },
                  vue.toDisplayString($setup.currentBadge.conditionTemplate.rank),
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true),
              vue.createElementVNode("view", { class: "badge-detail-info-item" }, [
                vue.createElementVNode("text", { class: "detail-label" }, "获得时间"),
                vue.createElementVNode(
                  "text",
                  { class: "detail-value" },
                  vue.toDisplayString($setup.formatDate($setup.currentBadge.acquiredTime)),
                  1
                  /* TEXT */
                )
              ]),
              $setup.currentBadge.expireTime ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 4,
                class: "badge-detail-info-item"
              }, [
                vue.createElementVNode("text", { class: "detail-label" }, "过期时间"),
                vue.createElementVNode(
                  "text",
                  { class: "detail-value" },
                  vue.toDisplayString($setup.formatDate($setup.currentBadge.expireTime)),
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true)
            ]),
            vue.createElementVNode("view", { class: "badge-detail-type" }, [
              vue.createElementVNode("text", { class: "detail-type-label" }, "勋章类型："),
              vue.createElementVNode(
                "view",
                {
                  class: vue.normalizeClass(["badge-type-tag large", $setup.getBadgeTypeClass($setup.currentBadge.badgeType)])
                },
                [
                  vue.createElementVNode(
                    "text",
                    null,
                    vue.toDisplayString($setup.getBadgeTypeText($setup.currentBadge.badgeType)),
                    1
                    /* TEXT */
                  )
                ],
                2
                /* CLASS */
              )
            ])
          ])
        ])
      ])) : vue.createCommentVNode("v-if", true),
      vue.createCommentVNode(" 图片预览弹窗 "),
      $setup.showImageZoom ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 3,
        class: "image-preview-overlay",
        onClick: $setup.closeImagePreview
      }, [
        vue.createElementVNode("image", {
          class: "image-preview",
          src: $setup.currentBadge.icon,
          mode: "aspectFit",
          style: vue.normalizeStyle({ transform: `scale(${$setup.previewScale})` }),
          onTouchstart: $setup.handleTouchStart,
          onTouchmove: $setup.handleTouchMove,
          onTouchend: $setup.handleTouchEnd,
          onClick: _cache[4] || (_cache[4] = vue.withModifiers(() => {
          }, ["stop"]))
        }, null, 44, ["src"]),
        vue.createElementVNode("view", { class: "image-preview-hint" }, [
          vue.createElementVNode("text", null, "双指缩放可调整图片大小")
        ]),
        vue.createElementVNode("view", {
          class: "image-preview-close",
          onClick: $setup.closeImagePreview
        }, [
          vue.createVNode($setup["SvgIcon"], {
            name: "close",
            size: "24",
            color: "#ffffff"
          })
        ])
      ])) : vue.createCommentVNode("v-if", true),
      vue.createCommentVNode(" 底部安全区域 "),
      vue.createElementVNode("view", { class: "safe-area-bottom" }),
      vue.createCommentVNode(" 悬浮申请按钮 "),
      vue.createElementVNode("view", {
        class: "apply-badge-btn",
        onClick: $setup.goToApplyBadge
      }, [
        vue.createElementVNode("text", null, "申请勋章")
      ])
    ]);
  }
  const PagesProfileMedalDetail = /* @__PURE__ */ _export_sfc(_sfc_main$6, [["render", _sfc_render$5], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/profile/medal-detail.vue"]]);
  const name = "apply-badge";
  const _sfc_main$5 = {
    __name: "apply-badge",
    setup(__props, { expose: __expose }) {
      __expose();
      const baseApiUrl2 = config.baseUrl;
      const formData = vue.reactive({
        applicantType: "individual",
        // 申请主体类型: "team" 或 "individual"
        teamId: null,
        // 当applicantType=team时必填
        competitionId: null,
        // 竞赛徽章申请时必填
        awardLevel: null,
        // 获奖级别: "金奖"/"银奖"/"铜奖"/"优秀奖" 
        level: null,
        // 竞赛级别: "全国赛"/"省级"/"市级"/"校级"
        applicantId: null,
        // 当applicantType=individual时必填，个人申请可不填，自动使用当前用户ID
        requestedBadge: null,
        // 申请的徽章ID(必填)
        reviewMessage: ""
        // 申请说明
      });
      const uploadFiles = vue.ref([]);
      const submitting = vue.ref(false);
      const myTeams = vue.ref([]);
      const selectedTeamName = vue.ref("");
      const teamPopup = vue.ref(null);
      const competitions = vue.ref([]);
      const selectedCompetitionName = vue.ref("");
      const competitionPopup = vue.ref(null);
      const awardOptions = [
        { label: "金奖", value: "金奖" },
        { label: "银奖", value: "银奖" },
        { label: "铜奖", value: "铜奖" },
        { label: "优秀奖", value: "优秀奖" }
      ];
      const availableBadges = vue.ref([]);
      const categorizedBadges = vue.ref({
        team_competition: [],
        // 团队竞赛勋章
        personal_achievement: [],
        // 个人成就勋章
        universal: []
        // 通用勋章
      });
      const selectedLevel = vue.ref("全国级");
      const selectedAward = vue.ref("");
      const badgesByLevel = vue.ref({
        "全国级": [],
        "省级": [],
        "市级": [],
        "校级": []
      });
      const badgesByAward = vue.ref({
        "金奖": [],
        "银奖": [],
        "铜奖": [],
        "优秀奖": []
      });
      const selectedBadgeCategory = vue.ref("team_competition");
      const badgeCategories = [
        { value: "team_competition", label: "团队竞赛勋章" },
        { value: "personal_achievement", label: "个人成就勋章" },
        { value: "universal", label: "通用勋章" }
      ];
      const loadingData = vue.ref(false);
      async function getMyTeams() {
        try {
          const res = await teamApi.getMyTeams();
          if (res && res.code === 200 && res.data) {
            myTeams.value = res.data.filter((team) => team.roleType === "leader" && team.status !== "2").map((team) => ({
              id: team.id,
              name: team.name,
              competitionName: team.competitionName,
              status: team.status,
              statusText: team.statusText || getTeamStatusText(team.status),
              roleType: team.roleType,
              roleName: team.roleName
            }));
            formatAppLog("log", "at pages/profile/apply-badge.vue:385", "获取到的我是队长的团队列表:", myTeams.value);
          } else {
            formatAppLog("warn", "at pages/profile/apply-badge.vue:387", "获取团队列表失败:", res);
            uni.showToast({
              title: "获取团队数据失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/profile/apply-badge.vue:394", "获取团队列表出错:", error);
          uni.showToast({
            title: "获取团队数据失败",
            icon: "none"
          });
        }
      }
      function getTeamStatusText(status) {
        switch (status) {
          case "0":
            return "招募中";
          case "1":
            return "已满员";
          case "2":
            return "已解散";
          case "3":
            return "已结束";
          case "4":
            return "比赛中";
          default:
            return "未知状态";
        }
      }
      async function getCompetitions() {
        try {
          const res = await uni.request({
            url: `${baseApiUrl2}/competitions/user/participated`,
            method: "GET",
            header: {
              "Authorization": `Bearer ${getToken()}`
            }
          });
          if (res.statusCode === 200 && res.data && res.data.code === 200) {
            competitions.value = (res.data.data || []).map((comp) => ({
              id: comp.competitionId,
              name: comp.competitionName,
              teamId: comp.teamId,
              teamName: comp.teamName,
              categories: comp.categories || []
            }));
            formatAppLog("log", "at pages/profile/apply-badge.vue:434", "获取到的用户参与的竞赛列表:", competitions.value);
          } else {
            formatAppLog("warn", "at pages/profile/apply-badge.vue:436", "获取竞赛列表失败:", res);
            uni.showToast({
              title: "获取竞赛数据失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/profile/apply-badge.vue:443", "获取竞赛列表出错:", error);
          uni.showToast({
            title: "获取竞赛数据失败",
            icon: "none"
          });
        }
      }
      async function getBadges() {
        try {
          const res = await uni.request({
            url: `${baseApiUrl2}/honor/badges/list`,
            method: "GET",
            header: {
              "Authorization": `Bearer ${getToken()}`
            }
          });
          if (res.statusCode === 200 && res.data && res.data.code === 200) {
            const badgesList = res.data.data.records || [];
            categorizedBadges.value = {
              team_competition: [],
              personal_achievement: [],
              universal: []
            };
            Object.keys(badgesByLevel.value).forEach((level) => {
              badgesByLevel.value[level] = [];
            });
            Object.keys(badgesByAward.value).forEach((award) => {
              badgesByAward.value[award] = [];
            });
            badgesList.forEach((badge) => {
              const badgeData = {
                id: badge.badgeId,
                name: badge.name,
                type: badge.badgeType,
                icon: badge.icon ? badge.icon.startsWith("http") ? badge.icon : `${baseApiUrl2}${badge.icon}` : "",
                rarity: badge.rarity,
                level: badge.competitionLevel,
                rank: badge.awardRank,
                description: badge.requirementDescription
              };
              if (badge.badgeType && categorizedBadges.value[badge.badgeType]) {
                categorizedBadges.value[badge.badgeType].push(badgeData);
              } else {
                formatAppLog("warn", "at pages/profile/apply-badge.vue:501", "未知的勋章类型:", badge.badgeType);
              }
              if (badge.badgeType === "team_competition" && badge.competitionLevel) {
                if (badgesByLevel.value[badge.competitionLevel]) {
                  badgesByLevel.value[badge.competitionLevel].push(badgeData);
                }
              }
              if (badge.badgeType === "team_competition" && badge.awardRank) {
                if (badgesByAward.value[badge.awardRank]) {
                  badgesByAward.value[badge.awardRank].push(badgeData);
                }
              }
            });
            updateAvailableBadges();
            formatAppLog("log", "at pages/profile/apply-badge.vue:522", "获取到的勋章列表:", badgesList);
            formatAppLog("log", "at pages/profile/apply-badge.vue:523", "分类后的勋章:", categorizedBadges.value);
            formatAppLog("log", "at pages/profile/apply-badge.vue:524", "按级别分类的勋章:", badgesByLevel.value);
            formatAppLog("log", "at pages/profile/apply-badge.vue:525", "按奖项分类的勋章:", badgesByAward.value);
            if (badgesList.length === 0) {
              useDefaultBadges();
            }
          } else {
            formatAppLog("warn", "at pages/profile/apply-badge.vue:532", "获取勋章列表失败:", res);
            useDefaultBadges();
          }
        } catch (error) {
          formatAppLog("error", "at pages/profile/apply-badge.vue:536", "获取勋章列表出错:", error);
          useDefaultBadges();
        }
      }
      function useDefaultBadges() {
        const defaultBadges = [
          { id: 1, name: "全国赛金奖", icon: "/static/image/Lianxi/mc/1-1.png", type: "team_competition", level: "全国级", rank: "金奖" },
          { id: 2, name: "创新先锋", icon: "/static/image/Lianxi/mc/1-2.png", type: "personal_achievement" },
          { id: 3, name: "技术能手", icon: "/static/image/Lianxi/mc/1-3.png", type: "personal_achievement" },
          { id: 4, name: "优秀队员", icon: "/static/image/Lianxi/mc/1-4.png", type: "universal" }
        ];
        categorizedBadges.value = {
          team_competition: [],
          personal_achievement: [],
          universal: []
        };
        Object.keys(badgesByLevel.value).forEach((level) => {
          badgesByLevel.value[level] = [];
        });
        Object.keys(badgesByAward.value).forEach((award) => {
          badgesByAward.value[award] = [];
        });
        defaultBadges.forEach((badge) => {
          if (badge.type && categorizedBadges.value[badge.type]) {
            categorizedBadges.value[badge.type].push(badge);
            if (badge.type === "team_competition" && badge.level) {
              if (badgesByLevel.value[badge.level]) {
                badgesByLevel.value[badge.level].push(badge);
              }
            }
            if (badge.type === "team_competition" && badge.rank) {
              if (badgesByAward.value[badge.rank]) {
                badgesByAward.value[badge.rank].push(badge);
              }
            }
          }
        });
        updateAvailableBadges();
      }
      function updateAvailableBadges() {
        let filteredBadges = [];
        if (formData.applicantType === "team") {
          filteredBadges = categorizedBadges.value["team_competition"] || [];
          selectedBadgeCategory.value = "team_competition";
        } else {
          if (selectedBadgeCategory.value === "team_competition") {
            selectedBadgeCategory.value = "personal_achievement";
          }
          filteredBadges = categorizedBadges.value[selectedBadgeCategory.value] || [];
        }
        if (selectedLevel.value && selectedBadgeCategory.value === "team_competition") {
          filteredBadges = badgesByLevel.value[selectedLevel.value] || [];
          if (selectedAward.value) {
            filteredBadges = filteredBadges.filter((badge) => badge.rank === selectedAward.value);
          }
        }
        if (filteredBadges.length === 0 && selectedLevel.value && selectedBadgeCategory.value === "team_competition") {
          filteredBadges = categorizedBadges.value["team_competition"].filter(
            (badge) => badge.level === selectedLevel.value && (!selectedAward.value || badge.rank === selectedAward.value)
          );
        }
        availableBadges.value = filteredBadges;
      }
      function filterBadgesByLevel() {
        if (!formData.level)
          return;
        updateAvailableBadges();
      }
      function filterByLevelTag(level) {
        selectedLevel.value = level;
        if (level === "全国级" && !selectedAward.value) {
          selectedAward.value = "金奖";
        } else if (!selectedAward.value) {
          const badgesInLevel = badgesByLevel.value[level] || [];
          const availableAwards = [...new Set(badgesInLevel.map((b) => b.rank))].filter(Boolean);
          if (availableAwards.length > 0) {
            selectedAward.value = availableAwards[0];
          }
        }
        formData.requestedBadge = null;
        updateAvailableBadges();
      }
      function filterByAwardTag(award) {
        selectedAward.value = award;
        formData.requestedBadge = null;
        updateAvailableBadges();
      }
      function switchBadgeCategory(category) {
        if (formData.applicantType === "team" && category !== "team_competition") {
          uni.showToast({
            title: "团队申请只能选择团队竞赛勋章",
            icon: "none"
          });
          return;
        }
        if (formData.applicantType === "individual" && category === "team_competition") {
          uni.showToast({
            title: "个人申请不能选择团队竞赛勋章",
            icon: "none"
          });
          return;
        }
        selectedBadgeCategory.value = category;
        updateAvailableBadges();
        formData.requestedBadge = null;
      }
      function showTeamPicker() {
        teamPopup.value.open("bottom");
      }
      function closeTeamPicker() {
        teamPopup.value.close();
      }
      function selectTeam(team) {
        formData.teamId = team.id;
        selectedTeamName.value = team.name;
        closeTeamPicker();
      }
      function goToCreateTeam() {
        closeTeamPicker();
        uni.navigateTo({
          url: "/pages/team/create"
        });
      }
      function getStatusClass(status) {
        switch (status) {
          case "0":
            return "status-recruiting";
          case "1":
            return "status-active";
          case "2":
            return "status-dismissed";
          case "3":
            return "status-ended";
          case "4":
            return "status-competing";
          default:
            return "";
        }
      }
      function showCompetitionPicker() {
        competitionPopup.value.open("bottom");
      }
      function closeCompetitionPicker() {
        competitionPopup.value.close();
      }
      function selectCompetition(competition) {
        formData.competitionId = competition.id;
        selectedCompetitionName.value = competition.name;
        if (formData.applicantType === "team" && competition.teamId) {
          formData.teamId = competition.teamId;
          selectedTeamName.value = competition.teamName;
        }
        closeCompetitionPicker();
        filterBadgesByLevel();
      }
      function selectBadge(badge) {
        if (formData.applicantType === "team" && badge.type !== "team_competition") {
          uni.showToast({
            title: "团队申请只能选择团队竞赛勋章",
            icon: "none"
          });
          return;
        }
        if (formData.applicantType === "individual" && badge.type === "team_competition") {
          uni.showToast({
            title: "个人申请不能选择团队竞赛勋章",
            icon: "none"
          });
          return;
        }
        formData.requestedBadge = badge.id;
      }
      function chooseFile() {
        uni.chooseImage({
          count: 3 - uploadFiles.value.length,
          sizeType: ["compressed"],
          success: (res) => {
            const tempFiles = res.tempFilePaths.map((path) => ({
              path,
              size: 0
            }));
            uploadFiles.value = [...uploadFiles.value, ...tempFiles].slice(0, 3);
          }
        });
      }
      function removeFile(index) {
        uploadFiles.value.splice(index, 1);
      }
      async function uploadAttachments(approvalId) {
        const token = uni.getStorageSync("token");
        if (uploadFiles.value.length === 0 || !approvalId) {
          formatAppLog("warn", "at pages/profile/apply-badge.vue:804", "没有附件或申请ID不存在");
          return Promise.resolve();
        }
        try {
          const uploadPromises = uploadFiles.value.map((file) => {
            const descriptions = "证明材料";
            return new Promise((resolve, reject) => {
              uni.uploadFile({
                url: `${baseApiUrl2}/badge/approvals/${approvalId}/attachments/batch`,
                filePath: file.path,
                name: "files",
                // 文件字段名
                formData: {
                  descriptions
                  // 描述字段
                },
                header: {
                  "Authorization": `Bearer ${token}`
                },
                success: (res) => {
                  formatAppLog("log", "at pages/profile/apply-badge.vue:826", "附件上传成功:", res);
                  if (res.statusCode === 200) {
                    try {
                      const parsedRes = typeof res.data === "string" ? JSON.parse(res.data) : res.data;
                      if (parsedRes.code === 200) {
                        resolve(parsedRes);
                      } else {
                        reject(new Error(parsedRes.message || "上传失败"));
                      }
                    } catch (e) {
                      resolve(res);
                    }
                  } else {
                    reject(new Error(`上传失败，状态码: ${res.statusCode}`));
                  }
                },
                fail: (err) => {
                  formatAppLog("error", "at pages/profile/apply-badge.vue:845", "上传附件失败:", err);
                  reject(err);
                }
              });
            });
          });
          await Promise.all(uploadPromises);
          formatAppLog("log", "at pages/profile/apply-badge.vue:854", "所有附件上传完成");
          return Promise.resolve();
        } catch (error) {
          formatAppLog("error", "at pages/profile/apply-badge.vue:857", "上传附件过程中发生错误:", error);
          return Promise.reject(error);
        }
      }
      async function submitApplication() {
        var _a;
        if (formData.applicantType === "team") {
          if (!formData.teamId) {
            return uni.showToast({
              title: "请选择团队",
              icon: "none"
            });
          }
          if (!formData.competitionId) {
            return uni.showToast({
              title: "请选择竞赛",
              icon: "none"
            });
          }
          if (!selectedLevel.value) {
            return uni.showToast({
              title: "请选择竞赛级别",
              icon: "none"
            });
          }
          if (!selectedAward.value) {
            return uni.showToast({
              title: "请选择获奖级别",
              icon: "none"
            });
          }
        }
        if (!formData.requestedBadge) {
          return uni.showToast({
            title: "请选择申请的勋章",
            icon: "none"
          });
        }
        if (!formData.reviewMessage.trim()) {
          return uni.showToast({
            title: "请填写申请说明",
            icon: "none"
          });
        }
        if (uploadFiles.value.length === 0) {
          return uni.showToast({
            title: "请上传证明材料",
            icon: "none"
          });
        }
        submitting.value = true;
        uni.showLoading({
          title: "提交中..."
        });
        try {
          const token = uni.getStorageSync("token");
          if (!token) {
            uni.showToast({
              title: "请先登录",
              icon: "none"
            });
            setTimeout(() => {
              uni.navigateTo({
                url: "/pages/login/login"
              });
            }, 1500);
            return;
          }
          const submitData = {
            applicantType: formData.applicantType,
            requestedBadge: formData.requestedBadge,
            reviewMessage: formData.reviewMessage
          };
          if (formData.applicantType === "team") {
            submitData.teamId = formData.teamId;
            submitData.competitionId = formData.competitionId;
            submitData.awardLevel = selectedAward.value || formData.awardLevel;
            submitData.competitionLevel = selectedLevel.value || formData.level;
          }
          const result = await uni.request({
            url: `${baseApiUrl2}/badge/approvals/submit`,
            method: "POST",
            data: submitData,
            header: {
              "Content-Type": "application/json",
              "Authorization": `Bearer ${token}`
            }
          });
          if (result.statusCode !== 200 || result.data.code !== 200) {
            throw new Error(((_a = result.data) == null ? void 0 : _a.message) || "提交申请失败");
          }
          const approvalId = result.data.data;
          if (!approvalId) {
            throw new Error("未获取到申请ID，无法上传附件");
          }
          await uploadAttachments(approvalId);
          uni.hideLoading();
          uni.showToast({
            title: "申请提交成功",
            icon: "success"
          });
          setTimeout(() => {
            goBack();
          }, 1500);
        } catch (error) {
          uni.hideLoading();
          formatAppLog("error", "at pages/profile/apply-badge.vue:993", "提交申请失败:", error);
          uni.showToast({
            title: error.message || "提交失败，请重试",
            icon: "none"
          });
        } finally {
          submitting.value = false;
        }
      }
      function goBack() {
        uni.navigateBack();
      }
      vue.onMounted(async () => {
        loadingData.value = true;
        try {
          if (formData.applicantType === "team") {
            selectedBadgeCategory.value = "team_competition";
          } else {
            selectedBadgeCategory.value = "personal_achievement";
          }
          await Promise.all([
            getMyTeams(),
            getCompetitions(),
            getBadges()
          ]);
          if (selectedBadgeCategory.value === "team_competition") {
            selectedLevel.value = "全国级";
            selectedAward.value = "金奖";
            updateAvailableBadges();
          }
        } catch (error) {
          formatAppLog("error", "at pages/profile/apply-badge.vue:1039", "初始化数据失败:", error);
        } finally {
          loadingData.value = false;
        }
      });
      function selectApplicantType(type) {
        if (type === "team" && myTeams.value.length === 0) {
          uni.showToast({
            title: "您没有担任队长的团队，无法提交团队申请",
            icon: "none",
            duration: 2e3
          });
          return;
        }
        formData.applicantType = type;
        if (type === "individual") {
          formData.teamId = null;
          selectedTeamName.value = "";
          if (selectedBadgeCategory.value === "team_competition") {
            switchBadgeCategory("personal_achievement");
          }
        } else if (type === "team") {
          switchBadgeCategory("team_competition");
        }
        formData.requestedBadge = null;
      }
      const __returned__ = { name, baseApiUrl: baseApiUrl2, formData, uploadFiles, submitting, myTeams, selectedTeamName, teamPopup, competitions, selectedCompetitionName, competitionPopup, awardOptions, availableBadges, categorizedBadges, selectedLevel, selectedAward, badgesByLevel, badgesByAward, selectedBadgeCategory, badgeCategories, loadingData, getMyTeams, getTeamStatusText, getCompetitions, getBadges, useDefaultBadges, updateAvailableBadges, filterBadgesByLevel, filterByLevelTag, filterByAwardTag, switchBadgeCategory, showTeamPicker, closeTeamPicker, selectTeam, goToCreateTeam, getStatusClass, showCompetitionPicker, closeCompetitionPicker, selectCompetition, selectBadge, chooseFile, removeFile, uploadAttachments, submitApplication, goBack, selectApplicantType, ref: vue.ref, reactive: vue.reactive, onMounted: vue.onMounted, SvgIcon, UniPopup: __easycom_0$3, get config() {
        return config;
      }, get getToken() {
        return getToken;
      }, get teamApi() {
        return teamApi;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$4(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createElementVNode("view", { class: "header" }, [
        vue.createElementVNode("view", {
          class: "back-btn",
          onClick: $setup.goBack
        }, [
          vue.createVNode($setup["SvgIcon"], {
            name: "back",
            size: "20"
          })
        ]),
        vue.createElementVNode("text", { class: "header-title" }, "勋章申请"),
        vue.createElementVNode("view", { class: "right-placeholder" })
      ]),
      vue.createCommentVNode(" 加载状态 "),
      $setup.loadingData ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 0,
        class: "loading-container"
      }, [
        vue.createElementVNode("view", { class: "loading-spinner" }),
        vue.createElementVNode("text", { class: "loading-text" }, "正在加载数据...")
      ])) : (vue.openBlock(), vue.createElementBlock(
        vue.Fragment,
        { key: 1 },
        [
          vue.createCommentVNode(" 表单内容 "),
          vue.createElementVNode("scroll-view", {
            "scroll-y": "",
            class: "form-scroll"
          }, [
            vue.createElementVNode("view", { class: "form-container" }, [
              vue.createCommentVNode(" 申请类型选择 "),
              vue.createElementVNode("view", { class: "form-section" }, [
                vue.createElementVNode("view", { class: "section-title" }, "申请类型"),
                vue.createElementVNode("view", { class: "type-selector" }, [
                  vue.createElementVNode(
                    "view",
                    {
                      class: vue.normalizeClass(["type-option", { active: $setup.formData.applicantType === "individual" }]),
                      onClick: _cache[0] || (_cache[0] = ($event) => $setup.selectApplicantType("individual"))
                    },
                    [
                      vue.createElementVNode("view", { class: "type-radio" }, [
                        $setup.formData.applicantType === "individual" ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 0,
                          class: "radio-inner"
                        })) : vue.createCommentVNode("v-if", true)
                      ]),
                      vue.createElementVNode("text", null, "个人勋章")
                    ],
                    2
                    /* CLASS */
                  ),
                  vue.createElementVNode(
                    "view",
                    {
                      class: vue.normalizeClass(["type-option", { active: $setup.formData.applicantType === "team" }]),
                      onClick: _cache[1] || (_cache[1] = ($event) => $setup.selectApplicantType("team"))
                    },
                    [
                      vue.createElementVNode("view", { class: "type-radio" }, [
                        $setup.formData.applicantType === "team" ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 0,
                          class: "radio-inner"
                        })) : vue.createCommentVNode("v-if", true)
                      ]),
                      vue.createElementVNode("text", null, "竞赛勋章")
                    ],
                    2
                    /* CLASS */
                  )
                ])
              ]),
              vue.createCommentVNode(" 团队选择 - 仅团队申请时显示 "),
              $setup.formData.applicantType === "team" ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "form-section"
              }, [
                vue.createElementVNode("view", { class: "section-title" }, "选择团队"),
                vue.createElementVNode("view", { class: "form-item" }, [
                  vue.createElementVNode("view", {
                    class: "dropdown-selector",
                    onClick: $setup.showTeamPicker
                  }, [
                    vue.createElementVNode(
                      "text",
                      { class: "selector-text" },
                      vue.toDisplayString($setup.selectedTeamName || "请选择团队"),
                      1
                      /* TEXT */
                    ),
                    vue.createVNode($setup["SvgIcon"], {
                      name: "arrow-down",
                      size: "16"
                    })
                  ])
                ])
              ])) : vue.createCommentVNode("v-if", true),
              vue.createCommentVNode(" 竞赛信息 - 仅团队申请时显示 "),
              $setup.formData.applicantType === "team" ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "form-section"
              }, [
                vue.createElementVNode("view", { class: "section-title" }, "竞赛信息"),
                vue.createElementVNode("view", { class: "form-item" }, [
                  vue.createElementVNode("view", {
                    class: "dropdown-selector",
                    onClick: $setup.showCompetitionPicker
                  }, [
                    vue.createElementVNode(
                      "text",
                      { class: "selector-text" },
                      vue.toDisplayString($setup.selectedCompetitionName || "请选择竞赛"),
                      1
                      /* TEXT */
                    ),
                    vue.createVNode($setup["SvgIcon"], {
                      name: "arrow-down",
                      size: "16"
                    })
                  ])
                ])
              ])) : vue.createCommentVNode("v-if", true),
              vue.createCommentVNode(" 勋章选择 "),
              vue.createElementVNode("view", { class: "form-section" }, [
                vue.createElementVNode("view", { class: "section-title" }, "勋章选择"),
                vue.createCommentVNode(" 勋章类别选择 "),
                $setup.formData.applicantType !== "team" ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "badge-categories"
                }, [
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($setup.badgeCategories.filter((c) => c.value !== "team_competition"), (category) => {
                      return vue.openBlock(), vue.createElementBlock("view", {
                        key: category.value,
                        class: vue.normalizeClass(["badge-category-tab", { active: $setup.selectedBadgeCategory === category.value }]),
                        onClick: ($event) => $setup.switchBadgeCategory(category.value)
                      }, vue.toDisplayString(category.label), 11, ["onClick"]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  ))
                ])) : vue.createCommentVNode("v-if", true),
                vue.createCommentVNode(" 竞赛级别选择 - 仅在竞赛勋章类别时显示 "),
                $setup.formData.applicantType === "team" || $setup.selectedBadgeCategory === "team_competition" ? (vue.openBlock(), vue.createElementBlock("view", { key: 1 }, [
                  vue.createElementVNode("view", { class: "section-sub-title" }, "级别选择"),
                  vue.createElementVNode("view", { class: "level-selector" }, [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList(Object.keys($setup.badgesByLevel), (level) => {
                        return vue.openBlock(), vue.createElementBlock("view", {
                          key: level,
                          class: vue.normalizeClass(["level-option", { active: $setup.selectedLevel === level }]),
                          onClick: ($event) => $setup.filterByLevelTag(level)
                        }, vue.toDisplayString(level), 11, ["onClick"]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    ))
                  ]),
                  vue.createCommentVNode(" 获奖级别选择 - 默认显示且当全国级选中时显示金奖选项 "),
                  vue.createElementVNode("view", { class: "mt-3" }, [
                    vue.createElementVNode("view", { class: "section-sub-title" }, "获奖级别"),
                    vue.createElementVNode("view", { class: "award-selector" }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList(Object.keys($setup.badgesByAward), (award) => {
                          return vue.openBlock(), vue.createElementBlock("view", {
                            key: award,
                            class: vue.normalizeClass(["award-option", { active: $setup.selectedAward === award }]),
                            onClick: ($event) => $setup.filterByAwardTag(award)
                          }, vue.toDisplayString(award), 11, ["onClick"]);
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ])
                  ])
                ])) : vue.createCommentVNode("v-if", true),
                vue.createCommentVNode(" 勋章列表 "),
                vue.createElementVNode("view", { class: "badge-container" }, [
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($setup.availableBadges, (badge) => {
                      return vue.openBlock(), vue.createElementBlock("view", {
                        key: badge.id,
                        class: vue.normalizeClass(["badge-item", { selected: $setup.formData.requestedBadge === badge.id }]),
                        onClick: ($event) => $setup.selectBadge(badge)
                      }, [
                        vue.createElementVNode("image", {
                          class: "badge-image",
                          src: badge.icon,
                          mode: "aspectFit"
                        }, null, 8, ["src"]),
                        vue.createElementVNode(
                          "text",
                          { class: "badge-name" },
                          vue.toDisplayString(badge.name),
                          1
                          /* TEXT */
                        ),
                        badge.level || badge.rank ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 0,
                          class: "badge-info"
                        }, [
                          badge.level ? (vue.openBlock(), vue.createElementBlock(
                            "text",
                            { key: 0 },
                            vue.toDisplayString(badge.level),
                            1
                            /* TEXT */
                          )) : vue.createCommentVNode("v-if", true),
                          badge.level && badge.rank ? (vue.openBlock(), vue.createElementBlock("text", { key: 1 }, " · ")) : vue.createCommentVNode("v-if", true),
                          badge.rank ? (vue.openBlock(), vue.createElementBlock(
                            "text",
                            { key: 2 },
                            vue.toDisplayString(badge.rank),
                            1
                            /* TEXT */
                          )) : vue.createCommentVNode("v-if", true)
                        ])) : vue.createCommentVNode("v-if", true),
                        $setup.formData.requestedBadge === badge.id ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 1,
                          class: "badge-check"
                        }, [
                          vue.createVNode($setup["SvgIcon"], {
                            name: "check",
                            size: "16",
                            color: "#ffffff"
                          })
                        ])) : vue.createCommentVNode("v-if", true)
                      ], 10, ["onClick"]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  )),
                  vue.createCommentVNode(" 空状态 "),
                  $setup.availableBadges.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 0,
                    class: "empty-badge-category"
                  }, [
                    vue.createElementVNode("text", null, "该分类下暂无可申请的勋章")
                  ])) : vue.createCommentVNode("v-if", true)
                ])
              ]),
              vue.createCommentVNode(" 申请说明 "),
              vue.createElementVNode("view", { class: "form-section" }, [
                vue.createElementVNode("view", { class: "section-title" }, "申请说明"),
                vue.createElementVNode("view", { class: "form-item" }, [
                  vue.withDirectives(vue.createElementVNode("textarea", {
                    class: "form-textarea",
                    "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => $setup.formData.reviewMessage = $event),
                    placeholder: "请详细描述申请理由，如：竞赛名称、获奖级别、团队贡献等",
                    maxlength: 200,
                    disabled: $setup.submitting
                  }, null, 8, ["disabled"]), [
                    [vue.vModelText, $setup.formData.reviewMessage]
                  ]),
                  vue.createElementVNode(
                    "text",
                    { class: "textarea-counter" },
                    vue.toDisplayString($setup.formData.reviewMessage.length) + "/200",
                    1
                    /* TEXT */
                  )
                ])
              ]),
              vue.createCommentVNode(" 证明材料上传 "),
              vue.createElementVNode("view", { class: "form-section" }, [
                vue.createElementVNode("view", { class: "section-title" }, "证明材料"),
                vue.createElementVNode("view", { class: "upload-area" }, [
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($setup.uploadFiles, (file, index) => {
                      return vue.openBlock(), vue.createElementBlock("view", {
                        class: "upload-item",
                        key: index
                      }, [
                        vue.createElementVNode("image", {
                          class: "upload-preview",
                          src: file.path,
                          mode: "aspectFill"
                        }, null, 8, ["src"]),
                        !$setup.submitting ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 0,
                          class: "upload-delete",
                          onClick: ($event) => $setup.removeFile(index)
                        }, [
                          vue.createVNode($setup["SvgIcon"], {
                            name: "close",
                            size: "16",
                            color: "#ffffff"
                          })
                        ], 8, ["onClick"])) : vue.createCommentVNode("v-if", true)
                      ]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  )),
                  $setup.uploadFiles.length < 3 && !$setup.submitting ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 0,
                    class: "upload-button",
                    onClick: $setup.chooseFile
                  }, [
                    vue.createVNode($setup["SvgIcon"], {
                      name: "plus",
                      size: "24"
                    }),
                    vue.createElementVNode("text", null, "上传图片")
                  ])) : vue.createCommentVNode("v-if", true)
                ]),
                vue.createElementVNode("text", { class: "upload-tips" }, "请上传获奖证书、比赛公示截图等证明材料，最多3张图片")
              ])
            ])
          ])
        ],
        2112
        /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
      )),
      vue.createCommentVNode(" 提交按钮 "),
      vue.createElementVNode("view", { class: "submit-bar" }, [
        vue.createElementVNode("button", {
          class: vue.normalizeClass(["submit-btn", { "disabled": $setup.submitting }]),
          onClick: $setup.submitApplication,
          disabled: $setup.submitting
        }, vue.toDisplayString($setup.submitting ? "提交中..." : "提交申请"), 11, ["disabled"])
      ]),
      vue.createCommentVNode(" 团队选择弹窗 "),
      vue.createVNode(
        $setup["UniPopup"],
        {
          ref: "teamPopup",
          type: "bottom"
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "popup-content" }, [
              vue.createElementVNode("view", { class: "popup-header" }, [
                vue.createElementVNode("text", { class: "popup-title" }, "选择团队"),
                vue.createElementVNode("view", {
                  class: "popup-close",
                  onClick: $setup.closeTeamPicker
                }, [
                  vue.createVNode($setup["SvgIcon"], {
                    name: "close",
                    size: "18"
                  })
                ])
              ]),
              vue.createElementVNode("view", { class: "popup-body" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.myTeams, (team) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "popup-item team-item",
                      key: team.id,
                      onClick: ($event) => $setup.selectTeam(team)
                    }, [
                      vue.createElementVNode("view", { class: "team-info" }, [
                        vue.createElementVNode(
                          "text",
                          { class: "team-name" },
                          vue.toDisplayString(team.name),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode("view", { class: "team-details" }, [
                          vue.createElementVNode(
                            "text",
                            { class: "team-competition" },
                            vue.toDisplayString(team.competitionName),
                            1
                            /* TEXT */
                          ),
                          vue.createElementVNode(
                            "view",
                            {
                              class: vue.normalizeClass(["team-status", $setup.getStatusClass(team.status)])
                            },
                            vue.toDisplayString(team.statusText),
                            3
                            /* TEXT, CLASS */
                          )
                        ]),
                        team.roleName ? (vue.openBlock(), vue.createElementBlock(
                          "text",
                          {
                            key: 0,
                            class: "team-role"
                          },
                          vue.toDisplayString(team.roleType === "leader" ? "队长" : "成员") + " · " + vue.toDisplayString(team.roleName),
                          1
                          /* TEXT */
                        )) : vue.createCommentVNode("v-if", true)
                      ]),
                      $setup.formData.teamId === team.id ? (vue.openBlock(), vue.createElementBlock("view", {
                        key: 0,
                        class: "popup-item-check"
                      }, [
                        vue.createVNode($setup["SvgIcon"], {
                          name: "check",
                          size: "16",
                          color: "#3B82F6"
                        })
                      ])) : vue.createCommentVNode("v-if", true)
                    ], 8, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                )),
                vue.createCommentVNode(" 没有团队时显示提示 "),
                $setup.myTeams.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "empty-teams"
                }, [
                  vue.createElementVNode("text", null, "您没有担任队长的团队"),
                  vue.createElementVNode("text", { class: "empty-tip" }, "只有队长可以为团队申请勋章"),
                  vue.createElementVNode("view", {
                    class: "create-team-btn",
                    onClick: $setup.goToCreateTeam
                  }, "创建团队")
                ])) : vue.createCommentVNode("v-if", true)
              ])
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      ),
      vue.createCommentVNode(" 竞赛选择弹窗 "),
      vue.createVNode(
        $setup["UniPopup"],
        {
          ref: "competitionPopup",
          type: "bottom"
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "popup-content" }, [
              vue.createElementVNode("view", { class: "popup-header" }, [
                vue.createElementVNode("text", { class: "popup-title" }, "选择竞赛"),
                vue.createElementVNode("view", {
                  class: "popup-close",
                  onClick: $setup.closeCompetitionPicker
                }, [
                  vue.createVNode($setup["SvgIcon"], {
                    name: "close",
                    size: "18"
                  })
                ])
              ]),
              vue.createElementVNode("view", { class: "popup-body" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.competitions, (competition) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "popup-item competition-item",
                      key: competition.id + "-" + competition.teamId,
                      onClick: ($event) => $setup.selectCompetition(competition)
                    }, [
                      vue.createElementVNode("view", { class: "competition-info" }, [
                        vue.createElementVNode(
                          "text",
                          { class: "competition-name" },
                          vue.toDisplayString(competition.name),
                          1
                          /* TEXT */
                        ),
                        competition.teamName ? (vue.openBlock(), vue.createElementBlock(
                          "text",
                          {
                            key: 0,
                            class: "competition-team"
                          },
                          "团队: " + vue.toDisplayString(competition.teamName),
                          1
                          /* TEXT */
                        )) : vue.createCommentVNode("v-if", true),
                        competition.categories && competition.categories.length ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 1,
                          class: "competition-categories"
                        }, [
                          (vue.openBlock(true), vue.createElementBlock(
                            vue.Fragment,
                            null,
                            vue.renderList(competition.categories, (category, index) => {
                              return vue.openBlock(), vue.createElementBlock(
                                "text",
                                {
                                  class: "category-tag",
                                  key: index
                                },
                                vue.toDisplayString(category.categoryName),
                                1
                                /* TEXT */
                              );
                            }),
                            128
                            /* KEYED_FRAGMENT */
                          ))
                        ])) : vue.createCommentVNode("v-if", true)
                      ]),
                      $setup.formData.competitionId === competition.id && (!competition.teamId || $setup.formData.teamId === competition.teamId) ? (vue.openBlock(), vue.createElementBlock("view", {
                        key: 0,
                        class: "popup-item-check"
                      }, [
                        vue.createVNode($setup["SvgIcon"], {
                          name: "check",
                          size: "16",
                          color: "#3B82F6"
                        })
                      ])) : vue.createCommentVNode("v-if", true)
                    ], 8, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                )),
                vue.createCommentVNode(" 没有竞赛时显示提示 "),
                $setup.competitions.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "empty-competitions"
                }, [
                  vue.createElementVNode("text", null, "您还没有参与任何竞赛")
                ])) : vue.createCommentVNode("v-if", true)
              ])
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesProfileApplyBadge = /* @__PURE__ */ _export_sfc(_sfc_main$5, [["render", _sfc_render$4], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/profile/apply-badge.vue"]]);
  const _sfc_main$4 = {
    __name: "material-reward",
    setup(__props, { expose: __expose }) {
      __expose();
      const formData = vue.reactive({
        rewardType: "competition",
        // 申请类型: "competition"竞赛, "activity"活动, "other"其他
        applicantName: "",
        // 申请人姓名
        phoneNumber: "",
        // 联系电话
        address: "",
        // 收货地址
        competitionId: null,
        // 竞赛ID
        activityId: null,
        // 活动ID
        rewardName: "",
        // 奖品名称
        quantity: 1,
        // 数量
        description: ""
        // 申请说明
      });
      const uploadFiles = vue.ref([]);
      const submitting = vue.ref(false);
      const competitions = vue.ref([
        { id: 1, name: "全国大学生数学建模竞赛" },
        { id: 2, name: "挑战杯全国大学生创业大赛" },
        { id: 3, name: "全国大学生电子设计竞赛" },
        { id: 4, name: "互联网+" }
      ]);
      const selectedCompetitionName = vue.ref("");
      const competitionPopup = vue.ref(null);
      const activities = vue.ref([
        { id: 1, name: "校园科技文化节" },
        { id: 2, name: "创新创业大赛" },
        { id: 3, name: "编程马拉松" },
        { id: 4, name: "学生会年度颁奖典礼" }
      ]);
      const selectedActivityName = vue.ref("");
      const activityPopup = vue.ref(null);
      function increaseQuantity() {
        if (formData.quantity < 99) {
          formData.quantity++;
        }
      }
      function decreaseQuantity() {
        if (formData.quantity > 1) {
          formData.quantity--;
        }
      }
      function showCompetitionPicker() {
        competitionPopup.value.open("bottom");
      }
      function closeCompetitionPicker() {
        competitionPopup.value.close();
      }
      function selectCompetition(competition) {
        formData.competitionId = competition.id;
        selectedCompetitionName.value = competition.name;
        closeCompetitionPicker();
      }
      function showActivityPicker() {
        activityPopup.value.open("bottom");
      }
      function closeActivityPicker() {
        activityPopup.value.close();
      }
      function selectActivity(activity) {
        formData.activityId = activity.id;
        selectedActivityName.value = activity.name;
        closeActivityPicker();
      }
      function chooseFile() {
        uni.chooseImage({
          count: 3 - uploadFiles.value.length,
          sizeType: ["compressed"],
          success: (res) => {
            const tempFiles = res.tempFilePaths.map((path) => ({
              path,
              size: 0
            }));
            uploadFiles.value = [...uploadFiles.value, ...tempFiles].slice(0, 3);
          }
        });
      }
      function removeFile(index) {
        uploadFiles.value.splice(index, 1);
      }
      async function submitApplication() {
        if (!formData.applicantName.trim()) {
          return uni.showToast({
            title: "请输入申请人姓名",
            icon: "none"
          });
        }
        if (!formData.phoneNumber || !/^1\d{10}$/.test(formData.phoneNumber)) {
          return uni.showToast({
            title: "请输入有效的手机号码",
            icon: "none"
          });
        }
        if (!formData.address.trim()) {
          return uni.showToast({
            title: "请输入收货地址",
            icon: "none"
          });
        }
        if (formData.rewardType === "competition" && !formData.competitionId) {
          return uni.showToast({
            title: "请选择相关竞赛",
            icon: "none"
          });
        }
        if (formData.rewardType === "activity" && !formData.activityId) {
          return uni.showToast({
            title: "请选择相关活动",
            icon: "none"
          });
        }
        if (!formData.rewardName.trim()) {
          return uni.showToast({
            title: "请输入奖品名称",
            icon: "none"
          });
        }
        if (!formData.description.trim()) {
          return uni.showToast({
            title: "请填写申请说明",
            icon: "none"
          });
        }
        if (uploadFiles.value.length === 0) {
          return uni.showToast({
            title: "请上传证明材料",
            icon: "none"
          });
        }
        submitting.value = true;
        try {
          await new Promise((resolve) => setTimeout(resolve, 1500));
          uni.showToast({
            title: "申请提交成功",
            icon: "success"
          });
          setTimeout(() => {
            goBack();
          }, 1500);
        } catch (error) {
          formatAppLog("error", "at pages/profile/material-reward.vue:401", "提交申请失败:", error);
          uni.showToast({
            title: "提交失败，请重试",
            icon: "none"
          });
        } finally {
          submitting.value = false;
        }
      }
      function goBack() {
        uni.navigateBack();
      }
      vue.onMounted(() => {
        formatAppLog("log", "at pages/profile/material-reward.vue:419", "实物奖励申请页面加载");
      });
      const __returned__ = { formData, uploadFiles, submitting, competitions, selectedCompetitionName, competitionPopup, activities, selectedActivityName, activityPopup, increaseQuantity, decreaseQuantity, showCompetitionPicker, closeCompetitionPicker, selectCompetition, showActivityPicker, closeActivityPicker, selectActivity, chooseFile, removeFile, submitApplication, goBack, ref: vue.ref, reactive: vue.reactive, onMounted: vue.onMounted, SvgIcon, uniPopup: __easycom_0$3 };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$3(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createElementVNode("view", { class: "header" }, [
        vue.createElementVNode("view", {
          class: "back-btn",
          onClick: $setup.goBack
        }, [
          vue.createVNode($setup["SvgIcon"], {
            name: "back",
            size: "20"
          })
        ]),
        vue.createElementVNode("text", { class: "header-title" }, "实物奖励申请"),
        vue.createElementVNode("view", { class: "right-placeholder" })
      ]),
      vue.createCommentVNode(" 表单内容 "),
      vue.createElementVNode("scroll-view", {
        "scroll-y": "",
        class: "form-scroll"
      }, [
        vue.createElementVNode("view", { class: "form-container" }, [
          vue.createCommentVNode(" 基本信息卡片 "),
          vue.createElementVNode("view", { class: "form-section" }, [
            vue.createElementVNode("view", { class: "section-title" }, "基本信息"),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("text", { class: "item-label" }, "申请类型"),
              vue.createElementVNode("view", { class: "type-selector" }, [
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["type-option", { active: $setup.formData.rewardType === "competition" }]),
                    onClick: _cache[0] || (_cache[0] = ($event) => $setup.formData.rewardType = "competition")
                  },
                  [
                    vue.createElementVNode("view", { class: "type-radio" }, [
                      $setup.formData.rewardType === "competition" ? (vue.openBlock(), vue.createElementBlock("view", {
                        key: 0,
                        class: "radio-inner"
                      })) : vue.createCommentVNode("v-if", true)
                    ]),
                    vue.createElementVNode("text", null, "竞赛奖品")
                  ],
                  2
                  /* CLASS */
                ),
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["type-option", { active: $setup.formData.rewardType === "activity" }]),
                    onClick: _cache[1] || (_cache[1] = ($event) => $setup.formData.rewardType = "activity")
                  },
                  [
                    vue.createElementVNode("view", { class: "type-radio" }, [
                      $setup.formData.rewardType === "activity" ? (vue.openBlock(), vue.createElementBlock("view", {
                        key: 0,
                        class: "radio-inner"
                      })) : vue.createCommentVNode("v-if", true)
                    ]),
                    vue.createElementVNode("text", null, "活动奖励")
                  ],
                  2
                  /* CLASS */
                ),
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["type-option", { active: $setup.formData.rewardType === "other" }]),
                    onClick: _cache[2] || (_cache[2] = ($event) => $setup.formData.rewardType = "other")
                  },
                  [
                    vue.createElementVNode("view", { class: "type-radio" }, [
                      $setup.formData.rewardType === "other" ? (vue.openBlock(), vue.createElementBlock("view", {
                        key: 0,
                        class: "radio-inner"
                      })) : vue.createCommentVNode("v-if", true)
                    ]),
                    vue.createElementVNode("text", null, "其他奖励")
                  ],
                  2
                  /* CLASS */
                )
              ])
            ]),
            vue.createCommentVNode(" 申请人信息 "),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("text", { class: "item-label" }, "申请人"),
              vue.withDirectives(vue.createElementVNode(
                "input",
                {
                  type: "text",
                  class: "form-input",
                  "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => $setup.formData.applicantName = $event),
                  placeholder: "请输入申请人姓名"
                },
                null,
                512
                /* NEED_PATCH */
              ), [
                [vue.vModelText, $setup.formData.applicantName]
              ])
            ]),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("text", { class: "item-label" }, "手机号码"),
              vue.withDirectives(vue.createElementVNode(
                "input",
                {
                  type: "number",
                  class: "form-input",
                  "onUpdate:modelValue": _cache[4] || (_cache[4] = ($event) => $setup.formData.phoneNumber = $event),
                  placeholder: "请输入联系电话",
                  maxlength: "11"
                },
                null,
                512
                /* NEED_PATCH */
              ), [
                [vue.vModelText, $setup.formData.phoneNumber]
              ])
            ]),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("text", { class: "item-label" }, "收货地址"),
              vue.withDirectives(vue.createElementVNode(
                "textarea",
                {
                  class: "form-textarea address-textarea",
                  "onUpdate:modelValue": _cache[5] || (_cache[5] = ($event) => $setup.formData.address = $event),
                  placeholder: "请输入详细收货地址",
                  maxlength: 100
                },
                null,
                512
                /* NEED_PATCH */
              ), [
                [vue.vModelText, $setup.formData.address]
              ])
            ])
          ]),
          vue.createCommentVNode(" 奖品信息卡片 "),
          vue.createElementVNode("view", { class: "form-section" }, [
            vue.createElementVNode("view", { class: "section-title" }, "奖品信息"),
            vue.createCommentVNode(" 竞赛选择 - 仅竞赛奖品时显示 "),
            $setup.formData.rewardType === "competition" ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "form-item"
            }, [
              vue.createElementVNode("text", { class: "item-label" }, "相关竞赛"),
              vue.createElementVNode("view", {
                class: "dropdown-selector",
                onClick: $setup.showCompetitionPicker
              }, [
                vue.createElementVNode(
                  "text",
                  { class: "selector-text" },
                  vue.toDisplayString($setup.selectedCompetitionName || "请选择相关竞赛"),
                  1
                  /* TEXT */
                ),
                vue.createVNode($setup["SvgIcon"], {
                  name: "arrow-down",
                  size: "16"
                })
              ])
            ])) : vue.createCommentVNode("v-if", true),
            vue.createCommentVNode(" 活动选择 - 仅活动奖励时显示 "),
            $setup.formData.rewardType === "activity" ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 1,
              class: "form-item"
            }, [
              vue.createElementVNode("text", { class: "item-label" }, "相关活动"),
              vue.createElementVNode("view", {
                class: "dropdown-selector",
                onClick: $setup.showActivityPicker
              }, [
                vue.createElementVNode(
                  "text",
                  { class: "selector-text" },
                  vue.toDisplayString($setup.selectedActivityName || "请选择相关活动"),
                  1
                  /* TEXT */
                ),
                vue.createVNode($setup["SvgIcon"], {
                  name: "arrow-down",
                  size: "16"
                })
              ])
            ])) : vue.createCommentVNode("v-if", true),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("text", { class: "item-label" }, "奖品名称"),
              vue.withDirectives(vue.createElementVNode(
                "input",
                {
                  type: "text",
                  class: "form-input",
                  "onUpdate:modelValue": _cache[6] || (_cache[6] = ($event) => $setup.formData.rewardName = $event),
                  placeholder: "请输入奖品名称"
                },
                null,
                512
                /* NEED_PATCH */
              ), [
                [vue.vModelText, $setup.formData.rewardName]
              ])
            ]),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("text", { class: "item-label" }, "奖品数量"),
              vue.createElementVNode("view", { class: "quantity-selector" }, [
                vue.createElementVNode("view", {
                  class: "quantity-btn",
                  onClick: $setup.decreaseQuantity
                }, "-"),
                vue.withDirectives(vue.createElementVNode(
                  "input",
                  {
                    type: "number",
                    class: "quantity-input",
                    "onUpdate:modelValue": _cache[7] || (_cache[7] = ($event) => $setup.formData.quantity = $event)
                  },
                  null,
                  512
                  /* NEED_PATCH */
                ), [
                  [vue.vModelText, $setup.formData.quantity]
                ]),
                vue.createElementVNode("view", {
                  class: "quantity-btn",
                  onClick: $setup.increaseQuantity
                }, "+")
              ])
            ])
          ]),
          vue.createCommentVNode(" 申请说明 "),
          vue.createElementVNode("view", { class: "form-section" }, [
            vue.createElementVNode("view", { class: "section-title" }, "申请说明"),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.withDirectives(vue.createElementVNode(
                "textarea",
                {
                  class: "form-textarea",
                  "onUpdate:modelValue": _cache[8] || (_cache[8] = ($event) => $setup.formData.description = $event),
                  placeholder: "请详细描述申请理由，如：获奖情况、活动参与情况等",
                  maxlength: 200
                },
                null,
                512
                /* NEED_PATCH */
              ), [
                [vue.vModelText, $setup.formData.description]
              ]),
              vue.createElementVNode(
                "text",
                { class: "textarea-counter" },
                vue.toDisplayString($setup.formData.description.length) + "/200",
                1
                /* TEXT */
              )
            ])
          ]),
          vue.createCommentVNode(" 证明材料上传 "),
          vue.createElementVNode("view", { class: "form-section" }, [
            vue.createElementVNode("view", { class: "section-title" }, "证明材料"),
            vue.createElementVNode("view", { class: "upload-area" }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.uploadFiles, (file, index) => {
                  return vue.openBlock(), vue.createElementBlock("view", {
                    class: "upload-item",
                    key: index
                  }, [
                    vue.createElementVNode("image", {
                      class: "upload-preview",
                      src: file.path,
                      mode: "aspectFill"
                    }, null, 8, ["src"]),
                    vue.createElementVNode("view", {
                      class: "upload-delete",
                      onClick: ($event) => $setup.removeFile(index)
                    }, [
                      vue.createVNode($setup["SvgIcon"], {
                        name: "close",
                        size: "16",
                        color: "#ffffff"
                      })
                    ], 8, ["onClick"])
                  ]);
                }),
                128
                /* KEYED_FRAGMENT */
              )),
              $setup.uploadFiles.length < 3 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "upload-button",
                onClick: $setup.chooseFile
              }, [
                vue.createVNode($setup["SvgIcon"], {
                  name: "plus",
                  size: "24"
                }),
                vue.createElementVNode("text", null, "上传图片")
              ])) : vue.createCommentVNode("v-if", true)
            ]),
            vue.createElementVNode("text", { class: "upload-tips" }, "请上传获奖证书、活动参与证明等相关材料，最多3张图片")
          ])
        ])
      ]),
      vue.createCommentVNode(" 提交按钮 "),
      vue.createElementVNode("view", { class: "submit-bar" }, [
        vue.createElementVNode("button", {
          class: "submit-btn",
          onClick: $setup.submitApplication,
          disabled: $setup.submitting
        }, vue.toDisplayString($setup.submitting ? "提交中..." : "提交申请"), 9, ["disabled"])
      ]),
      vue.createCommentVNode(" 竞赛选择弹窗 "),
      vue.createVNode(
        $setup["uniPopup"],
        {
          ref: "competitionPopup",
          type: "bottom"
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "popup-content" }, [
              vue.createElementVNode("view", { class: "popup-header" }, [
                vue.createElementVNode("text", { class: "popup-title" }, "选择竞赛"),
                vue.createElementVNode("view", {
                  class: "popup-close",
                  onClick: $setup.closeCompetitionPicker
                }, [
                  vue.createVNode($setup["SvgIcon"], {
                    name: "close",
                    size: "18"
                  })
                ])
              ]),
              vue.createElementVNode("view", { class: "popup-body" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.competitions, (competition) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "popup-item",
                      key: competition.id,
                      onClick: ($event) => $setup.selectCompetition(competition)
                    }, [
                      vue.createElementVNode(
                        "text",
                        { class: "popup-item-text" },
                        vue.toDisplayString(competition.name),
                        1
                        /* TEXT */
                      ),
                      $setup.formData.competitionId === competition.id ? (vue.openBlock(), vue.createElementBlock("view", {
                        key: 0,
                        class: "popup-item-check"
                      }, [
                        vue.createVNode($setup["SvgIcon"], {
                          name: "check",
                          size: "16",
                          color: "#3B82F6"
                        })
                      ])) : vue.createCommentVNode("v-if", true)
                    ], 8, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      ),
      vue.createCommentVNode(" 活动选择弹窗 "),
      vue.createVNode(
        $setup["uniPopup"],
        {
          ref: "activityPopup",
          type: "bottom"
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "popup-content" }, [
              vue.createElementVNode("view", { class: "popup-header" }, [
                vue.createElementVNode("text", { class: "popup-title" }, "选择活动"),
                vue.createElementVNode("view", {
                  class: "popup-close",
                  onClick: $setup.closeActivityPicker
                }, [
                  vue.createVNode($setup["SvgIcon"], {
                    name: "close",
                    size: "18"
                  })
                ])
              ]),
              vue.createElementVNode("view", { class: "popup-body" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.activities, (activity) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "popup-item",
                      key: activity.id,
                      onClick: ($event) => $setup.selectActivity(activity)
                    }, [
                      vue.createElementVNode(
                        "text",
                        { class: "popup-item-text" },
                        vue.toDisplayString(activity.name),
                        1
                        /* TEXT */
                      ),
                      $setup.formData.activityId === activity.id ? (vue.openBlock(), vue.createElementBlock("view", {
                        key: 0,
                        class: "popup-item-check"
                      }, [
                        vue.createVNode($setup["SvgIcon"], {
                          name: "check",
                          size: "16",
                          color: "#3B82F6"
                        })
                      ])) : vue.createCommentVNode("v-if", true)
                    ], 8, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesProfileMaterialReward = /* @__PURE__ */ _export_sfc(_sfc_main$4, [["render", _sfc_render$3], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/profile/material-reward.vue"]]);
  const _imports_0$2 = "/static/image/empty-ongoing.png";
  const _imports_1 = "/static/image/empty-upcoming.png";
  const _imports_2 = "/static/image/empty-completed.png";
  const _imports_3 = "/static/image/logo.png";
  const _imports_4 = "/static/image/qrcode.png";
  const _sfc_main$3 = {
    __name: "mycompetitions",
    setup(__props, { expose: __expose }) {
      __expose();
      const headerBarRef = vue.ref(null);
      const headerPlaceholderHeight = vue.computed(() => {
        if (headerBarRef.value && headerBarRef.value.headerHeight) {
          return headerBarRef.value.headerHeight + "rpx";
        }
        return "120rpx";
      });
      const loading = vue.ref(true);
      const activeStatus = vue.ref("all");
      const myCompetitions = vue.ref([]);
      const competitionsData = vue.ref([]);
      const showFilter = vue.ref(false);
      const selectedLevels = vue.ref(["全部"]);
      const selectedTypes = vue.ref(["全部"]);
      const selectedResults = vue.ref(["全部"]);
      const selectedTimeRange = vue.ref("all");
      const showShareModal = vue.ref(false);
      const shareCompetition = vue.ref({});
      const showCancelConfirm = vue.ref(false);
      const cancelCompetition = vue.ref({});
      const ongoingCompetitions = vue.computed(() => {
        if (!competitionsData.value || competitionsData.value.length === 0)
          return [];
        return competitionsData.value.filter(
          (comp) => comp.status === "ongoing" || comp.status === "registering"
        );
      });
      const upcomingCompetitions = vue.computed(() => {
        if (!competitionsData.value || competitionsData.value.length === 0)
          return [];
        return competitionsData.value.filter((comp) => comp.status === "upcoming");
      });
      const completedCompetitions = vue.computed(() => {
        if (!competitionsData.value || competitionsData.value.length === 0)
          return [];
        return competitionsData.value.filter((comp) => comp.status === "finished" || comp.status === "completed");
      });
      async function getMyCompetitions() {
        loading.value = true;
        try {
          const token = getToken();
          if (!token) {
            uni.showToast({
              title: "请先登录",
              icon: "none"
            });
            setTimeout(() => {
              uni.navigateTo({
                url: "/pages/login/login"
              });
            }, 1500);
            loading.value = false;
            return;
          }
          const participatedRes = await competitionsApi.getUserParticipatedCompetitions();
          if (participatedRes.code === 200 && participatedRes.data) {
            myCompetitions.value = participatedRes.data || [];
            formatAppLog("log", "at pages/mycompetitions/mycompetitions.vue:734", "获取到的参与竞赛列表:", myCompetitions.value);
            await fetchCompetitionsDetails();
          } else {
            formatAppLog("error", "at pages/mycompetitions/mycompetitions.vue:739", "获取参与竞赛列表失败", participatedRes);
            uni.showToast({
              title: participatedRes.message || "获取竞赛列表失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/mycompetitions/mycompetitions.vue:746", "获取我的竞赛列表失败:", error);
          uni.showToast({
            title: "获取竞赛列表失败",
            icon: "none"
          });
        } finally {
          loading.value = false;
        }
      }
      async function fetchCompetitionsDetails() {
        try {
          const detailsPromises = await Promise.all(
            myCompetitions.value.map(async (competition) => {
              const competitionData = {
                id: competition.competitionId,
                name: competition.competitionName,
                categories: competition.categories || [],
                teamId: competition.teamId,
                teamName: competition.teamName,
                teamMembers: [],
                status: "unknown",
                // 默认状态，后续根据阶段确定
                imageUrl: competition.imageUrl || "/static/image/competition/comp1.jpg",
                // 默认图片
                level: competition.level || "未知",
                startDate: "",
                endDate: "",
                currentStage: "",
                stageEndDate: "",
                stageDescription: "",
                progress: 0
              };
              try {
                const teamRes = await teamApi.getTeamMembers(competition.teamId);
                if (teamRes.code === 200 && teamRes.data) {
                  competitionData.teamMembers = teamRes.data.map((member) => ({
                    id: member.userId,
                    name: member.userName,
                    avatar: member.userAvatarUrl || "/static/image/avatar/default.jpg",
                    isLeader: member.isLeader,
                    role: member.roleName || (member.isLeader ? "队长" : "队员")
                  }));
                }
                const stagesRes = await competitionsApi.getCompetitionStages(competition.competitionId);
                if (stagesRes.code === 200 && stagesRes.data && stagesRes.data.length > 0) {
                  const stages = stagesRes.data;
                  stages.sort((a, b) => new Date(a.startTime) - new Date(b.startTime));
                  competitionData.startDate = stages[0].startTime;
                  competitionData.endDate = stages[stages.length - 1].endTime;
                  const now = /* @__PURE__ */ new Date();
                  const firstStageStart = new Date(stages[0].startTime);
                  const lastStageEnd = new Date(stages[stages.length - 1].endTime);
                  let currentStage = null;
                  let activeStageIndex = -1;
                  for (let i = 0; i < stages.length; i++) {
                    const stageStart = new Date(stages[i].startTime);
                    const stageEnd = new Date(stages[i].endTime);
                    if (now >= stageStart && now <= stageEnd) {
                      currentStage = stages[i];
                      activeStageIndex = i;
                      break;
                    } else if (now < stageStart && activeStageIndex === -1) {
                      currentStage = stages[i];
                      activeStageIndex = i;
                      break;
                    }
                  }
                  if (activeStageIndex === -1 && now > lastStageEnd) {
                    currentStage = stages[stages.length - 1];
                    activeStageIndex = stages.length - 1;
                    competitionData.status = "completed";
                  } else if (now < firstStageStart) {
                    competitionData.status = "upcoming";
                  } else if (now > lastStageEnd) {
                    competitionData.status = "completed";
                  } else {
                    competitionData.status = "ongoing";
                  }
                  if (currentStage) {
                    competitionData.currentStage = currentStage.stageName;
                    competitionData.stageEndDate = currentStage.endTime;
                    competitionData.stageDescription = currentStage.description;
                    if (competitionData.status === "ongoing") {
                      const totalStages = stages.length;
                      const completedStages = stages.filter((s) => new Date(s.endTime) < now).length;
                      const currentStageProgress = currentStage ? (now - new Date(currentStage.startTime)) / (new Date(currentStage.endTime) - new Date(currentStage.startTime)) : 0;
                      competitionData.progress = Math.min(100, Math.round((completedStages + (currentStageProgress || 0)) / totalStages * 100));
                    } else if (competitionData.status === "completed") {
                      competitionData.progress = 100;
                    } else {
                      competitionData.progress = 0;
                    }
                  }
                }
                if (competitionData.status === "completed") {
                  try {
                    const resultRes = await competitionsApi.getCompetitionResults(competition.competitionId);
                    if (resultRes.code === 200 && resultRes.data) {
                      const teamResult = resultRes.data.find((result) => result.teamId === competition.teamId);
                      if (teamResult) {
                        competitionData.result = teamResult.awardLevel || "未获奖";
                        competitionData.hasCertificate = !!teamResult.certificateUrl;
                      }
                    }
                  } catch (error) {
                    formatAppLog("error", "at pages/mycompetitions/mycompetitions.vue:882", "获取竞赛结果失败:", error);
                  }
                }
              } catch (error) {
                formatAppLog("error", "at pages/mycompetitions/mycompetitions.vue:886", `获取竞赛 ${competition.competitionId} 详情失败:`, error);
              }
              return competitionData;
            })
          );
          competitionsData.value = detailsPromises;
          formatAppLog("log", "at pages/mycompetitions/mycompetitions.vue:894", "处理后的竞赛详细数据:", competitionsData.value);
        } catch (error) {
          formatAppLog("error", "at pages/mycompetitions/mycompetitions.vue:896", "获取竞赛详情失败:", error);
          uni.showToast({
            title: "获取竞赛详情失败",
            icon: "none"
          });
        }
      }
      function setActiveStatus(status) {
        activeStatus.value = status;
      }
      const getCompetitionCountByStatus = (status) => {
        if (!competitionsData.value || !competitionsData.value.length === 0)
          return 0;
        return competitionsData.value.filter((comp) => {
          if (status === "ongoing") {
            return comp.status === "registering" || comp.status === "ongoing";
          } else if (status === "finished") {
            return comp.status === "finished";
          }
          return false;
        }).length;
      };
      function formatDate(dateString) {
        if (!dateString)
          return "";
        const date = new Date(dateString);
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, "0");
        const day = String(date.getDate()).padStart(2, "0");
        return `${year}-${month}-${day}`;
      }
      function getLevelClass(level) {
        const classMap = {
          "国家级": "level-national",
          "省级": "level-province",
          "市级": "level-city",
          "校级": "level-school"
        };
        return classMap[level] || "";
      }
      function getResultClass(result) {
        if (!result)
          return "result-none";
        const classMap = {
          "一等奖": "result-first",
          "金奖": "result-first",
          "二等奖": "result-second",
          "银奖": "result-second",
          "三等奖": "result-third",
          "铜奖": "result-third",
          "优秀奖": "result-honorable",
          "优胜奖": "result-honorable"
        };
        return classMap[result] || "result-other";
      }
      function getDaysLeft(dateString) {
        if (!dateString)
          return 0;
        const targetDate = new Date(dateString);
        const today = /* @__PURE__ */ new Date();
        targetDate.setHours(23, 59, 59, 999);
        today.setHours(0, 0, 0, 0);
        const diffTime = targetDate - today;
        const diffDays = Math.ceil(diffTime / (1e3 * 60 * 60 * 24));
        return diffDays > 0 ? diffDays : 0;
      }
      function getCountdown(dateString) {
        if (!dateString)
          return { days: 0, hours: 0, minutes: 0 };
        const targetDate = new Date(dateString);
        const now = /* @__PURE__ */ new Date();
        let diffTime = targetDate - now;
        if (diffTime <= 0) {
          return { days: 0, hours: 0, minutes: 0 };
        }
        const days = Math.floor(diffTime / (1e3 * 60 * 60 * 24));
        diffTime -= days * (1e3 * 60 * 60 * 24);
        const hours = Math.floor(diffTime / (1e3 * 60 * 60));
        diffTime -= hours * (1e3 * 60 * 60);
        const minutes = Math.floor(diffTime / (1e3 * 60));
        return {
          days: String(days).padStart(2, "0"),
          hours: String(hours).padStart(2, "0"),
          minutes: String(minutes).padStart(2, "0")
        };
      }
      function showFilterModal() {
        showFilter.value = true;
      }
      function closeFilterModal() {
        showFilter.value = false;
      }
      function toggleLevelFilter(level) {
        if (level === "全部") {
          selectedLevels.value = ["全部"];
          return;
        }
        if (selectedLevels.value.includes("全部")) {
          selectedLevels.value = selectedLevels.value.filter((l) => l !== "全部");
        }
        if (selectedLevels.value.includes(level)) {
          selectedLevels.value = selectedLevels.value.filter((l) => l !== level);
          if (selectedLevels.value.length === 0) {
            selectedLevels.value = ["全部"];
          }
        } else {
          selectedLevels.value.push(level);
        }
      }
      function toggleTypeFilter(type) {
        if (type === "全部") {
          selectedTypes.value = ["全部"];
          return;
        }
        if (selectedTypes.value.includes("全部")) {
          selectedTypes.value = selectedTypes.value.filter((t2) => t2 !== "全部");
        }
        if (selectedTypes.value.includes(type)) {
          selectedTypes.value = selectedTypes.value.filter((t2) => t2 !== type);
          if (selectedTypes.value.length === 0) {
            selectedTypes.value = ["全部"];
          }
        } else {
          selectedTypes.value.push(type);
        }
      }
      function toggleResultFilter(result) {
        if (result === "全部") {
          selectedResults.value = ["全部"];
          return;
        }
        if (selectedResults.value.includes("全部")) {
          selectedResults.value = selectedResults.value.filter((r) => r !== "全部");
        }
        if (selectedResults.value.includes(result)) {
          selectedResults.value = selectedResults.value.filter((r) => r !== result);
          if (selectedResults.value.length === 0) {
            selectedResults.value = ["全部"];
          }
        } else {
          selectedResults.value.push(result);
        }
      }
      function setTimeRange(range) {
        selectedTimeRange.value = range;
      }
      function applyFilters() {
        closeFilterModal();
      }
      function resetFilters() {
        selectedLevels.value = ["全部"];
        selectedTypes.value = ["全部"];
        selectedResults.value = ["全部"];
        selectedTimeRange.value = "all";
      }
      function navigateToCompetitionDetail(id) {
        uni.navigateTo({
          url: `/pages/competition/detail?id=${id}`
        });
      }
      function navigateToSubmission(id) {
        uni.navigateTo({
          url: `/pages/competition/submission?id=${id}`
        });
      }
      function navigateToTeam(teamId) {
        uni.navigateTo({
          url: `/pages/team/detail?id=${teamId}`
        });
      }
      function navigateToCompetitionList() {
        uni.navigateTo({
          url: "/pages/competition/list"
        });
      }
      function viewCertificate(id) {
        uni.navigateTo({
          url: `/pages/certificate/detail?id=${id}`
        });
      }
      function viewSubmission(id) {
        uni.navigateTo({
          url: `/pages/competition/work?id=${id}`
        });
      }
      function shareResult(competition) {
        shareCompetition.value = competition;
        showShareModal.value = true;
      }
      function closeShareModal() {
        showShareModal.value = false;
      }
      function shareToWechat() {
        uni.showToast({
          title: "分享到微信",
          icon: "none"
        });
        closeShareModal();
      }
      function shareToMoments() {
        uni.showToast({
          title: "分享到朋友圈",
          icon: "none"
        });
        closeShareModal();
      }
      function shareToQQ() {
        uni.showToast({
          title: "分享到QQ",
          icon: "none"
        });
        closeShareModal();
      }
      function saveImage() {
        uni.showToast({
          title: "图片保存中...",
          icon: "none"
        });
        setTimeout(() => {
          uni.showToast({
            title: "图片已保存到相册",
            icon: "success"
          });
        }, 1500);
        closeShareModal();
      }
      function cancelRegistration(id) {
        const competition = competitionsData.value.find((comp) => comp.id === id);
        if (competition) {
          cancelCompetition.value = competition;
          showCancelConfirm.value = true;
        }
      }
      function closeCancelConfirm() {
        showCancelConfirm.value = false;
      }
      function confirmCancelRegistration() {
        uni.showLoading({
          title: "处理中..."
        });
        setTimeout(() => {
          competitionsData.value = competitionsData.value.filter((comp) => comp.id !== cancelCompetition.value.id);
          uni.hideLoading();
          uni.showToast({
            title: "已取消报名",
            icon: "success"
          });
          closeCancelConfirm();
        }, 1500);
      }
      vue.onMounted(() => {
        getMyCompetitions();
      });
      const __returned__ = { headerBarRef, headerPlaceholderHeight, loading, activeStatus, myCompetitions, competitionsData, showFilter, selectedLevels, selectedTypes, selectedResults, selectedTimeRange, showShareModal, shareCompetition, showCancelConfirm, cancelCompetition, ongoingCompetitions, upcomingCompetitions, completedCompetitions, getMyCompetitions, fetchCompetitionsDetails, setActiveStatus, getCompetitionCountByStatus, formatDate, getLevelClass, getResultClass, getDaysLeft, getCountdown, showFilterModal, closeFilterModal, toggleLevelFilter, toggleTypeFilter, toggleResultFilter, setTimeRange, applyFilters, resetFilters, navigateToCompetitionDetail, navigateToSubmission, navigateToTeam, navigateToCompetitionList, viewCertificate, viewSubmission, shareResult, closeShareModal, shareToWechat, shareToMoments, shareToQQ, saveImage, cancelRegistration, closeCancelConfirm, confirmCancelRegistration, ref: vue.ref, computed: vue.computed, onMounted: vue.onMounted, SvgIcon, HeaderBar, get competitionsApi() {
        return competitionsApi;
      }, get teamApi() {
        return teamApi;
      }, get getToken() {
        return getToken;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$2(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createVNode(
        $setup["HeaderBar"],
        {
          ref: "headerBarRef",
          title: "我的竞赛",
          showSearch: false,
          showFilter: false
        },
        {
          actions: vue.withCtx(() => [
            vue.createElementVNode("view", {
              class: "action-btn",
              onClick: $setup.showFilterModal
            }, [
              vue.createVNode($setup["SvgIcon"], {
                name: "filter",
                size: "24"
              })
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      ),
      vue.createCommentVNode(" 导航栏占位 "),
      vue.createElementVNode(
        "view",
        {
          class: "header-placeholder",
          style: vue.normalizeStyle({ height: $setup.headerPlaceholderHeight })
        },
        null,
        4
        /* STYLE */
      ),
      vue.createCommentVNode(" 状态标签 "),
      vue.createElementVNode("scroll-view", {
        "scroll-x": "",
        class: "status-tabs"
      }, [
        vue.createElementVNode("view", { class: "tabs-container" }, [
          vue.createElementVNode(
            "view",
            {
              class: vue.normalizeClass(["tab-item", { "active": $setup.activeStatus === "all" }]),
              onClick: _cache[0] || (_cache[0] = ($event) => $setup.setActiveStatus("all"))
            },
            [
              vue.createElementVNode("text", null, "全部")
            ],
            2
            /* CLASS */
          ),
          vue.createElementVNode(
            "view",
            {
              class: vue.normalizeClass(["tab-item", { "active": $setup.activeStatus === "ongoing" }]),
              onClick: _cache[1] || (_cache[1] = ($event) => $setup.setActiveStatus("ongoing"))
            },
            [
              vue.createElementVNode("text", null, "进行中"),
              $setup.myCompetitions && $setup.myCompetitions.value && $setup.myCompetitions.value.length > 0 && $setup.getCompetitionCountByStatus("ongoing") > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "badge"
              }, [
                vue.createElementVNode(
                  "text",
                  null,
                  vue.toDisplayString($setup.getCompetitionCountByStatus("ongoing")),
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true)
            ],
            2
            /* CLASS */
          ),
          vue.createElementVNode(
            "view",
            {
              class: vue.normalizeClass(["tab-item", { "active": $setup.activeStatus === "upcoming" }]),
              onClick: _cache[2] || (_cache[2] = ($event) => $setup.setActiveStatus("upcoming"))
            },
            [
              vue.createElementVNode("text", null, "即将开始")
            ],
            2
            /* CLASS */
          ),
          vue.createElementVNode(
            "view",
            {
              class: vue.normalizeClass(["tab-item", { "active": $setup.activeStatus === "completed" }]),
              onClick: _cache[3] || (_cache[3] = ($event) => $setup.setActiveStatus("completed"))
            },
            [
              vue.createElementVNode("text", null, "已结束"),
              $setup.myCompetitions && $setup.myCompetitions.value && $setup.myCompetitions.value.length > 0 && $setup.getCompetitionCountByStatus("finished") > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "badge"
              }, [
                vue.createElementVNode(
                  "text",
                  null,
                  vue.toDisplayString($setup.getCompetitionCountByStatus("finished")),
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true)
            ],
            2
            /* CLASS */
          )
        ])
      ]),
      vue.createCommentVNode(" 加载中显示 "),
      $setup.loading ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 0,
        class: "loading-container"
      }, [
        vue.createElementVNode("view", { class: "loading-circle" }),
        vue.createElementVNode("text", { class: "loading-text" }, "加载中...")
      ])) : (vue.openBlock(), vue.createElementBlock(
        vue.Fragment,
        { key: 1 },
        [
          vue.createCommentVNode(" 竞赛列表内容 "),
          vue.createElementVNode("scroll-view", {
            "scroll-y": "",
            class: "content-scroll"
          }, [
            vue.createCommentVNode(" 进行中的竞赛 "),
            $setup.activeStatus === "all" || $setup.activeStatus === "ongoing" ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "competition-section"
            }, [
              $setup.activeStatus === "all" ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "section-header"
              }, [
                vue.createElementVNode("text", { class: "section-title" }, "进行中的竞赛"),
                vue.createElementVNode(
                  "text",
                  { class: "section-count" },
                  vue.toDisplayString($setup.ongoingCompetitions ? $setup.ongoingCompetitions.length : 0) + "个",
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true),
              vue.createElementVNode("view", { class: "competition-list" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.ongoingCompetitions, (competition, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "competition-card",
                      key: index,
                      onClick: ($event) => $setup.navigateToCompetitionDetail(competition.id)
                    }, [
                      vue.createElementVNode("view", { class: "card-header" }, [
                        vue.createElementVNode("image", {
                          class: "competition-image",
                          src: competition.imageUrl,
                          mode: "aspectFill"
                        }, null, 8, ["src"]),
                        vue.createElementVNode("view", { class: "competition-info" }, [
                          vue.createElementVNode(
                            "text",
                            { class: "competition-name" },
                            vue.toDisplayString(competition.name),
                            1
                            /* TEXT */
                          ),
                          vue.createElementVNode("view", { class: "competition-badges" }, [
                            vue.createElementVNode(
                              "view",
                              {
                                class: vue.normalizeClass(["level-badge", $setup.getLevelClass(competition.level)])
                              },
                              [
                                vue.createElementVNode(
                                  "text",
                                  null,
                                  vue.toDisplayString(competition.level),
                                  1
                                  /* TEXT */
                                )
                              ],
                              2
                              /* CLASS */
                            ),
                            vue.createElementVNode("view", { class: "status-badge status-ongoing" }, [
                              vue.createElementVNode("text", null, "进行中")
                            ])
                          ]),
                          vue.createElementVNode("view", { class: "competition-date" }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "calendar",
                              size: "14"
                            }),
                            vue.createElementVNode(
                              "text",
                              null,
                              vue.toDisplayString($setup.formatDate(competition.startDate)) + " - " + vue.toDisplayString($setup.formatDate(competition.endDate)),
                              1
                              /* TEXT */
                            )
                          ])
                        ])
                      ]),
                      vue.createElementVNode("view", { class: "card-body" }, [
                        vue.createElementVNode("view", { class: "progress-info" }, [
                          vue.createElementVNode("view", { class: "progress-header" }, [
                            vue.createElementVNode(
                              "text",
                              { class: "current-stage" },
                              "当前阶段: " + vue.toDisplayString(competition.currentStage),
                              1
                              /* TEXT */
                            ),
                            vue.createElementVNode(
                              "text",
                              { class: "days-left" },
                              "剩余" + vue.toDisplayString($setup.getDaysLeft(competition.stageEndDate)) + "天",
                              1
                              /* TEXT */
                            )
                          ]),
                          vue.createElementVNode("view", { class: "progress-bar" }, [
                            vue.createElementVNode(
                              "view",
                              {
                                class: "progress-fill",
                                style: vue.normalizeStyle({ width: competition.progress + "%" })
                              },
                              null,
                              4
                              /* STYLE */
                            )
                          ]),
                          vue.createElementVNode("view", { class: "stage-info" }, [
                            vue.createElementVNode(
                              "text",
                              { class: "stage-text" },
                              vue.toDisplayString(competition.stageDescription),
                              1
                              /* TEXT */
                            )
                          ])
                        ]),
                        competition.teamName ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 0,
                          class: "team-info"
                        }, [
                          vue.createElementVNode("view", { class: "team-header" }, [
                            vue.createElementVNode("text", { class: "team-label" }, "参赛团队"),
                            vue.createElementVNode(
                              "text",
                              { class: "team-name" },
                              vue.toDisplayString(competition.teamName),
                              1
                              /* TEXT */
                            ),
                            vue.createElementVNode("view", { class: "team-members" }, [
                              vue.createElementVNode("view", { class: "member-avatars" }, [
                                (vue.openBlock(true), vue.createElementBlock(
                                  vue.Fragment,
                                  null,
                                  vue.renderList(competition.teamMembers.slice(0, 3), (member, mIndex) => {
                                    return vue.openBlock(), vue.createElementBlock("image", {
                                      class: "member-avatar",
                                      key: mIndex,
                                      src: member.avatar
                                    }, null, 8, ["src"]);
                                  }),
                                  128
                                  /* KEYED_FRAGMENT */
                                )),
                                competition.teamMembers.length > 3 ? (vue.openBlock(), vue.createElementBlock("view", {
                                  key: 0,
                                  class: "more-members"
                                }, [
                                  vue.createElementVNode(
                                    "text",
                                    null,
                                    "+" + vue.toDisplayString(competition.teamMembers.length - 3),
                                    1
                                    /* TEXT */
                                  )
                                ])) : vue.createCommentVNode("v-if", true)
                              ]),
                              vue.createElementVNode(
                                "text",
                                { class: "member-count" },
                                vue.toDisplayString(competition.teamMembers.length) + "人团队",
                                1
                                /* TEXT */
                              )
                            ])
                          ])
                        ])) : vue.createCommentVNode("v-if", true),
                        vue.createElementVNode("view", { class: "action-buttons" }, [
                          vue.createElementVNode("view", {
                            class: "action-btn primary",
                            onClick: vue.withModifiers(($event) => $setup.navigateToSubmission(competition.id), ["stop"])
                          }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "upload",
                              size: "16"
                            }),
                            vue.createElementVNode("text", null, "提交作品")
                          ], 8, ["onClick"]),
                          vue.createElementVNode("view", {
                            class: "action-btn secondary",
                            onClick: vue.withModifiers(($event) => $setup.navigateToTeam(competition.teamId), ["stop"])
                          }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "users",
                              size: "16"
                            }),
                            vue.createElementVNode("text", null, "查看团队")
                          ], 8, ["onClick"])
                        ])
                      ])
                    ], 8, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                )),
                vue.createCommentVNode(" 空状态 "),
                $setup.ongoingCompetitions && $setup.ongoingCompetitions.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "empty-state"
                }, [
                  vue.createElementVNode("image", {
                    class: "empty-image",
                    src: _imports_0$2,
                    mode: "aspectFit"
                  }),
                  vue.createElementVNode("text", { class: "empty-text" }, "暂无进行中的竞赛"),
                  vue.createElementVNode("view", {
                    class: "action-btn primary",
                    onClick: $setup.navigateToCompetitionList
                  }, [
                    vue.createElementVNode("text", null, "去浏览竞赛")
                  ])
                ])) : vue.createCommentVNode("v-if", true)
              ])
            ])) : vue.createCommentVNode("v-if", true),
            vue.createCommentVNode(" 即将开始的竞赛 "),
            $setup.activeStatus === "all" || $setup.activeStatus === "upcoming" ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 1,
              class: "competition-section"
            }, [
              $setup.activeStatus === "all" ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "section-header"
              }, [
                vue.createElementVNode("text", { class: "section-title" }, "即将开始的竞赛"),
                vue.createElementVNode(
                  "text",
                  { class: "section-count" },
                  vue.toDisplayString($setup.upcomingCompetitions ? $setup.upcomingCompetitions.length : 0) + "个",
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true),
              vue.createElementVNode("view", { class: "competition-list" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.upcomingCompetitions, (competition, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "competition-card",
                      key: index,
                      onClick: ($event) => $setup.navigateToCompetitionDetail(competition.id)
                    }, [
                      vue.createElementVNode("view", { class: "card-header" }, [
                        vue.createElementVNode("image", {
                          class: "competition-image",
                          src: competition.imageUrl,
                          mode: "aspectFill"
                        }, null, 8, ["src"]),
                        vue.createElementVNode("view", { class: "competition-info" }, [
                          vue.createElementVNode(
                            "text",
                            { class: "competition-name" },
                            vue.toDisplayString(competition.name),
                            1
                            /* TEXT */
                          ),
                          vue.createElementVNode("view", { class: "competition-badges" }, [
                            vue.createElementVNode(
                              "view",
                              {
                                class: vue.normalizeClass(["level-badge", $setup.getLevelClass(competition.level)])
                              },
                              [
                                vue.createElementVNode(
                                  "text",
                                  null,
                                  vue.toDisplayString(competition.level),
                                  1
                                  /* TEXT */
                                )
                              ],
                              2
                              /* CLASS */
                            ),
                            vue.createElementVNode("view", { class: "status-badge status-upcoming" }, [
                              vue.createElementVNode("text", null, "即将开始")
                            ])
                          ]),
                          vue.createElementVNode("view", { class: "competition-date" }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "calendar",
                              size: "14"
                            }),
                            vue.createElementVNode(
                              "text",
                              null,
                              vue.toDisplayString($setup.formatDate(competition.startDate)) + " - " + vue.toDisplayString($setup.formatDate(competition.endDate)),
                              1
                              /* TEXT */
                            )
                          ])
                        ])
                      ]),
                      vue.createElementVNode("view", { class: "card-body" }, [
                        vue.createElementVNode("view", { class: "countdown-info" }, [
                          vue.createElementVNode("text", { class: "countdown-label" }, "距离开始还有"),
                          vue.createElementVNode("view", { class: "countdown-timer" }, [
                            vue.createElementVNode("view", { class: "time-unit" }, [
                              vue.createElementVNode(
                                "text",
                                { class: "time-value" },
                                vue.toDisplayString($setup.getCountdown(competition.startDate).days),
                                1
                                /* TEXT */
                              ),
                              vue.createElementVNode("text", { class: "time-label" }, "天")
                            ]),
                            vue.createElementVNode("view", { class: "time-separator" }, ":"),
                            vue.createElementVNode("view", { class: "time-unit" }, [
                              vue.createElementVNode(
                                "text",
                                { class: "time-value" },
                                vue.toDisplayString($setup.getCountdown(competition.startDate).hours),
                                1
                                /* TEXT */
                              ),
                              vue.createElementVNode("text", { class: "time-label" }, "时")
                            ]),
                            vue.createElementVNode("view", { class: "time-separator" }, ":"),
                            vue.createElementVNode("view", { class: "time-unit" }, [
                              vue.createElementVNode(
                                "text",
                                { class: "time-value" },
                                vue.toDisplayString($setup.getCountdown(competition.startDate).minutes),
                                1
                                /* TEXT */
                              ),
                              vue.createElementVNode("text", { class: "time-label" }, "分")
                            ])
                          ])
                        ]),
                        competition.teamName ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 0,
                          class: "team-info"
                        }, [
                          vue.createElementVNode("view", { class: "team-header" }, [
                            vue.createElementVNode("text", { class: "team-label" }, "参赛团队"),
                            vue.createElementVNode(
                              "text",
                              { class: "team-name" },
                              vue.toDisplayString(competition.teamName),
                              1
                              /* TEXT */
                            )
                          ]),
                          vue.createElementVNode("view", { class: "team-members" }, [
                            vue.createElementVNode("view", { class: "member-avatars" }, [
                              (vue.openBlock(true), vue.createElementBlock(
                                vue.Fragment,
                                null,
                                vue.renderList(competition.teamMembers.slice(0, 3), (member, mIndex) => {
                                  return vue.openBlock(), vue.createElementBlock("image", {
                                    class: "member-avatar",
                                    key: mIndex,
                                    src: member.avatar
                                  }, null, 8, ["src"]);
                                }),
                                128
                                /* KEYED_FRAGMENT */
                              )),
                              competition.teamMembers.length > 3 ? (vue.openBlock(), vue.createElementBlock("view", {
                                key: 0,
                                class: "more-members"
                              }, [
                                vue.createElementVNode(
                                  "text",
                                  null,
                                  "+" + vue.toDisplayString(competition.teamMembers.length - 3),
                                  1
                                  /* TEXT */
                                )
                              ])) : vue.createCommentVNode("v-if", true)
                            ]),
                            vue.createElementVNode(
                              "text",
                              { class: "member-count" },
                              vue.toDisplayString(competition.teamMembers.length) + "人团队",
                              1
                              /* TEXT */
                            )
                          ])
                        ])) : vue.createCommentVNode("v-if", true),
                        vue.createElementVNode("view", { class: "action-buttons" }, [
                          vue.createElementVNode("view", {
                            class: "action-btn primary",
                            onClick: vue.withModifiers(($event) => $setup.navigateToTeam(competition.teamId), ["stop"])
                          }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "users",
                              size: "16"
                            }),
                            vue.createElementVNode("text", null, "团队管理")
                          ], 8, ["onClick"]),
                          vue.createElementVNode("view", {
                            class: "action-btn secondary",
                            onClick: vue.withModifiers(($event) => $setup.cancelRegistration(competition.id), ["stop"])
                          }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "x",
                              size: "16"
                            }),
                            vue.createElementVNode("text", null, "取消报名")
                          ], 8, ["onClick"])
                        ])
                      ])
                    ], 8, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                )),
                vue.createCommentVNode(" 空状态 "),
                $setup.upcomingCompetitions && $setup.upcomingCompetitions.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "empty-state"
                }, [
                  vue.createElementVNode("image", {
                    class: "empty-image",
                    src: _imports_1,
                    mode: "aspectFit"
                  }),
                  vue.createElementVNode("text", { class: "empty-text" }, "暂无即将开始的竞赛"),
                  vue.createElementVNode("view", {
                    class: "action-btn primary",
                    onClick: $setup.navigateToCompetitionList
                  }, [
                    vue.createElementVNode("text", null, "去浏览竞赛")
                  ])
                ])) : vue.createCommentVNode("v-if", true)
              ])
            ])) : vue.createCommentVNode("v-if", true),
            vue.createCommentVNode(" 已结束的竞赛 "),
            $setup.activeStatus === "all" || $setup.activeStatus === "completed" ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 2,
              class: "competition-section"
            }, [
              $setup.activeStatus === "all" ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "section-header"
              }, [
                vue.createElementVNode("text", { class: "section-title" }, "已结束的竞赛"),
                vue.createElementVNode(
                  "text",
                  { class: "section-count" },
                  vue.toDisplayString($setup.completedCompetitions ? $setup.completedCompetitions.length : 0) + "个",
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true),
              vue.createElementVNode("view", { class: "competition-list" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.completedCompetitions, (competition, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "competition-card",
                      key: index,
                      onClick: ($event) => $setup.navigateToCompetitionDetail(competition.id)
                    }, [
                      vue.createElementVNode("view", { class: "card-header" }, [
                        vue.createElementVNode("image", {
                          class: "competition-image",
                          src: competition.imageUrl,
                          mode: "aspectFill"
                        }, null, 8, ["src"]),
                        vue.createElementVNode("view", { class: "competition-info" }, [
                          vue.createElementVNode(
                            "text",
                            { class: "competition-name" },
                            vue.toDisplayString(competition.name),
                            1
                            /* TEXT */
                          ),
                          vue.createElementVNode("view", { class: "competition-badges" }, [
                            vue.createElementVNode(
                              "view",
                              {
                                class: vue.normalizeClass(["level-badge", $setup.getLevelClass(competition.level)])
                              },
                              [
                                vue.createElementVNode(
                                  "text",
                                  null,
                                  vue.toDisplayString(competition.level),
                                  1
                                  /* TEXT */
                                )
                              ],
                              2
                              /* CLASS */
                            ),
                            vue.createElementVNode("view", { class: "status-badge status-completed" }, [
                              vue.createElementVNode("text", null, "已结束")
                            ])
                          ]),
                          vue.createElementVNode("view", { class: "competition-date" }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "calendar",
                              size: "14"
                            }),
                            vue.createElementVNode(
                              "text",
                              null,
                              vue.toDisplayString($setup.formatDate(competition.startDate)) + " - " + vue.toDisplayString($setup.formatDate(competition.endDate)),
                              1
                              /* TEXT */
                            )
                          ])
                        ])
                      ]),
                      vue.createElementVNode("view", { class: "card-body" }, [
                        vue.createElementVNode("view", { class: "result-info" }, [
                          vue.createElementVNode("view", { class: "result-header" }, [
                            vue.createElementVNode("text", { class: "result-label" }, "竞赛成绩"),
                            vue.createElementVNode(
                              "view",
                              {
                                class: vue.normalizeClass(["result-badge", $setup.getResultClass(competition.result)])
                              },
                              [
                                vue.createElementVNode(
                                  "text",
                                  null,
                                  vue.toDisplayString(competition.result || "未获奖"),
                                  1
                                  /* TEXT */
                                )
                              ],
                              2
                              /* CLASS */
                            )
                          ]),
                          competition.hasCertificate ? (vue.openBlock(), vue.createElementBlock("view", {
                            key: 0,
                            class: "certificate-info"
                          }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "award",
                              size: "16"
                            }),
                            vue.createElementVNode("text", null, "已获得证书"),
                            vue.createElementVNode("view", {
                              class: "view-certificate",
                              onClick: vue.withModifiers(($event) => $setup.viewCertificate(competition.id), ["stop"])
                            }, [
                              vue.createElementVNode("text", null, "查看"),
                              vue.createVNode($setup["SvgIcon"], {
                                name: "chevron-right",
                                size: "14"
                              })
                            ], 8, ["onClick"])
                          ])) : vue.createCommentVNode("v-if", true)
                        ]),
                        competition.teamName ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 0,
                          class: "team-info"
                        }, [
                          vue.createElementVNode("view", { class: "team-header" }, [
                            vue.createElementVNode("text", { class: "team-label" }, "参赛团队"),
                            vue.createElementVNode(
                              "text",
                              { class: "team-name" },
                              vue.toDisplayString(competition.teamName),
                              1
                              /* TEXT */
                            )
                          ]),
                          vue.createElementVNode("view", { class: "team-members" }, [
                            vue.createElementVNode("view", { class: "member-avatars" }, [
                              (vue.openBlock(true), vue.createElementBlock(
                                vue.Fragment,
                                null,
                                vue.renderList(competition.teamMembers.slice(0, 3), (member, mIndex) => {
                                  return vue.openBlock(), vue.createElementBlock("image", {
                                    class: "member-avatar",
                                    key: mIndex,
                                    src: member.avatar
                                  }, null, 8, ["src"]);
                                }),
                                128
                                /* KEYED_FRAGMENT */
                              )),
                              competition.teamMembers.length > 3 ? (vue.openBlock(), vue.createElementBlock("view", {
                                key: 0,
                                class: "more-members"
                              }, [
                                vue.createElementVNode(
                                  "text",
                                  null,
                                  "+" + vue.toDisplayString(competition.teamMembers.length - 3),
                                  1
                                  /* TEXT */
                                )
                              ])) : vue.createCommentVNode("v-if", true)
                            ]),
                            vue.createElementVNode(
                              "text",
                              { class: "member-count" },
                              vue.toDisplayString(competition.teamMembers.length) + "人团队",
                              1
                              /* TEXT */
                            )
                          ])
                        ])) : vue.createCommentVNode("v-if", true),
                        vue.createElementVNode("view", { class: "action-buttons" }, [
                          vue.createElementVNode("view", {
                            class: "action-btn primary",
                            onClick: vue.withModifiers(($event) => $setup.viewSubmission(competition.id), ["stop"])
                          }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "eye",
                              size: "16"
                            }),
                            vue.createElementVNode("text", null, "查看作品")
                          ], 8, ["onClick"]),
                          vue.createElementVNode("view", {
                            class: "action-btn secondary",
                            onClick: vue.withModifiers(($event) => $setup.shareResult(competition), ["stop"])
                          }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "share",
                              size: "16"
                            }),
                            vue.createElementVNode("text", null, "分享成绩")
                          ], 8, ["onClick"])
                        ])
                      ])
                    ], 8, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                )),
                vue.createCommentVNode(" 空状态 "),
                $setup.completedCompetitions && $setup.completedCompetitions.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "empty-state"
                }, [
                  vue.createElementVNode("image", {
                    class: "empty-image",
                    src: _imports_2,
                    mode: "aspectFit"
                  }),
                  vue.createElementVNode("text", { class: "empty-text" }, "暂无已结束的竞赛"),
                  vue.createElementVNode("view", {
                    class: "action-btn primary",
                    onClick: $setup.navigateToCompetitionList
                  }, [
                    vue.createElementVNode("text", null, "去浏览竞赛")
                  ])
                ])) : vue.createCommentVNode("v-if", true)
              ])
            ])) : vue.createCommentVNode("v-if", true)
          ])
        ],
        2112
        /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
      )),
      vue.createCommentVNode(" 筛选弹窗 "),
      $setup.showFilter ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 2,
        class: "filter-modal",
        onClick: $setup.closeFilterModal
      }, [
        vue.createElementVNode("view", {
          class: "filter-content",
          onClick: _cache[24] || (_cache[24] = vue.withModifiers(() => {
          }, ["stop"]))
        }, [
          vue.createElementVNode("view", { class: "filter-header" }, [
            vue.createElementVNode("text", { class: "filter-title" }, "筛选条件"),
            vue.createElementVNode("view", {
              class: "close-btn",
              onClick: $setup.closeFilterModal
            }, [
              vue.createVNode($setup["SvgIcon"], {
                name: "x",
                size: "20"
              })
            ])
          ]),
          vue.createElementVNode("scroll-view", {
            "scroll-y": "",
            class: "filter-options-scroll"
          }, [
            vue.createCommentVNode(" 竞赛级别 "),
            vue.createElementVNode("view", { class: "filter-section" }, [
              vue.createElementVNode("text", { class: "filter-section-title" }, "竞赛级别"),
              vue.createElementVNode("view", { class: "filter-options" }, [
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "selected": $setup.selectedLevels.includes("全部") }]),
                    onClick: _cache[4] || (_cache[4] = ($event) => $setup.toggleLevelFilter("全部"))
                  },
                  [
                    vue.createElementVNode("text", null, "全部")
                  ],
                  2
                  /* CLASS */
                ),
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "selected": $setup.selectedLevels.includes("国家级") }]),
                    onClick: _cache[5] || (_cache[5] = ($event) => $setup.toggleLevelFilter("国家级"))
                  },
                  [
                    vue.createElementVNode("text", null, "国家级")
                  ],
                  2
                  /* CLASS */
                ),
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "selected": $setup.selectedLevels.includes("省级") }]),
                    onClick: _cache[6] || (_cache[6] = ($event) => $setup.toggleLevelFilter("省级"))
                  },
                  [
                    vue.createElementVNode("text", null, "省级")
                  ],
                  2
                  /* CLASS */
                ),
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "selected": $setup.selectedLevels.includes("市级") }]),
                    onClick: _cache[7] || (_cache[7] = ($event) => $setup.toggleLevelFilter("市级"))
                  },
                  [
                    vue.createElementVNode("text", null, "市级")
                  ],
                  2
                  /* CLASS */
                ),
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "selected": $setup.selectedLevels.includes("校级") }]),
                    onClick: _cache[8] || (_cache[8] = ($event) => $setup.toggleLevelFilter("校级"))
                  },
                  [
                    vue.createElementVNode("text", null, "校级")
                  ],
                  2
                  /* CLASS */
                )
              ])
            ]),
            vue.createCommentVNode(" 竞赛类型 "),
            vue.createElementVNode("view", { class: "filter-section" }, [
              vue.createElementVNode("text", { class: "filter-section-title" }, "竞赛类型"),
              vue.createElementVNode("view", { class: "filter-options" }, [
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "selected": $setup.selectedTypes.includes("全部") }]),
                    onClick: _cache[9] || (_cache[9] = ($event) => $setup.toggleTypeFilter("全部"))
                  },
                  [
                    vue.createElementVNode("text", null, "全部")
                  ],
                  2
                  /* CLASS */
                ),
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "selected": $setup.selectedTypes.includes("编程开发") }]),
                    onClick: _cache[10] || (_cache[10] = ($event) => $setup.toggleTypeFilter("编程开发"))
                  },
                  [
                    vue.createElementVNode("text", null, "编程开发")
                  ],
                  2
                  /* CLASS */
                ),
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "selected": $setup.selectedTypes.includes("设计创意") }]),
                    onClick: _cache[11] || (_cache[11] = ($event) => $setup.toggleTypeFilter("设计创意"))
                  },
                  [
                    vue.createElementVNode("text", null, "设计创意")
                  ],
                  2
                  /* CLASS */
                ),
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "selected": $setup.selectedTypes.includes("商业创新") }]),
                    onClick: _cache[12] || (_cache[12] = ($event) => $setup.toggleTypeFilter("商业创新"))
                  },
                  [
                    vue.createElementVNode("text", null, "商业创新")
                  ],
                  2
                  /* CLASS */
                ),
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "selected": $setup.selectedTypes.includes("科研学术") }]),
                    onClick: _cache[13] || (_cache[13] = ($event) => $setup.toggleTypeFilter("科研学术"))
                  },
                  [
                    vue.createElementVNode("text", null, "科研学术")
                  ],
                  2
                  /* CLASS */
                )
              ])
            ]),
            vue.createCommentVNode(" 参赛结果 "),
            vue.createElementVNode("view", { class: "filter-section" }, [
              vue.createElementVNode("text", { class: "filter-section-title" }, "参赛结果"),
              vue.createElementVNode("view", { class: "filter-options" }, [
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "selected": $setup.selectedResults.includes("全部") }]),
                    onClick: _cache[14] || (_cache[14] = ($event) => $setup.toggleResultFilter("全部"))
                  },
                  [
                    vue.createElementVNode("text", null, "全部")
                  ],
                  2
                  /* CLASS */
                ),
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "selected": $setup.selectedResults.includes("一等奖") }]),
                    onClick: _cache[15] || (_cache[15] = ($event) => $setup.toggleResultFilter("一等奖"))
                  },
                  [
                    vue.createElementVNode("text", null, "一等奖")
                  ],
                  2
                  /* CLASS */
                ),
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "selected": $setup.selectedResults.includes("二等奖") }]),
                    onClick: _cache[16] || (_cache[16] = ($event) => $setup.toggleResultFilter("二等奖"))
                  },
                  [
                    vue.createElementVNode("text", null, "二等奖")
                  ],
                  2
                  /* CLASS */
                ),
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "selected": $setup.selectedResults.includes("三等奖") }]),
                    onClick: _cache[17] || (_cache[17] = ($event) => $setup.toggleResultFilter("三等奖"))
                  },
                  [
                    vue.createElementVNode("text", null, "三等奖")
                  ],
                  2
                  /* CLASS */
                ),
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "selected": $setup.selectedResults.includes("优秀奖") }]),
                    onClick: _cache[18] || (_cache[18] = ($event) => $setup.toggleResultFilter("优秀奖"))
                  },
                  [
                    vue.createElementVNode("text", null, "优秀奖")
                  ],
                  2
                  /* CLASS */
                ),
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "selected": $setup.selectedResults.includes("未获奖") }]),
                    onClick: _cache[19] || (_cache[19] = ($event) => $setup.toggleResultFilter("未获奖"))
                  },
                  [
                    vue.createElementVNode("text", null, "未获奖")
                  ],
                  2
                  /* CLASS */
                )
              ])
            ]),
            vue.createCommentVNode(" 时间范围 "),
            vue.createElementVNode("view", { class: "filter-section" }, [
              vue.createElementVNode("text", { class: "filter-section-title" }, "时间范围"),
              vue.createElementVNode("view", { class: "filter-options" }, [
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "selected": $setup.selectedTimeRange === "all" }]),
                    onClick: _cache[20] || (_cache[20] = ($event) => $setup.setTimeRange("all"))
                  },
                  [
                    vue.createElementVNode("text", null, "全部时间")
                  ],
                  2
                  /* CLASS */
                ),
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "selected": $setup.selectedTimeRange === "month3" }]),
                    onClick: _cache[21] || (_cache[21] = ($event) => $setup.setTimeRange("month3"))
                  },
                  [
                    vue.createElementVNode("text", null, "近3个月")
                  ],
                  2
                  /* CLASS */
                ),
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "selected": $setup.selectedTimeRange === "month6" }]),
                    onClick: _cache[22] || (_cache[22] = ($event) => $setup.setTimeRange("month6"))
                  },
                  [
                    vue.createElementVNode("text", null, "近6个月")
                  ],
                  2
                  /* CLASS */
                ),
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["filter-option", { "selected": $setup.selectedTimeRange === "year1" }]),
                    onClick: _cache[23] || (_cache[23] = ($event) => $setup.setTimeRange("year1"))
                  },
                  [
                    vue.createElementVNode("text", null, "近1年")
                  ],
                  2
                  /* CLASS */
                )
              ])
            ])
          ]),
          vue.createElementVNode("view", { class: "filter-actions" }, [
            vue.createElementVNode("view", {
              class: "reset-filter-btn",
              onClick: $setup.resetFilters
            }, [
              vue.createElementVNode("text", null, "重置")
            ]),
            vue.createElementVNode("view", {
              class: "apply-filter-btn",
              onClick: $setup.applyFilters
            }, [
              vue.createElementVNode("text", null, "应用筛选")
            ])
          ])
        ])
      ])) : vue.createCommentVNode("v-if", true),
      vue.createCommentVNode(" 分享弹窗 "),
      $setup.showShareModal ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 3,
        class: "share-modal",
        onClick: $setup.closeShareModal
      }, [
        vue.createElementVNode("view", {
          class: "share-content",
          onClick: _cache[25] || (_cache[25] = vue.withModifiers(() => {
          }, ["stop"]))
        }, [
          vue.createElementVNode("view", { class: "share-header" }, [
            vue.createElementVNode("text", { class: "share-title" }, "分享竞赛成绩"),
            vue.createElementVNode("view", {
              class: "close-btn",
              onClick: $setup.closeShareModal
            }, [
              vue.createVNode($setup["SvgIcon"], {
                name: "x",
                size: "20"
              })
            ])
          ]),
          vue.createElementVNode("view", { class: "share-preview" }, [
            vue.createElementVNode("view", { class: "share-card" }, [
              vue.createElementVNode("view", { class: "share-card-header" }, [
                vue.createElementVNode("image", {
                  class: "share-logo",
                  src: _imports_3,
                  mode: "aspectFit"
                }),
                vue.createElementVNode("text", { class: "share-platform" }, "竞赛平台")
              ]),
              vue.createElementVNode("view", { class: "share-card-body" }, [
                vue.createElementVNode(
                  "text",
                  { class: "share-competition-name" },
                  vue.toDisplayString($setup.shareCompetition.name),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode("view", { class: "share-result" }, [
                  vue.createElementVNode("text", { class: "share-result-label" }, "获得"),
                  vue.createElementVNode(
                    "text",
                    { class: "share-result-value" },
                    vue.toDisplayString($setup.shareCompetition.result || "参与奖"),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "share-team" }, [
                  vue.createElementVNode("text", { class: "share-team-label" }, "团队:"),
                  vue.createElementVNode(
                    "text",
                    { class: "share-team-value" },
                    vue.toDisplayString($setup.shareCompetition.teamName),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "share-date" }, [
                  vue.createElementVNode(
                    "text",
                    null,
                    vue.toDisplayString($setup.formatDate($setup.shareCompetition.endDate)),
                    1
                    /* TEXT */
                  )
                ])
              ]),
              vue.createElementVNode("view", { class: "share-card-footer" }, [
                vue.createElementVNode("image", {
                  class: "share-qrcode",
                  src: _imports_4,
                  mode: "aspectFit"
                }),
                vue.createElementVNode("text", { class: "share-scan-text" }, "扫码查看详情")
              ])
            ])
          ]),
          vue.createElementVNode("view", { class: "share-options" }, [
            vue.createElementVNode("view", {
              class: "share-option",
              onClick: $setup.shareToWechat
            }, [
              vue.createElementVNode("view", { class: "share-icon wechat" }, [
                vue.createVNode($setup["SvgIcon"], {
                  name: "wechat",
                  size: "32"
                })
              ]),
              vue.createElementVNode("text", null, "微信")
            ]),
            vue.createElementVNode("view", {
              class: "share-option",
              onClick: $setup.shareToMoments
            }, [
              vue.createElementVNode("view", { class: "share-icon moments" }, [
                vue.createVNode($setup["SvgIcon"], {
                  name: "moments",
                  size: "32"
                })
              ]),
              vue.createElementVNode("text", null, "朋友圈")
            ]),
            vue.createElementVNode("view", {
              class: "share-option",
              onClick: $setup.shareToQQ
            }, [
              vue.createElementVNode("view", { class: "share-icon qq" }, [
                vue.createVNode($setup["SvgIcon"], {
                  name: "qq",
                  size: "32"
                })
              ]),
              vue.createElementVNode("text", null, "QQ")
            ]),
            vue.createElementVNode("view", {
              class: "share-option",
              onClick: $setup.saveImage
            }, [
              vue.createElementVNode("view", { class: "share-icon save" }, [
                vue.createVNode($setup["SvgIcon"], {
                  name: "download",
                  size: "32"
                })
              ]),
              vue.createElementVNode("text", null, "保存图片")
            ])
          ]),
          vue.createElementVNode("view", {
            class: "share-cancel",
            onClick: $setup.closeShareModal
          }, [
            vue.createElementVNode("text", null, "取消")
          ])
        ])
      ])) : vue.createCommentVNode("v-if", true),
      vue.createCommentVNode(" 取消报名确认弹窗 "),
      $setup.showCancelConfirm ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 4,
        class: "confirm-modal",
        onClick: $setup.closeCancelConfirm
      }, [
        vue.createElementVNode("view", {
          class: "confirm-content",
          onClick: _cache[26] || (_cache[26] = vue.withModifiers(() => {
          }, ["stop"]))
        }, [
          vue.createElementVNode("view", { class: "confirm-header" }, [
            vue.createElementVNode("text", { class: "confirm-title" }, "取消报名")
          ]),
          vue.createElementVNode("view", { class: "confirm-body" }, [
            vue.createElementVNode(
              "text",
              { class: "confirm-message" },
              '确定要取消参加"' + vue.toDisplayString($setup.cancelCompetition.name) + '"吗？取消后将无法恢复。',
              1
              /* TEXT */
            )
          ]),
          vue.createElementVNode("view", { class: "confirm-actions" }, [
            vue.createElementVNode("view", {
              class: "confirm-btn cancel",
              onClick: $setup.closeCancelConfirm
            }, [
              vue.createElementVNode("text", null, "再想想")
            ]),
            vue.createElementVNode("view", {
              class: "confirm-btn confirm",
              onClick: $setup.confirmCancelRegistration
            }, [
              vue.createElementVNode("text", null, "确定取消")
            ])
          ])
        ])
      ])) : vue.createCommentVNode("v-if", true)
    ]);
  }
  const PagesMycompetitionsMycompetitions = /* @__PURE__ */ _export_sfc(_sfc_main$3, [["render", _sfc_render$2], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/mycompetitions/mycompetitions.vue"]]);
  const getTeamRoles = (teamId) => {
    return request({
      url: `/teamRoles/team/${teamId}`,
      method: "GET"
    });
  };
  const getRoleDetail = (roleId) => {
    return request({
      url: `/teamRoles/${roleId}`,
      method: "GET"
    });
  };
  const createTeamRole = (roleData) => {
    return request({
      url: "/teamRoles",
      method: "POST",
      data: roleData
    });
  };
  const updateTeamRole = (roleData) => {
    return request({
      url: "/teamRoles",
      method: "PUT",
      data: roleData
    });
  };
  const deleteTeamRole = (roleId) => {
    return request({
      url: `/teamRoles/${roleId}`,
      method: "DELETE"
    });
  };
  const teamRoleApi = {
    getTeamRoles,
    getRoleDetail,
    createTeamRole,
    updateTeamRole,
    deleteTeamRole
  };
  const _imports_0$1 = "/static/image/empty-teams.png";
  const _sfc_main$2 = {
    __name: "myTeam",
    setup(__props, { expose: __expose }) {
      __expose();
      const loading = vue.ref(true);
      const refreshing = vue.ref(false);
      const activeTab = vue.ref("all");
      const searchKeyword = vue.ref("");
      const myTeams = vue.ref([]);
      const showDismissModal = vue.ref(false);
      const dismissTeam = vue.ref({});
      const showLeaveModal = vue.ref(false);
      const leaveTeam = vue.ref({});
      const showManageModal = vue.ref(false);
      const managingTeam = vue.ref({});
      const manageActiveTab = vue.ref("members");
      const teamMembers = vue.ref([]);
      const loadingMembers = vue.ref(false);
      const showRemoveMemberModal = vue.ref(false);
      const removeMember = vue.ref({});
      const teamRoles = vue.ref([]);
      const loadingRoles = vue.ref(false);
      const currentEditRole = vue.ref(null);
      const showRoleFormModal = vue.ref(false);
      const showDeleteRoleModal = vue.ref(false);
      const roleFormMode = vue.ref("add");
      const roleForm = vue.ref({
        teamId: "",
        name: "",
        requiredCount: 1,
        description: "",
        skillRequirements: []
      });
      const skillInputValue = vue.ref("");
      const loadingTeamInfo = vue.ref(false);
      const teamInfoForm = vue.ref({
        id: "",
        name: "",
        description: "",
        direction: "",
        recruitmentDeadline: "",
        contactInfo: {
          phone: "",
          qq: "",
          wechat: ""
        }
      });
      const filteredTeams = vue.computed(() => {
        if (!myTeams.value)
          return [];
        let result = myTeams.value;
        if (activeTab.value === "leader") {
          result = result.filter((team) => team.roleType === "leader");
        } else if (activeTab.value === "member") {
          result = result.filter((team) => team.roleType !== "leader");
        }
        if (searchKeyword.value) {
          const keyword = searchKeyword.value.toLowerCase();
          result = result.filter(
            (team) => {
              var _a;
              return team.name.toLowerCase().includes(keyword) || ((_a = team.description) == null ? void 0 : _a.toLowerCase().includes(keyword));
            }
          );
        }
        return result;
      });
      async function getMyTeams() {
        try {
          loading.value = true;
          const token = getToken();
          if (!token) {
            uni.showToast({
              title: "请先登录",
              icon: "none"
            });
            setTimeout(() => {
              uni.navigateTo({
                url: "/pages/login/login"
              });
            }, 1500);
            loading.value = false;
            return;
          }
          const res = await teamApi.getMyTeams();
          if (res && res.code === 200 && res.data) {
            myTeams.value = res.data.map((team) => {
              let statusText = "";
              switch (team.status) {
                case "0":
                  statusText = "招募中";
                  break;
                case "1":
                  statusText = "已满员";
                  break;
                case "2":
                  statusText = "已结束";
                  break;
                case "3":
                  statusText = "已解散";
                  break;
                case "4":
                  statusText = "比赛中";
                  break;
                default:
                  statusText = "未知状态";
              }
              const teamRoles2 = team.teamRoles ? team.teamRoles.map((role) => {
                const progress = role.requiredCount > 0 ? Math.min(100, Math.round(role.currentCount / role.requiredCount * 100)) : 0;
                return {
                  ...role,
                  progress
                };
              }) : [];
              return {
                ...team,
                statusText,
                teamRoles: teamRoles2
              };
            });
            formatAppLog("log", "at pages/myTeam/myTeam.vue:740", "获取到的团队列表:", myTeams.value);
          } else {
            formatAppLog("warn", "at pages/myTeam/myTeam.vue:742", "未获取到团队数据或数据格式不正确:", res);
            uni.showToast({
              title: (res == null ? void 0 : res.message) || "获取团队失败",
              icon: "none"
            });
            myTeams.value = [];
          }
        } catch (error) {
          formatAppLog("error", "at pages/myTeam/myTeam.vue:750", "获取我的团队列表失败:", error);
          uni.showToast({
            title: "获取团队列表失败",
            icon: "none"
          });
          myTeams.value = [];
        } finally {
          loading.value = false;
          refreshing.value = false;
        }
      }
      function refreshTeams() {
        refreshing.value = true;
        getMyTeams();
      }
      function setActiveTab(tab) {
        activeTab.value = tab;
      }
      function handleSearch() {
      }
      function clearSearch() {
        searchKeyword.value = "";
      }
      function getTeamInitials(name2) {
        if (!name2)
          return "";
        return name2.substring(0, 2);
      }
      function formatDate(dateString) {
        if (!dateString)
          return "";
        const date = new Date(dateString);
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, "0");
        const day = String(date.getDate()).padStart(2, "0");
        return `${year}-${month}-${day}`;
      }
      function getStatusClass(status) {
        const classMap = {
          "active": "status-active",
          "recruiting": "status-recruiting",
          "ended": "status-ended",
          "dismissed": "status-dismissed",
          // 添加新的数字状态映射
          "0": "status-recruiting",
          // 招募中
          "1": "status-active",
          // 已满员/活跃
          "2": "status-dismissed",
          // 已解散
          "3": "status-ended",
          // 已结束
          "4": "status-competing"
          // 比赛中
        };
        return classMap[status] || "";
      }
      function getStatusText(status) {
        const textMap = {
          "active": "活跃",
          "recruiting": "招募中",
          "ended": "已结束",
          "dismissed": "已解散"
        };
        return textMap[status] || "";
      }
      function getCompetitionStatusClass(status) {
        const classMap = {
          "upcoming": "status-upcoming",
          "ongoing": "status-ongoing",
          "completed": "status-completed"
        };
        return classMap[status] || "";
      }
      function getEmptyStateText() {
        if (searchKeyword.value) {
          return "没有找到匹配的团队";
        }
        if (activeTab.value === "leader") {
          return "你还没有创建过团队";
        } else if (activeTab.value === "member") {
          return "你还没有加入任何团队";
        }
        return "你还没有参与任何团队";
      }
      function navigateToTeamDetail(id) {
        uni.navigateTo({
          url: `/pages/team/detail?id=${id}`
        });
      }
      function navigateToManageTeam(id) {
        uni.navigateTo({
          url: `/pages/team/manage?id=${id}`
        });
      }
      function navigateToCreateTeam() {
        uni.navigateTo({
          url: "/pages/team/create"
        });
      }
      function showDismissConfirm(team) {
        dismissTeam.value = team;
        showDismissModal.value = true;
      }
      function closeDismissModal() {
        showDismissModal.value = false;
      }
      function confirmDismissTeam() {
        uni.showLoading({
          title: "处理中..."
        });
        formatAppLog("log", "at pages/myTeam/myTeam.vue:895", `开始解散团队，团队ID: ${dismissTeam.value.id}`);
        teamApi.disbandTeam(dismissTeam.value.id).then((res) => {
          formatAppLog("log", "at pages/myTeam/myTeam.vue:900", "解散团队响应:", res);
          if (res.code === 200) {
            const index = myTeams.value.findIndex((team) => team.id === dismissTeam.value.id);
            if (index !== -1) {
              myTeams.value[index].status = "2";
              myTeams.value[index].statusText = "已解散";
            }
            uni.showToast({
              title: "团队已解散",
              icon: "success"
            });
          } else {
            formatAppLog("warn", "at pages/myTeam/myTeam.vue:915", "解散团队失败，服务器响应:", res);
            uni.showToast({
              title: res.message || "解散失败",
              icon: "none"
            });
          }
        }).catch((err) => {
          formatAppLog("error", "at pages/myTeam/myTeam.vue:923", "解散团队失败:", err);
          uni.showToast({
            title: (err == null ? void 0 : err.message) || "网络错误，请重试",
            icon: "none"
          });
        }).finally(() => {
          uni.hideLoading();
          closeDismissModal();
        });
      }
      function showLeaveConfirm(team) {
        leaveTeam.value = team;
        showLeaveModal.value = true;
      }
      function closeLeaveModal() {
        showLeaveModal.value = false;
      }
      function confirmLeaveTeam() {
        uni.showLoading({
          title: "处理中..."
        });
        teamApi.leaveTeam(leaveTeam.value.id).then((res) => {
          if (res.code === 200) {
            myTeams.value = myTeams.value.filter((team) => team.id !== leaveTeam.value.id);
            uni.showToast({
              title: "已退出团队",
              icon: "success"
            });
          } else {
            uni.showToast({
              title: res.message || "退出失败",
              icon: "none"
            });
          }
        }).catch((err) => {
          formatAppLog("error", "at pages/myTeam/myTeam.vue:971", "退出团队失败:", err);
          uni.showToast({
            title: "网络错误，请重试",
            icon: "none"
          });
        }).finally(() => {
          uni.hideLoading();
          closeLeaveModal();
        });
      }
      function deleteTeamRecord(id) {
        uni.showModal({
          title: "删除记录",
          content: "确定要删除该团队记录吗？",
          success: (res) => {
            if (res.confirm) {
              uni.showLoading({
                title: "删除中..."
              });
              teamApi.deleteTeamRecord(id).then((res2) => {
                if (res2.code === 200) {
                  myTeams.value = myTeams.value.filter((team) => team.id !== id);
                  uni.showToast({
                    title: "记录已删除",
                    icon: "success"
                  });
                } else {
                  uni.showToast({
                    title: res2.message || "删除失败",
                    icon: "none"
                  });
                }
              }).catch((err) => {
                formatAppLog("error", "at pages/myTeam/myTeam.vue:1013", "删除团队记录失败:", err);
                uni.showToast({
                  title: "网络错误，请重试",
                  icon: "none"
                });
              }).finally(() => {
                uni.hideLoading();
              });
            }
          }
        });
      }
      function showManageTeamModal(team) {
        managingTeam.value = team;
        showManageModal.value = true;
        if (manageActiveTab.value === "members") {
          getTeamMembers(team.id);
        } else if (manageActiveTab.value === "roles") {
          getTeamRoles2(team.id);
        } else if (manageActiveTab.value === "info") {
          initTeamInfoForm(team);
        }
      }
      function closeManageModal() {
        showManageModal.value = false;
      }
      function setManageTab(tab) {
        manageActiveTab.value = tab;
        if (tab === "members" && (!teamMembers.value || teamMembers.value.length === 0)) {
          getTeamMembers(managingTeam.value.id);
        } else if (tab === "roles" && (!teamRoles.value || teamRoles.value.length === 0)) {
          getTeamRoles2(managingTeam.value.id);
        } else if (tab === "info") {
          initTeamInfoForm(managingTeam.value);
        }
      }
      async function getTeamMembers(teamId) {
        if (!teamId)
          return;
        loadingMembers.value = true;
        try {
          const res = await teamApi.getTeamMembers(teamId);
          if (res && res.code === 200 && res.data) {
            teamMembers.value = res.data.map((member) => {
              const status = member.isLeader ? "active" : "offline";
              const statusText = member.isLeader ? "在线" : "离线";
              return {
                ...member,
                status,
                statusText,
                avatar: member.userAvatarUrl || "/static/image/avatar/default.jpg",
                role: member.isLeader ? "队长" : member.roleName || "队员",
                joinDate: formatDate(member.joinTime)
              };
            });
            formatAppLog("log", "at pages/myTeam/myTeam.vue:1090", "获取到的团队成员:", teamMembers.value);
          } else {
            formatAppLog("warn", "at pages/myTeam/myTeam.vue:1092", "未获取到团队成员或数据格式不正确:", res);
            uni.showToast({
              title: (res == null ? void 0 : res.message) || "获取成员失败",
              icon: "none"
            });
            teamMembers.value = [];
          }
        } catch (error) {
          formatAppLog("error", "at pages/myTeam/myTeam.vue:1100", "获取团队成员失败:", error);
          uni.showToast({
            title: "获取团队成员失败",
            icon: "none"
          });
          teamMembers.value = [];
        } finally {
          loadingMembers.value = false;
        }
      }
      async function getTeamRoles2(teamId) {
        if (!teamId)
          return;
        refreshTeamRoles(teamId);
      }
      async function refreshTeamRoles(teamId) {
        if (!teamId)
          return;
        try {
          teamRoles.value = [];
          loadingRoles.value = true;
          const res = await teamRoleApi.getTeamRoles(teamId);
          if (res.code === 200 && res.data) {
            teamRoles.value = res.data.map((role) => {
              if (typeof role.progress === "undefined") {
                role.progress = role.requiredCount > 0 ? Math.min(100, Math.round(role.currentCount / role.requiredCount * 100)) : 0;
              }
              if (!Array.isArray(role.skillRequirements)) {
                role.skillRequirements = [];
              }
              return role;
            });
            formatAppLog("log", "at pages/myTeam/myTeam.vue:1148", "刷新获取到的团队角色列表:", teamRoles.value);
          } else {
            formatAppLog("warn", "at pages/myTeam/myTeam.vue:1150", "刷新未获取到团队角色或数据格式不正确:", res);
            uni.showToast({
              title: (res == null ? void 0 : res.message) || "刷新角色失败",
              icon: "none"
            });
            teamRoles.value = [];
          }
        } catch (error) {
          formatAppLog("error", "at pages/myTeam/myTeam.vue:1158", "刷新团队角色失败:", error);
          uni.showToast({
            title: "刷新团队角色失败",
            icon: "none"
          });
          teamRoles.value = [];
        } finally {
          loadingRoles.value = false;
        }
      }
      function openAddRoleForm() {
        roleFormMode.value = "add";
        roleForm.value = {
          teamId: managingTeam.value.id,
          name: "",
          requiredCount: 1,
          description: "",
          skillRequirements: []
        };
        skillInputValue.value = "";
        showRoleFormModal.value = true;
      }
      function openEditRoleForm(role) {
        roleFormMode.value = "edit";
        roleForm.value = {
          id: role.id,
          teamId: role.teamId,
          name: role.name,
          requiredCount: role.requiredCount,
          description: role.description,
          skillRequirements: [...role.skillRequirements]
        };
        skillInputValue.value = "";
        showRoleFormModal.value = true;
      }
      function closeRoleForm() {
        showRoleFormModal.value = false;
      }
      function addSkillTag() {
        if (!skillInputValue.value.trim())
          return;
        if (!roleForm.value.skillRequirements.includes(skillInputValue.value.trim())) {
          roleForm.value.skillRequirements.push(skillInputValue.value.trim());
        }
        skillInputValue.value = "";
      }
      function removeSkillTag(index) {
        roleForm.value.skillRequirements.splice(index, 1);
      }
      async function submitRoleForm() {
        if (!roleForm.value.name) {
          uni.showToast({
            title: "请输入角色名称",
            icon: "none"
          });
          return;
        }
        if (roleForm.value.requiredCount < 1) {
          uni.showToast({
            title: "需求人数必须大于0",
            icon: "none"
          });
          return;
        }
        uni.showLoading({
          title: roleFormMode.value === "add" ? "添加中..." : "更新中..."
        });
        try {
          let res;
          if (roleFormMode.value === "add") {
            res = await teamRoleApi.createTeamRole(roleForm.value);
          } else {
            res = await teamRoleApi.updateTeamRole(roleForm.value);
          }
          if (res.code === 200) {
            uni.showToast({
              title: roleFormMode.value === "add" ? "添加成功" : "更新成功",
              icon: "success"
            });
            closeRoleForm();
            await refreshTeamRoles(managingTeam.value.id);
            const index = myTeams.value.findIndex((team) => team.id === managingTeam.value.id);
            if (index !== -1) {
              setTimeout(() => {
                refreshTeams();
              }, 300);
            }
          } else {
            uni.showToast({
              title: res.message || (roleFormMode.value === "add" ? "添加失败" : "更新失败"),
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/myTeam/myTeam.vue:1282", roleFormMode.value === "add" ? "添加角色失败:" : "更新角色失败:", error);
          uni.showToast({
            title: "网络错误，请重试",
            icon: "none"
          });
        } finally {
          uni.hideLoading();
        }
      }
      function showDeleteRoleConfirm(role) {
        currentEditRole.value = role;
        showDeleteRoleModal.value = true;
      }
      function closeDeleteRoleModal() {
        showDeleteRoleModal.value = false;
      }
      async function confirmDeleteRole() {
        if (!currentEditRole.value || !currentEditRole.value.id) {
          uni.showToast({
            title: "参数错误",
            icon: "none"
          });
          return;
        }
        uni.showLoading({
          title: "删除中..."
        });
        try {
          const res = await teamRoleApi.deleteTeamRole(currentEditRole.value.id);
          if (res.code === 200) {
            uni.showToast({
              title: "删除成功",
              icon: "success"
            });
            closeDeleteRoleModal();
            await refreshTeamRoles(managingTeam.value.id);
            const index = myTeams.value.findIndex((team) => team.id === managingTeam.value.id);
            if (index !== -1) {
              setTimeout(() => {
                refreshTeams();
              }, 300);
            }
          } else {
            uni.showToast({
              title: res.message || "删除失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/myTeam/myTeam.vue:1347", "删除角色失败:", error);
          uni.showToast({
            title: "网络错误，请重试",
            icon: "none"
          });
        } finally {
          uni.hideLoading();
        }
      }
      function showRemoveMemberConfirm(member) {
        removeMember.value = member;
        showRemoveMemberModal.value = true;
      }
      function closeRemoveMemberModal() {
        showRemoveMemberModal.value = false;
      }
      function confirmRemoveMember() {
        if (!managingTeam.value.id || !removeMember.value.userId) {
          uni.showToast({
            title: "参数错误",
            icon: "none"
          });
          return;
        }
        uni.showLoading({
          title: "处理中..."
        });
        teamApi.removeTeamMember(managingTeam.value.id, removeMember.value.userId).then((res) => {
          if (res.code === 200) {
            getTeamMembers(managingTeam.value.id);
            uni.showToast({
              title: "已移除成员",
              icon: "success"
            });
          } else {
            uni.showToast({
              title: res.message || "移除失败",
              icon: "none"
            });
          }
        }).catch((err) => {
          formatAppLog("error", "at pages/myTeam/myTeam.vue:1401", "移除成员失败:", err);
          uni.showToast({
            title: "网络错误，请重试",
            icon: "none"
          });
        }).finally(() => {
          uni.hideLoading();
          closeRemoveMemberModal();
        });
      }
      vue.onMounted(() => {
        getMyTeams();
      });
      function initTeamInfoForm(team) {
        if (!team)
          return;
        loadingTeamInfo.value = true;
        teamApi.getTeamDetail(team.id).then((res) => {
          var _a, _b, _c;
          if (res.code === 200 && res.data) {
            const teamData = res.data;
            teamInfoForm.value = {
              id: teamData.id,
              name: teamData.name || "",
              description: teamData.description || "",
              direction: teamData.direction || "",
              recruitmentDeadline: teamData.recruitmentDeadline || "",
              contactInfo: {
                phone: ((_a = teamData.contactInfo) == null ? void 0 : _a.phone) || "",
                qq: ((_b = teamData.contactInfo) == null ? void 0 : _b.qq) || "",
                wechat: ((_c = teamData.contactInfo) == null ? void 0 : _c.wechat) || ""
              }
            };
            formatAppLog("log", "at pages/myTeam/myTeam.vue:1444", "初始化团队信息表单:", teamInfoForm.value);
          } else {
            teamInfoForm.value = {
              id: team.id,
              name: team.name || "",
              description: team.description || "",
              direction: team.direction || "",
              recruitmentDeadline: team.recruitmentDeadline || "",
              contactInfo: team.contactInfo || {
                phone: "",
                qq: "",
                wechat: ""
              }
            };
            uni.showToast({
              title: "获取团队详情失败",
              icon: "none"
            });
          }
        }).catch((error) => {
          formatAppLog("error", "at pages/myTeam/myTeam.vue:1467", "获取团队详情失败:", error);
          teamInfoForm.value = {
            id: team.id,
            name: team.name || "",
            description: team.description || "",
            direction: team.direction || "",
            recruitmentDeadline: team.recruitmentDeadline || "",
            contactInfo: team.contactInfo || {
              phone: "",
              qq: "",
              wechat: ""
            }
          };
          uni.showToast({
            title: "获取团队详情失败",
            icon: "none"
          });
        }).finally(() => {
          loadingTeamInfo.value = false;
        });
      }
      function handleDateChange(e) {
        const dateStr = e.detail.value;
        teamInfoForm.value.recruitmentDeadline = `${dateStr}T23:59:59`;
      }
      async function submitTeamInfo() {
        if (!teamInfoForm.value.name) {
          uni.showToast({
            title: "请输入团队名称",
            icon: "none"
          });
          return;
        }
        uni.showLoading({
          title: "保存中..."
        });
        try {
          const res = await teamApi.updateTeamInfo(teamInfoForm.value);
          if (res.code === 200) {
            uni.showToast({
              title: "保存成功",
              icon: "success"
            });
            refreshTeams();
            const index = myTeams.value.findIndex((team) => team.id === managingTeam.value.id);
            if (index !== -1) {
              myTeams.value[index].name = teamInfoForm.value.name;
              myTeams.value[index].description = teamInfoForm.value.description;
              myTeams.value[index].direction = teamInfoForm.value.direction;
              myTeams.value[index].recruitmentDeadline = teamInfoForm.value.recruitmentDeadline;
              myTeams.value[index].contactInfo = teamInfoForm.value.contactInfo;
              managingTeam.value = { ...myTeams.value[index] };
            }
          } else {
            uni.showToast({
              title: res.message || "保存失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/myTeam/myTeam.vue:1547", "更新团队信息失败:", error);
          uni.showToast({
            title: "网络错误，请重试",
            icon: "none"
          });
        } finally {
          uni.hideLoading();
        }
      }
      const __returned__ = { loading, refreshing, activeTab, searchKeyword, myTeams, showDismissModal, dismissTeam, showLeaveModal, leaveTeam, showManageModal, managingTeam, manageActiveTab, teamMembers, loadingMembers, showRemoveMemberModal, removeMember, teamRoles, loadingRoles, currentEditRole, showRoleFormModal, showDeleteRoleModal, roleFormMode, roleForm, skillInputValue, loadingTeamInfo, teamInfoForm, filteredTeams, getMyTeams, refreshTeams, setActiveTab, handleSearch, clearSearch, getTeamInitials, formatDate, getStatusClass, getStatusText, getCompetitionStatusClass, getEmptyStateText, navigateToTeamDetail, navigateToManageTeam, navigateToCreateTeam, showDismissConfirm, closeDismissModal, confirmDismissTeam, showLeaveConfirm, closeLeaveModal, confirmLeaveTeam, deleteTeamRecord, showManageTeamModal, closeManageModal, setManageTab, getTeamMembers, getTeamRoles: getTeamRoles2, refreshTeamRoles, openAddRoleForm, openEditRoleForm, closeRoleForm, addSkillTag, removeSkillTag, submitRoleForm, showDeleteRoleConfirm, closeDeleteRoleModal, confirmDeleteRole, showRemoveMemberConfirm, closeRemoveMemberModal, confirmRemoveMember, initTeamInfoForm, handleDateChange, submitTeamInfo, ref: vue.ref, computed: vue.computed, onMounted: vue.onMounted, SvgIcon, HeaderBar, get getToken() {
        return getToken;
      }, get teamApi() {
        return teamApi;
      }, get teamRoleApi() {
        return teamRoleApi;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1(_ctx, _cache, $props, $setup, $data, $options) {
    var _a;
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏 "),
      vue.createVNode($setup["HeaderBar"], {
        title: "我的团队",
        showSearch: false,
        showFilter: false
      }, {
        actions: vue.withCtx(() => [
          vue.createElementVNode("view", {
            class: "action-btn",
            onClick: $setup.navigateToCreateTeam
          }, [
            vue.createVNode($setup["SvgIcon"], {
              name: "plus",
              size: "24"
            })
          ])
        ]),
        _: 1
        /* STABLE */
      }),
      vue.createCommentVNode(" 内容区域 "),
      vue.createElementVNode("view", { class: "content-container" }, [
        vue.createCommentVNode(" 加载中显示 "),
        $setup.loading ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 0,
          class: "loading-container"
        }, [
          vue.createElementVNode("view", { class: "loading-circle" }),
          vue.createElementVNode("text", { class: "loading-text" }, "加载中...")
        ])) : (vue.openBlock(), vue.createElementBlock(
          vue.Fragment,
          { key: 1 },
          [
            vue.createCommentVNode(" 团队列表内容 "),
            vue.createElementVNode("scroll-view", {
              "scroll-y": "",
              class: "content-scroll",
              "refresher-enabled": "",
              "refresher-triggered": $setup.refreshing,
              onRefresherrefresh: $setup.refreshTeams
            }, [
              vue.createCommentVNode(" 状态标签 "),
              vue.createElementVNode("scroll-view", {
                "scroll-x": "",
                class: "status-tabs"
              }, [
                vue.createElementVNode("view", { class: "tabs-container" }, [
                  vue.createElementVNode(
                    "view",
                    {
                      class: vue.normalizeClass(["tab-item", { "active": $setup.activeTab === "all" }]),
                      onClick: _cache[0] || (_cache[0] = ($event) => $setup.setActiveTab("all"))
                    },
                    [
                      vue.createElementVNode("text", null, "全部")
                    ],
                    2
                    /* CLASS */
                  ),
                  vue.createElementVNode(
                    "view",
                    {
                      class: vue.normalizeClass(["tab-item", { "active": $setup.activeTab === "leader" }]),
                      onClick: _cache[1] || (_cache[1] = ($event) => $setup.setActiveTab("leader"))
                    },
                    [
                      vue.createElementVNode("text", null, "我创建的")
                    ],
                    2
                    /* CLASS */
                  ),
                  vue.createElementVNode(
                    "view",
                    {
                      class: vue.normalizeClass(["tab-item", { "active": $setup.activeTab === "member" }]),
                      onClick: _cache[2] || (_cache[2] = ($event) => $setup.setActiveTab("member"))
                    },
                    [
                      vue.createElementVNode("text", null, "我参与的")
                    ],
                    2
                    /* CLASS */
                  )
                ])
              ]),
              vue.createCommentVNode(" 搜索框 "),
              vue.createElementVNode("view", { class: "search-container" }, [
                vue.createElementVNode("view", { class: "search-box" }, [
                  vue.createVNode($setup["SvgIcon"], {
                    name: "search",
                    size: "16",
                    class: "search-icon"
                  }),
                  vue.withDirectives(vue.createElementVNode(
                    "input",
                    {
                      type: "text",
                      class: "search-input",
                      placeholder: "搜索团队名称",
                      "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => $setup.searchKeyword = $event),
                      onInput: $setup.handleSearch
                    },
                    null,
                    544
                    /* NEED_HYDRATION, NEED_PATCH */
                  ), [
                    [vue.vModelText, $setup.searchKeyword]
                  ]),
                  $setup.searchKeyword ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 0,
                    class: "clear-btn",
                    onClick: $setup.clearSearch
                  }, [
                    vue.createVNode($setup["SvgIcon"], {
                      name: "x",
                      size: "16"
                    })
                  ])) : vue.createCommentVNode("v-if", true)
                ])
              ]),
              vue.createCommentVNode(" 团队列表 "),
              $setup.filteredTeams && $setup.filteredTeams.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "team-list"
              }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.filteredTeams, (team, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "team-card",
                      key: index,
                      onClick: ($event) => $setup.navigateToTeamDetail(team.id)
                    }, [
                      vue.createElementVNode("view", { class: "team-header" }, [
                        vue.createElementVNode("view", { class: "team-title-row" }, [
                          vue.createElementVNode(
                            "text",
                            { class: "team-name" },
                            vue.toDisplayString(team.name),
                            1
                            /* TEXT */
                          ),
                          vue.createElementVNode(
                            "view",
                            {
                              class: vue.normalizeClass(["team-status", $setup.getStatusClass(team.status)])
                            },
                            [
                              vue.createElementVNode(
                                "text",
                                null,
                                vue.toDisplayString(team.statusText),
                                1
                                /* TEXT */
                              )
                            ],
                            2
                            /* CLASS */
                          )
                        ]),
                        vue.createElementVNode("view", { class: "team-info-row" }, [
                          vue.createElementVNode(
                            "view",
                            {
                              class: vue.normalizeClass(["team-role", { "leader": team.roleType === "leader" }])
                            },
                            [
                              vue.createElementVNode(
                                "text",
                                null,
                                vue.toDisplayString(team.roleType === "leader" ? "队长" : "队员"),
                                1
                                /* TEXT */
                              )
                            ],
                            2
                            /* CLASS */
                          ),
                          vue.createElementVNode("view", { class: "team-members" }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "users",
                              size: "14"
                            }),
                            vue.createElementVNode(
                              "text",
                              null,
                              vue.toDisplayString(team.memberCount) + "人",
                              1
                              /* TEXT */
                            )
                          ]),
                          vue.createElementVNode("view", { class: "team-created" }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "calendar",
                              size: "14"
                            }),
                            vue.createElementVNode(
                              "text",
                              null,
                              vue.toDisplayString($setup.formatDate(team.publishDate)) + "创建",
                              1
                              /* TEXT */
                            )
                          ])
                        ]),
                        team.roleName ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 0,
                          class: "my-role"
                        }, [
                          vue.createVNode($setup["SvgIcon"], {
                            name: "user-check",
                            size: "14"
                          }),
                          vue.createElementVNode(
                            "text",
                            null,
                            "我的角色: " + vue.toDisplayString(team.roleName),
                            1
                            /* TEXT */
                          )
                        ])) : vue.createCommentVNode("v-if", true)
                      ]),
                      vue.createElementVNode("view", { class: "team-body" }, [
                        team.description ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 0,
                          class: "team-description"
                        }, [
                          vue.createElementVNode(
                            "text",
                            null,
                            vue.toDisplayString(team.description),
                            1
                            /* TEXT */
                          )
                        ])) : vue.createCommentVNode("v-if", true),
                        team.competitionId ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 1,
                          class: "team-competitions"
                        }, [
                          vue.createElementVNode("view", { class: "competitions-label" }, [
                            vue.createElementVNode("text", null, "参与竞赛"),
                            vue.createElementVNode("text", { class: "competitions-count" }, "(1)")
                          ]),
                          vue.createElementVNode("view", { class: "competitions-list" }, [
                            vue.createElementVNode("view", { class: "competition-item" }, [
                              vue.createElementVNode("view", { class: "competition-status" }),
                              vue.createElementVNode(
                                "text",
                                { class: "competition-name" },
                                vue.toDisplayString(team.competitionName),
                                1
                                /* TEXT */
                              )
                            ])
                          ])
                        ])) : vue.createCommentVNode("v-if", true),
                        team.teamRoles && team.teamRoles.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 2,
                          class: "team-members-preview"
                        }, [
                          vue.createElementVNode("view", { class: "members-label" }, [
                            vue.createElementVNode("text", null, "招募岗位"),
                            vue.createElementVNode(
                              "text",
                              { class: "members-count" },
                              "(" + vue.toDisplayString(team.teamRoles.length) + ")",
                              1
                              /* TEXT */
                            )
                          ]),
                          vue.createElementVNode("view", { class: "members-roles" }, [
                            (vue.openBlock(true), vue.createElementBlock(
                              vue.Fragment,
                              null,
                              vue.renderList(team.teamRoles, (role, rIndex) => {
                                return vue.openBlock(), vue.createElementBlock("view", {
                                  class: "role-item",
                                  key: rIndex
                                }, [
                                  vue.createElementVNode("view", { class: "role-header" }, [
                                    vue.createElementVNode(
                                      "text",
                                      { class: "role-name" },
                                      vue.toDisplayString(role.name),
                                      1
                                      /* TEXT */
                                    ),
                                    vue.createElementVNode(
                                      "text",
                                      { class: "role-progress" },
                                      vue.toDisplayString(role.currentCount) + "/" + vue.toDisplayString(role.requiredCount),
                                      1
                                      /* TEXT */
                                    )
                                  ]),
                                  vue.createElementVNode("view", { class: "role-progress-bar" }, [
                                    vue.createElementVNode(
                                      "view",
                                      {
                                        class: "role-progress-fill",
                                        style: vue.normalizeStyle({ width: role.progress + "%" })
                                      },
                                      null,
                                      4
                                      /* STYLE */
                                    )
                                  ])
                                ]);
                              }),
                              128
                              /* KEYED_FRAGMENT */
                            ))
                          ])
                        ])) : vue.createCommentVNode("v-if", true),
                        vue.createElementVNode("view", { class: "team-actions" }, [
                          team.roleType === "leader" ? (vue.openBlock(), vue.createElementBlock("view", {
                            key: 0,
                            class: "action-btn primary",
                            onClick: vue.withModifiers(($event) => $setup.showManageTeamModal(team), ["stop"])
                          }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "settings",
                              size: "16"
                            }),
                            vue.createElementVNode("text", null, "管理团队")
                          ], 8, ["onClick"])) : team.status === "0" ? (vue.openBlock(), vue.createElementBlock("view", {
                            key: 1,
                            class: "action-btn primary",
                            onClick: vue.withModifiers(($event) => $setup.navigateToTeamDetail(team.id), ["stop"])
                          }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "info",
                              size: "16"
                            }),
                            vue.createElementVNode("text", null, "查看详情")
                          ], 8, ["onClick"])) : (vue.openBlock(), vue.createElementBlock("view", {
                            key: 2,
                            class: "action-btn primary",
                            onClick: vue.withModifiers(($event) => $setup.navigateToTeamDetail(team.id), ["stop"])
                          }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "message-square",
                              size: "16"
                            }),
                            vue.createElementVNode("text", null, "团队交流")
                          ], 8, ["onClick"])),
                          team.roleType === "leader" && team.status !== "2" ? (vue.openBlock(), vue.createElementBlock("view", {
                            key: 3,
                            class: "action-btn secondary",
                            onClick: vue.withModifiers(($event) => $setup.showDismissConfirm(team), ["stop"])
                          }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "trash-2",
                              size: "16"
                            }),
                            vue.createElementVNode("text", null, "解散团队")
                          ], 8, ["onClick"])) : team.roleType !== "leader" && team.status !== "2" ? (vue.openBlock(), vue.createElementBlock("view", {
                            key: 4,
                            class: "action-btn secondary",
                            onClick: vue.withModifiers(($event) => $setup.showLeaveConfirm(team), ["stop"])
                          }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "log-out",
                              size: "16"
                            }),
                            vue.createElementVNode("text", null, "退出团队")
                          ], 8, ["onClick"])) : (vue.openBlock(), vue.createElementBlock("view", {
                            key: 5,
                            class: "action-btn secondary",
                            onClick: vue.withModifiers(($event) => $setup.deleteTeamRecord(team.id), ["stop"])
                          }, [
                            vue.createVNode($setup["SvgIcon"], {
                              name: "trash",
                              size: "16"
                            }),
                            vue.createElementVNode("text", null, "删除记录")
                          ], 8, ["onClick"]))
                        ])
                      ])
                    ], 8, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])) : (vue.openBlock(), vue.createElementBlock(
                vue.Fragment,
                { key: 1 },
                [
                  vue.createCommentVNode(" 空状态 "),
                  vue.createElementVNode("view", { class: "empty-state" }, [
                    vue.createElementVNode("image", {
                      class: "empty-image",
                      src: _imports_0$1,
                      mode: "aspectFit"
                    }),
                    vue.createElementVNode(
                      "text",
                      { class: "empty-text" },
                      vue.toDisplayString($setup.getEmptyStateText()),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode("view", {
                      class: "action-btn primary",
                      onClick: $setup.navigateToCreateTeam
                    }, [
                      vue.createElementVNode("text", null, "创建新团队")
                    ])
                  ])
                ],
                2112
                /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
              )),
              vue.createCommentVNode(" 底部提示 "),
              $setup.filteredTeams && $setup.filteredTeams.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 2,
                class: "bottom-tip"
              }, [
                vue.createElementVNode("text", null, "没有更多团队了")
              ])) : vue.createCommentVNode("v-if", true)
            ], 40, ["refresher-triggered"])
          ],
          2112
          /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
        ))
      ]),
      vue.createCommentVNode(" 解散团队确认弹窗 "),
      $setup.showDismissModal ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 0,
        class: "confirm-modal",
        onClick: $setup.closeDismissModal
      }, [
        vue.createElementVNode("view", {
          class: "confirm-content",
          onClick: _cache[4] || (_cache[4] = vue.withModifiers(() => {
          }, ["stop"]))
        }, [
          vue.createElementVNode("view", { class: "confirm-header" }, [
            vue.createElementVNode("text", { class: "confirm-title" }, "解散团队")
          ]),
          vue.createElementVNode("view", { class: "confirm-body" }, [
            vue.createElementVNode(
              "text",
              { class: "confirm-message" },
              '确定要解散"' + vue.toDisplayString($setup.dismissTeam.name) + '"团队吗？解散后所有队员将被移出，且无法恢复。',
              1
              /* TEXT */
            )
          ]),
          vue.createElementVNode("view", { class: "confirm-actions" }, [
            vue.createElementVNode("view", {
              class: "confirm-btn cancel",
              onClick: $setup.closeDismissModal
            }, [
              vue.createElementVNode("text", null, "取消")
            ]),
            vue.createElementVNode("view", {
              class: "confirm-btn confirm",
              onClick: $setup.confirmDismissTeam
            }, [
              vue.createElementVNode("text", null, "确定解散")
            ])
          ])
        ])
      ])) : vue.createCommentVNode("v-if", true),
      vue.createCommentVNode(" 退出团队确认弹窗 "),
      $setup.showLeaveModal ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 1,
        class: "confirm-modal",
        onClick: $setup.closeLeaveModal
      }, [
        vue.createElementVNode("view", {
          class: "confirm-content",
          onClick: _cache[5] || (_cache[5] = vue.withModifiers(() => {
          }, ["stop"]))
        }, [
          vue.createElementVNode("view", { class: "confirm-header" }, [
            vue.createElementVNode("text", { class: "confirm-title" }, "退出团队")
          ]),
          vue.createElementVNode("view", { class: "confirm-body" }, [
            vue.createElementVNode(
              "text",
              { class: "confirm-message" },
              '确定要退出"' + vue.toDisplayString($setup.leaveTeam.name) + '"团队吗？退出后需要重新申请加入。',
              1
              /* TEXT */
            )
          ]),
          vue.createElementVNode("view", { class: "confirm-actions" }, [
            vue.createElementVNode("view", {
              class: "confirm-btn cancel",
              onClick: $setup.closeLeaveModal
            }, [
              vue.createElementVNode("text", null, "取消")
            ]),
            vue.createElementVNode("view", {
              class: "confirm-btn confirm",
              onClick: $setup.confirmLeaveTeam
            }, [
              vue.createElementVNode("text", null, "确定退出")
            ])
          ])
        ])
      ])) : vue.createCommentVNode("v-if", true),
      vue.createCommentVNode(" 创建团队浮动按钮 "),
      vue.createElementVNode("view", {
        class: "float-action-btn",
        onClick: $setup.navigateToCreateTeam
      }, [
        vue.createVNode($setup["SvgIcon"], {
          name: "chuangjiantubiao",
          size: "24",
          color: "#ffffff"
        })
      ]),
      vue.createCommentVNode(" 团队管理模态框 "),
      $setup.showManageModal ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 2,
        class: "manage-modal",
        onClick: $setup.closeManageModal
      }, [
        vue.createElementVNode("view", {
          class: "manage-content",
          onClick: _cache[15] || (_cache[15] = vue.withModifiers(() => {
          }, ["stop"]))
        }, [
          vue.createElementVNode("view", { class: "manage-header" }, [
            vue.createElementVNode("text", { class: "manage-title" }, "团队管理")
          ]),
          vue.createElementVNode("view", { class: "manage-body" }, [
            vue.createElementVNode("view", { class: "manage-tab-container" }, [
              vue.createElementVNode(
                "view",
                {
                  class: vue.normalizeClass(["manage-tab-item", { "active": $setup.manageActiveTab === "members" }]),
                  onClick: _cache[6] || (_cache[6] = ($event) => $setup.setManageTab("members"))
                },
                [
                  vue.createElementVNode("text", null, "成员管理")
                ],
                2
                /* CLASS */
              ),
              vue.createElementVNode(
                "view",
                {
                  class: vue.normalizeClass(["manage-tab-item", { "active": $setup.manageActiveTab === "roles" }]),
                  onClick: _cache[7] || (_cache[7] = ($event) => $setup.setManageTab("roles"))
                },
                [
                  vue.createElementVNode("text", null, "角色管理")
                ],
                2
                /* CLASS */
              ),
              vue.createElementVNode(
                "view",
                {
                  class: vue.normalizeClass(["manage-tab-item", { "active": $setup.manageActiveTab === "info" }]),
                  onClick: _cache[8] || (_cache[8] = ($event) => $setup.setManageTab("info"))
                },
                [
                  vue.createElementVNode("text", null, "团队信息")
                ],
                2
                /* CLASS */
              )
            ]),
            vue.createElementVNode("div", { class: "manage-content-container" }, [
              $setup.manageActiveTab === "members" ? (vue.openBlock(), vue.createElementBlock("div", {
                key: 0,
                class: "manage-content-item"
              }, [
                vue.createCommentVNode(" 加载中显示 "),
                $setup.loadingMembers ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "loading-container"
                }, [
                  vue.createElementVNode("view", { class: "loading-circle" }),
                  vue.createElementVNode("text", { class: "loading-text" }, "加载成员中...")
                ])) : $setup.teamMembers && $setup.teamMembers.length > 0 ? (vue.openBlock(), vue.createElementBlock(
                  vue.Fragment,
                  { key: 1 },
                  [
                    vue.createCommentVNode(" 成员列表 "),
                    vue.createElementVNode("view", { class: "members-list" }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList($setup.teamMembers, (member, index) => {
                          return vue.openBlock(), vue.createElementBlock("view", {
                            class: "member-item",
                            key: index
                          }, [
                            vue.createElementVNode("view", { class: "member-avatar-container" }, [
                              vue.createElementVNode("image", {
                                class: "member-avatar",
                                src: member.avatar
                              }, null, 8, ["src"]),
                              vue.createElementVNode(
                                "view",
                                {
                                  class: vue.normalizeClass(["member-status", `status-${member.status}`])
                                },
                                null,
                                2
                                /* CLASS */
                              )
                            ]),
                            vue.createElementVNode("view", { class: "member-info" }, [
                              vue.createElementVNode("view", { class: "member-name-row" }, [
                                vue.createElementVNode(
                                  "text",
                                  { class: "member-name" },
                                  vue.toDisplayString(member.userName),
                                  1
                                  /* TEXT */
                                ),
                                vue.createElementVNode(
                                  "view",
                                  { class: "member-role-badge" },
                                  vue.toDisplayString(member.role),
                                  1
                                  /* TEXT */
                                )
                              ]),
                              vue.createElementVNode("view", { class: "member-date" }, [
                                vue.createElementVNode("text", { class: "info-label" }, "专业:"),
                                vue.createElementVNode(
                                  "text",
                                  { class: "info-text" },
                                  vue.toDisplayString(member.userMajor || "未设置"),
                                  1
                                  /* TEXT */
                                )
                              ]),
                              vue.createElementVNode("view", { class: "member-date" }, [
                                vue.createElementVNode("text", { class: "info-label" }, "加入时间:"),
                                vue.createElementVNode(
                                  "text",
                                  { class: "info-text" },
                                  vue.toDisplayString(member.joinDate),
                                  1
                                  /* TEXT */
                                )
                              ])
                            ]),
                            vue.createElementVNode("view", { class: "member-actions" }, [
                              !member.isLeader ? (vue.openBlock(), vue.createElementBlock("view", {
                                key: 0,
                                class: "member-action-btn",
                                onClick: vue.withModifiers(($event) => $setup.showRemoveMemberConfirm(member), ["stop"])
                              }, [
                                vue.createVNode($setup["SvgIcon"], {
                                  name: "yichu",
                                  size: "16"
                                }),
                                vue.createElementVNode("text", null, "移除")
                              ], 8, ["onClick"])) : vue.createCommentVNode("v-if", true),
                              !member.isLeader ? (vue.openBlock(), vue.createElementBlock("view", {
                                key: 1,
                                class: "member-action-btn"
                              }, [
                                vue.createVNode($setup["SvgIcon"], {
                                  name: "bianji",
                                  size: "16"
                                }),
                                vue.createElementVNode("text", null, "编辑角色")
                              ])) : vue.createCommentVNode("v-if", true)
                            ])
                          ]);
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ])
                  ],
                  2112
                  /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
                )) : (vue.openBlock(), vue.createElementBlock(
                  vue.Fragment,
                  { key: 2 },
                  [
                    vue.createCommentVNode(" 空状态 "),
                    vue.createElementVNode("view", { class: "empty-state" }, [
                      vue.createElementVNode("text", { class: "empty-text" }, "该团队暂无成员")
                    ])
                  ],
                  2112
                  /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
                )),
                vue.createElementVNode("view", { class: "members-actions" }, [
                  vue.createElementVNode("view", { class: "action-btn primary" }, [
                    vue.createVNode($setup["SvgIcon"], {
                      name: "user-plus",
                      size: "16"
                    }),
                    vue.createElementVNode("text", null, "邀请成员")
                  ]),
                  vue.createElementVNode("view", { class: "action-btn secondary" }, [
                    vue.createVNode($setup["SvgIcon"], {
                      name: "mail",
                      size: "16"
                    }),
                    vue.createElementVNode("text", null, "查看申请")
                  ])
                ])
              ])) : vue.createCommentVNode("v-if", true),
              $setup.manageActiveTab === "roles" ? (vue.openBlock(), vue.createElementBlock("div", {
                key: 1,
                class: "manage-content-item"
              }, [
                vue.createCommentVNode(" 加载中显示 "),
                $setup.loadingRoles ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "loading-container"
                }, [
                  vue.createElementVNode("view", { class: "loading-circle" }),
                  vue.createElementVNode("text", { class: "loading-text" }, "加载角色中...")
                ])) : $setup.teamRoles && $setup.teamRoles.length > 0 ? (vue.openBlock(), vue.createElementBlock(
                  vue.Fragment,
                  { key: 1 },
                  [
                    vue.createCommentVNode(" 角色列表 "),
                    vue.createElementVNode("view", { class: "roles-list" }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList($setup.teamRoles, (role) => {
                          return vue.openBlock(), vue.createElementBlock("view", {
                            class: "role-item",
                            key: role.id
                          }, [
                            vue.createElementVNode("view", { class: "role-header" }, [
                              vue.createElementVNode("view", { class: "role-title-container" }, [
                                vue.createElementVNode(
                                  "text",
                                  { class: "role-title" },
                                  vue.toDisplayString(role.name),
                                  1
                                  /* TEXT */
                                ),
                                vue.createElementVNode(
                                  "text",
                                  { class: "role-count" },
                                  vue.toDisplayString(role.currentCount) + "/" + vue.toDisplayString(role.requiredCount),
                                  1
                                  /* TEXT */
                                )
                              ]),
                              vue.createElementVNode("view", { class: "role-actions" }, [
                                vue.createElementVNode("view", {
                                  class: "role-action-btn",
                                  onClick: ($event) => $setup.openEditRoleForm(role)
                                }, [
                                  vue.createVNode($setup["SvgIcon"], {
                                    name: "bianji",
                                    size: "16"
                                  })
                                ], 8, ["onClick"]),
                                vue.createElementVNode("view", {
                                  class: "role-action-btn",
                                  onClick: ($event) => $setup.showDeleteRoleConfirm(role)
                                }, [
                                  vue.createVNode($setup["SvgIcon"], {
                                    name: "yichu",
                                    size: "16"
                                  })
                                ], 8, ["onClick"])
                              ])
                            ]),
                            vue.createElementVNode("view", { class: "role-progress-container" }, [
                              vue.createElementVNode("view", { class: "role-progress-bar" }, [
                                vue.createElementVNode(
                                  "view",
                                  {
                                    class: "role-progress-fill",
                                    style: vue.normalizeStyle({ width: role.progress + "%" })
                                  },
                                  null,
                                  4
                                  /* STYLE */
                                )
                              ])
                            ]),
                            vue.createElementVNode("view", { class: "role-description" }, [
                              vue.createElementVNode(
                                "text",
                                null,
                                vue.toDisplayString(role.description),
                                1
                                /* TEXT */
                              )
                            ]),
                            role.skillRequirements && role.skillRequirements.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                              key: 0,
                              class: "role-skills"
                            }, [
                              vue.createElementVNode("text", { class: "skills-label" }, "技能要求:"),
                              vue.createElementVNode("view", { class: "skills-tags" }, [
                                (vue.openBlock(true), vue.createElementBlock(
                                  vue.Fragment,
                                  null,
                                  vue.renderList(role.skillRequirements, (skill, sIndex) => {
                                    return vue.openBlock(), vue.createElementBlock(
                                      "text",
                                      {
                                        class: "skill-tag",
                                        key: sIndex
                                      },
                                      vue.toDisplayString(skill),
                                      1
                                      /* TEXT */
                                    );
                                  }),
                                  128
                                  /* KEYED_FRAGMENT */
                                ))
                              ])
                            ])) : vue.createCommentVNode("v-if", true)
                          ]);
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ])
                  ],
                  2112
                  /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
                )) : (vue.openBlock(), vue.createElementBlock(
                  vue.Fragment,
                  { key: 2 },
                  [
                    vue.createCommentVNode(" 空状态 "),
                    vue.createElementVNode("view", { class: "empty-state" }, [
                      vue.createElementVNode("text", { class: "empty-text" }, "该团队暂无角色定义")
                    ])
                  ],
                  2112
                  /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
                )),
                vue.createElementVNode("view", { class: "roles-actions" }, [
                  vue.createElementVNode("view", {
                    class: "action-btn primary",
                    onClick: $setup.openAddRoleForm
                  }, [
                    vue.createVNode($setup["SvgIcon"], {
                      name: "plus",
                      size: "16"
                    }),
                    vue.createElementVNode("text", null, "添加角色")
                  ])
                ])
              ])) : vue.createCommentVNode("v-if", true),
              $setup.manageActiveTab === "info" ? (vue.openBlock(), vue.createElementBlock("div", {
                key: 2,
                class: "manage-content-item"
              }, [
                vue.createCommentVNode(" 加载中显示 "),
                $setup.loadingTeamInfo ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "loading-container"
                }, [
                  vue.createElementVNode("view", { class: "loading-circle" }),
                  vue.createElementVNode("text", { class: "loading-text" }, "加载团队信息中...")
                ])) : (vue.openBlock(), vue.createElementBlock(
                  vue.Fragment,
                  { key: 1 },
                  [
                    vue.createCommentVNode(" 团队信息表单 "),
                    vue.createElementVNode("view", { class: "team-info-form" }, [
                      vue.createElementVNode("view", { class: "form-group" }, [
                        vue.createElementVNode("text", { class: "form-label" }, [
                          vue.createTextVNode("团队名称 "),
                          vue.createElementVNode("text", { class: "required" }, "*")
                        ]),
                        vue.withDirectives(vue.createElementVNode(
                          "input",
                          {
                            type: "text",
                            class: "form-input",
                            "onUpdate:modelValue": _cache[9] || (_cache[9] = ($event) => $setup.teamInfoForm.name = $event),
                            placeholder: "请输入团队名称"
                          },
                          null,
                          512
                          /* NEED_PATCH */
                        ), [
                          [vue.vModelText, $setup.teamInfoForm.name]
                        ])
                      ]),
                      vue.createElementVNode("view", { class: "form-group" }, [
                        vue.createElementVNode("text", { class: "form-label" }, "团队简介"),
                        vue.withDirectives(vue.createElementVNode(
                          "textarea",
                          {
                            class: "form-textarea",
                            "onUpdate:modelValue": _cache[10] || (_cache[10] = ($event) => $setup.teamInfoForm.description = $event),
                            placeholder: "请输入团队简介"
                          },
                          null,
                          512
                          /* NEED_PATCH */
                        ), [
                          [vue.vModelText, $setup.teamInfoForm.description]
                        ])
                      ]),
                      vue.createElementVNode("view", { class: "form-group" }, [
                        vue.createElementVNode("text", { class: "form-label" }, "研究方向"),
                        vue.withDirectives(vue.createElementVNode(
                          "input",
                          {
                            type: "text",
                            class: "form-input",
                            "onUpdate:modelValue": _cache[11] || (_cache[11] = ($event) => $setup.teamInfoForm.direction = $event),
                            placeholder: "请输入研究方向"
                          },
                          null,
                          512
                          /* NEED_PATCH */
                        ), [
                          [vue.vModelText, $setup.teamInfoForm.direction]
                        ])
                      ]),
                      vue.createElementVNode("view", { class: "form-group" }, [
                        vue.createElementVNode("text", { class: "form-label" }, "招募截止日期"),
                        vue.createElementVNode("picker", {
                          mode: "date",
                          value: $setup.teamInfoForm.recruitmentDeadline ? $setup.teamInfoForm.recruitmentDeadline.split("T")[0] : "",
                          start: "2024-01-01",
                          end: "2030-12-31",
                          onChange: $setup.handleDateChange
                        }, [
                          vue.createElementVNode(
                            "view",
                            { class: "uni-input form-input" },
                            vue.toDisplayString($setup.teamInfoForm.recruitmentDeadline ? $setup.teamInfoForm.recruitmentDeadline.split("T")[0] : "请选择招募截止日期"),
                            1
                            /* TEXT */
                          )
                        ], 40, ["value"])
                      ]),
                      vue.createElementVNode("view", { class: "form-group" }, [
                        vue.createElementVNode("text", { class: "form-label" }, "联系信息"),
                        vue.createElementVNode("view", { class: "contact-container" }, [
                          vue.createElementVNode("view", { class: "contact-item" }, [
                            vue.createElementVNode("text", { class: "contact-label" }, "电话"),
                            vue.withDirectives(vue.createElementVNode(
                              "input",
                              {
                                type: "text",
                                class: "form-input",
                                "onUpdate:modelValue": _cache[12] || (_cache[12] = ($event) => $setup.teamInfoForm.contactInfo.phone = $event),
                                placeholder: "请输入联系电话"
                              },
                              null,
                              512
                              /* NEED_PATCH */
                            ), [
                              [vue.vModelText, $setup.teamInfoForm.contactInfo.phone]
                            ])
                          ]),
                          vue.createElementVNode("view", { class: "contact-item" }, [
                            vue.createElementVNode("text", { class: "contact-label" }, "QQ"),
                            vue.withDirectives(vue.createElementVNode(
                              "input",
                              {
                                type: "text",
                                class: "form-input",
                                "onUpdate:modelValue": _cache[13] || (_cache[13] = ($event) => $setup.teamInfoForm.contactInfo.qq = $event),
                                placeholder: "请输入QQ号码"
                              },
                              null,
                              512
                              /* NEED_PATCH */
                            ), [
                              [vue.vModelText, $setup.teamInfoForm.contactInfo.qq]
                            ])
                          ]),
                          vue.createElementVNode("view", { class: "contact-item" }, [
                            vue.createElementVNode("text", { class: "contact-label" }, "微信"),
                            vue.withDirectives(vue.createElementVNode(
                              "input",
                              {
                                type: "text",
                                class: "form-input",
                                "onUpdate:modelValue": _cache[14] || (_cache[14] = ($event) => $setup.teamInfoForm.contactInfo.wechat = $event),
                                placeholder: "请输入微信号"
                              },
                              null,
                              512
                              /* NEED_PATCH */
                            ), [
                              [vue.vModelText, $setup.teamInfoForm.contactInfo.wechat]
                            ])
                          ])
                        ])
                      ])
                    ])
                  ],
                  2112
                  /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
                )),
                vue.createElementVNode("view", { class: "team-info-actions" }, [
                  vue.createElementVNode("view", {
                    class: "action-btn primary",
                    onClick: $setup.submitTeamInfo
                  }, [
                    vue.createVNode($setup["SvgIcon"], {
                      name: "save",
                      size: "16"
                    }),
                    vue.createElementVNode("text", null, "保存更改")
                  ])
                ])
              ])) : vue.createCommentVNode("v-if", true)
            ])
          ])
        ])
      ])) : vue.createCommentVNode("v-if", true),
      vue.createCommentVNode(" 移除成员确认弹窗 "),
      $setup.showRemoveMemberModal ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 3,
        class: "confirm-modal",
        onClick: $setup.closeRemoveMemberModal
      }, [
        vue.createElementVNode("view", {
          class: "confirm-content",
          onClick: _cache[16] || (_cache[16] = vue.withModifiers(() => {
          }, ["stop"]))
        }, [
          vue.createElementVNode("view", { class: "confirm-header" }, [
            vue.createElementVNode("text", { class: "confirm-title" }, "移除成员")
          ]),
          vue.createElementVNode("view", { class: "confirm-body" }, [
            vue.createElementVNode(
              "text",
              { class: "confirm-message" },
              '确定要将"' + vue.toDisplayString($setup.removeMember.userName) + '"从团队中移除吗？移除后需要重新申请加入。',
              1
              /* TEXT */
            )
          ]),
          vue.createElementVNode("view", { class: "confirm-actions" }, [
            vue.createElementVNode("view", {
              class: "confirm-btn cancel",
              onClick: $setup.closeRemoveMemberModal
            }, [
              vue.createElementVNode("text", null, "取消")
            ]),
            vue.createElementVNode("view", {
              class: "confirm-btn confirm",
              onClick: $setup.confirmRemoveMember
            }, [
              vue.createElementVNode("text", null, "确定移除")
            ])
          ])
        ])
      ])) : vue.createCommentVNode("v-if", true),
      vue.createCommentVNode(" 角色表单模态框 "),
      $setup.showRoleFormModal ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 4,
        class: "confirm-modal",
        onClick: $setup.closeRoleForm
      }, [
        vue.createElementVNode("view", {
          class: "role-form-content",
          onClick: _cache[21] || (_cache[21] = vue.withModifiers(() => {
          }, ["stop"]))
        }, [
          vue.createElementVNode("view", { class: "role-form-header" }, [
            vue.createElementVNode(
              "text",
              { class: "role-form-title" },
              vue.toDisplayString($setup.roleFormMode === "add" ? "添加角色" : "编辑角色"),
              1
              /* TEXT */
            )
          ]),
          vue.createElementVNode("view", { class: "role-form-body" }, [
            vue.createElementVNode("view", { class: "form-group" }, [
              vue.createElementVNode("text", { class: "form-label" }, [
                vue.createTextVNode("角色名称 "),
                vue.createElementVNode("text", { class: "required" }, "*")
              ]),
              vue.withDirectives(vue.createElementVNode(
                "input",
                {
                  type: "text",
                  class: "form-input",
                  "onUpdate:modelValue": _cache[17] || (_cache[17] = ($event) => $setup.roleForm.name = $event),
                  placeholder: "如：前端开发"
                },
                null,
                512
                /* NEED_PATCH */
              ), [
                [vue.vModelText, $setup.roleForm.name]
              ])
            ]),
            vue.createElementVNode("view", { class: "form-group" }, [
              vue.createElementVNode("text", { class: "form-label" }, [
                vue.createTextVNode("需求人数 "),
                vue.createElementVNode("text", { class: "required" }, "*")
              ]),
              vue.withDirectives(vue.createElementVNode(
                "input",
                {
                  type: "number",
                  class: "form-input",
                  "onUpdate:modelValue": _cache[18] || (_cache[18] = ($event) => $setup.roleForm.requiredCount = $event),
                  placeholder: "请输入需求人数"
                },
                null,
                512
                /* NEED_PATCH */
              ), [
                [vue.vModelText, $setup.roleForm.requiredCount]
              ])
            ]),
            vue.createElementVNode("view", { class: "form-group" }, [
              vue.createElementVNode("text", { class: "form-label" }, "角色描述"),
              vue.withDirectives(vue.createElementVNode(
                "textarea",
                {
                  class: "form-textarea",
                  "onUpdate:modelValue": _cache[19] || (_cache[19] = ($event) => $setup.roleForm.description = $event),
                  placeholder: "请输入角色职责描述"
                },
                null,
                512
                /* NEED_PATCH */
              ), [
                [vue.vModelText, $setup.roleForm.description]
              ])
            ]),
            vue.createElementVNode("view", { class: "form-group" }, [
              vue.createElementVNode("text", { class: "form-label" }, "技能要求"),
              vue.createElementVNode("view", { class: "skill-input-wrapper" }, [
                vue.withDirectives(vue.createElementVNode(
                  "input",
                  {
                    type: "text",
                    class: "skill-input",
                    "onUpdate:modelValue": _cache[20] || (_cache[20] = ($event) => $setup.skillInputValue = $event),
                    placeholder: "输入技能后点击添加",
                    onConfirm: $setup.addSkillTag
                  },
                  null,
                  544
                  /* NEED_HYDRATION, NEED_PATCH */
                ), [
                  [vue.vModelText, $setup.skillInputValue]
                ]),
                vue.createElementVNode("view", {
                  class: "skill-add-btn",
                  onClick: $setup.addSkillTag
                }, [
                  vue.createElementVNode("text", null, "添加")
                ])
              ]),
              $setup.roleForm.skillRequirements.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "skill-tags"
              }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.roleForm.skillRequirements, (skill, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "skill-tag-item",
                      key: index
                    }, [
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString(skill),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("view", {
                        class: "tag-remove",
                        onClick: ($event) => $setup.removeSkillTag(index)
                      }, "×", 8, ["onClick"])
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])) : vue.createCommentVNode("v-if", true)
            ])
          ]),
          vue.createElementVNode("view", { class: "role-form-actions" }, [
            vue.createElementVNode("view", {
              class: "form-btn cancel",
              onClick: $setup.closeRoleForm
            }, [
              vue.createElementVNode("text", null, "取消")
            ]),
            vue.createElementVNode("view", {
              class: "form-btn confirm",
              onClick: $setup.submitRoleForm
            }, [
              vue.createElementVNode(
                "text",
                null,
                vue.toDisplayString($setup.roleFormMode === "add" ? "添加" : "保存"),
                1
                /* TEXT */
              )
            ])
          ])
        ])
      ])) : vue.createCommentVNode("v-if", true),
      vue.createCommentVNode(" 删除角色确认弹窗 "),
      $setup.showDeleteRoleModal ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 5,
        class: "confirm-modal",
        onClick: $setup.closeDeleteRoleModal
      }, [
        vue.createElementVNode("view", {
          class: "confirm-content",
          onClick: _cache[22] || (_cache[22] = vue.withModifiers(() => {
          }, ["stop"]))
        }, [
          vue.createElementVNode("view", { class: "confirm-header" }, [
            vue.createElementVNode("text", { class: "confirm-title" }, "删除角色")
          ]),
          vue.createElementVNode("view", { class: "confirm-body" }, [
            vue.createElementVNode(
              "text",
              { class: "confirm-message" },
              '确定要删除"' + vue.toDisplayString((_a = $setup.currentEditRole) == null ? void 0 : _a.name) + '"角色吗？如果该角色下已有成员，将无法删除。',
              1
              /* TEXT */
            )
          ]),
          vue.createElementVNode("view", { class: "confirm-actions" }, [
            vue.createElementVNode("view", {
              class: "confirm-btn cancel",
              onClick: $setup.closeDeleteRoleModal
            }, [
              vue.createElementVNode("text", null, "取消")
            ]),
            vue.createElementVNode("view", {
              class: "confirm-btn confirm",
              onClick: $setup.confirmDeleteRole
            }, [
              vue.createElementVNode("text", null, "确定删除")
            ])
          ])
        ])
      ])) : vue.createCommentVNode("v-if", true)
    ]);
  }
  const PagesMyTeamMyTeam = /* @__PURE__ */ _export_sfc(_sfc_main$2, [["render", _sfc_render$1], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/myTeam/myTeam.vue"]]);
  const _imports_0 = "/static/image/empty-data.png";
  const pageSize = 10;
  const _sfc_main$1 = {
    __name: "index",
    setup(__props, { expose: __expose }) {
      __expose();
      const tabs = ["我创建的", "我参与的"];
      const activeTab = vue.ref(0);
      const statusOptions = vue.computed(() => {
        if (activeTab.value === 0) {
          return [
            { label: "全部", value: "all" },
            { label: "招募中", value: "recruiting" },
            { label: "进行中", value: "ongoing" },
            { label: "已结束", value: "ended" },
            { label: "已完成", value: "completed" },
            { label: "已取消", value: "canceled" }
          ];
        } else {
          return [
            { label: "全部", value: "all" },
            { label: "招募中", value: "recruiting" },
            { label: "进行中", value: "ongoing" },
            { label: "已结束", value: "ended" },
            { label: "已完成", value: "completed" },
            { label: "已退出", value: "left" },
            { label: "被踢出", value: "kicked_out" }
          ];
        }
      });
      const selectedStatus = vue.ref("all");
      const createdPage = vue.ref(1);
      const participatedPage = vue.ref(1);
      const hasMore = vue.ref(true);
      const loading = vue.ref(false);
      const refreshing = vue.ref(false);
      const createdTasks = vue.ref([]);
      const participatedTasks = vue.ref([]);
      const participantsPopupVisible = vue.ref(false);
      const currentTaskId = vue.ref(null);
      const participantsPopupRef = vue.ref(null);
      const statusPopupRef = vue.ref(null);
      const selectedParticipationStatus = vue.ref("");
      const statusReason = vue.ref("");
      const currentParticipationId = vue.ref(null);
      const currentTaskIndex = vue.ref(-1);
      const participationStatusOptions = vue.computed(() => {
        formatAppLog("log", "at pages/mytasks/index.vue:418", "计算可选状态选项，当前状态:", selectedParticipationStatus.value);
        return [
          { label: "进行中", value: "in_progress" },
          { label: "已完成", value: "completed" },
          { label: "已离开", value: "left" }
        ];
      });
      const taskStatusPopupRef = vue.ref(null);
      const currentTaskStatus = vue.ref("");
      const selectedTaskStatus = vue.ref("");
      const cancelReason = vue.ref("");
      vue.onMounted(() => {
        loadTasks();
        uni.$on("refreshTaskList", refreshTaskList);
      });
      vue.onUnmounted(() => {
        uni.$off("refreshTaskList", refreshTaskList);
      });
      function refreshTaskList() {
        formatAppLog("log", "at pages/mytasks/index.vue:449", "收到刷新任务列表事件");
        resetList();
        loadTasks();
      }
      function switchTab(index) {
        activeTab.value = index;
        selectedStatus.value = "all";
        resetList();
        loadTasks();
      }
      function filterByStatus(status) {
        selectedStatus.value = status;
        resetList();
        loadTasks();
      }
      function resetList() {
        if (activeTab.value === 0) {
          createdTasks.value = [];
          createdPage.value = 1;
        } else {
          participatedTasks.value = [];
          participatedPage.value = 1;
        }
        hasMore.value = true;
      }
      async function loadTasks() {
        if (!hasMore.value || loading.value)
          return;
        loading.value = true;
        try {
          const params = {
            pageNum: activeTab.value === 0 ? createdPage.value : participatedPage.value,
            pageSize
          };
          if (selectedStatus.value && selectedStatus.value !== "all") {
            params.status = selectedStatus.value;
          }
          formatAppLog("log", "at pages/mytasks/index.vue:500", `请求${activeTab.value === 0 ? "我创建的" : "我参与的"}任务列表，参数:`, params);
          let res;
          if (activeTab.value === 0) {
            res = await tasksApi.getMyCreatedTasks(params);
          } else {
            res = await tasksApi.getMyParticipatedTasks(params);
          }
          formatAppLog("log", "at pages/mytasks/index.vue:511", `${activeTab.value === 0 ? "我创建的" : "我参与的"}任务列表响应:`, res);
          if (res.code === 200 && res.data) {
            const { records, total, current, pages } = res.data;
            formatAppLog("log", "at pages/mytasks/index.vue:517", `获取到${records.length}条记录，总计${total}条`);
            if (activeTab.value === 0) {
              createdTasks.value = [...createdTasks.value, ...records];
              createdPage.value++;
            } else {
              participatedTasks.value = [...participatedTasks.value, ...records];
              participatedPage.value++;
            }
            hasMore.value = current < pages;
          } else {
            formatAppLog("error", "at pages/mytasks/index.vue:531", "加载任务失败:", res);
            uni.showToast({
              title: res.message || "加载任务失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/mytasks/index.vue:538", "加载任务出错:", error);
          uni.showToast({
            title: "加载任务出错",
            icon: "none"
          });
        } finally {
          loading.value = false;
        }
      }
      function onRefresh() {
        refreshing.value = true;
        resetList();
        loadTasks().finally(() => {
          refreshing.value = false;
        });
      }
      function loadMore() {
        loadTasks();
      }
      function getStatusClass(status) {
        const statusMap = {
          "recruiting": "status-recruiting",
          "ongoing": "status-ongoing",
          "ended": "status-ended",
          "completed": "status-completed",
          "canceled": "status-canceled"
        };
        return statusMap[status] || "status-default";
      }
      function formatDate(dateString) {
        if (!dateString)
          return "";
        const date = new Date(dateString);
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, "0");
        const day = String(date.getDate()).padStart(2, "0");
        const hours = String(date.getHours()).padStart(2, "0");
        const minutes = String(date.getMinutes()).padStart(2, "0");
        return `${year}-${month}-${day} ${hours}:${minutes}`;
      }
      function navigateToDetail(task, index) {
        if (activeTab.value === 0) {
          uni.navigateTo({
            url: `/pages/task-square/detail?id=${task.id}`
          });
        } else {
          uni.navigateTo({
            url: `/pages/task-square/detail?id=${task.id}`
          });
        }
      }
      function navigateToCreate() {
        uni.navigateTo({
          url: "/pages/task-square/create"
        });
      }
      function navigateToTaskSquare() {
        uni.switchTab({
          url: "/pages/task-square/index"
        });
      }
      function viewParticipants(taskId) {
        const e = event || window.event;
        if (e) {
          e.stopPropagation();
        }
        formatAppLog("log", "at pages/mytasks/index.vue:624", "查看参与者按钮被点击，任务ID:", taskId);
        currentTaskId.value = taskId;
        formatAppLog("log", "at pages/mytasks/index.vue:628", "currentTaskId已更新为:", currentTaskId.value);
        if (participantsPopupRef.value) {
          formatAppLog("log", "at pages/mytasks/index.vue:632", "找到参与者弹窗组件引用，直接调用方法");
          vue.nextTick(() => {
            participantsPopupRef.value.open();
          });
        } else {
          formatAppLog("log", "at pages/mytasks/index.vue:638", "未找到组件引用，使用事件总线");
          uni.$emit("openParticipantsPopup");
        }
      }
      function getRewardUnit(typeId) {
        const unitMap = {
          1: "元",
          // 现金
          2: "分",
          // 学分
          3: "小时",
          // 志愿服务
          4: "天",
          // 实习机会
          5: "件",
          // 礼品
          6: "张"
          // 证书
        };
        return unitMap[typeId] || "";
      }
      function getRewardText(task) {
        if (!task.rewardTypeId || !task.rewardAmount)
          return "无奖励";
        return `${task.rewardTypeName}: ${task.rewardAmount}${getRewardUnit(task.rewardTypeId)}`;
      }
      function getParticipationStatusClass(status) {
        const statusMap = {
          "joined": "status-joined",
          "in_progress": "status-progress",
          "completed": "status-completed",
          "left": "status-left",
          "kicked_out": "status-kicked"
        };
        return statusMap[status] || "status-default";
      }
      function getParticipationStatusText(status) {
        const statusMap = {
          "joined": "已加入",
          "in_progress": "进行中",
          "completed": "已完成",
          "left": "已退出",
          "kicked_out": "被踢出"
        };
        return statusMap[status] || "未知状态";
      }
      function openStatusUpdatePopup(task, index) {
        if (task.participationStatus === "completed" || task.participationStatus === "left") {
          uni.showToast({
            title: "已" + getParticipationStatusText(task.participationStatus) + "的任务不能再更新状态",
            icon: "none",
            duration: 2e3
          });
          return;
        }
        currentParticipationId.value = task.participationId;
        statusReason.value = "";
        currentTaskIndex.value = index;
        currentTaskId.value = task.id;
        formatAppLog("log", "at pages/mytasks/index.vue:708", "设置初始状态为:", task.participationStatus);
        selectedParticipationStatus.value = task.participationStatus;
        formatAppLog("log", "at pages/mytasks/index.vue:712", "准备打开状态更新弹窗");
        if (statusPopupRef.value) {
          statusPopupRef.value.open("center");
          formatAppLog("log", "at pages/mytasks/index.vue:715", "弹窗已打开");
        } else {
          uni.showToast({
            title: "打开弹窗失败",
            icon: "none"
          });
        }
      }
      function closeStatusPopup() {
        if (statusPopupRef.value) {
          statusPopupRef.value.close();
        }
      }
      async function confirmUpdateStatus() {
        if (!currentParticipationId.value) {
          uni.showToast({
            title: "参与记录ID不存在",
            icon: "none"
          });
          return;
        }
        if (!currentTaskId.value) {
          uni.showToast({
            title: "任务ID不存在",
            icon: "none"
          });
          return;
        }
        try {
          uni.showLoading({ title: "更新中..." });
          const data = {
            status: selectedParticipationStatus.value
          };
          if (statusReason.value.trim()) {
            data.reason = statusReason.value.trim();
          }
          formatAppLog("log", "at pages/mytasks/index.vue:760", "发送状态更新请求:", {
            participationId: currentParticipationId.value,
            taskId: currentTaskId.value,
            data
          });
          const res = await tasksApi.updateParticipationStatus(
            currentParticipationId.value,
            data,
            currentTaskId.value
          );
          if (res.code === 200) {
            if (currentTaskIndex.value >= 0 && participatedTasks.value[currentTaskIndex.value]) {
              participatedTasks.value[currentTaskIndex.value].participationStatus = selectedParticipationStatus.value;
              formatAppLog("log", "at pages/mytasks/index.vue:777", "更新后的状态:", participatedTasks.value[currentTaskIndex.value].participationStatus);
              participatedTasks.value = [...participatedTasks.value];
            }
            uni.showToast({
              title: "状态更新成功",
              icon: "success"
            });
            closeStatusPopup();
            setTimeout(() => {
              resetList();
              loadTasks();
            }, 500);
          } else {
            uni.showToast({
              title: res.message || "状态更新失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/mytasks/index.vue:802", "更新参与状态失败:", error);
          uni.showToast({
            title: "状态更新失败，请稍后重试",
            icon: "none"
          });
        } finally {
          uni.hideLoading();
        }
      }
      function selectParticipationStatus(status) {
        formatAppLog("log", "at pages/mytasks/index.vue:814", "======= 选择状态操作 =======");
        formatAppLog("log", "at pages/mytasks/index.vue:815", "选择了状态:", status);
        formatAppLog("log", "at pages/mytasks/index.vue:816", "之前的状态:", selectedParticipationStatus.value);
        if (selectedParticipationStatus.value !== status) {
          selectedParticipationStatus.value = status;
          formatAppLog("log", "at pages/mytasks/index.vue:821", "状态已更新为:", status);
          uni.showToast({
            title: "已选择: " + getParticipationStatusText(status),
            icon: "none",
            duration: 1e3
          });
        } else {
          formatAppLog("log", "at pages/mytasks/index.vue:830", "状态未变化，保持:", status);
        }
      }
      function openTaskStatusPopup(task, index) {
        currentTaskId.value = task.id;
        currentTaskIndex.value = index;
        currentTaskStatus.value = task.status;
        selectedTaskStatus.value = "";
        cancelReason.value = "";
        formatAppLog("log", "at pages/mytasks/index.vue:842", "打开任务状态弹窗，任务ID:", task.id, "当前状态:", task.status);
        vue.nextTick(() => {
          if (taskStatusPopupRef.value) {
            taskStatusPopupRef.value.open("center");
          } else {
            uni.showToast({
              title: "打开弹窗失败",
              icon: "none"
            });
          }
        });
      }
      function closeTaskStatusPopup() {
        if (taskStatusPopupRef.value) {
          taskStatusPopupRef.value.close();
        }
      }
      function selectTaskStatus(status) {
        formatAppLog("log", "at pages/mytasks/index.vue:866", "选择任务状态:", status, "之前的状态:", selectedTaskStatus.value);
        selectedTaskStatus.value = status;
        uni.showToast({
          title: "已选择: " + getTaskStatusText(status),
          icon: "none",
          duration: 1e3
        });
        function getTaskStatusText(status2) {
          const statusMap = {
            "recruiting": "招募中",
            "ongoing": "进行中",
            "ended": "已结束",
            "completed": "已完成",
            "canceled": "已取消"
          };
          return statusMap[status2] || status2;
        }
      }
      async function confirmUpdateTaskStatus() {
        if (!selectedTaskStatus.value) {
          uni.showToast({
            title: "请选择要更新的状态",
            icon: "none"
          });
          return;
        }
        if (selectedTaskStatus.value === "canceled" && !cancelReason.value.trim()) {
          uni.showToast({
            title: "请填写取消原因",
            icon: "none"
          });
          return;
        }
        try {
          uni.showLoading({ title: "更新中..." });
          const data = {
            status: selectedTaskStatus.value
          };
          if (selectedTaskStatus.value === "canceled") {
            data.cancelReason = cancelReason.value.trim();
          }
          formatAppLog("log", "at pages/mytasks/index.vue:922", "发送任务状态更新请求:", {
            taskId: currentTaskId.value,
            data
          });
          const res = await tasksApi.updateTaskStatus(currentTaskId.value, data);
          if (res.code === 200) {
            if (currentTaskIndex.value >= 0 && createdTasks.value[currentTaskIndex.value]) {
              createdTasks.value[currentTaskIndex.value].status = selectedTaskStatus.value;
              const statusTextMap = {
                "recruiting": "招募中",
                "ongoing": "进行中",
                "ended": "已结束",
                "completed": "已完成",
                "canceled": "已取消"
              };
              createdTasks.value[currentTaskIndex.value].statusText = statusTextMap[selectedTaskStatus.value] || "未知状态";
              createdTasks.value = [...createdTasks.value];
            }
            uni.showToast({
              title: "状态更新成功",
              icon: "success"
            });
            closeTaskStatusPopup();
            setTimeout(() => {
              if (activeTab.value === 0) {
                resetList();
                loadTasks();
              }
            }, 500);
          } else {
            uni.showToast({
              title: res.message || "状态更新失败",
              icon: "none"
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/mytasks/index.vue:970", "更新任务状态失败:", error);
          uni.showToast({
            title: "状态更新失败，请稍后重试",
            icon: "none"
          });
        } finally {
          uni.hideLoading();
        }
      }
      const __returned__ = { tabs, activeTab, statusOptions, selectedStatus, pageSize, createdPage, participatedPage, hasMore, loading, refreshing, createdTasks, participatedTasks, participantsPopupVisible, currentTaskId, participantsPopupRef, statusPopupRef, selectedParticipationStatus, statusReason, currentParticipationId, currentTaskIndex, participationStatusOptions, taskStatusPopupRef, currentTaskStatus, selectedTaskStatus, cancelReason, refreshTaskList, switchTab, filterByStatus, resetList, loadTasks, onRefresh, loadMore, getStatusClass, formatDate, navigateToDetail, navigateToCreate, navigateToTaskSquare, viewParticipants, getRewardUnit, getRewardText, getParticipationStatusClass, getParticipationStatusText, openStatusUpdatePopup, closeStatusPopup, confirmUpdateStatus, selectParticipationStatus, openTaskStatusPopup, closeTaskStatusPopup, selectTaskStatus, confirmUpdateTaskStatus, ref: vue.ref, reactive: vue.reactive, onMounted: vue.onMounted, computed: vue.computed, nextTick: vue.nextTick, onUnmounted: vue.onUnmounted, get tasksApi() {
        return tasksApi;
      }, TaskParticipantsPopup, HeaderBar };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_0$3);
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createCommentVNode(" 顶部导航栏替换为HeaderBar组件 "),
      vue.createVNode($setup["HeaderBar"], {
        title: "我的任务",
        showSearch: false,
        showFilter: false
      }),
      vue.createCommentVNode(" 页面内容容器，考虑顶部HeaderBar的高度 "),
      vue.createElementVNode("view", { class: "content-container" }, [
        vue.createCommentVNode(" 标签页选择器 "),
        vue.createElementVNode("view", { class: "tabs" }, [
          (vue.openBlock(), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.tabs, (tab, index) => {
              return vue.createElementVNode("view", {
                key: index,
                class: vue.normalizeClass(["tab-item", { "active": $setup.activeTab === index }]),
                onClick: ($event) => $setup.switchTab(index)
              }, [
                vue.createElementVNode(
                  "text",
                  null,
                  vue.toDisplayString(tab),
                  1
                  /* TEXT */
                )
              ], 10, ["onClick"]);
            }),
            64
            /* STABLE_FRAGMENT */
          ))
        ]),
        vue.createCommentVNode(" 筛选器 "),
        vue.createElementVNode("view", { class: "status-filter-container" }, [
          vue.createElementVNode("scroll-view", {
            "scroll-x": "",
            class: "status-scroll",
            "show-scrollbar": "false",
            "scroll-into-view": "status-" + $setup.selectedStatus,
            "scroll-with-animation": ""
          }, [
            vue.createElementVNode("view", { class: "status-list" }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.statusOptions, (status, index) => {
                  return vue.openBlock(), vue.createElementBlock("view", {
                    key: index,
                    id: "status-" + status.value,
                    class: vue.normalizeClass(["status-item", { "active": $setup.selectedStatus === status.value }]),
                    onClick: ($event) => $setup.filterByStatus(status.value)
                  }, [
                    vue.createElementVNode(
                      "text",
                      null,
                      vue.toDisplayString(status.label),
                      1
                      /* TEXT */
                    )
                  ], 10, ["id", "onClick"]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ])
          ], 8, ["scroll-into-view"])
        ]),
        vue.createCommentVNode(" 列表内容区域 "),
        vue.createElementVNode("scroll-view", {
          "scroll-y": "",
          class: "task-list-container",
          onScrolltolower: $setup.loadMore,
          "refresher-enabled": "",
          "refresher-triggered": $setup.refreshing,
          onRefresherrefresh: $setup.onRefresh
        }, [
          vue.createCommentVNode(" 我创建的任务 "),
          $setup.activeTab === 0 ? (vue.openBlock(), vue.createElementBlock(
            vue.Fragment,
            { key: 0 },
            [
              $setup.createdTasks.length === 0 && !$setup.loading ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "empty-container"
              }, [
                vue.createElementVNode("image", {
                  src: _imports_0,
                  mode: "aspectFit",
                  class: "empty-image"
                }),
                vue.createElementVNode("text", { class: "empty-text" }, "您还没有创建任何任务"),
                vue.createElementVNode("button", {
                  class: "create-btn",
                  onClick: $setup.navigateToCreate
                }, "创建任务")
              ])) : (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "task-list"
              }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.createdTasks, (task, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      key: task.id,
                      class: "task-card",
                      onClick: ($event) => $setup.navigateToDetail(task, index)
                    }, [
                      vue.createElementVNode("view", { class: "task-header" }, [
                        vue.createElementVNode("view", { class: "task-title-row" }, [
                          vue.createElementVNode(
                            "text",
                            { class: "task-title" },
                            vue.toDisplayString(task.title),
                            1
                            /* TEXT */
                          ),
                          vue.createElementVNode(
                            "view",
                            {
                              class: vue.normalizeClass(["task-status", $setup.getStatusClass(task.status)])
                            },
                            [
                              vue.createElementVNode(
                                "text",
                                null,
                                vue.toDisplayString(task.statusText),
                                1
                                /* TEXT */
                              )
                            ],
                            2
                            /* CLASS */
                          )
                        ]),
                        vue.createElementVNode("view", { class: "task-meta" }, [
                          vue.createElementVNode(
                            "view",
                            { class: "category-tag" },
                            vue.toDisplayString(task.categoryName),
                            1
                            /* TEXT */
                          ),
                          vue.createElementVNode(
                            "text",
                            { class: "task-date" },
                            "截止时间: " + vue.toDisplayString($setup.formatDate(task.deadline)),
                            1
                            /* TEXT */
                          )
                        ])
                      ]),
                      vue.createElementVNode("view", { class: "task-content" }, [
                        vue.createElementVNode(
                          "text",
                          { class: "task-desc" },
                          vue.toDisplayString(task.shortDescription),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode("view", { class: "task-footer" }, [
                          vue.createElementVNode("view", { class: "task-reward" }, [
                            vue.createElementVNode(
                              "text",
                              { class: "reward-text" },
                              vue.toDisplayString($setup.getRewardText(task)),
                              1
                              /* TEXT */
                            )
                          ]),
                          vue.createElementVNode("view", { class: "task-progress" }, [
                            vue.createElementVNode(
                              "text",
                              { class: "progress-text" },
                              vue.toDisplayString(task.currentParticipants) + "/" + vue.toDisplayString(task.maxParticipants),
                              1
                              /* TEXT */
                            ),
                            vue.createElementVNode("view", { class: "progress-bar" }, [
                              vue.createElementVNode(
                                "view",
                                {
                                  class: "progress-inner",
                                  style: vue.normalizeStyle({ width: task.currentParticipants / task.maxParticipants * 100 + "%" })
                                },
                                null,
                                4
                                /* STYLE */
                              )
                            ])
                          ])
                        ]),
                        vue.createCommentVNode(" 按钮区域 "),
                        vue.createElementVNode("view", { class: "task-actions" }, [
                          vue.createCommentVNode(" 参与者查看按钮 "),
                          task.currentParticipants > 0 ? (vue.openBlock(), vue.createElementBlock("button", {
                            key: 0,
                            class: "participants-btn",
                            onClick: vue.withModifiers(($event) => $setup.viewParticipants(task.id), ["stop", "prevent"]),
                            "data-id": task.id
                          }, [
                            vue.createElementVNode("text", { class: "participants-btn-text" }, "查看参与者")
                          ], 8, ["onClick", "data-id"])) : vue.createCommentVNode("v-if", true),
                          vue.createCommentVNode(" 更新任务状态按钮 "),
                          vue.createElementVNode("button", {
                            class: "task-status-btn",
                            onClick: vue.withModifiers(($event) => $setup.openTaskStatusPopup(task, index), ["stop", "prevent"])
                          }, [
                            vue.createElementVNode("text", { class: "task-status-btn-text" }, "更新状态")
                          ], 8, ["onClick"])
                        ])
                      ])
                    ], 8, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                )),
                vue.createCommentVNode(" 加载更多状态 "),
                $setup.loading ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "loading-more"
                }, [
                  vue.createElementVNode("text", null, "加载中...")
                ])) : vue.createCommentVNode("v-if", true),
                !$setup.hasMore && $setup.createdTasks.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 1,
                  class: "no-more"
                }, [
                  vue.createElementVNode("text", null, "没有更多了")
                ])) : vue.createCommentVNode("v-if", true)
              ]))
            ],
            64
            /* STABLE_FRAGMENT */
          )) : vue.createCommentVNode("v-if", true),
          vue.createCommentVNode(" 我参与的任务 "),
          $setup.activeTab === 1 ? (vue.openBlock(), vue.createElementBlock(
            vue.Fragment,
            { key: 1 },
            [
              $setup.participatedTasks.length === 0 && !$setup.loading ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "empty-container"
              }, [
                vue.createElementVNode("image", {
                  src: _imports_0,
                  mode: "aspectFit",
                  class: "empty-image"
                }),
                vue.createElementVNode("text", { class: "empty-text" }, "您还没有参与任何任务"),
                vue.createElementVNode("button", {
                  class: "browse-btn",
                  onClick: $setup.navigateToTaskSquare
                }, "浏览任务广场")
              ])) : (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "task-list"
              }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.participatedTasks, (task, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      key: task.id,
                      class: "task-card"
                    }, [
                      vue.createElementVNode("view", {
                        class: "task-header",
                        onClick: ($event) => $setup.navigateToDetail(task, index)
                      }, [
                        vue.createElementVNode("view", { class: "task-title-row" }, [
                          vue.createElementVNode(
                            "text",
                            { class: "task-title" },
                            vue.toDisplayString(task.title),
                            1
                            /* TEXT */
                          ),
                          vue.createElementVNode(
                            "view",
                            {
                              class: vue.normalizeClass(["task-status", $setup.getStatusClass(task.status)])
                            },
                            [
                              vue.createElementVNode(
                                "text",
                                null,
                                vue.toDisplayString(task.statusText),
                                1
                                /* TEXT */
                              )
                            ],
                            2
                            /* CLASS */
                          )
                        ]),
                        vue.createElementVNode("view", { class: "task-meta" }, [
                          vue.createElementVNode(
                            "view",
                            { class: "category-tag" },
                            vue.toDisplayString(task.categoryName),
                            1
                            /* TEXT */
                          ),
                          vue.createElementVNode(
                            "text",
                            { class: "task-date" },
                            "截止时间: " + vue.toDisplayString($setup.formatDate(task.deadline)),
                            1
                            /* TEXT */
                          )
                        ])
                      ], 8, ["onClick"]),
                      vue.createElementVNode("view", {
                        class: "task-content",
                        onClick: ($event) => $setup.navigateToDetail(task, index)
                      }, [
                        vue.createElementVNode("view", { class: "creator-info" }, [
                          vue.createElementVNode("image", {
                            src: task.creatorAvatarUrl,
                            class: "creator-avatar"
                          }, null, 8, ["src"]),
                          vue.createElementVNode("view", { class: "creator-detail" }, [
                            vue.createElementVNode(
                              "text",
                              { class: "creator-name" },
                              vue.toDisplayString(task.creatorName),
                              1
                              /* TEXT */
                            ),
                            vue.createElementVNode(
                              "text",
                              { class: "creator-major" },
                              vue.toDisplayString(task.creatorMajor),
                              1
                              /* TEXT */
                            )
                          ])
                        ]),
                        vue.createCommentVNode(" 添加我的参与状态 "),
                        vue.createElementVNode("view", { class: "participation-status" }, [
                          vue.createElementVNode("text", { class: "status-label" }, "我的状态:"),
                          vue.createElementVNode(
                            "view",
                            {
                              class: vue.normalizeClass(["status-tag", $setup.getParticipationStatusClass(task.participationStatus)])
                            },
                            vue.toDisplayString($setup.getParticipationStatusText(task.participationStatus)),
                            3
                            /* TEXT, CLASS */
                          )
                        ]),
                        vue.createElementVNode(
                          "text",
                          { class: "task-desc" },
                          vue.toDisplayString(task.shortDescription),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode("view", { class: "task-footer" }, [
                          vue.createElementVNode("view", { class: "task-reward" }, [
                            vue.createElementVNode(
                              "text",
                              { class: "reward-text" },
                              vue.toDisplayString($setup.getRewardText(task)),
                              1
                              /* TEXT */
                            )
                          ]),
                          vue.createElementVNode("view", { class: "task-location" }, [
                            vue.createElementVNode("text", { class: "location-icon iconfont icon-location" }),
                            vue.createElementVNode(
                              "text",
                              { class: "location-text" },
                              vue.toDisplayString(task.location),
                              1
                              /* TEXT */
                            )
                          ])
                        ]),
                        vue.createCommentVNode(" 新增参与人数显示 "),
                        task.currentParticipants > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 0,
                          class: "participants-count"
                        }, [
                          vue.createElementVNode(
                            "text",
                            { class: "participants-count-text" },
                            "当前参与人数: " + vue.toDisplayString(task.currentParticipants) + "人",
                            1
                            /* TEXT */
                          )
                        ])) : vue.createCommentVNode("v-if", true)
                      ], 8, ["onClick"]),
                      vue.createCommentVNode(" 新增操作按钮区域 "),
                      vue.createElementVNode("view", { class: "action-buttons" }, [
                        vue.createElementVNode("button", {
                          class: "action-btn view-btn",
                          onClick: ($event) => $setup.navigateToDetail(task, index)
                        }, " 查看详情 ", 8, ["onClick"]),
                        vue.createElementVNode("button", {
                          class: vue.normalizeClass(["action-btn update-btn", { "disabled-btn": task.participationStatus === "completed" || task.participationStatus === "left" }]),
                          onClick: ($event) => task.participationStatus !== "completed" && task.participationStatus !== "left" ? $setup.openStatusUpdatePopup(task, index) : null
                        }, " 更新状态" + vue.toDisplayString(task.participationStatus === "completed" || task.participationStatus === "left" ? "(已锁定)" : ""), 11, ["onClick"])
                      ])
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                )),
                vue.createCommentVNode(" 加载更多状态 "),
                $setup.loading ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "loading-more"
                }, [
                  vue.createElementVNode("text", null, "加载中...")
                ])) : vue.createCommentVNode("v-if", true),
                !$setup.hasMore && $setup.participatedTasks.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 1,
                  class: "no-more"
                }, [
                  vue.createElementVNode("text", null, "没有更多了")
                ])) : vue.createCommentVNode("v-if", true)
              ]))
            ],
            64
            /* STABLE_FRAGMENT */
          )) : vue.createCommentVNode("v-if", true)
        ], 40, ["refresher-triggered"]),
        vue.createCommentVNode(" 悬浮按钮 "),
        $setup.activeTab === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 0,
          class: "float-btn",
          onClick: $setup.navigateToCreate
        }, [
          vue.createElementVNode("text", { class: "add-icon" }, "+")
        ])) : vue.createCommentVNode("v-if", true),
        vue.createCommentVNode(" 参与者弹窗组件 "),
        vue.createVNode($setup["TaskParticipantsPopup"], {
          ref: "participantsPopupRef",
          "task-id": $setup.currentTaskId
        }, null, 8, ["task-id"]),
        vue.createCommentVNode(" 新增参与者状态弹窗 "),
        vue.createVNode(
          _component_uni_popup,
          {
            ref: "statusPopupRef",
            type: "center"
          },
          {
            default: vue.withCtx(() => [
              vue.createElementVNode("view", { class: "status-popup-content" }, [
                vue.createElementVNode("view", { class: "status-popup-header" }, [
                  vue.createElementVNode("text", { class: "status-popup-title" }, "更新参与状态"),
                  vue.createElementVNode("view", {
                    class: "close-icon",
                    onClick: $setup.closeStatusPopup
                  }, [
                    vue.createElementVNode("text", {
                      class: "iconfont icon-guanbi",
                      style: { "font-size": "36rpx", "color": "#666" }
                    })
                  ])
                ]),
                vue.createElementVNode("view", { class: "status-options" }, [
                  vue.createCommentVNode(' 当前是已加入状态，显示"进行中"选项 '),
                  $setup.selectedParticipationStatus === "joined" ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 0,
                    class: "status-option",
                    style: { "background-color": "#4a90e2", "color": "#FFFFFF", "font-weight": "bold" },
                    onClick: _cache[0] || (_cache[0] = ($event) => $setup.selectParticipationStatus("in_progress"))
                  }, " 进行中 ")) : vue.createCommentVNode("v-if", true),
                  vue.createCommentVNode(' 当前是进行中状态，只显示"已完成"选项 '),
                  $setup.selectedParticipationStatus === "in_progress" ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 1,
                    class: "status-option",
                    onClick: _cache[1] || (_cache[1] = ($event) => $setup.selectParticipationStatus("completed"))
                  }, " 已完成 ")) : vue.createCommentVNode("v-if", true),
                  vue.createCommentVNode(' 当前是进行中状态，也显示"已离开"选项 '),
                  $setup.selectedParticipationStatus === "in_progress" || $setup.selectedParticipationStatus === "joined" ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 2,
                    class: "status-option",
                    onClick: _cache[2] || (_cache[2] = ($event) => $setup.selectParticipationStatus("left"))
                  }, " 已离开 ")) : vue.createCommentVNode("v-if", true)
                ]),
                $setup.selectedParticipationStatus === "completed" || $setup.selectedParticipationStatus === "left" ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "reason-input-container"
                }, [
                  vue.createElementVNode("text", { class: "reason-label" }, "原因说明(选填):"),
                  vue.withDirectives(vue.createElementVNode(
                    "textarea",
                    {
                      class: "reason-input",
                      "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => $setup.statusReason = $event),
                      placeholder: "请输入状态更新原因",
                      maxlength: "200"
                    },
                    null,
                    512
                    /* NEED_PATCH */
                  ), [
                    [vue.vModelText, $setup.statusReason]
                  ]),
                  vue.createElementVNode(
                    "text",
                    { class: "reason-count" },
                    vue.toDisplayString($setup.statusReason.length) + "/200",
                    1
                    /* TEXT */
                  )
                ])) : vue.createCommentVNode("v-if", true),
                vue.createElementVNode("view", { class: "status-popup-footer" }, [
                  vue.createElementVNode("button", {
                    class: "cancel-btn",
                    onClick: $setup.closeStatusPopup
                  }, "取消"),
                  vue.createElementVNode("button", {
                    class: "confirm-btn",
                    onClick: $setup.confirmUpdateStatus
                  }, "确认")
                ])
              ])
            ]),
            _: 1
            /* STABLE */
          },
          512
          /* NEED_PATCH */
        ),
        vue.createCommentVNode(" 添加任务状态更新弹窗 "),
        vue.createVNode(
          _component_uni_popup,
          {
            ref: "taskStatusPopupRef",
            type: "center"
          },
          {
            default: vue.withCtx(() => [
              vue.createElementVNode("view", { class: "status-popup-content" }, [
                vue.createElementVNode("view", { class: "status-popup-header" }, [
                  vue.createElementVNode("text", { class: "status-popup-title" }, "更新任务状态"),
                  vue.createElementVNode("view", {
                    class: "close-icon",
                    onClick: $setup.closeTaskStatusPopup
                  }, [
                    vue.createElementVNode("text", {
                      class: "iconfont icon-guanbi",
                      style: { "font-size": "36rpx", "color": "#666" }
                    })
                  ])
                ]),
                vue.createElementVNode("view", { class: "status-options" }, [
                  vue.createCommentVNode(" 添加招募中选项，如果任务还没有进入招募状态 "),
                  $setup.currentTaskStatus === "pending" || $setup.currentTaskStatus === "" ? (vue.openBlock(), vue.createElementBlock(
                    "view",
                    {
                      key: 0,
                      class: vue.normalizeClass(["status-option", { "active": $setup.selectedTaskStatus === "recruiting" }]),
                      onClick: _cache[4] || (_cache[4] = ($event) => $setup.selectTaskStatus("recruiting"))
                    },
                    " 招募中 ",
                    2
                    /* CLASS */
                  )) : vue.createCommentVNode("v-if", true),
                  vue.createCommentVNode(" 显示进入进行中选项 "),
                  $setup.currentTaskStatus === "recruiting" ? (vue.openBlock(), vue.createElementBlock(
                    "view",
                    {
                      key: 1,
                      class: vue.normalizeClass(["status-option", { "active": $setup.selectedTaskStatus === "ongoing" }]),
                      onClick: _cache[5] || (_cache[5] = ($event) => $setup.selectTaskStatus("ongoing"))
                    },
                    " 进行中 ",
                    2
                    /* CLASS */
                  )) : vue.createCommentVNode("v-if", true),
                  $setup.currentTaskStatus === "ongoing" ? (vue.openBlock(), vue.createElementBlock(
                    "view",
                    {
                      key: 2,
                      class: vue.normalizeClass(["status-option", { "active": $setup.selectedTaskStatus === "ended" }]),
                      onClick: _cache[6] || (_cache[6] = ($event) => $setup.selectTaskStatus("ended"))
                    },
                    " 已结束 ",
                    2
                    /* CLASS */
                  )) : vue.createCommentVNode("v-if", true),
                  $setup.currentTaskStatus === "ended" ? (vue.openBlock(), vue.createElementBlock(
                    "view",
                    {
                      key: 3,
                      class: vue.normalizeClass(["status-option", { "active": $setup.selectedTaskStatus === "completed" }]),
                      onClick: _cache[7] || (_cache[7] = ($event) => $setup.selectTaskStatus("completed"))
                    },
                    " 已完成 ",
                    2
                    /* CLASS */
                  )) : vue.createCommentVNode("v-if", true),
                  vue.createCommentVNode(" 取消选项始终可见（除非已完成或已取消） "),
                  $setup.currentTaskStatus !== "canceled" && $setup.currentTaskStatus !== "completed" ? (vue.openBlock(), vue.createElementBlock(
                    "view",
                    {
                      key: 4,
                      class: vue.normalizeClass(["status-option", { "active": $setup.selectedTaskStatus === "canceled" }]),
                      onClick: _cache[8] || (_cache[8] = ($event) => $setup.selectTaskStatus("canceled"))
                    },
                    " 已取消 ",
                    2
                    /* CLASS */
                  )) : vue.createCommentVNode("v-if", true)
                ]),
                vue.createCommentVNode(" 当选择已取消状态时，需要输入取消原因 "),
                $setup.selectedTaskStatus === "canceled" ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "reason-input-container"
                }, [
                  vue.createElementVNode("text", { class: "reason-label" }, "取消原因(必填):"),
                  vue.withDirectives(vue.createElementVNode(
                    "textarea",
                    {
                      class: "reason-input",
                      "onUpdate:modelValue": _cache[9] || (_cache[9] = ($event) => $setup.cancelReason = $event),
                      placeholder: "请输入取消任务的原因",
                      maxlength: "200"
                    },
                    null,
                    512
                    /* NEED_PATCH */
                  ), [
                    [vue.vModelText, $setup.cancelReason]
                  ]),
                  vue.createElementVNode(
                    "text",
                    { class: "reason-count" },
                    vue.toDisplayString($setup.cancelReason.length) + "/200",
                    1
                    /* TEXT */
                  )
                ])) : vue.createCommentVNode("v-if", true),
                vue.createElementVNode("view", { class: "status-popup-footer" }, [
                  vue.createElementVNode("button", {
                    class: "cancel-btn",
                    onClick: $setup.closeTaskStatusPopup
                  }, "取消"),
                  vue.createElementVNode("button", {
                    class: "confirm-btn",
                    onClick: $setup.confirmUpdateTaskStatus
                  }, "确认")
                ])
              ])
            ]),
            _: 1
            /* STABLE */
          },
          512
          /* NEED_PATCH */
        )
      ])
    ]);
  }
  const PagesMytasksIndex = /* @__PURE__ */ _export_sfc(_sfc_main$1, [["render", _sfc_render], ["__file", "D:/Uniapp/htmlTest/赛创项目/pages/mytasks/index.vue"]]);
  __definePage("pages/login/login", PagesLoginLogin);
  __definePage("pages/index/index", PagesIndexIndex);
  __definePage("pages/project/project-showcase", PagesProjectProjectShowcase);
  __definePage("pages/project/detail", PagesProjectDetail);
  __definePage("pages/task-square/index", PagesTaskSquareIndex);
  __definePage("pages/task-square/detail", PagesTaskSquareDetail);
  __definePage("pages/task-square/create", PagesTaskSquareCreate);
  __definePage("pages/team/detail", PagesTeamDetail);
  __definePage("pages/team/list", PagesTeamList);
  __definePage("pages/team/create", PagesTeamCreate);
  __definePage("pages/team/recommended", PagesTeamRecommended);
  __definePage("pages/competition/index", PagesCompetitionIndex);
  __definePage("pages/competition/create", PagesCompetitionCreate);
  __definePage("pages/competition/detail", PagesCompetitionDetail);
  __definePage("pages/profile/index", PagesProfileIndex);
  __definePage("pages/profile/user-info", PagesProfileUserInfo);
  __definePage("pages/profile/edit-basic-info", PagesProfileEditBasicInfo);
  __definePage("pages/profile/edit-bio", PagesProfileEditBio);
  __definePage("pages/profile/edit-skills", PagesProfileEditSkills);
  __definePage("pages/profile/edit-awards", PagesProfileEditAwards);
  __definePage("pages/profile/my-awards", PagesProfileMyAwards);
  __definePage("pages/Xiaoxi/Xiaoxi", PagesXiaoxiXiaoxi);
  __definePage("pages/application/application", PagesApplicationApplication);
  __definePage("pages/websocket-test/index", PagesWebsocketTestIndex);
  __definePage("pages/schedule/index", PagesScheduleIndex);
  __definePage("pages/project/create", PagesProjectCreate);
  __definePage("pages/profile/medal-detail", PagesProfileMedalDetail);
  __definePage("pages/profile/apply-badge", PagesProfileApplyBadge);
  __definePage("pages/profile/material-reward", PagesProfileMaterialReward);
  __definePage("pages/mycompetitions/mycompetitions", PagesMycompetitionsMycompetitions);
  __definePage("pages/myTeam/myTeam", PagesMyTeamMyTeam);
  __definePage("pages/mytasks/index", PagesMytasksIndex);
  const _sfc_main = {
    globalData: {
      unreadNotificationCount: 0
    },
    onLaunch: function() {
      formatAppLog("warn", "at App.vue:10", "当前组件仅支持 uni_modules 目录结构 ，请升级 HBuilderX 到 3.1.0 版本以上！");
      formatAppLog("log", "at App.vue:11", "App Launch");
      const token = uni.getStorageSync("token");
      if (!token) {
        formatAppLog("log", "at App.vue:16", "用户未登录，跳转到登录页面");
        setTimeout(() => {
          uni.reLaunch({
            url: "/pages/login/login"
          });
        }, 300);
        return;
      }
      this.initGlobalNotificationService();
      formatAppLog("log", "at App.vue:28", "App Launch");
      try {
        const cacheValidDuration = 12 * 60 * 60 * 1e3;
        const cachedTime = uni.getStorageSync("ai_recommend_cache_time");
        if (cachedTime) {
          const now = Date.now();
          const isExpired = now - Number(cachedTime) > cacheValidDuration;
          if (isExpired) {
            formatAppLog("log", "at App.vue:44", "AI推荐缓存已过期，清除缓存数据。缓存时间:", new Date(Number(cachedTime)).toLocaleString());
            uni.removeStorageSync("ai_recommend_cache_time");
            uni.removeStorageSync("ai_recommended_teams");
            uni.removeStorageSync("ai_summary");
            formatAppLog("log", "at App.vue:48", "已清除过期的AI推荐相关缓存");
          } else {
            formatAppLog("log", "at App.vue:50", "AI推荐缓存未过期，保留缓存数据。缓存时间:", new Date(Number(cachedTime)).toLocaleString());
          }
        } else {
          formatAppLog("log", "at App.vue:53", "未找到AI推荐缓存时间记录");
        }
        const userInteractionState = uni.getStorageSync("userInteractionState");
        if (userInteractionState) {
          try {
            const state2 = JSON.parse(userInteractionState);
            state2.hasClickedAiRecommend = false;
            uni.setStorageSync("userInteractionState", JSON.stringify(state2));
            formatAppLog("log", "at App.vue:63", "已重置AI推荐点击状态");
          } catch (e) {
            formatAppLog("error", "at App.vue:65", "重置用户交互状态失败:", e);
          }
        }
      } catch (e) {
        formatAppLog("error", "at App.vue:69", "处理AI推荐缓存失败:", e);
      }
    },
    onShow: function() {
      formatAppLog("log", "at App.vue:74", "App Show");
    },
    onHide: function() {
      formatAppLog("log", "at App.vue:78", "App Hide");
      try {
        uni.removeStorageSync("userInteractionState");
        formatAppLog("log", "at App.vue:82", "应用关闭/隐藏，已清除userInteractionState缓存");
      } catch (e) {
        formatAppLog("error", "at App.vue:84", "清除userInteractionState缓存失败:", e);
      }
    },
    methods: {
      // 初始化全局通知服务
      initGlobalNotificationService() {
        const handleNewNotification = (notification) => {
          formatAppLog("log", "at App.vue:93", "App收到新通知:", notification);
          if (!notification.isRead) {
            this.globalData.unreadNotificationCount++;
          }
          uni.showToast({
            title: "收到新通知",
            icon: "none"
          });
          this.updateMessageBadge();
          uni.$emit("newNotification", notification);
        };
        notificationService.initNotificationService(handleNewNotification);
      },
      // 更新消息页面的TabBar角标
      updateMessageBadge() {
        const count = this.globalData.unreadNotificationCount;
        try {
          if (count > 0) {
            uni.setTabBarBadge({
              index: 4,
              // 消息页面的TabBar索引，根据实际情况调整
              text: count.toString()
            }).catch((err) => {
              formatAppLog("log", "at App.vue:128", "设置TabBar徽标失败，可能不在TabBar页面", err);
            });
          } else {
            uni.removeTabBarBadge({
              index: 4
              // 消息页面的TabBar索引，根据实际情况调整
            }).catch((err) => {
              formatAppLog("log", "at App.vue:136", "移除TabBar徽标失败，可能不在TabBar页面", err);
            });
          }
        } catch (error) {
          formatAppLog("log", "at App.vue:141", "TabBar操作失败，可能不在TabBar页面", error);
        }
      },
      // 重置未读通知计数
      resetUnreadNotificationCount() {
        this.globalData.unreadNotificationCount = 0;
        this.updateMessageBadge();
      }
    }
  };
  const App = /* @__PURE__ */ _export_sfc(_sfc_main, [["__file", "D:/Uniapp/htmlTest/赛创项目/App.vue"]]);
  getEnv();
  function createApp() {
    const app = vue.createVueApp(App);
    app.config.globalProperties.$store = store;
    return {
      app
    };
  }
  const { app: __app__, Vuex: __Vuex__, Pinia: __Pinia__ } = createApp();
  uni.Vuex = __Vuex__;
  uni.Pinia = __Pinia__;
  __app__.provide("__globalStyles", __uniConfig.styles);
  __app__._component.mpType = "app";
  __app__._component.render = () => {
  };
  __app__.mount("#app");
})(Vue);
