# 接口文档

## 1. 通用接口 (`/admin/common`)

### 1.1 上传文件并保存

*   **URL**: `POST /admin/common/upload/save`
*   **描述**: 上传单个文件，并将文件信息保存到数据库。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
    *   `Content-Type: multipart/form-data` (必需)
*   **请求参数 (form-data)**:
    *   `file` (file, 必需): 要上传的文件。
    *   `category` (string, 可选, 默认: `task_attachment`): 文件类别。可选值: `avatar`, `task_attachment`, `task_image`, `competition_attachment`, `competition_poster`, `competition_category_icon`, `badge_approval`, `badge`。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "fileId": 12345, // 文件ID
        "url": "https://saichuang.oss-cn-beijing.aliyuncs.com/...", // 文件访问URL
        "originalFilename": "example.jpg", // 原始文件名
        "size": 102400 // 文件大小 (bytes)
      }
    }
    ```
*   **响应体 (失败)**:
    ```json
    {
      "code": 500, // 或其他错误码
      "message": "文件上传失败: 错误详情",
      "data": null
    }
    ```

### 1.2 批量上传文件并保存

*   **URL**: `POST /admin/common/upload/batch`
*   **描述**: 批量上传多个文件，并将文件信息保存到数据库。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
    *   `Content-Type: multipart/form-data` (必需)
*   **请求参数 (form-data)**:
    *   `files` (file[], 必需): 要上传的文件列表。
    *   `category` (string, 可选, 默认: `task_attachment`): 文件类别。可选值同上。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": [
        {
          "fileId": 12346,
          "url": "https://saichuang.oss-cn-beijing.aliyuncs.com/...",
          "originalFilename": "image1.png",
          "size": 204800
        },
        {
          "fileId": 12347,
          "url": "https://saichuang.oss-cn-beijing.aliyuncs.com/...",
          "originalFilename": "document.pdf",
          "size": 512000
        }
        // ... 更多文件信息
      ]
    }
    ```
*   **响应体 (失败)**:
    ```json
    {
      "code": 500, // 或其他错误码
      "message": "批量文件上传失败",
      "data": null
    }
    ```

---

## 2. 文件管理接口 (`/files`)

### 2.1 获取文件列表

*   **URL**: `GET /files/list`
*   **描述**: 分页获取文件列表，可按分类筛选。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Query)**:
    *   `category` (string, 可选): 文件类别，用于筛选。
    *   `pageNum` (integer, 可选, 默认: 1): 页码。
    *   `pageSize` (integer, 可选, 默认: 10): 每页数量。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "pageNum": 1,
        "pageSize": 10,
        "total": 50,
        "pages": 5,
        "list": [
          {
            "fileId": 123,
            "originalFilename": "report.docx",
            "url": "https://saichuang.oss-cn-beijing.aliyuncs.com/...",
            "category": "competition_attachment",
            "mimeType": "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
            "size": 153600,
            "reviewStatus": "approved", // 审核状态
            "uploaderId": 5,
            "uploadedAt": "2025-05-01T10:00:00"
          }
          // ... 更多文件
        ],
        "hasPrevious": false,
        "hasNext": true
      }
    }
    ```

### 2.2 删除单个文件

*   **URL**: `DELETE /files/{fileId}`
*   **描述**: 删除指定ID的文件记录及其关联。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Path)**:
    *   `fileId` (long, 必需): 要删除的文件ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": true
    }
    ```
*   **响应体 (失败)**:
    ```json
    {
      "code": 500, // 或 404
      "message": "删除失败: 文件不存在或无权限",
      "data": false
    }
    ```

### 2.3 批量删除文件

*   **URL**: `DELETE /files/batch`
*   **描述**: 批量删除指定ID列表的文件记录。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
    *   `Content-Type: application/json` (必需)
*   **请求体**:
    ```json
    {
      "fileIds": [123, 124, 125] // 要删除的文件ID列表
    }
    ```
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": 3 // 成功删除的文件数量
    }
    ```

### 2.4 更新文件审核状态

*   **URL**: `PUT /files/{fileId}/review-status`
*   **描述**: 更新指定文件的审核状态。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token, 通常需要管理员权限)
    *   `Content-Type: application/json` (必需)
*   **请求参数 (Path)**:
    *   `fileId` (long, 必需): 要更新的文件ID。
*   **请求体**:
    ```json
    {
      "status": "rejected" // 新的审核状态 (e.g., approved, rejected, pending)
    }
    ```
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": true
    }
    ```

---

## 3. 用户管理接口 (`/users`)

### 3.1 用户登录

*   **URL**: `POST /users/login`
*   **描述**: 使用手机号和密码登录。
*   **请求参数 (form-data 或 x-www-form-urlencoded)**:
    *   `phone` (string, 必需): 手机号。
    *   `password` (string, 必需): 密码。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": "eyJhbGciOiJIUzUxMiJ9..." // JWT Token
    }
    ```
*   **响应体 (失败 - 401 或其他)**:
    ```json
    {
      "code": 1001, // PARAM_INVALID
      "message": "手机号或密码错误",
      "data": null
    }
    ```

### 3.2 用户注册

*   **URL**: `POST /users/register`
*   **描述**: 注册新用户。
*   **请求体**:
    ```json
    {
      "phone": "13912345678",
      "password": "password123",
      "role": "student", // 或 "teacher"
      "realName": "张三",
      "studentTeacherId": "20210001", // 学号或工号
      "schoolId": 1,
      "major": "计算机科学",
      "bio": "个人简介...", // 可选
      "skillTags": ["Java", "Spring Boot"] // 可选, 技能标签列表
    }
    ```
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": 15 // 新注册用户的ID
    }
    ```
*   **响应体 (失败)**:
    ```json
    {
      "code": 500, // 或其他错误码
      "message": "手机号已注册", // 或其他错误信息
      "data": null
    }
    ```

### 3.3 获取所有用户 (谨慎使用)

*   **URL**: `GET /users/all`
*   **描述**: 获取所有用户列表（通常需要管理员权限，数据量大时慎用）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token, 需要管理员权限)
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": [
        {
          "id": 1,
          "phone": "138...",
          "role": "admin",
          // ... 其他用户字段
        },
        // ...
      ]
    }
    ```

### 3.4 获取当前用户信息 (基本)

*   **URL**: `GET /users/info`
*   **描述**: 根据请求头中的Token获取当前用户的基本信息（ID, 用户名）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "userId": 15,
        "realName": "张三"
      }
    }
    ```
*   **响应体 (失败 - 未登录)**:
    ```json
    {
      "code": 1004, // NOT_Toekn
      "message": "用户未登录或Token无效",
      "data": null
    }
    ```

### 3.5 分页查询用户列表

*   **URL**: `GET /users/page`
*   **描述**: 分页查询用户列表，可带关键词搜索（通常需要管理员权限）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token, 需要管理员权限)
*   **请求参数 (Query)**:
    *   `keyword` (string, 可选): 搜索关键词（匹配用户名、手机号等）。
    *   `pageNum` (integer, 可选, 默认: 1): 页码。
    *   `pageSize` (integer, 可选, 默认: 10): 每页数量。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "pageNum": 1,
        "pageSize": 10,
        "total": 100,
        "pages": 10,
        "list": [
          {
            "id": 15,
            "phone": "139...",
            "role": "student",
            "realName": "张三",
            // ... 其他用户字段
          }
          // ...
        ],
        "hasPrevious": false,
        "hasNext": true
      }
    }
    ```

### 3.6 检查手机号是否存在

*   **URL**: `GET /users/check-phone`
*   **描述**: 检查指定的手机号是否已被注册。
*   **请求参数 (Query)**:
    *   `phoneNumber` (string, 必需): 要检查的手机号。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": true // true 表示已存在, false 表示不存在
    }
    ```

### 3.7 检查学号/工号是否存在

*   **URL**: `GET /users/check-id`
*   **描述**: 检查指定的学号或工号是否已被注册。
*   **请求参数 (Query)**:
    *   `studentTeacherId` (string, 必需): 要检查的学号或工号。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": false // true 表示已存在, false 表示不存在
    }
    ```

### 3.8 获取当前用户详细信息

*   **URL**: `GET /users/profile`
*   **描述**: 获取当前登录用户的详细个人信息。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "userId": 15,
        "phone": "13912345678",
        "role": "student",
        "realName": "张三",
        "studentTeacherId": "20210001",
        "schoolId": 1,
        "schoolName": "示例大学",
        "major": "计算机科学",
        "bio": "个人简介...",
        "avatarUrl": "https://saichuang.oss-cn-beijing.aliyuncs.com/...", // 头像URL
        "skillTags": ["Java", "Spring Boot"],
        "awardsHistory": "全国大学生程序设计竞赛一等奖"
      }
    }
    ```

### 3.9 获取指定用户详细信息

*   **URL**: `GET /users/{userId}/profile`
*   **描述**: 获取指定ID用户的详细个人信息。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Path)**:
    *   `userId` (integer, 必需): 要查询的用户ID。
*   **响应体 (成功 - 200)**: (结构同上)

### 3.10 更新当前用户基本信息

*   **URL**: `PUT /users/profile`
*   **描述**: 更新当前登录用户的个人信息。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
    *   `Content-Type: application/json` (必需)
*   **请求体**:
    ```json
    {
      // 可以只包含需要更新的字段
      "realName": "李四",
      "major": "软件工程",
      "bio": "更新后的个人简介",
      "skillTags": ["Python", "Django"],
      "awardsHistory": "蓝桥杯省一等奖"
    }
    ```
*   **响应体 (成功 - 200)**: (返回更新后的用户信息，结构同 `/users/profile`)

### 3.11 上传用户头像

*   **URL**: `POST /users/avatar`
*   **描述**: 为当前登录用户上传或更新头像。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
    *   `Content-Type: multipart/form-data` (必需)
*   **请求参数 (form-data)**:
    *   `file` (file, 必需): 头像图片文件。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "fileId": 12348, // 新头像的文件ID
        "avatarUrl": "https://saichuang.oss-cn-beijing.aliyuncs.com/..." // 新头像URL
      }
    }
    ```

### 3.12 获取所有用户角色

*   **URL**: `GET /users/roles`
*   **描述**: 获取系统中定义的所有用户角色枚举值。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": [
        "student",
        "teacher",
        "admin"
      ]
    }
    ```

### 3.13 修改用户角色 (管理员)

*   **URL**: `PUT /users/role`
*   **描述**: 修改指定用户的角色（需要管理员权限）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token, 需要管理员权限)
    *   `Content-Type: application/json` (必需)
*   **请求体**:
    ```json
    {
      "userId": 15,
      "newRole": "admin" // 新的角色
    }
    ```
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": true
    }
    ```
*   **响应体 (失败)**:
    ```json
    {
      "code": 500, // 或 403
      "message": "权限不足或用户不存在",
      "data": false
    }
    ```

---

## 4. 任务管理接口 (`/tasks`)

### 4.1 创建任务

*   **URL**: `POST /tasks`
*   **描述**: 创建一个新的任务。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
    *   `Content-Type: application/json` (必需)
*   **请求体**:
    ```json
    {
      "title": "校园二手物品交易平台开发",
      "description": "开发一个方便学生交易二手物品的平台...",
      "requirements": "熟悉Java, Spring Boot, MySQL, Vue.js",
      "contactInfo": {
        "phone": "13712345678",
        "qq": "87654321",
        "wechat": "task_creator"
      },
      "categoryId": 3, // 任务类型ID
      "rewardTypeId": 2, // 奖励类型ID
      "rewardAmount": 500.00, // 奖励金额
      "deadline": "2025-07-31T23:59:59", // 截止时间
      "maxParticipants": 3, // 最大参与人数
      "location": "线上协作" // 地理位置描述 (普通文本)
    }
    ```
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": 25 // 新创建的任务ID
    }
    ```

### 4.2 查询任务列表

*   **URL**: `GET /tasks/list`
*   **描述**: 分页查询任务列表，可带多种筛选条件。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Query)**:
    *   `pageNum` (integer, 可选, 默认: 1): 页码。
    *   `pageSize` (integer, 可选, 默认: 10): 每页数量。
    *   `keyword` (string, 可选): 搜索关键词（匹配标题、描述）。
    *   `categoryId` (byte, 可选): 任务类型ID。
    *   `status` (string, 可选): 任务状态 (e.g., `recruiting`, `ongoing`, `completed`)。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "records": [
          {
            "id": 25,
            "title": "校园二手物品交易平台开发",
            "shortDescription": "开发一个方便学生交易二手物品的平台...",
            "categoryId": 3,
            "categoryName": "开发类",
            "creatorId": 10,
            "creatorName": "王五",
            "creatorAvatarUrl": "https://.../avatar.png",
            "creatorMajor": "软件工程",
            "rewardTypeId": 2,
            "rewardTypeName": "现金",
            "rewardAmount": 500.00,
            "createdAt": "2025-05-10T14:00:00",
            "deadline": "2025-07-31T23:59:59",
            "status": "recruiting",
            "statusText": "招募中",
            "maxParticipants": 3,
            "currentParticipants": 0,
            "viewCount": 15,
            "location": "线上协作"
          }
          // ...
        ],
        "total": 80,
        "size": 10,
        "current": 1,
        "pages": 8
      }
    }
    ```

### 4.3 获取任务详情

*   **URL**: `GET /tasks/{id}`
*   **描述**: 获取指定ID的任务详细信息。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Path)**:
    *   `id` (integer, 必需): 任务ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "id": 25,
        "title": "校园二手物品交易平台开发",
        "description": "开发一个方便学生交易二手物品的平台，包括用户注册登录、物品发布、浏览、搜索、下单、在线沟通等功能。",
        "contactInfo": {
          "phone": "13712345678",
          "qq": "87654321",
          "wechat": "task_creator"
        },
        "categoryId": 3,
        "categoryName": "开发类",
        "creatorId": 10,
        "creatorName": "王五",
        "creatorAvatarUrl": "https://.../avatar.png",
        "creatorMajor": "软件工程",
        "rewardTypeId": 2,
        "rewardTypeName": "现金",
        "rewardAmount": 500.00,
        "createdAt": "2025-05-10T14:00:00",
        "deadline": "2025-07-31T23:59:59",
        "status": "recruiting",
        "statusText": "招募中",
        "maxParticipants": 3,
        "currentParticipants": 0,
        "viewCount": 16, // 浏览次数已增加
        "location": "线上协作",
        "attachments": [ // 附件列表 (如果实现了)
          // { ... }
        ]
      }
    }
    ```

### 4.4 更新任务

*   **URL**: `PUT /tasks/{id}`
*   **描述**: 更新指定ID的任务信息（需要创建者权限）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
    *   `Content-Type: application/json` (必需)
*   **请求参数 (Path)**:
    *   `id` (integer, 必需): 要更新的任务ID。
*   **请求体**: (结构同创建任务，包含需要更新的字段)
    ```json
    {
      "title": "校园二手物品交易平台开发 V2.0",
      "description": "在V1.0基础上增加支付功能和评价体系。",
      "deadline": "2025-08-31T23:59:59"
    }
    ```
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": true
    }
    ```

### 4.5 增加任务浏览量

*   **URL**: `POST /tasks/{id}/view`
*   **描述**: 增加指定任务的浏览次数。**注意**: 获取任务详情接口 (`GET /tasks/{id}`) 内部已自动调用此逻辑。
*   **请求参数 (Path)**:
    *   `id` (integer, 必需): 任务ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": true
    }
    ```

### 4.6 更新任务状态

*   **URL**: `PUT /tasks/{id}/status`
*   **描述**: 更新指定任务的状态（需要创建者权限）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
    *   `Content-Type: application/json` (必需)
*   **请求参数 (Path)**:
    *   `id` (integer, 必需): 任务ID。
*   **请求体**:
    ```json
    {
      "status": "canceled", // 新状态 (e.g., ongoing, completed, canceled)
      "cancelReason": "需求变更" // 如果 status 是 canceled，此字段可选
    }
    ```
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": true
    }
    ```

---

## 5. 任务申请接口 (`/task-applications`)

### 5.1 创建任务申请

*   **URL**: `POST /task-applications`
*   **描述**: 用户申请参与某个任务。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
    *   `Content-Type: application/json` (必需)
*   **请求体**:
    ```json
    {
      "taskId": 25, // 要申请的任务ID
      "message": "我对这个任务很感兴趣，有相关经验，希望能加入。" // 申请留言
    }
    ```
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "id": 51, // 新创建的申请ID
        "applyTime": "2025-05-11T10:00:00" // 申请时间
      }
    }
    ```

### 5.2 获取任务申请列表

*   **URL**: `GET /task-applications/list`
*   **描述**: 获取任务申请列表。根据`role`参数决定查询范围：
    *   `role=applicant` (默认): 查询当前用户发出的申请。
    *   `role=creator`: 查询当前用户创建的任务收到的申请。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Query)**:
    *   `taskId` (long, 可选): 按任务ID筛选。
    *   `status` (string, 可选): 按申请状态筛选 (`pending`, `approved`, `rejected`)。
    *   `role` (string, 可选, 默认: `applicant`): 查询角色 (`applicant` 或 `creator`)。
    *   `pageNum` (integer, 可选, 默认: 1): 页码。
    *   `pageSize` (integer, 可选, 默认: 10): 每页数量。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "pageNum": 1,
        "pageSize": 10,
        "total": 5,
        "pages": 1,
        "list": [
          {
            "id": 51,
            "taskId": 25,
            "taskTitle": "校园二手物品交易平台开发",
            "applicantId": 16,
            "applicantName": "赵六",
            "applicantAvatarUrl": "https://.../avatar2.png",
            "applicantMajor": "信息管理",
            "message": "我对这个任务很感兴趣...",
            "status": "pending",
            "statusText": "待处理",
            "appliedAt": "2025-05-11T10:00:00"
            // 如果是 creator 角色，可能还有 reviewerId, reviewedAt, reviewNotes 字段
          }
          // ...
        ],
        "hasPrevious": false,
        "hasNext": false
      }
    }
    ```

### 5.3 处理任务申请 (任务创建者)

*   **URL**: `PUT /task-applications/{id}`
*   **描述**: 任务创建者审核（批准或拒绝）收到的任务申请。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
    *   `Content-Type: application/json` (必需)
*   **请求参数 (Path)**:
    *   `id` (long, 必需): 要处理的任务申请ID。
*   **请求体**:
    ```json
    {
      "status": "approved", // 处理结果: "approved" 或 "rejected"
      "reviewNotes": "欢迎加入！" // 可选的处理备注
    }
    ```
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "success": true
      }
    }
    ```

### 5.4 取消任务申请 (申请者)

*   **URL**: `DELETE /task-applications/{id}`
*   **描述**: 申请者取消自己提交的任务申请（仅限`pending`状态）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Path)**:
    *   `id` (long, 必需): 要取消的任务申请ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "success": true
      }
    }
    ```

---

## 6. 任务参与接口 (`/task-participations`)

### 6.1 获取用户参与的任务列表

*   **URL**: `GET /task-participations/list`
*   **描述**: 获取当前登录用户参与的所有任务列表。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Query)**:
    *   `status` (string, 可选): 按参与状态筛选 (`joined`, `in_progress`, `completed`, `left`)。
    *   `pageNum` (integer, 可选, 默认: 1): 页码。
    *   `pageSize` (integer, 可选, 默认: 10): 每页数量。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "pageNum": 1,
        "pageSize": 10,
        "total": 3,
        "pages": 1,
        "list": [
          {
            "userId": 16,
            "taskId": 25,
            "taskTitle": "校园二手物品交易平台开发",
            "joinedAt": "2025-05-11T11:00:00", // 加入时间 (批准申请后)
            "status": "joined", // 当前参与状态
            "statusText": "已加入",
            "taskDeadline": "2025-07-31T23:59:59",
            "taskCategoryName": "开发类",
            "taskRewardTypeName": "现金",
            "taskRewardAmount": 500.00
          }
          // ...
        ],
        "hasPrevious": false,
        "hasNext": false
      }
    }
    ```

### 6.2 更新参与状态

*   **URL**: `PUT /task-participations/status`
*   **描述**: 用户更新自己参与某个任务的状态（例如，标记为已完成或中途离开）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
    *   `Content-Type: application/json` (必需)
*   **请求体**:
    ```json
    {
      "taskId": 25, // 任务ID
      "status": "completed" // 新的状态 (e.g., completed, left)
    }
    ```
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "success": true
      }
    }
    ```

### 6.3 检查用户是否参与任务

*   **URL**: `GET /task-participations/check`
*   **描述**: 检查当前用户是否已经参与了指定的任务。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Query)**:
    *   `taskId` (long, 必需): 要检查的任务ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "participated": true, // 是否参与
        "status": "joined" // 如果参与，当前的参与状态
      }
    }
    ```
    或者 (未参与):
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "participated": false,
        "status": null
      }
    }
    ```

---

## 7. 竞赛管理接口 (`/competitions`)

### 7.1 分页查询竞赛列表

*   **URL**: `GET /competitions/list`
*   **描述**: 分页查询竞赛列表，支持多种筛选条件。
*   **请求参数 (Query)**:
    *   `pageNum` (integer, 可选, 默认: 1): 页码。
    *   `pageSize` (integer, 可选, 默认: 20): 每页数量。
    *   `keyword` (string, 可选): 搜索关键词（匹配标题、描述）。
    *   `level` (string, 可选): 按级别筛选 (`国家级`, `省级`, `市级`, `校级`, `院级`)。
    *   `isHot` (boolean, 可选): 是否只看热门竞赛。
    *   `categoryId` (byte, 可选): 按分类ID筛选。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "pageNum": 1,
        "pageSize": 20,
        "total": 15,
        "pages": 1,
        "list": [
          {
            "id": 1,
            "title": "第15届全国大学生程序设计竞赛",
            "level": "国家级",
            "organizer": "教育部",
            "registrationStart": "2025-03-01T00:00:00",
            "registrationDeadline": "2025-04-01T23:59:59",
            "status": "0", // 状态码
            "statusText": "报名中", // 状态文本
            "isHot": true,
            "categoryName": "计算机类", // 主要分类名称
            "coverImageUrl": "https://.../cover.jpg" // 封面图URL
          }
          // ...
        ],
        "hasPrevious": false,
        "hasNext": false
      }
    }
    ```

### 7.2 按分类获取竞赛列表

*   **URL**: `GET /competitions/by-category/{categoryId}`
*   **描述**: 获取指定分类下的竞赛列表（分页，支持筛选）。
*   **请求参数 (Path)**:
    *   `categoryId` (byte, 必需): 竞赛分类ID。
*   **请求参数 (Query)**: (同 `/competitions/list`)
    *   `pageNum`, `pageSize`, `keyword`, `level`, `isHot`
*   **响应体 (成功 - 200)**: (结构同 `/competitions/list`)

### 7.3 获取竞赛详情

*   **URL**: `GET /competitions/{id}`
*   **描述**: 获取指定ID的竞赛详细信息。
*   **请求参数 (Path)**:
    *   `id` (integer, 必需): 竞赛ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "id": 1,
        "title": "第15届全国大学生程序设计竞赛",
        "registrationStart": "2025-03-01T00:00:00",
        "registrationDeadline": "2025-04-01T23:59:59",
        "status": "0",
        "statusText": "报名中",
        "level": "国家级",
        "organizer": "教育部",
        "description": "竞赛详细介绍...",
        "shortDescription": "竞赛简介...",
        "requirements": "参赛要求...",
        "isHot": true,
        "teamSize": 3, // 每队人数
        "teamMax": 5, // 最多人数
        "websiteUrl": "http://...", // 官网链接
        "viewCount": 105, // 浏览次数
        "contactInfo": { // 联系方式
          "phone": "010-12345678",
          "email": "contest@example.com"
        },
        "categoryNames": ["计算机类", "算法类"], // 所属分类名称列表
        "attachments": [ // 附件列表
          {
            "fileId": 101,
            "fileName": "竞赛章程.pdf",
            "fileUrl": "https://..."
          }
        ],
        "coverImageUrl": "https://.../cover.jpg" // 封面图URL
      }
    }
    ```

### 7.4 创建竞赛 (管理员)

*   **URL**: `POST /competitions`
*   **描述**: 创建新的竞赛信息（需要管理员权限）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token, 需要管理员权限)
    *   `Content-Type: application/json` (必需)
*   **请求体**:
    ```json
    {
      "title": "...",
      "registrationStart": "...",
      "registrationDeadline": "...",
      "status": "0",
      "level": "省级",
      "organizer": "...",
      "description": "...",
      "shortDescription": "...", // 可选
      "requirements": "...", // 可选
      "isHot": false, // 可选
      "teamSize": 3,
      "teamMax": 5,
      "websiteUrl": "...", // 可选
      "contactInfo": { ... },
      "categoryIds": [1, 3] // 关联的分类ID列表
    }
    ```
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": 10 // 新创建的竞赛ID
    }
    ```

### 7.5 更新竞赛 (管理员)

*   **URL**: `PUT /competitions/{id}`
*   **描述**: 更新指定ID的竞赛信息（需要管理员权限）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token, 需要管理员权限)
    *   `Content-Type: application/json` (必需)
*   **请求参数 (Path)**:
    *   `id` (integer, 必需): 要更新的竞赛ID。
*   **请求体**: (结构同创建竞赛，包含需要更新的字段)
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": null // 或者 true
    }
    ```

### 7.6 删除竞赛 (管理员)

*   **URL**: `DELETE /competitions/{id}`
*   **描述**: 删除指定ID的竞赛信息（需要管理员权限）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token, 需要管理员权限)
*   **请求参数 (Path)**:
    *   `id` (integer, 必需): 要删除的竞赛ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": null // 或者 true
    }
    ```

### 7.7 增加竞赛浏览次数

*   **URL**: `POST /competitions/{id}/view`
*   **描述**: 增加指定竞赛的浏览次数。**注意**: 获取竞赛详情接口 (`GET /competitions/{id}`) 内部可能已包含此逻辑。
*   **请求参数 (Path)**:
    *   `id` (integer, 必需): 竞赛ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": null // 或者 true
    }
    ```

### 7.8 获取所有竞赛基本信息 (用于选择框)

*   **URL**: `GET /competitions/basic-info`
*   **描述**: 获取所有竞赛的ID和标题，用于下拉选择框等场景。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": [
        {
          "id": 1,
          "title": "第15届全国大学生程序设计竞赛"
        },
        {
          "id": 2,
          "title": "蓝桥杯全国软件和信息技术专业人才大赛"
        }
        // ...
      ]
    }
    ```

### 7.9 获取竞赛所属分类ID列表

*   **URL**: `GET /competitions/{id}/categories`
*   **描述**: 获取指定竞赛关联的所有分类ID。
*   **请求参数 (Path)**:
    *   `id` (integer, 必需): 竞赛ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": [1, 3] // 分类ID列表
    }
    ```

---

## 8. 竞赛分类管理接口 (`/competitions/categories`)

### 8.1 获取所有竞赛分类

*   **URL**: `GET /competitions/categories`
*   **描述**: 获取所有已定义的竞赛分类。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": [
        {
          "id": 1,
          "name": "计算机类",
          "iconUrl": "https://.../icon1.png"
        },
        {
          "id": 2,
          "name": "设计类",
          "iconUrl": "https://.../icon2.png"
        }
        // ...
      ]
    }
    ```

### 8.2 创建竞赛分类 (管理员)

*   **URL**: `POST /competitions/categories`
*   **描述**: 创建新的竞赛分类（需要管理员权限）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token, 需要管理员权限)
    *   `Content-Type: application/json` (必需)
*   **请求体**:
    ```json
    {
      "name": "物理类",
      "iconUrl": "https://.../icon_physics.png" // 可选
    }
    ```
*   **响应体 (成功 - 200)**: (返回创建的分类信息，结构同获取列表中的单个对象)

### 8.3 创建竞赛分类并上传图标 (管理员)

*   **URL**: `POST /competitions/categories/create-with-icon`
*   **描述**: 创建新的竞赛分类同时上传图标（需要管理员权限）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token, 需要管理员权限)
    *   `Content-Type: multipart/form-data` (必需)
*   **请求参数 (form-data)**:
    *   `name` (string, 必需): 分类名称。
    *   `file` (file, 必需): 图标文件。
*   **响应体 (成功 - 200)**: (返回创建的分类信息，包含新上传的图标URL)

### 8.4 更新分类图标 (管理员)

*   **URL**: `POST /competitions/categories/{categoryId}/icon`
*   **描述**: 更新指定分类的图标（需要管理员权限）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token, 需要管理员权限)
    *   `Content-Type: multipart/form-data` (必需)
*   **请求参数 (Path)**:
    *   `categoryId` (byte, 必需): 要更新的分类ID。
*   **请求参数 (form-data)**:
    *   `file` (file, 必需): 新的图标文件。
*   **响应体 (成功 - 200)**: (返回更新后的分类信息)

### 8.5 删除竞赛分类 (管理员)

*   **URL**: `DELETE /competitions/categories/{categoryId}`
*   **描述**: 删除指定的竞赛分类（需要管理员权限，且分类下无关联竞赛）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token, 需要管理员权限)
*   **请求参数 (Path)**:
    *   `categoryId` (byte, 必需): 要删除的分类ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": null // 或者 true
    }
    ```
*   **响应体 (失败 - 分类下有竞赛)**:
    ```json
    {
      "code": 500,
      "message": "该分类下有关联的竞赛，无法删除",
      "data": null
    }
    ```

---

## 9. 竞赛附件管理接口 (`/competitions/attachments`)

### 9.1 上传竞赛附件

*   **URL**: `POST /competitions/attachments/upload`
*   **描述**: 为指定竞赛上传附件。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
    *   `Content-Type: multipart/form-data` (必需)
*   **请求参数 (form-data)**:
    *   `competitionId` (integer, 必需): 竞赛ID。
    *   `file` (file, 必需): 附件文件。
    *   `isCoverImage` (boolean, 可选, 默认: false): 是否将此附件设为封面图。
*   **响应体 (成功 - 200)**: (返回上传的文件信息，结构同通用上传接口)
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "fileId": 12349,
        "url": "https://...",
        "originalFilename": "attachment.pdf",
        "size": 1024000
      }
    }
    ```

### 9.2 设置竞赛封面图

*   **URL**: `POST /competitions/attachments/set-cover`
*   **描述**: 将已上传的某个附件设置或更换为竞赛的封面图。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
    *   `Content-Type: application/x-www-form-urlencoded` 或 `multipart/form-data`
*   **请求参数 (form-data 或 Query)**:
    *   `competitionId` (integer, 必需): 竞赛ID。
    *   `fileId` (long, 必需): 要设为封面的附件文件ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": null
    }
    ```

### 9.3 删除竞赛附件

*   **URL**: `DELETE /competitions/attachments/{competitionId}/{fileId}`
*   **描述**: 删除指定竞赛的某个附件关联（可选是否删除物理文件）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Path)**:
    *   `competitionId` (integer, 必需): 竞赛ID。
    *   `fileId` (long, 必需): 要删除的附件文件ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": null
    }
    ```

### 9.4 获取竞赛附件列表

*   **URL**: `GET /competitions/attachments/list/{competitionId}`
*   **描述**: 获取指定竞赛的所有附件列表。
*   **请求参数 (Path)**:
    *   `competitionId` (integer, 必需): 竞赛ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": [
        {
          "fileId": 12349,
          "originalFilename": "attachment.pdf",
          "url": "https://...",
          "category": "competition_attachment",
          "mimeType": "application/pdf",
          "size": 1024000,
          "reviewStatus": "approved",
          "uploaderId": 5,
          "uploadedAt": "2025-05-11T12:00:00",
          "isCoverImage": false // 是否为封面
        },
        {
          "fileId": 12350,
          "originalFilename": "cover.jpg",
          "url": "https://...",
          // ...
          "isCoverImage": true
        }
        // ...
      ]
    }
    ```

### 9.5 上传竞赛封面图 (便捷接口)

*   **URL**: `POST /competitions/attachments/upload-cover`
*   **描述**: 直接上传图片并将其设置为竞赛的封面图（会替换旧封面）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
    *   `Content-Type: multipart/form-data` (必需)
*   **请求参数 (form-data)**:
    *   `competitionId` (integer, 必需): 竞赛ID。
    *   `file` (file, 必需): 封面图片文件。
*   **响应体 (成功 - 200)**: (返回上传的文件信息)

### 9.6 按类型获取竞赛附件列表

*   **URL**: `GET /competitions/attachments/list-by-type/{competitionId}`
*   **描述**: 获取指定竞赛的附件列表，并按文件类型分组（image, document）。
*   **请求参数 (Path)**:
    *   `competitionId` (integer, 必需): 竞赛ID。
*   **请求参数 (Query)**:
    *   `fileType` (string, 可选, 默认: `all`): 文件类型筛选 (`image`, `document`, `all`)。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "image": [
           { ... } // 图片文件列表，结构同 /list/{competitionId}
        ],
        "document": [
           { ... } // 文档文件列表
        ]
      }
    }
    ```

---

## 10. 队伍管理接口 (`/teams`)

### 10.1 创建队伍

*   **URL**: `POST /teams`
*   **描述**: 创建一个新的队伍。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
    *   `Content-Type: application/json` (必需)
*   **请求体**:
    ```json
    {
      "competitionId": 1, // 关联的竞赛ID
      "name": "我的梦之队",
      "description": "队伍描述...",
      "direction": "人工智能", // 竞赛方向
      "recruitmentDeadline": "2025-06-30T23:59:59", // 招募截止时间
      "contactInfo": {
        "phone": "136...",
        "qq": "123...",
        "wechat": "team_leader_wechat"
      },
      "teacherIds": [2, 6], // 指导老师用户ID列表
      "teacherRoles": ["主指导老师", "副指导老师"], // 对应的老师角色 (可选，与teacherIds一一对应)
      "roles": [ // 角色需求列表
        {
          "name": "算法工程师",
          "requiredCount": 2,
          "description": "负责核心算法...",
          "skillRequirements": ["Python", "机器学习"]
        },
        {
          "name": "前端开发",
          "requiredCount": 1,
          "description": "负责UI...",
          "skillRequirements": ["React", "JavaScript"]
        }
      ]
    }
    ```
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": 30 // 新创建的队伍ID
    }
    ```

### 10.2 分页查询队伍列表

*   **URL**: `GET /teams/list`
*   **描述**: 分页查询队伍列表，支持多种筛选和排序。
*   **请求参数 (Query)**:
    *   `pageNum` (integer, 可选, 默认: 1): 页码。
    *   `pageSize` (integer, 可选, 默认: 10): 每页数量。
    *   `keyword` (string, 可选): 搜索关键词（匹配队伍名称、描述、竞赛名称）。
    *   `categoryId` (byte, 可选): 按竞赛分类ID筛选。
    *   `competitionId` (integer, 可选): 按竞赛ID筛选。
    *   `orderByViewCount` (boolean, 可选, 默认: false): 是否按浏览量降序排序。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "pageNum": 1,
        "pageSize": 10,
        "total": 25,
        "pages": 3,
        "list": [
          {
            "id": 30,
            "name": "我的梦之队",
            "competitionId": 1,
            "competitionName": "第15届全国大学生程序设计竞赛",
            "leaderId": 15,
            "leaderName": "张三",
            "leaderAvatarUrl": "https://...",
            "description": "队伍描述...",
            "direction": "人工智能",
            "publishDate": "2025-05-12T09:00:00",
            "publishDateFormatted": "2025-05-12 09:00",
            "recruitmentDeadline": "2025-06-30T23:59:59",
            "recruitmentDeadlineFormatted": "2025-06-30 23:59",
            "status": "0",
            "statusText": "招募中",
            "viewCount": 10,
            "maxMemberCount": 4, // 总需求人数 (队长+角色需求)
            "currentMemberCount": 1, // 当前成员数 (队长+已加入成员)
            "teamProgress": 25, // 组队进度百分比
            "roles": [ // 角色需求摘要
              {
                "id": 40,
                "name": "算法工程师",
                "requiredCount": 2,
                "currentCount": 0,
                "skillRequirements": ["Python", "机器学习"]
              },
              // ...
            ],
            "teamMemberAvatars": "https://...,https://..." // 成员头像URL列表 (逗号分隔, 不含队长)
          }
          // ...
        ],
        "hasPrevious": false,
        "hasNext": true
      }
    }
    ```

### 10.3 获取队伍详情

*   **URL**: `GET /teams/{id}`
*   **描述**: 获取指定ID的队伍详细信息。
*   **请求参数 (Path)**:
    *   `id` (integer, 必需): 队伍ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "id": 30,
        "name": "我的梦之队",
        "competitionId": 1,
        "competitionName": "第15届全国大学生程序设计竞赛",
        "competitionLevel": "国家级",
        "leaderId": 15,
        "leaderName": "张三",
        "leaderAvatarUrl": "https://...",
        "leaderMajor": "计算机科学",
        "description": "队伍描述...",
        "direction": "人工智能",
        "publishDate": "2025-05-12T09:00:00",
        "publishDateFormatted": "2025-05-12 09:00",
        "recruitmentDeadline": "2025-06-30T23:59:59",
        "recruitmentDeadlineFormatted": "2025-06-30 23:59",
        "contactInfo": { ... },
        "status": "0",
        "statusText": "招募中",
        "viewCount": 11, // 浏览次数增加
        "teachers": [ // 指导老师列表
          {
            "id": 2,
            "name": "李教授",
            "role": "主指导老师",
            "avatarUrl": "https://..."
          }
          // ...
        ],
        "roles": [ // 角色详情列表
          {
            "id": 40,
            "teamId": 30,
            "name": "算法工程师",
            "requiredCount": 2,
            "currentCount": 0,
            "description": "负责核心算法...",
            "skillRequirements": ["Python", "机器学习"]
          }
          // ...
        ],
        "members": [ // 成员列表 (含队长)
          {
            "userId": 15,
            "userName": "张三",
            "userMajor": "计算机科学",
            "userAvatarUrl": "https://...",
            "isLeader": true,
            "roleId": null, // 队长无角色ID
            "roleName": "队长" // 队长角色名称
          },
          {
            "userId": 17,
            "userName": "王小明",
            "userMajor": "人工智能",
            "userAvatarUrl": "https://...",
            "isLeader": false,
            "roleId": 40, // 成员所属角色ID
            "roleName": "算法工程师" // 成员角色名称
          }
          // ...
        ]
      }
    }
    ```

### 10.4 获取队伍成员列表

*   **URL**: `GET /teams/{teamId}/members`
*   **描述**: 获取指定队伍的所有成员信息（包括队长）。
*   **请求参数 (Path)**:
    *   `teamId` (integer, 必需): 队伍ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": [
        { // 结构同详情中的 members 数组元素
          "userId": 15,
          "userName": "张三",
          "userMajor": "计算机科学",
          "userAvatarUrl": "https://...",
          "isLeader": true,
          "roleId": null,
          "roleName": "队长"
        },
        // ...
      ]
    }
    ```

### 10.5 获取我的队伍列表

*   **URL**: `GET /teams/my`
*   **描述**: 获取当前登录用户参与的所有队伍（作为队长或队员）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": [
        {
          "id": 30,
          "name": "我的梦之队",
          "description": "队伍描述...",
          "competitionId": 1,
          "competitionName": "第15届全国大学生程序设计竞赛",
          "leaderId": 15,
          "leaderName": "张三",
          "leaderAvatarUrl": "https://...",
          "leaderMajor": "计算机科学",
          "roleType": "leader", // "leader" 或 "member"
          "roleId": null, // 如果是队员，这里是角色ID
          "roleName": null, // 如果是队员，这里是角色名称
          "direction": "人工智能",
          "status": "0",
          "statusText": "招募中",
          "recruitmentDeadline": "2025-06-30T23:59:59",
          "publishDate": "2025-05-12T09:00:00",
          "memberCount": 2, // 当前总人数 (队长+成员)
          "teamRoles": [ // 队伍的角色需求列表
            {
              "id": 40,
              "name": "算法工程师",
              "requiredCount": 2,
              "currentCount": 1,
              "description": "...",
              "progress": 50 // 角色招募进度
            }
            // ...
          ]
        },
        // ... 其他我参与的队伍
      ]
    }
    ```

### 10.6 队长解散队伍

*   **URL**: `POST /teams/{teamId}/dissolve`
*   **描述**: 队伍的创建者（队长）解散队伍。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Path)**:
    *   `teamId` (integer, 必需): 要解散的队伍ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "success": true,
        "message": "队伍已成功解散"
      }
    }
    ```
*   **响应体 (失败)**:
    ```json
    {
      "code": 500, // 或 403
      "message": "只有队长可以解散队伍", // 或 "队伍不存在"
      "data": null
    }
    ```

### 10.7 获取AI推荐队伍

*   **URL**: `GET /teams/recommend`
*   **描述**: 根据当前用户的个人信息（专业、技能等）获取AI推荐的队伍列表。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Query)**: (同 `/teams/list`)
    *   `pageNum`, `pageSize`, `keyword`, `categoryId`, `competitionId`
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "aiSummary": "尊敬的张三同学，智能推荐系统已根据您的...为您推荐了5支最匹配的队伍...",
        "recommendedTeams": [
          {
            "id": 35,
            "name": "AI创新实践队",
            // ... (字段同 /teams/list 中的元素)
            "matchScore": 92, // AI匹配度得分 (75-95)
            "reason": "该队伍研究方向与您的专业高度相关，且算法工程师角色需求与您的技能标签匹配。", // 推荐理由
            "recommendedRole": "算法工程师" // AI推荐申请的角色
          }
          // ...
        ]
      }
    }
    ```

### 10.8 检查用户是否申请或加入队伍

*   **URL**: `GET /teams/{teamId}/has-applied`
*   **描述**: 检查当前用户是否已经是指定队伍的成员、队长，或者已经提交了申请。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Path)**:
    *   `teamId` (integer, 必需): 要检查的队伍ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": true // true 表示已申请或已加入, false 表示未申请且未加入
    }
    ```

---

## 11. 队伍申请接口 (`/team-applications`)

### 11.1 创建队伍申请

*   **URL**: `POST /team-applications`
*   **描述**: 用户申请加入某个队伍的特定角色。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
    *   `Content-Type: application/json` (必需)
*   **请求体**:
    ```json
    {
      "teamId": 30, // 要申请的队伍ID
      "roleId": 40, // 要申请的角色ID
      "message": "我对算法很感兴趣，希望能加入团队学习。" // 申请留言
    }
    ```
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "id": 60, // 新创建的申请ID
        "applyTime": "2025-05-12T10:30:00" // 申请时间
      }
    }
    ```

### 11.2 获取队伍申请列表

*   **URL**: `GET /team-applications/list`
*   **描述**: 获取队伍申请列表。根据`role`参数决定查询范围：
    *   `role=applicant` (默认): 查询当前用户发出的申请。
    *   `role=leader`: 查询当前用户作为队长的队伍收到的申请。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Query)**:
    *   `teamId` (long, 可选): 按队伍ID筛选。
    *   `status` (string, 可选): 按申请状态筛选 (`pending`, `approved`, `rejected`)。
    *   `role` (string, 可选, 默认: `applicant`): 查询角色 (`applicant` 或 `leader`)。
    *   `pageNum` (integer, 可选, 默认: 1): 页码。
    *   `pageSize` (integer, 可选, 默认: 10): 每页数量。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "pageNum": 1,
        "pageSize": 10,
        "total": 2,
        "pages": 1,
        "list": [
          {
            "id": 60,
            "teamId": 30,
            "teamName": "我的梦之队",
            "roleId": 40,
            "roleName": "算法工程师",
            "applicantId": 18,
            "applicantName": "孙七",
            "applicantAvatarUrl": "https://...",
            "applicantMajor": "数学",
            "message": "我对算法很感兴趣...",
            "status": "pending",
            "statusText": "待处理",
            "appliedAt": "2025-05-12T10:30:00"
            // 如果是 leader 角色，可能还有 reviewerId, reviewedAt, reviewNotes 字段
          }
          // ...
        ],
        "hasPrevious": false,
        "hasNext": false
      }
    }
    ```

### 11.3 处理队伍申请 (队长)

*   **URL**: `PUT /team-applications/{id}`
*   **描述**: 队伍的队长审核（批准或拒绝）收到的加入申请。批准后会自动将申请人添加为对应角色的成员。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
    *   `Content-Type: application/json` (必需)
*   **请求参数 (Path)**:
    *   `id` (long, 必需): 要处理的队伍申请ID。
*   **请求体**:
    ```json
    {
      "status": "approved", // 处理结果: "approved" 或 "rejected"
      "reviewNotes": "欢迎加入团队！" // 可选的处理备注
    }
    ```
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "success": true,
        "message": "申请已批准，申请人已添加为队伍成员", // 批准时会有额外消息
        "memberAdded": true // 批准时此字段为 true
      }
    }
    ```
    或者 (拒绝时):
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "success": true,
        "message": "申请已拒绝"
      }
    }
    ```

### 11.4 取消队伍申请 (申请者)

*   **URL**: `DELETE /team-applications/{id}`
*   **描述**: 申请者取消自己提交的队伍申请（仅限`pending`状态）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Path)**:
    *   `id` (long, 必需): 要取消的队伍申请ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "success": true
      }
    }
    ```

---

## 12. 队伍成员管理接口 (`/team-members`)

### 12.1 队员离开队伍

*   **URL**: `DELETE /team-members/teams/{teamId}`
*   **描述**: 队伍成员主动离开队伍（队长不能使用此接口）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Path)**:
    *   `teamId` (integer, 必需): 要离开的队伍ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "success": true,
        "message": "成功离开队伍"
      }
    }
    ```
*   **响应体 (失败)**:
    ```json
    {
      "code": 500, // 或 400, 403
      "message": "队长不能离开队伍，请使用解散功能", // 或 "您不是该队伍成员"
      "data": null
    }
    ```

---

## 13. 队伍指导老师接口 (`/teamTeachers`)

### 13.1 根据老师ID获取指导的队伍

*   **URL**: `GET /teamTeachers/teacher/{teacherId}/teams`
*   **描述**: 获取指定老师指导的所有队伍列表。
*   **请求参数 (Path)**:
    *   `teacherId` (integer, 必需): 老师的用户ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": [
        { // 队伍基本信息
          "id": 30,
          "competitionId": 1,
          "leaderId": 15,
          "name": "我的梦之队",
          "description": "...",
          // ... 其他 Teams 实体字段
        }
        // ...
      ]
    }
    ```

### 13.2 根据队伍ID获取指导老师

*   **URL**: `GET /teamTeachers/team/{teamId}/teachers`
*   **描述**: 获取指定队伍的所有指导老师信息（包含头像和角色）。
*   **请求参数 (Path)**:
    *   `teamId` (integer, 必需): 队伍ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": [
        {
          "id": 2, // 老师的用户ID
          "name": "李教授",
          "role": "主指导老师",
          "avatarUrl": "https://..."
        },
        {
          "id": 6,
          "name": "孙教授",
          "role": "副指导老师",
          "avatarUrl": "https://..."
        }
      ]
    }
    ```

---

## 14. 通知接口 (`/notifications`)

### 14.1 获取用户通知列表

*   **URL**: `GET /notifications`
*   **描述**: 分页获取当前登录用户的通知列表。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Query)**:
    *   `pageNum` (integer, 可选, 默认: 1): 页码。
    *   `pageSize` (integer, 可选, 默认: 10): 每页数量。
    *   `category` (string, 可选): 按通知分类筛选 (e.g., `system`, `team`, `task`)。
    *   `isRead` (boolean, 可选): 按已读/未读状态筛选。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "records": [
          {
            "id": 7,
            "userId": 11,
            "title": "新的队伍申请",
            "content": "用户 张三 申请加入队伍 测试战队，应聘 前端开发 职位。申请内容：我希望加入贵队...", // 动态生成的内容
            "typeId": "team_application_received", // 通知类型
            "category": "team", // 通知分类
            "isRead": false,
            "createdAt": "2025-05-04T16:19:07.1678324",
            "relatedId": 16, // 关联的申请ID
            "relatedType": "team_application", // 关联类型
            "dynamicData": { // 原始动态数据
              "applicant_name": "张三",
              "team_name": "测试战队",
              "role_name": "前端开发",
              "message": "我希望加入贵队...",
              "application_id": "16"
            }
          }
          // ...
        ],
        "total": 5,
        "size": 10,
        "current": 1,
        "pages": 1
      }
    }
    ```

### 14.2 获取未读通知数量

*   **URL**: `GET /notifications/unread/count`
*   **描述**: 获取当前登录用户的未读通知数量。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": 3 // 未读通知数量
    }
    ```

### 14.3 标记通知为已读

*   **URL**: `PUT /notifications/{id}/read`
*   **描述**: 将指定ID的通知标记为已读。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Path)**:
    *   `id` (long, 必需): 通知ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": true
    }
    ```

### 14.4 标记所有通知为已读

*   **URL**: `PUT /notifications/read/all`
*   **描述**: 将当前用户的所有未读通知标记为已读。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": 3 // 成功标记为已读的数量
    }
    ```

### 14.5 删除通知

*   **URL**: `DELETE /notifications/{id}`
*   **描述**: 删除指定ID的通知。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Path)**:
    *   `id` (long, 必需): 通知ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": true
    }
    ```

### 14.6 批量删除通知

*   **URL**: `DELETE /notifications/batch`
*   **描述**: 批量删除指定ID列表的通知。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
    *   `Content-Type: application/json` (必需)
*   **请求体**:
    ```json
    [7, 8, 9] // 要删除的通知ID列表
    ```
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": 3 // 成功删除的数量
    }
    ```

---

## 15. 技能标签接口 (`/api/skill-tags`)

### 15.1 获取所有技能标签分类

*   **URL**: `GET /api/skill-tags/categories`
*   **描述**: 获取系统中定义的所有技能标签分类名称。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": [
        "技术类",
        "设计类",
        "学术类",
        "管理类",
        "其他"
      ]
    }
    ```

### 15.2 获取所有技能标签 (按分类分组)

*   **URL**: `GET /api/skill-tags/group-by-category`
*   **描述**: 获取所有技能标签，并按分类进行分组。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "技术类": [
          {
            "id": 1,
            "tagName": "Java",
            "category": "技术类",
            "description": null,
            "icon": null
          },
          // ...
        ],
        "设计类": [
          {
            "id": 10,
            "tagName": "UI设计",
            "category": "设计类",
            "description": "用户界面设计",
            "icon": null
          }
          // ...
        ],
        // ... 其他分类
      }
    }
    ```

### 15.3 按分类获取技能标签

*   **URL**: `GET /api/skill-tags`
*   **描述**: 获取指定分类下的技能标签列表。
*   **请求参数 (Query)**:
    *   `category` (string, 可选): 技能分类名称。如果省略，则返回所有标签。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": [ // 结构同分组接口中的单个标签对象
        {
          "id": 1,
          "tagName": "Java",
          "category": "技术类",
          // ...
        }
        // ...
      ]
    }
    ```

### 15.4 添加技能标签

*   **URL**: `POST /api/skill-tags`
*   **描述**: 添加新的技能标签（通常需要管理员权限）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token, 可能需要管理员权限)
    *   `Content-Type: application/json` (必需)
*   **请求体**:
    ```json
    {
      "tagName": "Docker",
      "category": "技术类", // 必需，且需为枚举值之一
      "description": "容器化技术", // 可选
      "icon": "icon-docker" // 可选
    }
    ```
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": 25 // 新添加的标签ID
    }
    ```

### 15.5 删除技能标签

*   **URL**: `DELETE /api/skill-tags/{id}`
*   **描述**: 删除指定的技能标签（通常需要管理员权限）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token, 可能需要管理员权限)
*   **请求参数 (Path)**:
    *   `id` (integer, 必需): 要删除的技能标签ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": true
    }
    ```

---

## 16. 学校管理接口 (`/api/schools`)

### 16.1 添加学校

*   **URL**: `POST /api/schools`
*   **描述**: 添加新的学校信息（通常需要管理员权限）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token, 可能需要管理员权限)
    *   `Content-Type: application/json` (必需)
*   **请求体**:
    ```json
    {
      "name": "北京邮电大学", // 学校名称，必需
      "province": "北京" // 所属省份，必需
    }
    ```
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": 101 // 新添加的学校ID
    }
    ```

### 16.2 查询学校列表

*   **URL**: `GET /api/schools`
*   **描述**: 查询学校列表，支持按名称关键词和省份筛选。
*   **请求参数 (Query)**:
    *   `nameKeyword` (string, 可选): 学校名称关键词。
    *   `province` (string, 可选): 所属省份。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": [
        {
          "id": 1,
          "name": "示例大学",
          "province": "北京"
        },
        {
          "id": 101,
          "name": "北京邮电大学",
          "province": "北京"
        }
        // ...
      ]
    }
    ```

### 16.3 获取所有省份列表

*   **URL**: `GET /api/schools/provinces`
*   **描述**: 获取数据库中存在的所有学校的省份列表（去重）。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": [
        "北京",
        "上海",
        "广东"
        // ...
      ]
    }
    ```

---

## 17. 荣誉勋章管理接口 (`/honor/badges`)

### 17.1 获取勋章列表

*   **URL**: `GET /honor/badges/list`
*   **描述**: 分页获取勋章定义列表，可按类型筛选。
*   **请求参数 (Query)**:
    *   `badgeType` (string, 可选): 勋章类型 (`team_competition`, `personal_achievement`, `universal`)。
    *   `pageNum` (long, 可选, 默认: 1): 页码。
    *   `pageSize` (long, 可选, 默认: 10): 每页数量。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "records": [
          {
            "badgeId": 1,
            "name": "全国赛金奖",
            "badgeType": "team_competition",
            "competitionLevel": "全国赛",
            "awardRank": "金奖",
            "icon": "https://.../gold_medal.svg",
            "glowEffect": "gold_glow",
            "rarity": 6,
            "validPeriod": { "start": "2023-01-01", "end": "2023-12-31" }, // JSON 对象
            "requirementDescription": "在全国性赛事中获得金奖"
          }
          // ...
        ],
        "total": 20,
        "size": 10,
        "current": 1,
        "pages": 2
      }
    }
    ```

### 17.2 获取勋章详情

*   **URL**: `GET /honor/badges/{badgeId}`
*   **描述**: 获取指定ID的勋章详细定义信息。
*   **请求参数 (Path)**:
    *   `badgeId` (integer, 必需): 勋章ID。
*   **响应体 (成功 - 200)**: (结构同列表中的单个对象)

### 17.3 更新勋章信息 (管理员)

*   **URL**: `PUT /honor/badges/update`
*   **描述**: 更新勋章的定义信息（需要管理员权限）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token, 需要管理员权限)
    *   `Content-Type: application/json` (必需)
*   **请求体**:
    ```json
    {
      "badgeId": 1, // 必需
      "name": "全国大学生竞赛金奖", // 可选，要更新的字段
      "rarity": 5, // 可选
      "requirementDescription": "...", // 可选
      "validPeriod": { "start": "2024-01-01", "end": "2024-12-31" } // 可选
      // ... 其他可更新字段
    }
    ```
*   **响应体 (成功 - 200)**: (返回更新后的勋章信息)

### 17.4 上传勋章图标 (管理员)

*   **URL**: `POST /honor/badges/{badgeId}/icon`
*   **描述**: 为指定的勋章上传或更新图标（需要管理员权限）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token, 需要管理员权限)
    *   `Content-Type: multipart/form-data` (必需)
*   **请求参数 (Path)**:
    *   `badgeId` (integer, 必需): 勋章ID。
*   **请求参数 (form-data)**:
    *   `file` (file, 必需): 图标文件 (图片或SVG)。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "badgeId": 1,
        "iconUrl": "https://.../new_icon.svg", // 新图标URL
        "fileId": 12351 // 新图标的文件ID
      }
    }
    ```

### 17.5 创建勋章并上传图标 (管理员)

*   **URL**: `POST /honor/badges/create/with-icon`
*   **描述**: 创建一个新的勋章定义并同时上传其图标（需要管理员权限）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token, 需要管理员权限)
    *   `Content-Type: multipart/form-data` (必需)
*   **请求参数 (form-data)**:
    *   `name` (string, 必需): 勋章名称。
    *   `badgeType` (string, 必需): 勋章类型。
    *   `file` (file, 必需): 图标文件。
    *   `competitionLevel` (string, 可选): 赛事级别。
    *   `awardRank` (string, 可选): 奖项等级。
    *   `glowEffect` (string, 可选): 发光特效。
    *   `rarity` (integer, 可选): 稀有度。
    *   `validPeriod` (string, 可选): 有效期JSON字符串, e.g., `{\"start\":\"2024-01-01\", \"end\":\"2024-12-31\"}`。
    *   `requirementDescription` (string, 可选): 获取条件描述。
*   **响应体 (成功 - 200)**: (结构同上传图标接口的响应)

---

## 18. 勋章申请管理接口 (`/badge/approvals`)

### 18.1 提交徽章申请

*   **URL**: `POST /badge/approvals/submit`
*   **描述**: 用户（个人或团队队长）提交获取某个徽章的申请。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
    *   `Content-Type: application/json` (必需)
*   **请求体**:
    ```json
    // 个人申请示例
    {
      "applicantType": "individual", // 必需
      "requestedBadge": 5, // 必需, 申请的徽章ID
      "reviewMessage": "这是我的个人成就证明材料..." // 必需, 申请说明
      // "applicantId" 会自动从token获取，不需要传
    }
    
    // 团队申请示例
    {
      "applicantType": "team", // 必需
      "teamId": 30, // 必需, 申请的团队ID
      "competitionId": 1, // 可选, 关联的具体赛事ID
      "requestedBadge": 1, // 必需, 申请的徽章ID
      "reviewMessage": "我们团队在XX竞赛中获得金奖，申请对应徽章。" // 必需, 申请说明
    }
    ```
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": 101 // 新创建的申请记录ID
    }
    ```

### 18.2 上传申请附件

*   **URL**: `POST /badge/approvals/{approvalId}/attachments`
*   **描述**: 为指定的徽章申请上传附件材料。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
    *   `Content-Type: multipart/form-data` (必需)
*   **请求参数 (Path)**:
    *   `approvalId` (integer, 必需): 徽章申请ID。
*   **请求参数 (form-data)**:
    *   `file` (file, 必需): 附件文件。
    *   `description` (string, 可选): 附件描述。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": { // 返回附件关联信息
        "approvalId": 101,
        "fileId": 12352,
        "uploadOrder": 1, // 上传顺序
        "description": "获奖证书扫描件"
      }
    }
    ```

### 18.3 批量上传申请附件

*   **URL**: `POST /badge/approvals/{approvalId}/attachments/batch`
*   **描述**: 为指定的徽章申请批量上传多个附件材料。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
    *   `Content-Type: multipart/form-data` (必需)
*   **请求参数 (Path)**:
    *   `approvalId` (integer, 必需): 徽章申请ID。
*   **请求参数 (form-data)**:
    *   `files` (file[], 必需): 附件文件列表。
    *   `descriptions` (string[], 可选): 对应的附件描述列表 (需与 files 顺序一致)。
*   **响应体 (成功 - 200)**: (返回附件关联信息列表)
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": [
        { ... }, // 第一个附件的关联信息
        { ... }  // 第二个附件的关联信息
      ]
    }
    ```

### 18.4 获取申请附件列表

*   **URL**: `GET /badge/approvals/{approvalId}/attachments`
*   **描述**: 获取指定徽章申请的所有附件文件信息。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Path)**:
    *   `approvalId` (integer, 必需): 徽章申请ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": [
        { // 文件信息
          "id": 12352,
          "originalFilename": "certificate.pdf",
          "storagePath": "https://...",
          // ... 其他 Files 实体字段
        }
        // ...
      ]
    }
    ```

### 18.5 删除申请附件

*   **URL**: `DELETE /badge/approvals/{approvalId}/attachments/{fileId}`
*   **描述**: 删除指定徽章申请的某个附件。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Path)**:
    *   `approvalId` (integer, 必需): 徽章申请ID。
    *   `fileId` (long, 必需): 要删除的附件文件ID。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": true
    }
    ```

### 18.6 获取我的徽章申请列表

*   **URL**: `GET /badge/approvals/my-applications`
*   **描述**: 获取当前用户提交的徽章申请列表（包括个人申请和作为队长的团队申请）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Query)**:
    *   `pageNum` (integer, 可选, 默认: 1): 页码。
    *   `pageSize` (integer, 可选, 默认: 10): 每页数量。
    *   `status` (string, 可选): 按申请状态筛选 (`pending`, `approved`, `rejected`, `returned`)。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "records": [
          {
            "approvalId": 101,
            "applicantType": "team",
            "teamId": 30,
            "competitionId": 1,
            "applicantId": null, // 团队申请时为空
            "requestedBadge": 1,
            "currentStatus": "pending",
            "reviewMessage": "我们团队...",
            "adminFeedback": null,
            "attachmentCount": 1,
            "createdAt": "2025-05-12T11:00:00",
            "updatedAt": "2025-05-12T11:00:00"
          }
          // ...
        ],
        "total": 5,
        "size": 10,
        "current": 1,
        "pages": 1
      }
    }
    ```

### 18.7 管理员查看申请列表

*   **URL**: `GET /badge/approvals/admin/list`
*   **描述**: 管理员分页查看所有的徽章申请列表。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token, 需要管理员权限)
*   **请求参数 (Query)**:
    *   `pageNum` (integer, 可选, 默认: 1): 页码。
    *   `pageSize` (integer, 可选, 默认: 10): 每页数量。
    *   `status` (string, 可选): 按申请状态筛选。
    *   `applicantType` (string, 可选): 按申请类型筛选 (`team`, `individual`)。
    *   `badgeId` (integer, 可选): 按申请的徽章ID筛选。
*   **响应体 (成功 - 200)**: (结构同 `/my-applications` 的响应)

### 18.8 审核徽章申请 (管理员)

*   **URL**: `POST /badge/approvals/admin/review/{approvalId}`
*   **描述**: 管理员审核指定的徽章申请。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token, 需要管理员权限)
*   **请求参数 (Path)**:
    *   `approvalId` (integer, 必需): 要审核的申请ID。
*   **请求参数 (Query 或 form-data)**:
    *   `status` (string, 必需): 审核结果 (`approved`, `rejected`, `returned`)。
    *   `reviewComment` (string, 可选): 审核意见/反馈。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": true
    }
    ```

---

## 19. 用户荣誉徽章接口 (`/user/honors`)

### 19.1 查询我的徽章列表

*   **URL**: `GET /user/honors/badges`
*   **描述**: 分页查询当前登录用户已获得的荣誉徽章列表。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Query)**:
    *   `badgeType` (string, 可选): 按徽章类型筛选。
    *   `pageNum` (integer, 可选, 默认: 1): 页码。
    *   `pageSize` (integer, 可选, 默认: 10): 每页数量。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "records": [
          {
            "userId": 15,
            "badgeId": 1,
            "badgeName": "全国赛金奖",
            "badgeType": "team_competition",
            "icon": "https://.../gold_medal.svg",
            "glowEffect": "gold_glow",
            "rarity": 6,
            "teamId": 30, // 如果是团队徽章
            "competitionId": 1, // 如果有关联赛事
            "acquiredTime": "2024-10-20T15:00:00", // 获得时间
            "expireTime": null, // 过期时间 (如果不过期则为 null)
            "requirementDescription": "在全国性赛事中获得金奖" // 徽章获取条件
          }
          // ...
        ],
        "total": 3,
        "size": 10,
        "current": 1,
        "pages": 1
      }
    }
    ```

### 19.2 查询指定用户的徽章列表 (管理员)

*   **URL**: `GET /user/honors/badges/{userId}`
*   **描述**: 管理员分页查询指定用户的徽章列表。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token, 需要管理员权限)
*   **请求参数 (Path)**:
    *   `userId` (integer, 必需): 目标用户ID。
*   **请求参数 (Query)**: (同 `/badges`)
    *   `badgeType`, `pageNum`, `pageSize`
*   **响应体 (成功 - 200)**: (结构同 `/badges` 的响应)

### 19.3 获取我的简化徽章列表

*   **URL**: `GET /user/honors/simple-badges`
*   **描述**: 获取当前用户获得的徽章的简化列表（通常用于个人主页展示）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Query)**:
    *   `badgeType` (string, 可选): 按徽章类型筛选。
    *   `limit` (integer, 可选, 默认: 10): 最大返回数量。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": [
        {
          "badgeId": 1,
          "name": "全国赛金奖",
          "icon": "https://.../gold_medal.svg",
          "rarity": 6,
          "acquiredTime": "2024-10-20T15:00:00"
        }
        // ...
      ]
    }
    ```

### 19.4 获取指定用户的简化徽章列表

*   **URL**: `GET /user/honors/simple-badges/{userId}`
*   **描述**: 获取指定用户获得的徽章的简化列表。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Path)**:
    *   `userId` (integer, 必需): 目标用户ID。
*   **请求参数 (Query)**: (同 `/simple-badges`)
    *   `badgeType`, `limit`
*   **响应体 (成功 - 200)**: (结构同 `/simple-badges` 的响应)

### 19.5 获取我的徽章统计信息

*   **URL**: `GET /user/honors/statistics`
*   **描述**: 获取当前用户获得的徽章统计信息（例如，总数、按类型分布等）。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": {
        "totalCount": 5, // 总徽章数
        "teamCompetitionCount": 2, // 团队竞赛类徽章数
        "personalAchievementCount": 1, // 个人成就类徽章数
        "universalCount": 2 // 通用类徽章数
        // 可以添加更多统计维度，如按稀有度统计
      }
    }
    ```

### 19.6 获取指定用户的徽章统计信息

*   **URL**: `GET /user/honors/statistics/{userId}`
*   **描述**: 获取指定用户获得的徽章统计信息。
*   **请求头**:
    *   `Authorization: Bearer <token>` (必需，JWT Token)
*   **请求参数 (Path)**:
    *   `userId` (integer, 必需): 目标用户ID。
*   **响应体 (成功 - 200)**: (结构同 `/statistics` 的响应)

---

## 20. 通知类型接口 (`/notification-types`)

*此部分接口未在提供的Controller代码中明确实现，以下为推测接口。*

### 20.1 获取所有通知类型 (可能存在)

*   **URL**: `GET /notification-types`
*   **描述**: 获取系统中定义的所有通知类型。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": [
        {
          "typeId": "system_announcement",
          "name": "系统公告",
          "category": "system",
          "template": "系统发布了新的公告: {announcement_content}"
        },
        {
          "typeId": "team_application_received",
          "name": "收到队伍申请",
          "category": "team",
          "template": "用户 {applicant_name} 申请加入队伍 {team_name}，应聘 {role_name} 职位。申请内容：{message}"
        }
        // ...
      ]
    }
    ```

---

## 21. 奖励类型接口 (`/rewardTypes`)

*此部分接口未在提供的Controller代码中明确实现，以下为推测接口。*

### 21.1 获取所有奖励类型 (可能存在)

*   **URL**: `GET /rewardTypes`
*   **描述**: 获取系统中定义的所有任务奖励类型。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": [
        {
          "id": 1,
          "name": "学分",
          "unit": "分"
        },
        {
          "id": 2,
          "name": "现金",
          "unit": "元"
        }
        // ...
      ]
    }
    ```

---

## 22. 任务分类接口 (`/taskCategories`)

*此部分接口未在提供的Controller代码中明确实现，以下为推测接口。*

### 22.1 获取所有任务分类 (可能存在)

*   **URL**: `GET /taskCategories`
*   **描述**: 获取系统中定义的所有任务分类。
*   **响应体 (成功 - 200)**:
    ```json
    {
      "code": 200,
      "message": "操作成功",
      "data": [
        {
          "id": 1,
          "name": "跑腿类",
          "iconUrl": "..."
        },
        {
          "id": 2,
          "name": "设计类",
          "iconUrl": "..."
        },
        {
          "id": 3,
          "name": "开发类",
          "iconUrl": "..."
        }
        // ...
      ]
    }
    ```

---

## 23. 队伍角色接口 (`/teamRoles`)

*此部分接口未在提供的Controller代码中明确实现，以下为推测接口。*

### 23.1 获取队伍的角色列表 (可能存在，或集成在队伍详情中)

*   **URL**: `GET /teamRoles/team/{teamId}`
*   **描述**: 获取指定队伍的所有角色需求。
*   **请求参数 (Path)**:
    *   `teamId` (integer, 必需): 队伍ID。
*   **响应体 (成功 - 200)**: (结构同队伍详情中的 `roles` 数组)

---

*(注意: 部分接口如 `/rewardTypes`, `/taskCategories`, `/teamRoles` 等在提供的代码片段中是空的控制器，可能尚未实现或通过其他方式管理。以上文档基于现有代码和常见实践编写。)*